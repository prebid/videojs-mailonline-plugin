/*!
 * (c)2021 PREBID.ORG, INC v1.3.18
 * This code contains videojs-vast-vpaid(Copyright (c) 2015 MailOnline) which is licensed under the MIT License.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/scripts/videojs_5.vast.vpaid.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/vpaid-html5-client/js/IVPAIDAdUnit.js":
/*!************************************************************!*\
  !*** ./node_modules/vpaid-html5-client/js/IVPAIDAdUnit.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar METHODS = [\n    'handshakeVersion',\n    'initAd',\n    'startAd',\n    'stopAd',\n    'skipAd', // VPAID 2.0 new method\n    'resizeAd',\n    'pauseAd',\n    'resumeAd',\n    'expandAd',\n    'collapseAd',\n    'subscribe',\n    'unsubscribe'\n];\n\nvar EVENTS = [\n    'AdLoaded',\n    'AdStarted',\n    'AdStopped',\n    'AdSkipped',\n    'AdSkippableStateChange', // VPAID 2.0 new event\n    'AdSizeChange', // VPAID 2.0 new event\n    'AdLinearChange',\n    'AdDurationChange', // VPAID 2.0 new event\n    'AdExpandedChange',\n    'AdRemainingTimeChange', // [Deprecated in 2.0] but will be still fired for backwards compatibility\n    'AdVolumeChange',\n    'AdImpression',\n    'AdVideoStart',\n    'AdVideoFirstQuartile',\n    'AdVideoMidpoint',\n    'AdVideoThirdQuartile',\n    'AdVideoComplete',\n    'AdClickThru',\n    'AdInteraction', // VPAID 2.0 new event\n    'AdUserAcceptInvitation',\n    'AdUserMinimize',\n    'AdUserClose',\n    'AdPaused',\n    'AdPlaying',\n    'AdLog',\n    'AdError'\n];\n\nvar GETTERS = [\n    'getAdLinear',\n    'getAdWidth', // VPAID 2.0 new getter\n    'getAdHeight', // VPAID 2.0 new getter\n    'getAdExpanded',\n    'getAdSkippableState', // VPAID 2.0 new getter\n    'getAdRemainingTime',\n    'getAdDuration', // VPAID 2.0 new getter\n    'getAdVolume',\n    'getAdCompanions', // VPAID 2.0 new getter\n    'getAdIcons' // VPAID 2.0 new getter\n];\n\nvar SETTERS = [\n    'setAdVolume'\n];\n\n\n/**\n * This callback is displayed as global member. The callback use nodejs error-first callback style\n * @callback NodeStyleCallback\n * @param {string|null}\n * @param {undefined|object}\n */\n\n\n/**\n * IVPAIDAdUnit\n *\n * @class\n *\n * @param {object} creative\n * @param {HTMLElement} el\n * @param {HTMLVideoElement} video\n */\nfunction IVPAIDAdUnit(creative, el, video) {}\n\n\n/**\n * handshakeVersion\n *\n * @param {string} VPAIDVersion\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.handshakeVersion = function (VPAIDVersion, callback) {};\n\n/**\n * initAd\n *\n * @param {number} width\n * @param {number} height\n * @param {string} viewMode can be 'normal', 'thumbnail' or 'fullscreen'\n * @param {number} desiredBitrate indicates the desired bitrate in kbps\n * @param {object} [creativeData] used for additional initialization data\n * @param {object} [environmentVars] used for passing implementation-specific of js version\n * @param {NodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.initAd = function(width, height, viewMode, desiredBitrate, creativeData, environmentVars, callback) {};\n\n/**\n * startAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.startAd = function(callback) {};\n\n/**\n * stopAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.stopAd = function(callback) {};\n\n/**\n * skipAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.skipAd = function(callback) {};\n\n/**\n * resizeAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.resizeAd = function(width, height, viewMode, callback) {};\n\n/**\n * pauseAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.pauseAd = function(callback) {};\n\n/**\n * resumeAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.resumeAd = function(callback) {};\n\n/**\n * expandAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.expandAd = function(callback) {};\n\n/**\n * collapseAd\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.collapseAd = function(callback) {};\n\n/**\n * subscribe\n *\n * @param {string} event\n * @param {nodeStyleCallback} handler\n * @param {object} context\n */\nIVPAIDAdUnit.prototype.subscribe = function(event, handler, context) {};\n\n/**\n * startAd\n *\n * @param {string} event\n * @param {function} handler\n */\nIVPAIDAdUnit.prototype.unsubscribe = function(event, handler) {};\n\n\n\n/**\n * getAdLinear\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdLinear = function(callback) {};\n\n/**\n * getAdWidth\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdWidth = function(callback) {};\n\n/**\n * getAdHeight\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdHeight = function(callback) {};\n\n/**\n * getAdExpanded\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdExpanded = function(callback) {};\n\n/**\n * getAdSkippableState\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdSkippableState = function(callback) {};\n\n/**\n * getAdRemainingTime\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdRemainingTime = function(callback) {};\n\n/**\n * getAdDuration\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdDuration = function(callback) {};\n\n/**\n * getAdVolume\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdVolume = function(callback) {};\n\n/**\n * getAdCompanions\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdCompanions = function(callback) {};\n\n/**\n * getAdIcons\n *\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.getAdIcons = function(callback) {};\n\n/**\n * setAdVolume\n *\n * @param {number} volume\n * @param {nodeStyleCallback} callback\n */\nIVPAIDAdUnit.prototype.setAdVolume = function(volume, callback) {};\n\naddStaticToInterface(IVPAIDAdUnit, 'METHODS', METHODS);\naddStaticToInterface(IVPAIDAdUnit, 'GETTERS', GETTERS);\naddStaticToInterface(IVPAIDAdUnit, 'SETTERS', SETTERS);\naddStaticToInterface(IVPAIDAdUnit, 'EVENTS',  EVENTS);\n\n\nvar VPAID1_METHODS = METHODS.filter(function(method) {\n    return ['skipAd'].indexOf(method) === -1;\n});\n\naddStaticToInterface(IVPAIDAdUnit, 'checkVPAIDInterface', function checkVPAIDInterface (creative) {\n    var result = VPAID1_METHODS.every(function(key) {\n        return typeof creative[key] === 'function';\n    });\n    return result;\n});\n\nmodule.exports = IVPAIDAdUnit;\n\nfunction addStaticToInterface(Interface, name, value) {\n    Object.defineProperty(Interface, name, {\n        writable: false,\n        configurable: false,\n        value: value\n    });\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdnBhaWQtaHRtbDUtY2xpZW50L2pzL0lWUEFJREFkVW5pdC5qcz82M2ZmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFdBQVc7QUFDWDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFlBQVk7QUFDdkIsV0FBVyxpQkFBaUI7QUFDNUI7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsa0JBQWtCO0FBQzdCLFdBQVcsT0FBTztBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEI7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy92cGFpZC1odG1sNS1jbGllbnQvanMvSVZQQUlEQWRVbml0LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgTUVUSE9EUyA9IFtcbiAgICAnaGFuZHNoYWtlVmVyc2lvbicsXG4gICAgJ2luaXRBZCcsXG4gICAgJ3N0YXJ0QWQnLFxuICAgICdzdG9wQWQnLFxuICAgICdza2lwQWQnLCAvLyBWUEFJRCAyLjAgbmV3IG1ldGhvZFxuICAgICdyZXNpemVBZCcsXG4gICAgJ3BhdXNlQWQnLFxuICAgICdyZXN1bWVBZCcsXG4gICAgJ2V4cGFuZEFkJyxcbiAgICAnY29sbGFwc2VBZCcsXG4gICAgJ3N1YnNjcmliZScsXG4gICAgJ3Vuc3Vic2NyaWJlJ1xuXTtcblxudmFyIEVWRU5UUyA9IFtcbiAgICAnQWRMb2FkZWQnLFxuICAgICdBZFN0YXJ0ZWQnLFxuICAgICdBZFN0b3BwZWQnLFxuICAgICdBZFNraXBwZWQnLFxuICAgICdBZFNraXBwYWJsZVN0YXRlQ2hhbmdlJywgLy8gVlBBSUQgMi4wIG5ldyBldmVudFxuICAgICdBZFNpemVDaGFuZ2UnLCAvLyBWUEFJRCAyLjAgbmV3IGV2ZW50XG4gICAgJ0FkTGluZWFyQ2hhbmdlJyxcbiAgICAnQWREdXJhdGlvbkNoYW5nZScsIC8vIFZQQUlEIDIuMCBuZXcgZXZlbnRcbiAgICAnQWRFeHBhbmRlZENoYW5nZScsXG4gICAgJ0FkUmVtYWluaW5nVGltZUNoYW5nZScsIC8vIFtEZXByZWNhdGVkIGluIDIuMF0gYnV0IHdpbGwgYmUgc3RpbGwgZmlyZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgJ0FkVm9sdW1lQ2hhbmdlJyxcbiAgICAnQWRJbXByZXNzaW9uJyxcbiAgICAnQWRWaWRlb1N0YXJ0JyxcbiAgICAnQWRWaWRlb0ZpcnN0UXVhcnRpbGUnLFxuICAgICdBZFZpZGVvTWlkcG9pbnQnLFxuICAgICdBZFZpZGVvVGhpcmRRdWFydGlsZScsXG4gICAgJ0FkVmlkZW9Db21wbGV0ZScsXG4gICAgJ0FkQ2xpY2tUaHJ1JyxcbiAgICAnQWRJbnRlcmFjdGlvbicsIC8vIFZQQUlEIDIuMCBuZXcgZXZlbnRcbiAgICAnQWRVc2VyQWNjZXB0SW52aXRhdGlvbicsXG4gICAgJ0FkVXNlck1pbmltaXplJyxcbiAgICAnQWRVc2VyQ2xvc2UnLFxuICAgICdBZFBhdXNlZCcsXG4gICAgJ0FkUGxheWluZycsXG4gICAgJ0FkTG9nJyxcbiAgICAnQWRFcnJvcidcbl07XG5cbnZhciBHRVRURVJTID0gW1xuICAgICdnZXRBZExpbmVhcicsXG4gICAgJ2dldEFkV2lkdGgnLCAvLyBWUEFJRCAyLjAgbmV3IGdldHRlclxuICAgICdnZXRBZEhlaWdodCcsIC8vIFZQQUlEIDIuMCBuZXcgZ2V0dGVyXG4gICAgJ2dldEFkRXhwYW5kZWQnLFxuICAgICdnZXRBZFNraXBwYWJsZVN0YXRlJywgLy8gVlBBSUQgMi4wIG5ldyBnZXR0ZXJcbiAgICAnZ2V0QWRSZW1haW5pbmdUaW1lJyxcbiAgICAnZ2V0QWREdXJhdGlvbicsIC8vIFZQQUlEIDIuMCBuZXcgZ2V0dGVyXG4gICAgJ2dldEFkVm9sdW1lJyxcbiAgICAnZ2V0QWRDb21wYW5pb25zJywgLy8gVlBBSUQgMi4wIG5ldyBnZXR0ZXJcbiAgICAnZ2V0QWRJY29ucycgLy8gVlBBSUQgMi4wIG5ldyBnZXR0ZXJcbl07XG5cbnZhciBTRVRURVJTID0gW1xuICAgICdzZXRBZFZvbHVtZSdcbl07XG5cblxuLyoqXG4gKiBUaGlzIGNhbGxiYWNrIGlzIGRpc3BsYXllZCBhcyBnbG9iYWwgbWVtYmVyLiBUaGUgY2FsbGJhY2sgdXNlIG5vZGVqcyBlcnJvci1maXJzdCBjYWxsYmFjayBzdHlsZVxuICogQGNhbGxiYWNrIE5vZGVTdHlsZUNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfVxuICogQHBhcmFtIHt1bmRlZmluZWR8b2JqZWN0fVxuICovXG5cblxuLyoqXG4gKiBJVlBBSURBZFVuaXRcbiAqXG4gKiBAY2xhc3NcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY3JlYXRpdmVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0hUTUxWaWRlb0VsZW1lbnR9IHZpZGVvXG4gKi9cbmZ1bmN0aW9uIElWUEFJREFkVW5pdChjcmVhdGl2ZSwgZWwsIHZpZGVvKSB7fVxuXG5cbi8qKlxuICogaGFuZHNoYWtlVmVyc2lvblxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBWUEFJRFZlcnNpb25cbiAqIEBwYXJhbSB7bm9kZVN0eWxlQ2FsbGJhY2t9IGNhbGxiYWNrXG4gKi9cbklWUEFJREFkVW5pdC5wcm90b3R5cGUuaGFuZHNoYWtlVmVyc2lvbiA9IGZ1bmN0aW9uIChWUEFJRFZlcnNpb24sIGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBpbml0QWRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAqIEBwYXJhbSB7c3RyaW5nfSB2aWV3TW9kZSBjYW4gYmUgJ25vcm1hbCcsICd0aHVtYm5haWwnIG9yICdmdWxsc2NyZWVuJ1xuICogQHBhcmFtIHtudW1iZXJ9IGRlc2lyZWRCaXRyYXRlIGluZGljYXRlcyB0aGUgZGVzaXJlZCBiaXRyYXRlIGluIGticHNcbiAqIEBwYXJhbSB7b2JqZWN0fSBbY3JlYXRpdmVEYXRhXSB1c2VkIGZvciBhZGRpdGlvbmFsIGluaXRpYWxpemF0aW9uIGRhdGFcbiAqIEBwYXJhbSB7b2JqZWN0fSBbZW52aXJvbm1lbnRWYXJzXSB1c2VkIGZvciBwYXNzaW5nIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIG9mIGpzIHZlcnNpb25cbiAqIEBwYXJhbSB7Tm9kZVN0eWxlQ2FsbGJhY2t9IGNhbGxiYWNrXG4gKi9cbklWUEFJREFkVW5pdC5wcm90b3R5cGUuaW5pdEFkID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCwgdmlld01vZGUsIGRlc2lyZWRCaXRyYXRlLCBjcmVhdGl2ZURhdGEsIGVudmlyb25tZW50VmFycywgY2FsbGJhY2spIHt9O1xuXG4vKipcbiAqIHN0YXJ0QWRcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLnN0YXJ0QWQgPSBmdW5jdGlvbihjYWxsYmFjaykge307XG5cbi8qKlxuICogc3RvcEFkXG4gKlxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5zdG9wQWQgPSBmdW5jdGlvbihjYWxsYmFjaykge307XG5cbi8qKlxuICogc2tpcEFkXG4gKlxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5za2lwQWQgPSBmdW5jdGlvbihjYWxsYmFjaykge307XG5cbi8qKlxuICogcmVzaXplQWRcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLnJlc2l6ZUFkID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCwgdmlld01vZGUsIGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBwYXVzZUFkXG4gKlxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5wYXVzZUFkID0gZnVuY3Rpb24oY2FsbGJhY2spIHt9O1xuXG4vKipcbiAqIHJlc3VtZUFkXG4gKlxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5yZXN1bWVBZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBleHBhbmRBZFxuICpcbiAqIEBwYXJhbSB7bm9kZVN0eWxlQ2FsbGJhY2t9IGNhbGxiYWNrXG4gKi9cbklWUEFJREFkVW5pdC5wcm90b3R5cGUuZXhwYW5kQWQgPSBmdW5jdGlvbihjYWxsYmFjaykge307XG5cbi8qKlxuICogY29sbGFwc2VBZFxuICpcbiAqIEBwYXJhbSB7bm9kZVN0eWxlQ2FsbGJhY2t9IGNhbGxiYWNrXG4gKi9cbklWUEFJREFkVW5pdC5wcm90b3R5cGUuY29sbGFwc2VBZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBzdWJzY3JpYmVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7bm9kZVN0eWxlQ2FsbGJhY2t9IGhhbmRsZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gKi9cbklWUEFJREFkVW5pdC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZXZlbnQsIGhhbmRsZXIsIGNvbnRleHQpIHt9O1xuXG4vKipcbiAqIHN0YXJ0QWRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKGV2ZW50LCBoYW5kbGVyKSB7fTtcblxuXG5cbi8qKlxuICogZ2V0QWRMaW5lYXJcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLmdldEFkTGluZWFyID0gZnVuY3Rpb24oY2FsbGJhY2spIHt9O1xuXG4vKipcbiAqIGdldEFkV2lkdGhcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLmdldEFkV2lkdGggPSBmdW5jdGlvbihjYWxsYmFjaykge307XG5cbi8qKlxuICogZ2V0QWRIZWlnaHRcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLmdldEFkSGVpZ2h0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHt9O1xuXG4vKipcbiAqIGdldEFkRXhwYW5kZWRcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLmdldEFkRXhwYW5kZWQgPSBmdW5jdGlvbihjYWxsYmFjaykge307XG5cbi8qKlxuICogZ2V0QWRTa2lwcGFibGVTdGF0ZVxuICpcbiAqIEBwYXJhbSB7bm9kZVN0eWxlQ2FsbGJhY2t9IGNhbGxiYWNrXG4gKi9cbklWUEFJREFkVW5pdC5wcm90b3R5cGUuZ2V0QWRTa2lwcGFibGVTdGF0ZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBnZXRBZFJlbWFpbmluZ1RpbWVcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLmdldEFkUmVtYWluaW5nVGltZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBnZXRBZER1cmF0aW9uXG4gKlxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5nZXRBZER1cmF0aW9uID0gZnVuY3Rpb24oY2FsbGJhY2spIHt9O1xuXG4vKipcbiAqIGdldEFkVm9sdW1lXG4gKlxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5nZXRBZFZvbHVtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBnZXRBZENvbXBhbmlvbnNcbiAqXG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5JVlBBSURBZFVuaXQucHJvdG90eXBlLmdldEFkQ29tcGFuaW9ucyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7fTtcblxuLyoqXG4gKiBnZXRBZEljb25zXG4gKlxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5nZXRBZEljb25zID0gZnVuY3Rpb24oY2FsbGJhY2spIHt9O1xuXG4vKipcbiAqIHNldEFkVm9sdW1lXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHZvbHVtZVxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuSVZQQUlEQWRVbml0LnByb3RvdHlwZS5zZXRBZFZvbHVtZSA9IGZ1bmN0aW9uKHZvbHVtZSwgY2FsbGJhY2spIHt9O1xuXG5hZGRTdGF0aWNUb0ludGVyZmFjZShJVlBBSURBZFVuaXQsICdNRVRIT0RTJywgTUVUSE9EUyk7XG5hZGRTdGF0aWNUb0ludGVyZmFjZShJVlBBSURBZFVuaXQsICdHRVRURVJTJywgR0VUVEVSUyk7XG5hZGRTdGF0aWNUb0ludGVyZmFjZShJVlBBSURBZFVuaXQsICdTRVRURVJTJywgU0VUVEVSUyk7XG5hZGRTdGF0aWNUb0ludGVyZmFjZShJVlBBSURBZFVuaXQsICdFVkVOVFMnLCAgRVZFTlRTKTtcblxuXG52YXIgVlBBSUQxX01FVEhPRFMgPSBNRVRIT0RTLmZpbHRlcihmdW5jdGlvbihtZXRob2QpIHtcbiAgICByZXR1cm4gWydza2lwQWQnXS5pbmRleE9mKG1ldGhvZCkgPT09IC0xO1xufSk7XG5cbmFkZFN0YXRpY1RvSW50ZXJmYWNlKElWUEFJREFkVW5pdCwgJ2NoZWNrVlBBSURJbnRlcmZhY2UnLCBmdW5jdGlvbiBjaGVja1ZQQUlESW50ZXJmYWNlIChjcmVhdGl2ZSkge1xuICAgIHZhciByZXN1bHQgPSBWUEFJRDFfTUVUSE9EUy5ldmVyeShmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjcmVhdGl2ZVtrZXldID09PSAnZnVuY3Rpb24nO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBJVlBBSURBZFVuaXQ7XG5cbmZ1bmN0aW9uIGFkZFN0YXRpY1RvSW50ZXJmYWNlKEludGVyZmFjZSwgbmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZXJmYWNlLCBuYW1lLCB7XG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfSk7XG59XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/vpaid-html5-client/js/IVPAIDAdUnit.js\n");

/***/ }),

/***/ "./node_modules/vpaid-html5-client/js/VPAIDAdUnit.js":
/*!***********************************************************!*\
  !*** ./node_modules/vpaid-html5-client/js/VPAIDAdUnit.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar IVPAIDAdUnit = __webpack_require__(/*! ./IVPAIDAdUnit */ \"./node_modules/vpaid-html5-client/js/IVPAIDAdUnit.js\");\nvar Subscriber = __webpack_require__(/*! ./subscriber */ \"./node_modules/vpaid-html5-client/js/subscriber.js\");\nvar checkVPAIDInterface = IVPAIDAdUnit.checkVPAIDInterface;\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/vpaid-html5-client/js/utils.js\");\nvar METHODS = IVPAIDAdUnit.METHODS;\nvar ERROR = 'AdError';\nvar AD_CLICK = 'AdClickThru';\nvar FILTERED_EVENTS = IVPAIDAdUnit.EVENTS.filter(function (event) {\n    return event != AD_CLICK;\n});\n\n/**\n * This callback is displayed as global member. The callback use nodejs error-first callback style\n * @callback NodeStyleCallback\n * @param {string|null}\n * @param {undefined|object}\n */\n\n\n/**\n * VPAIDAdUnit\n * @class\n *\n * @param VPAIDCreative\n * @param {HTMLElement} [el] this will be used in initAd environmentVars.slot if defined\n * @param {HTMLVideoElement} [video] this will be used in initAd environmentVars.videoSlot if defined\n */\nfunction VPAIDAdUnit(VPAIDCreative, el, video, iframe) {\n    this._isValid = checkVPAIDInterface(VPAIDCreative);\n    if (this._isValid) {\n        this._creative = VPAIDCreative;\n        this._el = el;\n        this._videoEl = video;\n        this._iframe = iframe;\n        this._subscribers = new Subscriber();\n        utils.setFullSizeStyle(el);\n        $addEventsSubscribers.call(this);\n    }\n}\n\nVPAIDAdUnit.prototype = Object.create(IVPAIDAdUnit.prototype);\n\n/**\n * isValidVPAIDAd will return if the VPAIDCreative passed in constructor is valid or not\n *\n * @return {boolean}\n */\nVPAIDAdUnit.prototype.isValidVPAIDAd = function isValidVPAIDAd() {\n    return this._isValid;\n};\n\nIVPAIDAdUnit.METHODS.forEach(function(method) {\n    //NOTE: this methods arguments order are implemented differently from the spec\n    var ignores = [\n        'subscribe',\n        'unsubscribe',\n        'initAd'\n    ];\n\n    if (ignores.indexOf(method) !== -1) return;\n\n    VPAIDAdUnit.prototype[method] = function () {\n        var ariaty = IVPAIDAdUnit.prototype[method].length;\n        // TODO avoid leaking arguments\n        // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n        var args = Array.prototype.slice.call(arguments);\n        var callback = (ariaty === args.length) ? args.pop() : undefined;\n\n        setTimeout(function () {\n            var result, error = null;\n            try {\n                result = this._creative[method].apply(this._creative, args);\n            } catch(e) {\n                error = e;\n            }\n\n            callOrTriggerEvent(callback, this._subscribers, error, result);\n        }.bind(this), 0);\n    };\n});\n\n\n/**\n * initAd concreate implementation\n *\n * @param {number} width\n * @param {number} height\n * @param {string} viewMode can be 'normal', 'thumbnail' or 'fullscreen'\n * @param {number} desiredBitrate indicates the desired bitrate in kbps\n * @param {object} [creativeData] used for additional initialization data\n * @param {object} [environmentVars] used for passing implementation-specific of js version, if el & video was used in constructor slot & videoSlot will be added to the object\n * @param {NodeStyleCallback} callback\n */\nVPAIDAdUnit.prototype.initAd = function initAd(width, height, viewMode, desiredBitrate, creativeData, environmentVars, callback) {\n    creativeData = creativeData || {};\n    environmentVars = utils.extend({\n        slot: this._el,\n        videoSlot: this._videoEl\n    }, environmentVars || {});\n\n    setTimeout(function () {\n        var error;\n        try {\n            this._creative.initAd(width, height, viewMode, desiredBitrate, creativeData, environmentVars);\n        } catch (e) {\n            error = e;\n        }\n\n        callOrTriggerEvent(callback, this._subscribers, error);\n    }.bind(this), 0);\n};\n\n/**\n * subscribe\n *\n * @param {string} event\n * @param {nodeStyleCallback} handler\n * @param {object} context\n */\nVPAIDAdUnit.prototype.subscribe = function subscribe(event, handler, context) {\n    this._subscribers.subscribe(handler, event, context);\n};\n\n\n/**\n * unsubscribe\n *\n * @param {string} event\n * @param {nodeStyleCallback} handler\n */\nVPAIDAdUnit.prototype.unsubscribe = function unsubscribe(event, handler) {\n    this._subscribers.unsubscribe(handler, event);\n};\n\n//alias\nVPAIDAdUnit.prototype.on = VPAIDAdUnit.prototype.subscribe;\nVPAIDAdUnit.prototype.off = VPAIDAdUnit.prototype.unsubscribe;\n\nIVPAIDAdUnit.GETTERS.forEach(function(getter) {\n    VPAIDAdUnit.prototype[getter] = function (callback) {\n        setTimeout(function () {\n\n            var result, error = null;\n            try {\n                result = this._creative[getter]();\n            } catch(e) {\n                error = e;\n            }\n\n            callOrTriggerEvent(callback, this._subscribers, error, result);\n        }.bind(this), 0);\n    };\n});\n\n/**\n * setAdVolume\n *\n * @param volume\n * @param {nodeStyleCallback} callback\n */\nVPAIDAdUnit.prototype.setAdVolume = function setAdVolume(volume, callback) {\n    setTimeout(function () {\n\n        var result, error = null;\n        try {\n            this._creative.setAdVolume(volume);\n            result = this._creative.getAdVolume();\n        } catch(e) {\n            error = e;\n        }\n\n        if (!error) {\n            error = utils.validate(result === volume, 'failed to apply volume: ' + volume);\n        }\n        callOrTriggerEvent(callback, this._subscribers, error, result);\n    }.bind(this), 0);\n};\n\nVPAIDAdUnit.prototype._destroy = function destroy() {\n    this.stopAd();\n    this._subscribers.unsubscribeAll();\n};\n\nfunction $addEventsSubscribers() {\n    // some ads implement\n    // so they only handle one subscriber\n    // to handle this we create our one\n    FILTERED_EVENTS.forEach(function (event) {\n        this._creative.subscribe($trigger.bind(this, event), event);\n    }.bind(this));\n\n    // map the click event to be an object instead of depending of the order of the arguments\n    // and to be consistent with the flash\n    this._creative.subscribe($clickThruHook.bind(this), AD_CLICK);\n\n    // because we are adding the element inside the iframe\n    // the user is not able to click in the video\n    if (this._videoEl) {\n        var documentElement = this._iframe.contentDocument.documentElement;\n        var videoEl = this._videoEl;\n        documentElement.addEventListener('click', function(e) {\n            if (e.target === documentElement) {\n                videoEl.click();\n            }\n        });\n    }\n}\n\nfunction $clickThruHook(url, id, playerHandles) {\n    this._subscribers.triggerSync(AD_CLICK, {url: url, id: id, playerHandles: playerHandles});\n}\n\nfunction $trigger(event) {\n    // TODO avoid leaking arguments\n    // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n    this._subscribers.trigger(event, Array.prototype.slice(arguments, 1));\n}\n\nfunction callOrTriggerEvent(callback, subscribers, error, result) {\n    if (callback) {\n        callback(error, result);\n    } else if (error) {\n        subscribers.trigger(ERROR, error);\n    }\n}\n\nmodule.exports = VPAIDAdUnit;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdnBhaWQtaHRtbDUtY2xpZW50L2pzL1ZQQUlEQWRVbml0LmpzPzBlMTgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsbUJBQW1CLG1CQUFPLENBQUMsNEVBQWdCO0FBQzNDLGlCQUFpQixtQkFBTyxDQUFDLHdFQUFjO0FBQ3ZDO0FBQ0EsWUFBWSxtQkFBTyxDQUFDLDhEQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxXQUFXO0FBQ1g7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxpQkFBaUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyx1QkFBdUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsa0JBQWtCO0FBQzdCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsK0NBQStDO0FBQzVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy92cGFpZC1odG1sNS1jbGllbnQvanMvVlBBSURBZFVuaXQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBJVlBBSURBZFVuaXQgPSByZXF1aXJlKCcuL0lWUEFJREFkVW5pdCcpO1xudmFyIFN1YnNjcmliZXIgPSByZXF1aXJlKCcuL3N1YnNjcmliZXInKTtcbnZhciBjaGVja1ZQQUlESW50ZXJmYWNlID0gSVZQQUlEQWRVbml0LmNoZWNrVlBBSURJbnRlcmZhY2U7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgTUVUSE9EUyA9IElWUEFJREFkVW5pdC5NRVRIT0RTO1xudmFyIEVSUk9SID0gJ0FkRXJyb3InO1xudmFyIEFEX0NMSUNLID0gJ0FkQ2xpY2tUaHJ1JztcbnZhciBGSUxURVJFRF9FVkVOVFMgPSBJVlBBSURBZFVuaXQuRVZFTlRTLmZpbHRlcihmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQgIT0gQURfQ0xJQ0s7XG59KTtcblxuLyoqXG4gKiBUaGlzIGNhbGxiYWNrIGlzIGRpc3BsYXllZCBhcyBnbG9iYWwgbWVtYmVyLiBUaGUgY2FsbGJhY2sgdXNlIG5vZGVqcyBlcnJvci1maXJzdCBjYWxsYmFjayBzdHlsZVxuICogQGNhbGxiYWNrIE5vZGVTdHlsZUNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfVxuICogQHBhcmFtIHt1bmRlZmluZWR8b2JqZWN0fVxuICovXG5cblxuLyoqXG4gKiBWUEFJREFkVW5pdFxuICogQGNsYXNzXG4gKlxuICogQHBhcmFtIFZQQUlEQ3JlYXRpdmVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtlbF0gdGhpcyB3aWxsIGJlIHVzZWQgaW4gaW5pdEFkIGVudmlyb25tZW50VmFycy5zbG90IGlmIGRlZmluZWRcbiAqIEBwYXJhbSB7SFRNTFZpZGVvRWxlbWVudH0gW3ZpZGVvXSB0aGlzIHdpbGwgYmUgdXNlZCBpbiBpbml0QWQgZW52aXJvbm1lbnRWYXJzLnZpZGVvU2xvdCBpZiBkZWZpbmVkXG4gKi9cbmZ1bmN0aW9uIFZQQUlEQWRVbml0KFZQQUlEQ3JlYXRpdmUsIGVsLCB2aWRlbywgaWZyYW1lKSB7XG4gICAgdGhpcy5faXNWYWxpZCA9IGNoZWNrVlBBSURJbnRlcmZhY2UoVlBBSURDcmVhdGl2ZSk7XG4gICAgaWYgKHRoaXMuX2lzVmFsaWQpIHtcbiAgICAgICAgdGhpcy5fY3JlYXRpdmUgPSBWUEFJRENyZWF0aXZlO1xuICAgICAgICB0aGlzLl9lbCA9IGVsO1xuICAgICAgICB0aGlzLl92aWRlb0VsID0gdmlkZW87XG4gICAgICAgIHRoaXMuX2lmcmFtZSA9IGlmcmFtZTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBuZXcgU3Vic2NyaWJlcigpO1xuICAgICAgICB1dGlscy5zZXRGdWxsU2l6ZVN0eWxlKGVsKTtcbiAgICAgICAgJGFkZEV2ZW50c1N1YnNjcmliZXJzLmNhbGwodGhpcyk7XG4gICAgfVxufVxuXG5WUEFJREFkVW5pdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKElWUEFJREFkVW5pdC5wcm90b3R5cGUpO1xuXG4vKipcbiAqIGlzVmFsaWRWUEFJREFkIHdpbGwgcmV0dXJuIGlmIHRoZSBWUEFJRENyZWF0aXZlIHBhc3NlZCBpbiBjb25zdHJ1Y3RvciBpcyB2YWxpZCBvciBub3RcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5WUEFJREFkVW5pdC5wcm90b3R5cGUuaXNWYWxpZFZQQUlEQWQgPSBmdW5jdGlvbiBpc1ZhbGlkVlBBSURBZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNWYWxpZDtcbn07XG5cbklWUEFJREFkVW5pdC5NRVRIT0RTLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgLy9OT1RFOiB0aGlzIG1ldGhvZHMgYXJndW1lbnRzIG9yZGVyIGFyZSBpbXBsZW1lbnRlZCBkaWZmZXJlbnRseSBmcm9tIHRoZSBzcGVjXG4gICAgdmFyIGlnbm9yZXMgPSBbXG4gICAgICAgICdzdWJzY3JpYmUnLFxuICAgICAgICAndW5zdWJzY3JpYmUnLFxuICAgICAgICAnaW5pdEFkJ1xuICAgIF07XG5cbiAgICBpZiAoaWdub3Jlcy5pbmRleE9mKG1ldGhvZCkgIT09IC0xKSByZXR1cm47XG5cbiAgICBWUEFJREFkVW5pdC5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyaWF0eSA9IElWUEFJREFkVW5pdC5wcm90b3R5cGVbbWV0aG9kXS5sZW5ndGg7XG4gICAgICAgIC8vIFRPRE8gYXZvaWQgbGVha2luZyBhcmd1bWVudHNcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BldGthYW50b25vdi9ibHVlYmlyZC93aWtpL09wdGltaXphdGlvbi1raWxsZXJzIzMyLWxlYWtpbmctYXJndW1lbnRzXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gKGFyaWF0eSA9PT0gYXJncy5sZW5ndGgpID8gYXJncy5wb3AoKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQsIGVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fY3JlYXRpdmVbbWV0aG9kXS5hcHBseSh0aGlzLl9jcmVhdGl2ZSwgYXJncyk7XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICBlcnJvciA9IGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGxPclRyaWdnZXJFdmVudChjYWxsYmFjaywgdGhpcy5fc3Vic2NyaWJlcnMsIGVycm9yLCByZXN1bHQpO1xuICAgICAgICB9LmJpbmQodGhpcyksIDApO1xuICAgIH07XG59KTtcblxuXG4vKipcbiAqIGluaXRBZCBjb25jcmVhdGUgaW1wbGVtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAqIEBwYXJhbSB7c3RyaW5nfSB2aWV3TW9kZSBjYW4gYmUgJ25vcm1hbCcsICd0aHVtYm5haWwnIG9yICdmdWxsc2NyZWVuJ1xuICogQHBhcmFtIHtudW1iZXJ9IGRlc2lyZWRCaXRyYXRlIGluZGljYXRlcyB0aGUgZGVzaXJlZCBiaXRyYXRlIGluIGticHNcbiAqIEBwYXJhbSB7b2JqZWN0fSBbY3JlYXRpdmVEYXRhXSB1c2VkIGZvciBhZGRpdGlvbmFsIGluaXRpYWxpemF0aW9uIGRhdGFcbiAqIEBwYXJhbSB7b2JqZWN0fSBbZW52aXJvbm1lbnRWYXJzXSB1c2VkIGZvciBwYXNzaW5nIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIG9mIGpzIHZlcnNpb24sIGlmIGVsICYgdmlkZW8gd2FzIHVzZWQgaW4gY29uc3RydWN0b3Igc2xvdCAmIHZpZGVvU2xvdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBvYmplY3RcbiAqIEBwYXJhbSB7Tm9kZVN0eWxlQ2FsbGJhY2t9IGNhbGxiYWNrXG4gKi9cblZQQUlEQWRVbml0LnByb3RvdHlwZS5pbml0QWQgPSBmdW5jdGlvbiBpbml0QWQod2lkdGgsIGhlaWdodCwgdmlld01vZGUsIGRlc2lyZWRCaXRyYXRlLCBjcmVhdGl2ZURhdGEsIGVudmlyb25tZW50VmFycywgY2FsbGJhY2spIHtcbiAgICBjcmVhdGl2ZURhdGEgPSBjcmVhdGl2ZURhdGEgfHwge307XG4gICAgZW52aXJvbm1lbnRWYXJzID0gdXRpbHMuZXh0ZW5kKHtcbiAgICAgICAgc2xvdDogdGhpcy5fZWwsXG4gICAgICAgIHZpZGVvU2xvdDogdGhpcy5fdmlkZW9FbFxuICAgIH0sIGVudmlyb25tZW50VmFycyB8fCB7fSk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRpdmUuaW5pdEFkKHdpZHRoLCBoZWlnaHQsIHZpZXdNb2RlLCBkZXNpcmVkQml0cmF0ZSwgY3JlYXRpdmVEYXRhLCBlbnZpcm9ubWVudFZhcnMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBlcnJvciA9IGU7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsT3JUcmlnZ2VyRXZlbnQoY2FsbGJhY2ssIHRoaXMuX3N1YnNjcmliZXJzLCBlcnJvcik7XG4gICAgfS5iaW5kKHRoaXMpLCAwKTtcbn07XG5cbi8qKlxuICogc3Vic2NyaWJlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBoYW5kbGVyXG4gKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICovXG5WUEFJREFkVW5pdC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlKGV2ZW50LCBoYW5kbGVyLCBjb250ZXh0KSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMuc3Vic2NyaWJlKGhhbmRsZXIsIGV2ZW50LCBjb250ZXh0KTtcbn07XG5cblxuLyoqXG4gKiB1bnN1YnNjcmliZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gaGFuZGxlclxuICovXG5WUEFJREFkVW5pdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShldmVudCwgaGFuZGxlcikge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzLnVuc3Vic2NyaWJlKGhhbmRsZXIsIGV2ZW50KTtcbn07XG5cbi8vYWxpYXNcblZQQUlEQWRVbml0LnByb3RvdHlwZS5vbiA9IFZQQUlEQWRVbml0LnByb3RvdHlwZS5zdWJzY3JpYmU7XG5WUEFJREFkVW5pdC5wcm90b3R5cGUub2ZmID0gVlBBSURBZFVuaXQucHJvdG90eXBlLnVuc3Vic2NyaWJlO1xuXG5JVlBBSURBZFVuaXQuR0VUVEVSUy5mb3JFYWNoKGZ1bmN0aW9uKGdldHRlcikge1xuICAgIFZQQUlEQWRVbml0LnByb3RvdHlwZVtnZXR0ZXJdID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgcmVzdWx0LCBlcnJvciA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2NyZWF0aXZlW2dldHRlcl0oKTtcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIGVycm9yID0gZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbE9yVHJpZ2dlckV2ZW50KGNhbGxiYWNrLCB0aGlzLl9zdWJzY3JpYmVycywgZXJyb3IsIHJlc3VsdCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMCk7XG4gICAgfTtcbn0pO1xuXG4vKipcbiAqIHNldEFkVm9sdW1lXG4gKlxuICogQHBhcmFtIHZvbHVtZVxuICogQHBhcmFtIHtub2RlU3R5bGVDYWxsYmFja30gY2FsbGJhY2tcbiAqL1xuVlBBSURBZFVuaXQucHJvdG90eXBlLnNldEFkVm9sdW1lID0gZnVuY3Rpb24gc2V0QWRWb2x1bWUodm9sdW1lLCBjYWxsYmFjaykge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciByZXN1bHQsIGVycm9yID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0aXZlLnNldEFkVm9sdW1lKHZvbHVtZSk7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9jcmVhdGl2ZS5nZXRBZFZvbHVtZSgpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIGVycm9yID0gZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yID0gdXRpbHMudmFsaWRhdGUocmVzdWx0ID09PSB2b2x1bWUsICdmYWlsZWQgdG8gYXBwbHkgdm9sdW1lOiAnICsgdm9sdW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsT3JUcmlnZ2VyRXZlbnQoY2FsbGJhY2ssIHRoaXMuX3N1YnNjcmliZXJzLCBlcnJvciwgcmVzdWx0KTtcbiAgICB9LmJpbmQodGhpcyksIDApO1xufTtcblxuVlBBSURBZFVuaXQucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICB0aGlzLnN0b3BBZCgpO1xuICAgIHRoaXMuX3N1YnNjcmliZXJzLnVuc3Vic2NyaWJlQWxsKCk7XG59O1xuXG5mdW5jdGlvbiAkYWRkRXZlbnRzU3Vic2NyaWJlcnMoKSB7XG4gICAgLy8gc29tZSBhZHMgaW1wbGVtZW50XG4gICAgLy8gc28gdGhleSBvbmx5IGhhbmRsZSBvbmUgc3Vic2NyaWJlclxuICAgIC8vIHRvIGhhbmRsZSB0aGlzIHdlIGNyZWF0ZSBvdXIgb25lXG4gICAgRklMVEVSRURfRVZFTlRTLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2NyZWF0aXZlLnN1YnNjcmliZSgkdHJpZ2dlci5iaW5kKHRoaXMsIGV2ZW50KSwgZXZlbnQpO1xuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAvLyBtYXAgdGhlIGNsaWNrIGV2ZW50IHRvIGJlIGFuIG9iamVjdCBpbnN0ZWFkIG9mIGRlcGVuZGluZyBvZiB0aGUgb3JkZXIgb2YgdGhlIGFyZ3VtZW50c1xuICAgIC8vIGFuZCB0byBiZSBjb25zaXN0ZW50IHdpdGggdGhlIGZsYXNoXG4gICAgdGhpcy5fY3JlYXRpdmUuc3Vic2NyaWJlKCRjbGlja1RocnVIb29rLmJpbmQodGhpcyksIEFEX0NMSUNLKTtcblxuICAgIC8vIGJlY2F1c2Ugd2UgYXJlIGFkZGluZyB0aGUgZWxlbWVudCBpbnNpZGUgdGhlIGlmcmFtZVxuICAgIC8vIHRoZSB1c2VyIGlzIG5vdCBhYmxlIHRvIGNsaWNrIGluIHRoZSB2aWRlb1xuICAgIGlmICh0aGlzLl92aWRlb0VsKSB7XG4gICAgICAgIHZhciBkb2N1bWVudEVsZW1lbnQgPSB0aGlzLl9pZnJhbWUuY29udGVudERvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgdmFyIHZpZGVvRWwgPSB0aGlzLl92aWRlb0VsO1xuICAgICAgICBkb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZpZGVvRWwuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiAkY2xpY2tUaHJ1SG9vayh1cmwsIGlkLCBwbGF5ZXJIYW5kbGVzKSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMudHJpZ2dlclN5bmMoQURfQ0xJQ0ssIHt1cmw6IHVybCwgaWQ6IGlkLCBwbGF5ZXJIYW5kbGVzOiBwbGF5ZXJIYW5kbGVzfSk7XG59XG5cbmZ1bmN0aW9uICR0cmlnZ2VyKGV2ZW50KSB7XG4gICAgLy8gVE9ETyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50c1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wZXRrYWFudG9ub3YvYmx1ZWJpcmQvd2lraS9PcHRpbWl6YXRpb24ta2lsbGVycyMzMi1sZWFraW5nLWFyZ3VtZW50c1xuICAgIHRoaXMuX3N1YnNjcmliZXJzLnRyaWdnZXIoZXZlbnQsIEFycmF5LnByb3RvdHlwZS5zbGljZShhcmd1bWVudHMsIDEpKTtcbn1cblxuZnVuY3Rpb24gY2FsbE9yVHJpZ2dlckV2ZW50KGNhbGxiYWNrLCBzdWJzY3JpYmVycywgZXJyb3IsIHJlc3VsdCkge1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgcmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKGVycm9yKSB7XG4gICAgICAgIHN1YnNjcmliZXJzLnRyaWdnZXIoRVJST1IsIGVycm9yKTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVlBBSURBZFVuaXQ7XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/vpaid-html5-client/js/VPAIDAdUnit.js\n");

/***/ }),

/***/ "./node_modules/vpaid-html5-client/js/VPAIDHTML5Client.js":
/*!****************************************************************!*\
  !*** ./node_modules/vpaid-html5-client/js/VPAIDHTML5Client.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/vpaid-html5-client/js/utils.js\");\nvar unique = utils.unique('vpaidIframe');\nvar VPAIDAdUnit = __webpack_require__(/*! ./VPAIDAdUnit */ \"./node_modules/vpaid-html5-client/js/VPAIDAdUnit.js\");\n\nvar defaultTemplate = '<!DOCTYPE html>' +\n    '<html lang=\"en\">' +\n    '<head><meta charset=\"UTF-8\"></head>' +\n    '<body style=\"margin:0;padding:0\"><div class=\"ad-element\"></div>' +\n    '<script type=\"text/javascript\" src=\"{{iframeURL_JS}}\"></script>' +\n    '<script type=\"text/javascript\">' +\n    'window.parent.postMessage(\\'{\"event\": \"ready\", \"id\": \"{{iframeID}}\"}\\', \\'{{origin}}\\');' +\n    '</script>' +\n    '</body>' +\n    '</html>';\n\nvar AD_STOPPED = 'AdStopped';\n\n/**\n * This callback is displayed as global member. The callback use nodejs error-first callback style\n * @callback NodeStyleCallback\n * @param {string|null}\n * @param {undefined|object}\n */\n\n/**\n * VPAIDHTML5Client\n * @class\n *\n * @param {HTMLElement} el that will contain the iframe to load adUnit and a el to add to adUnit slot\n * @param {HTMLVideoElement} video default video element to be used by adUnit\n * @param {object} [templateConfig] template: html template to be used instead of the default, extraOptions: to be used when rendering the template\n * @param {object} [vpaidOptions] timeout: when loading adUnit\n */\nfunction VPAIDHTML5Client(el, video, templateConfig, vpaidOptions) {\n    templateConfig = templateConfig || {};\n\n    this._id = unique();\n    this._destroyed = false;\n\n    this._frameContainer = utils.createElementInEl(el, 'div');\n    this._videoEl = video;\n    this._vpaidOptions = vpaidOptions || {timeout: 10000};\n\n    this._templateConfig = {\n        template: templateConfig.template || defaultTemplate,\n        extraOptions: templateConfig.extraOptions || {}\n    };\n}\n\n/**\n * destroy\n *\n */\nVPAIDHTML5Client.prototype.destroy = function destroy() {\n    if (this._destroyed) {\n        return;\n    }\n    this._destroyed = true;\n    $unloadPreviousAdUnit.call(this);\n};\n\n/**\n * isDestroyed\n *\n * @return {boolean}\n */\nVPAIDHTML5Client.prototype.isDestroyed = function isDestroyed() {\n    return this._destroyed;\n};\n\n/**\n * loadAdUnit\n *\n * @param {string} adURL url of the js of the adUnit\n * @param {nodeStyleCallback} callback\n */\nVPAIDHTML5Client.prototype.loadAdUnit = function loadAdUnit(adURL, callback) {\n    if(this._onLoad){ return }\n\n    $throwIfDestroyed.call(this);\n    $unloadPreviousAdUnit.call(this);\n    var that = this;\n\n    var frame = utils.createIframeWithContent(\n        this._frameContainer,\n        this._templateConfig.template,\n        utils.extend({\n            iframeURL_JS: adURL,\n            iframeID: this.getID(),\n            origin: getOrigin()\n        }, this._templateConfig.extraOptions)\n    );\n\n    this._frame = frame;\n\n    this._onLoad = utils.callbackTimeout(\n        this._vpaidOptions.timeout,\n        onLoad.bind(this),\n        onTimeout.bind(this)\n    );\n\n    window.addEventListener('message', this._onLoad);\n\n    function onLoad (e) {\n        /*jshint validthis: false */\n        //don't clear timeout\n        if (e.origin !== getOrigin()) return;\n        if (e.source !== frame.contentWindow) return;\n\n        try {\n            var result = JSON.parse(e.data);\n        } catch (e) {\n            return;\n        }\n\n        //don't clear timeout\n        if (result.id !== that.getID()) return;\n\n        var adUnit, error, createAd;\n        if (!that._frame.contentWindow) {\n\n            error = 'the iframe is not anymore in the DOM tree';\n\n        } else {\n            createAd = that._frame.contentWindow.getVPAIDAd;\n            error = utils.validate(typeof createAd === 'function', 'the ad didn\\'t return a function to create an ad');\n        }\n\n        if (!error) {\n            var adEl = that._frame.contentWindow.document.querySelector('.ad-element');\n            adUnit = new VPAIDAdUnit(createAd(), adEl, that._videoEl, that._frame);\n            adUnit.subscribe(AD_STOPPED, $adDestroyed.bind(that));\n            error = utils.validate(adUnit.isValidVPAIDAd(), 'the add is not fully complaint with VPAID specification');\n        }\n\n        that._adUnit = adUnit;\n        $destroyLoadListener.call(that);\n        callback(error, error ? null : adUnit);\n\n        //clear timeout\n        return true;\n    }\n\n    function onTimeout() {\n        callback('timeout', null);\n    }\n};\n\n/**\n * unloadAdUnit\n *\n */\nVPAIDHTML5Client.prototype.unloadAdUnit = function unloadAdUnit() {\n    $unloadPreviousAdUnit.call(this);\n};\n\n/**\n * getID will return the unique id\n *\n * @return {string}\n */\nVPAIDHTML5Client.prototype.getID = function () {\n    return this._id;\n};\n\n\n/**\n * $removeEl\n *\n * @param {string} key\n */\nfunction $removeEl(key) {\n    var el = this[key];\n    if (el && el.parentNode) {\n        el.parentNode.removeChild(el);\n        delete this[key];\n    }\n}\n\nfunction $adDestroyed() {\n    $removeAdElements.call(this);\n    delete this._adUnit;\n}\n\nfunction $unloadPreviousAdUnit() {\n    $removeAdElements.call(this);\n    $destroyAdUnit.call(this);\n}\n\nfunction $removeAdElements() {\n    $removeEl.call(this, '_frame');\n    $destroyLoadListener.call(this);\n}\n\n/**\n * $destroyLoadListener\n *\n */\nfunction $destroyLoadListener() {\n    if (this._onLoad) {\n        window.removeEventListener('message', this._onLoad);\n        delete this._onLoad;\n    }\n}\n\n\nfunction $destroyAdUnit() {\n    if (this._adUnit) {\n        this._adUnit.stopAd();\n        delete this._adUnit;\n    }\n}\n\n/**\n * $throwIfDestroyed\n *\n */\nfunction $throwIfDestroyed() {\n    if (this._destroyed) {\n        throw new Error ('VPAIDHTML5Client already destroyed!');\n    }\n}\n\nfunction getOrigin() {\n    if( window.location.origin ) {\n        return window.location.origin;\n    }\n    else {\n        return window.location.protocol + \"//\" +\n            window.location.hostname +\n            (window.location.port ? ':' + window.location.port: '');\n    }\n}\n\nmodule.exports = VPAIDHTML5Client;\nwindow.VPAIDHTML5Client = VPAIDHTML5Client;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdnBhaWQtaHRtbDUtY2xpZW50L2pzL1ZQQUlESFRNTDVDbGllbnQuanM/MWRiZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixZQUFZLG1CQUFPLENBQUMsOERBQVM7QUFDN0I7QUFDQSxrQkFBa0IsbUJBQU8sQ0FBQywwRUFBZTs7QUFFekM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCLDJDQUEyQyxjQUFjO0FBQ3pEO0FBQ0Esa0NBQWtDLDJCQUEyQixVQUFVLEVBQUUsUUFBUSxRQUFRLElBQUk7QUFDN0Y7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxpQkFBaUI7QUFDNUIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMENBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLGtCQUFrQjtBQUM3QjtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdnBhaWQtaHRtbDUtY2xpZW50L2pzL1ZQQUlESFRNTDVDbGllbnQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciB1bmlxdWUgPSB1dGlscy51bmlxdWUoJ3ZwYWlkSWZyYW1lJyk7XG52YXIgVlBBSURBZFVuaXQgPSByZXF1aXJlKCcuL1ZQQUlEQWRVbml0Jyk7XG5cbnZhciBkZWZhdWx0VGVtcGxhdGUgPSAnPCFET0NUWVBFIGh0bWw+JyArXG4gICAgJzxodG1sIGxhbmc9XCJlblwiPicgK1xuICAgICc8aGVhZD48bWV0YSBjaGFyc2V0PVwiVVRGLThcIj48L2hlYWQ+JyArXG4gICAgJzxib2R5IHN0eWxlPVwibWFyZ2luOjA7cGFkZGluZzowXCI+PGRpdiBjbGFzcz1cImFkLWVsZW1lbnRcIj48L2Rpdj4nICtcbiAgICAnPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwie3tpZnJhbWVVUkxfSlN9fVwiPjwvc2NyaXB0PicgK1xuICAgICc8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIj4nICtcbiAgICAnd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShcXCd7XCJldmVudFwiOiBcInJlYWR5XCIsIFwiaWRcIjogXCJ7e2lmcmFtZUlEfX1cIn1cXCcsIFxcJ3t7b3JpZ2lufX1cXCcpOycgK1xuICAgICc8L3NjcmlwdD4nICtcbiAgICAnPC9ib2R5PicgK1xuICAgICc8L2h0bWw+JztcblxudmFyIEFEX1NUT1BQRUQgPSAnQWRTdG9wcGVkJztcblxuLyoqXG4gKiBUaGlzIGNhbGxiYWNrIGlzIGRpc3BsYXllZCBhcyBnbG9iYWwgbWVtYmVyLiBUaGUgY2FsbGJhY2sgdXNlIG5vZGVqcyBlcnJvci1maXJzdCBjYWxsYmFjayBzdHlsZVxuICogQGNhbGxiYWNrIE5vZGVTdHlsZUNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfVxuICogQHBhcmFtIHt1bmRlZmluZWR8b2JqZWN0fVxuICovXG5cbi8qKlxuICogVlBBSURIVE1MNUNsaWVudFxuICogQGNsYXNzXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgdGhhdCB3aWxsIGNvbnRhaW4gdGhlIGlmcmFtZSB0byBsb2FkIGFkVW5pdCBhbmQgYSBlbCB0byBhZGQgdG8gYWRVbml0IHNsb3RcbiAqIEBwYXJhbSB7SFRNTFZpZGVvRWxlbWVudH0gdmlkZW8gZGVmYXVsdCB2aWRlbyBlbGVtZW50IHRvIGJlIHVzZWQgYnkgYWRVbml0XG4gKiBAcGFyYW0ge29iamVjdH0gW3RlbXBsYXRlQ29uZmlnXSB0ZW1wbGF0ZTogaHRtbCB0ZW1wbGF0ZSB0byBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQsIGV4dHJhT3B0aW9uczogdG8gYmUgdXNlZCB3aGVuIHJlbmRlcmluZyB0aGUgdGVtcGxhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBbdnBhaWRPcHRpb25zXSB0aW1lb3V0OiB3aGVuIGxvYWRpbmcgYWRVbml0XG4gKi9cbmZ1bmN0aW9uIFZQQUlESFRNTDVDbGllbnQoZWwsIHZpZGVvLCB0ZW1wbGF0ZUNvbmZpZywgdnBhaWRPcHRpb25zKSB7XG4gICAgdGVtcGxhdGVDb25maWcgPSB0ZW1wbGF0ZUNvbmZpZyB8fCB7fTtcblxuICAgIHRoaXMuX2lkID0gdW5pcXVlKCk7XG4gICAgdGhpcy5fZGVzdHJveWVkID0gZmFsc2U7XG5cbiAgICB0aGlzLl9mcmFtZUNvbnRhaW5lciA9IHV0aWxzLmNyZWF0ZUVsZW1lbnRJbkVsKGVsLCAnZGl2Jyk7XG4gICAgdGhpcy5fdmlkZW9FbCA9IHZpZGVvO1xuICAgIHRoaXMuX3ZwYWlkT3B0aW9ucyA9IHZwYWlkT3B0aW9ucyB8fCB7dGltZW91dDogMTAwMDB9O1xuXG4gICAgdGhpcy5fdGVtcGxhdGVDb25maWcgPSB7XG4gICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZUNvbmZpZy50ZW1wbGF0ZSB8fCBkZWZhdWx0VGVtcGxhdGUsXG4gICAgICAgIGV4dHJhT3B0aW9uczogdGVtcGxhdGVDb25maWcuZXh0cmFPcHRpb25zIHx8IHt9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBkZXN0cm95XG4gKlxuICovXG5WUEFJREhUTUw1Q2xpZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5fZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGVzdHJveWVkID0gdHJ1ZTtcbiAgICAkdW5sb2FkUHJldmlvdXNBZFVuaXQuY2FsbCh0aGlzKTtcbn07XG5cbi8qKlxuICogaXNEZXN0cm95ZWRcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5WUEFJREhUTUw1Q2xpZW50LnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uIGlzRGVzdHJveWVkKCkge1xuICAgIHJldHVybiB0aGlzLl9kZXN0cm95ZWQ7XG59O1xuXG4vKipcbiAqIGxvYWRBZFVuaXRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYWRVUkwgdXJsIG9mIHRoZSBqcyBvZiB0aGUgYWRVbml0XG4gKiBAcGFyYW0ge25vZGVTdHlsZUNhbGxiYWNrfSBjYWxsYmFja1xuICovXG5WUEFJREhUTUw1Q2xpZW50LnByb3RvdHlwZS5sb2FkQWRVbml0ID0gZnVuY3Rpb24gbG9hZEFkVW5pdChhZFVSTCwgY2FsbGJhY2spIHtcbiAgICBpZih0aGlzLl9vbkxvYWQpeyByZXR1cm4gfVxuXG4gICAgJHRocm93SWZEZXN0cm95ZWQuY2FsbCh0aGlzKTtcbiAgICAkdW5sb2FkUHJldmlvdXNBZFVuaXQuY2FsbCh0aGlzKTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICB2YXIgZnJhbWUgPSB1dGlscy5jcmVhdGVJZnJhbWVXaXRoQ29udGVudChcbiAgICAgICAgdGhpcy5fZnJhbWVDb250YWluZXIsXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlQ29uZmlnLnRlbXBsYXRlLFxuICAgICAgICB1dGlscy5leHRlbmQoe1xuICAgICAgICAgICAgaWZyYW1lVVJMX0pTOiBhZFVSTCxcbiAgICAgICAgICAgIGlmcmFtZUlEOiB0aGlzLmdldElEKCksXG4gICAgICAgICAgICBvcmlnaW46IGdldE9yaWdpbigpXG4gICAgICAgIH0sIHRoaXMuX3RlbXBsYXRlQ29uZmlnLmV4dHJhT3B0aW9ucylcbiAgICApO1xuXG4gICAgdGhpcy5fZnJhbWUgPSBmcmFtZTtcblxuICAgIHRoaXMuX29uTG9hZCA9IHV0aWxzLmNhbGxiYWNrVGltZW91dChcbiAgICAgICAgdGhpcy5fdnBhaWRPcHRpb25zLnRpbWVvdXQsXG4gICAgICAgIG9uTG9hZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblRpbWVvdXQuYmluZCh0aGlzKVxuICAgICk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuX29uTG9hZCk7XG5cbiAgICBmdW5jdGlvbiBvbkxvYWQgKGUpIHtcbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOiBmYWxzZSAqL1xuICAgICAgICAvL2Rvbid0IGNsZWFyIHRpbWVvdXRcbiAgICAgICAgaWYgKGUub3JpZ2luICE9PSBnZXRPcmlnaW4oKSkgcmV0dXJuO1xuICAgICAgICBpZiAoZS5zb3VyY2UgIT09IGZyYW1lLmNvbnRlbnRXaW5kb3cpIHJldHVybjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoZS5kYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9kb24ndCBjbGVhciB0aW1lb3V0XG4gICAgICAgIGlmIChyZXN1bHQuaWQgIT09IHRoYXQuZ2V0SUQoKSkgcmV0dXJuO1xuXG4gICAgICAgIHZhciBhZFVuaXQsIGVycm9yLCBjcmVhdGVBZDtcbiAgICAgICAgaWYgKCF0aGF0Ll9mcmFtZS5jb250ZW50V2luZG93KSB7XG5cbiAgICAgICAgICAgIGVycm9yID0gJ3RoZSBpZnJhbWUgaXMgbm90IGFueW1vcmUgaW4gdGhlIERPTSB0cmVlJztcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3JlYXRlQWQgPSB0aGF0Ll9mcmFtZS5jb250ZW50V2luZG93LmdldFZQQUlEQWQ7XG4gICAgICAgICAgICBlcnJvciA9IHV0aWxzLnZhbGlkYXRlKHR5cGVvZiBjcmVhdGVBZCA9PT0gJ2Z1bmN0aW9uJywgJ3RoZSBhZCBkaWRuXFwndCByZXR1cm4gYSBmdW5jdGlvbiB0byBjcmVhdGUgYW4gYWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBhZEVsID0gdGhhdC5fZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWQtZWxlbWVudCcpO1xuICAgICAgICAgICAgYWRVbml0ID0gbmV3IFZQQUlEQWRVbml0KGNyZWF0ZUFkKCksIGFkRWwsIHRoYXQuX3ZpZGVvRWwsIHRoYXQuX2ZyYW1lKTtcbiAgICAgICAgICAgIGFkVW5pdC5zdWJzY3JpYmUoQURfU1RPUFBFRCwgJGFkRGVzdHJveWVkLmJpbmQodGhhdCkpO1xuICAgICAgICAgICAgZXJyb3IgPSB1dGlscy52YWxpZGF0ZShhZFVuaXQuaXNWYWxpZFZQQUlEQWQoKSwgJ3RoZSBhZGQgaXMgbm90IGZ1bGx5IGNvbXBsYWludCB3aXRoIFZQQUlEIHNwZWNpZmljYXRpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoYXQuX2FkVW5pdCA9IGFkVW5pdDtcbiAgICAgICAgJGRlc3Ryb3lMb2FkTGlzdGVuZXIuY2FsbCh0aGF0KTtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIGVycm9yID8gbnVsbCA6IGFkVW5pdCk7XG5cbiAgICAgICAgLy9jbGVhciB0aW1lb3V0XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgICAgY2FsbGJhY2soJ3RpbWVvdXQnLCBudWxsKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIHVubG9hZEFkVW5pdFxuICpcbiAqL1xuVlBBSURIVE1MNUNsaWVudC5wcm90b3R5cGUudW5sb2FkQWRVbml0ID0gZnVuY3Rpb24gdW5sb2FkQWRVbml0KCkge1xuICAgICR1bmxvYWRQcmV2aW91c0FkVW5pdC5jYWxsKHRoaXMpO1xufTtcblxuLyoqXG4gKiBnZXRJRCB3aWxsIHJldHVybiB0aGUgdW5pcXVlIGlkXG4gKlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5WUEFJREhUTUw1Q2xpZW50LnByb3RvdHlwZS5nZXRJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG59O1xuXG5cbi8qKlxuICogJHJlbW92ZUVsXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICovXG5mdW5jdGlvbiAkcmVtb3ZlRWwoa2V5KSB7XG4gICAgdmFyIGVsID0gdGhpc1trZXldO1xuICAgIGlmIChlbCAmJiBlbC5wYXJlbnROb2RlKSB7XG4gICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICBkZWxldGUgdGhpc1trZXldO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gJGFkRGVzdHJveWVkKCkge1xuICAgICRyZW1vdmVBZEVsZW1lbnRzLmNhbGwodGhpcyk7XG4gICAgZGVsZXRlIHRoaXMuX2FkVW5pdDtcbn1cblxuZnVuY3Rpb24gJHVubG9hZFByZXZpb3VzQWRVbml0KCkge1xuICAgICRyZW1vdmVBZEVsZW1lbnRzLmNhbGwodGhpcyk7XG4gICAgJGRlc3Ryb3lBZFVuaXQuY2FsbCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gJHJlbW92ZUFkRWxlbWVudHMoKSB7XG4gICAgJHJlbW92ZUVsLmNhbGwodGhpcywgJ19mcmFtZScpO1xuICAgICRkZXN0cm95TG9hZExpc3RlbmVyLmNhbGwodGhpcyk7XG59XG5cbi8qKlxuICogJGRlc3Ryb3lMb2FkTGlzdGVuZXJcbiAqXG4gKi9cbmZ1bmN0aW9uICRkZXN0cm95TG9hZExpc3RlbmVyKCkge1xuICAgIGlmICh0aGlzLl9vbkxvYWQpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl9vbkxvYWQpO1xuICAgICAgICBkZWxldGUgdGhpcy5fb25Mb2FkO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiAkZGVzdHJveUFkVW5pdCgpIHtcbiAgICBpZiAodGhpcy5fYWRVbml0KSB7XG4gICAgICAgIHRoaXMuX2FkVW5pdC5zdG9wQWQoKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2FkVW5pdDtcbiAgICB9XG59XG5cbi8qKlxuICogJHRocm93SWZEZXN0cm95ZWRcbiAqXG4gKi9cbmZ1bmN0aW9uICR0aHJvd0lmRGVzdHJveWVkKCkge1xuICAgIGlmICh0aGlzLl9kZXN0cm95ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yICgnVlBBSURIVE1MNUNsaWVudCBhbHJlYWR5IGRlc3Ryb3llZCEnKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldE9yaWdpbigpIHtcbiAgICBpZiggd2luZG93LmxvY2F0aW9uLm9yaWdpbiApIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArXG4gICAgICAgICAgICAod2luZG93LmxvY2F0aW9uLnBvcnQgPyAnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydDogJycpO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWUEFJREhUTUw1Q2xpZW50O1xud2luZG93LlZQQUlESFRNTDVDbGllbnQgPSBWUEFJREhUTUw1Q2xpZW50O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/vpaid-html5-client/js/VPAIDHTML5Client.js\n");

/***/ }),

/***/ "./node_modules/vpaid-html5-client/js/subscriber.js":
/*!**********************************************************!*\
  !*** ./node_modules/vpaid-html5-client/js/subscriber.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction Subscriber() {\n    this._subscribers = {};\n}\n\nSubscriber.prototype.subscribe = function subscribe(handler, eventName, context) {\n    if (!this.isHandlerAttached(handler, eventName)) {\n        this.get(eventName).push({handler: handler, context: context, eventName: eventName});\n    }\n};\n\nSubscriber.prototype.unsubscribe = function unsubscribe(handler, eventName) {\n    this._subscribers[eventName] = this.get(eventName).filter(function (subscriber) {\n        return handler !== subscriber.handler;\n    });\n};\n\nSubscriber.prototype.unsubscribeAll = function unsubscribeAll() {\n    this._subscribers = {};\n};\n\nSubscriber.prototype.trigger = function(eventName, data) {\n    var that = this;\n    var subscribers = this.get(eventName)\n        .concat(this.get('*'));\n\n    subscribers.forEach(function (subscriber) {\n        setTimeout(function () {\n            if (that.isHandlerAttached(subscriber.handler, subscriber.eventName)) {\n                subscriber.handler.call(subscriber.context, data);\n            }\n        }, 0);\n    });\n};\n\nSubscriber.prototype.triggerSync = function(eventName, data) {\n    var subscribers = this.get(eventName)\n        .concat(this.get('*'));\n\n    subscribers.forEach(function (subscriber) {\n        subscriber.handler.call(subscriber.context, data);\n    });\n};\n\nSubscriber.prototype.get = function get(eventName) {\n    if (!this._subscribers[eventName]) {\n        this._subscribers[eventName] = [];\n    }\n    return this._subscribers[eventName];\n};\n\nSubscriber.prototype.isHandlerAttached = function isHandlerAttached(handler, eventName) {\n    return this.get(eventName).some(function(subscriber) {\n        return handler === subscriber.handler;\n    })\n};\n\nmodule.exports = Subscriber;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdnBhaWQtaHRtbDUtY2xpZW50L2pzL3N1YnNjcmliZXIuanM/NmNiYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQyx5REFBeUQ7QUFDM0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdnBhaWQtaHRtbDUtY2xpZW50L2pzL3N1YnNjcmliZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFN1YnNjcmliZXIoKSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSB7fTtcbn1cblxuU3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlKGhhbmRsZXIsIGV2ZW50TmFtZSwgY29udGV4dCkge1xuICAgIGlmICghdGhpcy5pc0hhbmRsZXJBdHRhY2hlZChoYW5kbGVyLCBldmVudE5hbWUpKSB7XG4gICAgICAgIHRoaXMuZ2V0KGV2ZW50TmFtZSkucHVzaCh7aGFuZGxlcjogaGFuZGxlciwgY29udGV4dDogY29udGV4dCwgZXZlbnROYW1lOiBldmVudE5hbWV9KTtcbiAgICB9XG59O1xuXG5TdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKGhhbmRsZXIsIGV2ZW50TmFtZSkge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzW2V2ZW50TmFtZV0gPSB0aGlzLmdldChldmVudE5hbWUpLmZpbHRlcihmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gaGFuZGxlciAhPT0gc3Vic2NyaWJlci5oYW5kbGVyO1xuICAgIH0pO1xufTtcblxuU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmVBbGwgPSBmdW5jdGlvbiB1bnN1YnNjcmliZUFsbCgpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycyA9IHt9O1xufTtcblxuU3Vic2NyaWJlci5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgc3Vic2NyaWJlcnMgPSB0aGlzLmdldChldmVudE5hbWUpXG4gICAgICAgIC5jb25jYXQodGhpcy5nZXQoJyonKSk7XG5cbiAgICBzdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoYXQuaXNIYW5kbGVyQXR0YWNoZWQoc3Vic2NyaWJlci5oYW5kbGVyLCBzdWJzY3JpYmVyLmV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmhhbmRsZXIuY2FsbChzdWJzY3JpYmVyLmNvbnRleHQsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICB9KTtcbn07XG5cblN1YnNjcmliZXIucHJvdG90eXBlLnRyaWdnZXJTeW5jID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgdmFyIHN1YnNjcmliZXJzID0gdGhpcy5nZXQoZXZlbnROYW1lKVxuICAgICAgICAuY29uY2F0KHRoaXMuZ2V0KCcqJykpO1xuXG4gICAgc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBzdWJzY3JpYmVyLmhhbmRsZXIuY2FsbChzdWJzY3JpYmVyLmNvbnRleHQsIGRhdGEpO1xuICAgIH0pO1xufTtcblxuU3Vic2NyaWJlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KGV2ZW50TmFtZSkge1xuICAgIGlmICghdGhpcy5fc3Vic2NyaWJlcnNbZXZlbnROYW1lXSkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmVyc1tldmVudE5hbWVdO1xufTtcblxuU3Vic2NyaWJlci5wcm90b3R5cGUuaXNIYW5kbGVyQXR0YWNoZWQgPSBmdW5jdGlvbiBpc0hhbmRsZXJBdHRhY2hlZChoYW5kbGVyLCBldmVudE5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoZXZlbnROYW1lKS5zb21lKGZ1bmN0aW9uKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIgPT09IHN1YnNjcmliZXIuaGFuZGxlcjtcbiAgICB9KVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdWJzY3JpYmVyO1xuXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/vpaid-html5-client/js/subscriber.js\n");

/***/ }),

/***/ "./node_modules/vpaid-html5-client/js/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/vpaid-html5-client/js/utils.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/**\n * noop a empty function\n */\nfunction noop() {}\n\n/**\n * validate if is not validate will return an Error with the message\n *\n * @param {boolean} isValid\n * @param {string} message\n */\nfunction validate(isValid, message) {\n    return isValid ? null : new Error(message);\n}\n\n/**\n * callbackTimeout if the onSuccess is not called and returns true in the timelimit then onTimeout will be called\n *\n * @param {number} timer\n * @param {function} onSuccess\n * @param {function} onTimeout\n */\nfunction callbackTimeout(timer, onSuccess, onTimeout) {\n    var callback, timeout;\n\n    timeout = setTimeout(function () {\n        onSuccess = noop;\n        onTimeout();\n    }, timer);\n\n    callback = function () {\n        // TODO avoid leaking arguments\n        // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n        if (onSuccess.apply(this, arguments)) {\n            clearTimeout(timeout);\n        }\n    };\n\n    return callback;\n}\n\n\n/**\n * createElementInEl\n *\n * @param {HTMLElement} parent\n * @param {string} tagName\n * @param {string} id\n */\nfunction createElementInEl(parent, tagName, id) {\n    if (typeof parent === 'undefined') {\n        return;\n    }\n    var nEl = document.createElement(tagName);\n    if (id) nEl.id = id;\n    parent.appendChild(nEl);\n    return nEl;\n}\n\n/**\n * createIframeWithContent\n *\n * @param {HTMLElement} parent\n * @param {string} template simple template using {{var}}\n * @param {object} data\n */\nfunction createIframeWithContent(parent, template, data) {\n    var iframe = createIframe(parent, null, data.zIndex);\n    if (!setIframeContent(iframe, simpleTemplate(template, data))) return;\n    return iframe;\n}\n\n/**\n * createIframe\n *\n * @param {HTMLElement} parent\n * @param {string} url\n */\nfunction createIframe(parent, url, zIndex) {\n    var nEl = document.createElement('iframe');\n    nEl.src = url || 'about:blank';\n    nEl.marginWidth = '0';\n    nEl.marginHeight = '0';\n    nEl.frameBorder = '0';\n    nEl.width = '100%';\n    nEl.height = '100%';\n    setFullSizeStyle(nEl);\n\n    if(zIndex){\n        nEl.style.zIndex = zIndex;\n    }\n\n    nEl.setAttribute('SCROLLING','NO');\n    parent.innerHTML = '';\n    parent.appendChild(nEl);\n    return nEl;\n}\n\nfunction setFullSizeStyle(element) {\n    if(element) {\n        element.style.position = 'absolute';\n        element.style.left = '0';\n        element.style.top = '0';\n        element.style.margin = '0px';\n        element.style.padding = '0px';\n        element.style.border = 'none';\n        element.style.width = '100%';\n        element.style.height = '100%';\n    }\n}\n\n/**\n * simpleTemplate\n *\n * @param {string} template\n * @param {object} data\n */\nfunction simpleTemplate(template, data) {\n    Object.keys(data).forEach(function (key) {\n        var value = (typeof value === 'object') ? JSON.stringify(data[key]) : data[key];\n        template = template.replace(new RegExp('{{' + key + '}}', 'g'), value);\n    });\n    return template;\n}\n\n/**\n * setIframeContent\n *\n * @param {HTMLIframeElement} iframeEl\n * @param content\n */\nfunction setIframeContent(iframeEl, content) {\n    var iframeDoc = iframeEl.contentWindow && iframeEl.contentWindow.document;\n    if (!iframeDoc) return false;\n\n    iframeDoc.write(content);\n\n    return true;\n}\n\n\n/**\n * extend object with keys from another object\n *\n * @param {object} toExtend\n * @param {object} fromSource\n */\nfunction extend(toExtend, fromSource) {\n    Object.keys(fromSource).forEach(function(key) {\n        toExtend[key] = fromSource[key];\n    });\n    return toExtend;\n}\n\n\n/**\n * unique will create a unique string everytime is called, sequentially and prefixed\n *\n * @param {string} prefix\n */\nfunction unique(prefix) {\n    var count = -1;\n    return function () {\n        return prefix + '_' + (++count);\n    };\n}\n\nmodule.exports = {\n    noop: noop,\n    validate: validate,\n    callbackTimeout: callbackTimeout,\n    createElementInEl: createElementInEl,\n    createIframeWithContent: createIframeWithContent,\n    createIframe: createIframe,\n    setFullSizeStyle: setFullSizeStyle,\n    simpleTemplate: simpleTemplate,\n    setIframeContent: setIframeContent,\n    extend: extend,\n    unique: unique\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdnBhaWQtaHRtbDUtY2xpZW50L2pzL3V0aWxzLmpzP2JmNGUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxPQUFPLGtDQUFrQztBQUNwRCxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsYUFBYTtBQUMvRCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3ZwYWlkLWh0bWw1LWNsaWVudC9qcy91dGlscy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBub29wIGEgZW1wdHkgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8qKlxuICogdmFsaWRhdGUgaWYgaXMgbm90IHZhbGlkYXRlIHdpbGwgcmV0dXJuIGFuIEVycm9yIHdpdGggdGhlIG1lc3NhZ2VcbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmFsaWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlKGlzVmFsaWQsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gaXNWYWxpZCA/IG51bGwgOiBuZXcgRXJyb3IobWVzc2FnZSk7XG59XG5cbi8qKlxuICogY2FsbGJhY2tUaW1lb3V0IGlmIHRoZSBvblN1Y2Nlc3MgaXMgbm90IGNhbGxlZCBhbmQgcmV0dXJucyB0cnVlIGluIHRoZSB0aW1lbGltaXQgdGhlbiBvblRpbWVvdXQgd2lsbCBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZXJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU3VjY2Vzc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gb25UaW1lb3V0XG4gKi9cbmZ1bmN0aW9uIGNhbGxiYWNrVGltZW91dCh0aW1lciwgb25TdWNjZXNzLCBvblRpbWVvdXQpIHtcbiAgICB2YXIgY2FsbGJhY2ssIHRpbWVvdXQ7XG5cbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9uU3VjY2VzcyA9IG5vb3A7XG4gICAgICAgIG9uVGltZW91dCgpO1xuICAgIH0sIHRpbWVyKTtcblxuICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUT0RPIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wZXRrYWFudG9ub3YvYmx1ZWJpcmQvd2lraS9PcHRpbWl6YXRpb24ta2lsbGVycyMzMi1sZWFraW5nLWFyZ3VtZW50c1xuICAgICAgICBpZiAob25TdWNjZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gY2FsbGJhY2s7XG59XG5cblxuLyoqXG4gKiBjcmVhdGVFbGVtZW50SW5FbFxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICovXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50SW5FbChwYXJlbnQsIHRhZ05hbWUsIGlkKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJlbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgaWYgKGlkKSBuRWwuaWQgPSBpZDtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQobkVsKTtcbiAgICByZXR1cm4gbkVsO1xufVxuXG4vKipcbiAqIGNyZWF0ZUlmcmFtZVdpdGhDb250ZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgc2ltcGxlIHRlbXBsYXRlIHVzaW5nIHt7dmFyfX1cbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlmcmFtZVdpdGhDb250ZW50KHBhcmVudCwgdGVtcGxhdGUsIGRhdGEpIHtcbiAgICB2YXIgaWZyYW1lID0gY3JlYXRlSWZyYW1lKHBhcmVudCwgbnVsbCwgZGF0YS56SW5kZXgpO1xuICAgIGlmICghc2V0SWZyYW1lQ29udGVudChpZnJhbWUsIHNpbXBsZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSkpIHJldHVybjtcbiAgICByZXR1cm4gaWZyYW1lO1xufVxuXG4vKipcbiAqIGNyZWF0ZUlmcmFtZVxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICovXG5mdW5jdGlvbiBjcmVhdGVJZnJhbWUocGFyZW50LCB1cmwsIHpJbmRleCkge1xuICAgIHZhciBuRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBuRWwuc3JjID0gdXJsIHx8ICdhYm91dDpibGFuayc7XG4gICAgbkVsLm1hcmdpbldpZHRoID0gJzAnO1xuICAgIG5FbC5tYXJnaW5IZWlnaHQgPSAnMCc7XG4gICAgbkVsLmZyYW1lQm9yZGVyID0gJzAnO1xuICAgIG5FbC53aWR0aCA9ICcxMDAlJztcbiAgICBuRWwuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHNldEZ1bGxTaXplU3R5bGUobkVsKTtcblxuICAgIGlmKHpJbmRleCl7XG4gICAgICAgIG5FbC5zdHlsZS56SW5kZXggPSB6SW5kZXg7XG4gICAgfVxuXG4gICAgbkVsLnNldEF0dHJpYnV0ZSgnU0NST0xMSU5HJywnTk8nKTtcbiAgICBwYXJlbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKG5FbCk7XG4gICAgcmV0dXJuIG5FbDtcbn1cblxuZnVuY3Rpb24gc2V0RnVsbFNpemVTdHlsZShlbGVtZW50KSB7XG4gICAgaWYoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMHB4JztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzBweCc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB9XG59XG5cbi8qKlxuICogc2ltcGxlVGVtcGxhdGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXG4gKi9cbmZ1bmN0aW9uIHNpbXBsZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XG4gICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSA/IEpTT04uc3RyaW5naWZ5KGRhdGFba2V5XSkgOiBkYXRhW2tleV07XG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShuZXcgUmVnRXhwKCd7eycgKyBrZXkgKyAnfX0nLCAnZycpLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufVxuXG4vKipcbiAqIHNldElmcmFtZUNvbnRlbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxJZnJhbWVFbGVtZW50fSBpZnJhbWVFbFxuICogQHBhcmFtIGNvbnRlbnRcbiAqL1xuZnVuY3Rpb24gc2V0SWZyYW1lQ29udGVudChpZnJhbWVFbCwgY29udGVudCkge1xuICAgIHZhciBpZnJhbWVEb2MgPSBpZnJhbWVFbC5jb250ZW50V2luZG93ICYmIGlmcmFtZUVsLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gICAgaWYgKCFpZnJhbWVEb2MpIHJldHVybiBmYWxzZTtcblxuICAgIGlmcmFtZURvYy53cml0ZShjb250ZW50KTtcblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdCB3aXRoIGtleXMgZnJvbSBhbm90aGVyIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB0b0V4dGVuZFxuICogQHBhcmFtIHtvYmplY3R9IGZyb21Tb3VyY2VcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKHRvRXh0ZW5kLCBmcm9tU291cmNlKSB7XG4gICAgT2JqZWN0LmtleXMoZnJvbVNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgdG9FeHRlbmRba2V5XSA9IGZyb21Tb3VyY2Vba2V5XTtcbiAgICB9KTtcbiAgICByZXR1cm4gdG9FeHRlbmQ7XG59XG5cblxuLyoqXG4gKiB1bmlxdWUgd2lsbCBjcmVhdGUgYSB1bmlxdWUgc3RyaW5nIGV2ZXJ5dGltZSBpcyBjYWxsZWQsIHNlcXVlbnRpYWxseSBhbmQgcHJlZml4ZWRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4XG4gKi9cbmZ1bmN0aW9uIHVuaXF1ZShwcmVmaXgpIHtcbiAgICB2YXIgY291bnQgPSAtMTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgJ18nICsgKCsrY291bnQpO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIG5vb3A6IG5vb3AsXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlLFxuICAgIGNhbGxiYWNrVGltZW91dDogY2FsbGJhY2tUaW1lb3V0LFxuICAgIGNyZWF0ZUVsZW1lbnRJbkVsOiBjcmVhdGVFbGVtZW50SW5FbCxcbiAgICBjcmVhdGVJZnJhbWVXaXRoQ29udGVudDogY3JlYXRlSWZyYW1lV2l0aENvbnRlbnQsXG4gICAgY3JlYXRlSWZyYW1lOiBjcmVhdGVJZnJhbWUsXG4gICAgc2V0RnVsbFNpemVTdHlsZTogc2V0RnVsbFNpemVTdHlsZSxcbiAgICBzaW1wbGVUZW1wbGF0ZTogc2ltcGxlVGVtcGxhdGUsXG4gICAgc2V0SWZyYW1lQ29udGVudDogc2V0SWZyYW1lQ29udGVudCxcbiAgICBleHRlbmQ6IGV4dGVuZCxcbiAgICB1bmlxdWU6IHVuaXF1ZVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/vpaid-html5-client/js/utils.js\n");

/***/ }),

/***/ "./src/scripts/ads/icon/IconIntegrator.js":
/*!************************************************!*\
  !*** ./src/scripts/ads/icon/IconIntegrator.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/**\n * Inner helper class that deals with the logic of the icon renderring.\n *\n * @param player {object} instance of the player that will play the ad.\n *\n * @constructor\n */\n\nvar VASTError = __webpack_require__(/*! ../vast/VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\n\nvar async = __webpack_require__(/*! ../../utils/async */ \"./src/scripts/utils/async.js\");\nvar playerUtils = __webpack_require__(/*! ../../utils/playerUtils */ \"./src/scripts/utils/playerUtils.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar http = __webpack_require__(/*! ../../utils/http */ \"./src/scripts/utils/http.js\").http;\n\nfunction IconIntegrator (player) {\n  if (!(this instanceof IconIntegrator)) {\n    return new IconIntegrator(player);\n  }\n\n  this.player = player;\n  this.icons = [];\n  this.controlBarTimer = null;\n  this.cbHidden = null;\n}\n\nIconIntegrator.prototype.renderIcons = function renderIcons (icons, callback) {\n  var that = this;\n  callback = callback || utilities.noop;\n\n  if (!Array.isArray(icons) || icons.length === 0) {\n    return callback(new VASTError('On IconIntegrator, missing required icon array'));\n  }\n\n  async.waterfall([\n    function (next) {\n      next(null, icons);\n    },\n    this._createIcons.bind(this),\n    this._setupEvents.bind(this),\n    this._renderIcons.bind(this)\n  ], function (error, response) {\n    if (error && response) {\n      that._trackError(error, response);\n    }\n    callback(error, response);\n  });\n};\n\nIconIntegrator.prototype._createIcons = function createIcons (icons, callback) {\n\n  // **** Local Functions **** //\n  function getContent (icon) {\n    var content = null;\n    if (icon.staticResource) {\n      var imageTypes = ['image/gif', 'image/jpeg', 'image/png'];\n      if (imageTypes.indexOf(icon.creativeType) >= 0) {\n        content = \"<img src='\" + icon.staticResource + \"' width='\" + icon.width + \"' height='\" + icon.height + \"'>\";\n      }\n    }\n    else if (icon.htmlResource) {\n      content = icon.htmlResource;\n    }\n    else if (icon.iframeResource) {\n      var iframe = document.createElement('iframe');\n      iframe.src = icon.iframeResource;\n      iframe.scrolling = 'no';\n      iframe.style.width = '100%';\n      iframe.style.height = '100%';\n      iframe.style.border = 'none';\n      iframe.style.overflow = 'hidden';\n      content = iframe;\n    }\n    return content;\n  }\n\n  function getIconByProgram (program) {\n    for (var i = 0; i < that.icons.length; i++) {\n      if (that.icons[i].icon.program === program) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  var that = this;\n\n  for (var i = 0; i < icons.length; i++) {\n    var iconObj = {};\n    iconObj.icon = icons[i];\n    // make sure we only one icon per program\n    var idx = getIconByProgram(iconObj.icon.program);\n    if (idx >= 0) {\n      this.icons.splice(idx, 1);\n    }\n    iconObj.content = getContent(iconObj.icon);\n    if (iconObj.content) {\n      this.icons.push(iconObj);\n    }\n  }\n\n  if (this.icons.length > 0) {\n    callback(null);\n  }\n  else {\n    callback(new VASTError('Could not create AdIcon content', 900));\n  }\n\n};\n\nIconIntegrator.prototype._setupEvents = function setupEvents (callback) {\n  var player = this.player;\n  var that = this;\n\n  playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel', 'vast.adSkip', 'adStop'], function () {\n    if (that.icons.length > 0) {\n      if (that.controlBarTimer) {\n        clearInterval(that.controlBarTimer);\n        that.controlBarTimer = null;\n      }\n      for (var i = 0; i < that.icons.length; i++) {\n        var icon = that.icons[i];\n        if (icon.div) {\n          if (icon.clickHandler) {\n            icon.div.removeEventListener('click', icon.clickHandler);\n          }\n          player.el().removeChild(icon.div);\n        }\n      }\n      that.icons = [];\n    }\n  });\n\n  return callback(null);\n};\n\nIconIntegrator.prototype._renderIcons = function renderIcons () {\n  var player = this.player;\n  var that = this;\n\n  for (var i = 0; i < this.icons.length; i++) {\n    var icon = this.icons[i];\n\n    // position by offset\n    var xPosition = 'left'; // or right\n    var xPositionOffset = 0;\n    var yPosition = 'top';  // or bottom\n    var yPositionOffset = 0;\n    var topMargin = 0;\n    var bottomMargin = 0;   // maybe control bar height\n\n    if (icon && icon.icon.xPosition === 'left') {\n        xPosition = 'left';\n        xPositionOffset = 0;\n    }\n    if (icon && icon.icon.xPosition === 'right') {\n        xPosition = 'right';\n        xPositionOffset = 0;\n    }\n    if (icon && Number(icon.icon.xPosition) >= 0) {\n        xPosition = 'left';\n        xPositionOffset = Number(icon.xPosition);\n    }\n    if (icon && icon.icon.yPosition === 'bottom') {\n        yPosition = 'bottom';\n        yPositionOffset = 0;\n        yPositionOffset = yPositionOffset + bottomMargin;\n    }\n    if (icon && icon.icon.yPosition === 'top') {\n        yPosition = 'top';\n        yPositionOffset = 0;\n        yPositionOffset = yPositionOffset + topMargin;\n    }\n    if (icon && Number(icon.icon.yPosition) >= 0) {\n        yPosition = 'top';\n        yPositionOffset = Number(icon.icon.yPosition);\n        yPositionOffset = yPositionOffset + topMargin;\n    }\n\n    var displayIcon = player.el().ownerDocument.createElement('div');\n    player.el().appendChild(displayIcon);\n\n    displayIcon.setAttribute('name', 'adicon');\n    displayIcon.id = 'adicon_' + icon.icon.program;\n    if (icon.icon.staticResource) {\n      displayIcon.innerHTML = icon.content;\n    }\n    else if (icon.icon.htmlResource) {\n      http.get(icon.content,\n        function (error, response, status) {\n          if (!error) {\n            displayIcon.style.overflow = 'hidden';\n            displayIcon.innerHTML = response;\n          }\n        },\n        {withCredentials: true});\n    }\n    else {\n      displayIcon.appendChild(icon.content);\n    }\n    displayIcon.style.position = 'absolute';\n    displayIcon.style[xPosition] = xPositionOffset + 'px';\n    displayIcon.style[yPosition] = yPositionOffset + 'px';\n    displayIcon.style.zIndex = 2147483647; // top most of 32bit\n    displayIcon.style.display = 'none';\n    icon.origY = yPositionOffset;\n\n    // set width, height of div element\n    displayIcon.style.width = icon.icon.width + 'px';\n    displayIcon.style.height = icon.icon.height + 'px';\n\n    icon.div = displayIcon;\n\n    if (icon.icon.iconClickThrough) {\n      icon.div.style.cursor = 'pointer';\n      icon.clickHandler = handleClick(icon);\n      icon.div.addEventListener('click', icon.clickHandler);\n    }\n\n    startIcon(icon, yPosition);\n  }\n\n  if (this.icons.length > 0) {\n    this.controlBarTimer = setInterval(adjustIconsByControlBar, utilities.isIE11() ? 100 : 500);\n  }\n\n  // **** local functions **** //\n  function adjustIconsByControlBar () {\n    var compStyle = window.getComputedStyle(that.player.controlBar.el(), null);\n    var cbHiddenCur = compStyle.backfaceVisibility === 'hidden' || compStyle.transform !== 'none';\n    if (cbHiddenCur !== that.cbHidden) {\n      that.cbHidden = cbHiddenCur;\n      var cbHeight = cbHiddenCur ? 0 : that.player.controlBar.el().offsetHeight;\n      for (var k = 0; k < that.icons.length; k++) {\n        var ic = that.icons[k];\n        if (ic.div && ic.div.style.display === 'block') {\n          if (cbHeight > 0) {\n            // control bar visible\n            if (elementsIntersected(ic.div, that.player.controlBar.el())) {\n              if (ic.div.style.top && ic.div.style.top.length > 0) {\n                var yPos = ic.origY - cbHeight;\n                if (yPos < 0) {\n                  yPos = 0;\n                }\n                ic.div.style.top = yPos + 'px';\n              }\n              else {\n                ic.div.style.bottom = (ic.origY + cbHeight) + 'px';\n              }\n              adjustIconsPosition(ic, cbHeight, that, 1);\n            }\n          }\n          else {\n            if (ic.div.style.top && ic.div.style.top.length > 0) {\n              ic.div.style.top = ic.origY + 'px';\n            }\n            else {\n              ic.div.style.bottom = (ic.origY + cbHeight) + 'px';\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function adjustIconsPosition (ic, cbHeight, that, level) {\n    for (var i = 0; i < that.icons.length; i++) {\n      var icon = that.icons[i];\n      if (icon.div.style.display === 'block' && icon.div != ic.div) {\n        if (elementsIntersected(ic.div, icon.div)) {\n          if (icon.div.style.top && icon.div.style.top.length > 0) {\n            var yPos = icon.origY - cbHeight;\n            if (yPos < 0) {\n              yPos = 0;\n            }\n            icon.div.style.top = yPos + 'px';\n          }\n          else {\n            icon.div.style.bottom = (icon.origY + cbHeight) + 'px';\n          }\n          // protection against infinite recursive\n          level++;\n          if (level < 5) {\n            adjustIconsPosition(icon, cbHeight, that, level);\n          }\n        }\n      }\n    }\n  }\n\n  function elementsIntersected (div1, div2) {\n    var collide = function (el1, el2) {\n      var rect1 = el1.getBoundingClientRect();\n      var rect2 = el2.getBoundingClientRect();\n\n      return !(\n        rect1.top > rect2.bottom ||\n        rect1.right < rect2.left ||\n        rect1.bottom < rect2.top ||\n        rect1.left > rect2.right\n      );\n    };\n    var inside = function (el1, el2) {\n      var rect1 = el1.getBoundingClientRect();\n      var rect2 = el2.getBoundingClientRect();\n\n      return (\n        ((rect2.top <= rect1.top) && (rect1.top <= rect2.bottom)) &&\n        ((rect2.top <= rect1.bottom) && (rect1.bottom <= rect2.bottom)) &&\n        ((rect2.left <= rect1.left) && (rect1.left <= rect2.right)) &&\n        ((rect2.left <= rect1.right) && (rect1.right <= rect2.right))\n      );\n    };\n    return collide(div1, div2) || inside(div1, div2) || inside(div2, div1);\n  }\n\n  function trackUrls (urls) {\n    urls.forEach(function (src) {\n      var img = new Image();\n      img.src = src;\n    });\n  }\n\n  function handleClick (icon) {\n    return function () {\n      trackUrls(icon.icon.iconClickTrackings);\n      player.pause();\n      window.open(icon.icon.iconClickThrough, '_blank');\n    };\n  }\n\n  function startIcon (icon, yPosition) {\n    var offset = icon.icon.offset && icon.icon.offset > 0 ? icon.icon.offset : 0;\n    setTimeout(function () {\n      icon.div.style.display = 'block';\n      trackUrls(icon.icon.iconViewTrackings);\n\n      for (var j = 0; j < that.icons.length; j++) {\n        if (that.icons[j].div && that.icons[j].div != icon.div) {\n          if (elementsIntersected(that.icons[j].div, icon.div)) {\n            var rect1 = that.icons[j].div.getBoundingClientRect();\n            if (yPosition === 'top') {\n              icon.div.style.top = (that.icons[j].div.offsetTop + that.icons[j].div.offsetHeight + 1) + 'px';\n              icon.origY = that.icons[j].div.offsetTop + that.icons[j].div.offsetHeight + 1;\n            }\n            else {\n              var rect2 = that.player.el().getBoundingClientRect();\n              icon.div.style.bottom = (rect2.height + rect2.top - rect1.top + 1) + 'px';\n              icon.origY = rect2.height + rect2.top - rect1.top + 1;\n            }\n          }\n        }\n      }\n\n      if (icon.icon.duration && icon.icon.duration > 0) {\n        var duration = icon.icon.duration;\n        setTimeout(function () {\n          var idx = that.icons.indexOf(icon);\n          if (idx >= 0) {\n            if (icon.clickHandler) {\n              icon.div.removeEventListener('click', icon.clickHandler);\n            }\n            player.el().removeChild(icon.div);\n            that.icons.splice(idx, 1);\n          }\n        }, duration);\n      }\n    }, offset);\n  }\n};\n\nmodule.exports = IconIntegrator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvaWNvbi9JY29uSW50ZWdyYXRvci5qcz9jOGY3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0IsbUJBQU8sQ0FBQyw4REFBbUI7O0FBRTNDLFlBQVksbUJBQU8sQ0FBQyx1REFBbUI7QUFDdkMsa0JBQWtCLG1CQUFPLENBQUMsbUVBQXlCO0FBQ25ELGdCQUFnQixtQkFBTyxDQUFDLDZFQUE4QjtBQUN0RCxXQUFXLG1CQUFPLENBQUMscURBQWtCOztBQUVyQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsdUJBQXVCO0FBQ3hDOztBQUVBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxTQUFTLHNCQUFzQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy9pY29uL0ljb25JbnRlZ3JhdG9yLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIElubmVyIGhlbHBlciBjbGFzcyB0aGF0IGRlYWxzIHdpdGggdGhlIGxvZ2ljIG9mIHRoZSBpY29uIHJlbmRlcnJpbmcuXG4gKlxuICogQHBhcmFtIHBsYXllciB7b2JqZWN0fSBpbnN0YW5jZSBvZiB0aGUgcGxheWVyIHRoYXQgd2lsbCBwbGF5IHRoZSBhZC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG52YXIgVkFTVEVycm9yID0gcmVxdWlyZSgnLi4vdmFzdC9WQVNURXJyb3InKTtcblxudmFyIGFzeW5jID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvYXN5bmMnKTtcbnZhciBwbGF5ZXJVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3BsYXllclV0aWxzJyk7XG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xudmFyIGh0dHAgPSByZXF1aXJlKCcuLi8uLi91dGlscy9odHRwJykuaHR0cDtcblxuZnVuY3Rpb24gSWNvbkludGVncmF0b3IgKHBsYXllcikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSWNvbkludGVncmF0b3IpKSB7XG4gICAgcmV0dXJuIG5ldyBJY29uSW50ZWdyYXRvcihwbGF5ZXIpO1xuICB9XG5cbiAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gIHRoaXMuaWNvbnMgPSBbXTtcbiAgdGhpcy5jb250cm9sQmFyVGltZXIgPSBudWxsO1xuICB0aGlzLmNiSGlkZGVuID0gbnVsbDtcbn1cblxuSWNvbkludGVncmF0b3IucHJvdG90eXBlLnJlbmRlckljb25zID0gZnVuY3Rpb24gcmVuZGVySWNvbnMgKGljb25zLCBjYWxsYmFjaykge1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgdXRpbGl0aWVzLm5vb3A7XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KGljb25zKSB8fCBpY29ucy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gY2FsbGJhY2sobmV3IFZBU1RFcnJvcignT24gSWNvbkludGVncmF0b3IsIG1pc3NpbmcgcmVxdWlyZWQgaWNvbiBhcnJheScpKTtcbiAgfVxuXG4gIGFzeW5jLndhdGVyZmFsbChbXG4gICAgZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIG5leHQobnVsbCwgaWNvbnMpO1xuICAgIH0sXG4gICAgdGhpcy5fY3JlYXRlSWNvbnMuYmluZCh0aGlzKSxcbiAgICB0aGlzLl9zZXR1cEV2ZW50cy5iaW5kKHRoaXMpLFxuICAgIHRoaXMuX3JlbmRlckljb25zLmJpbmQodGhpcylcbiAgXSwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSkge1xuICAgIGlmIChlcnJvciAmJiByZXNwb25zZSkge1xuICAgICAgdGhhdC5fdHJhY2tFcnJvcihlcnJvciwgcmVzcG9uc2UpO1xuICAgIH1cbiAgICBjYWxsYmFjayhlcnJvciwgcmVzcG9uc2UpO1xuICB9KTtcbn07XG5cbkljb25JbnRlZ3JhdG9yLnByb3RvdHlwZS5fY3JlYXRlSWNvbnMgPSBmdW5jdGlvbiBjcmVhdGVJY29ucyAoaWNvbnMsIGNhbGxiYWNrKSB7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiBnZXRDb250ZW50IChpY29uKSB7XG4gICAgdmFyIGNvbnRlbnQgPSBudWxsO1xuICAgIGlmIChpY29uLnN0YXRpY1Jlc291cmNlKSB7XG4gICAgICB2YXIgaW1hZ2VUeXBlcyA9IFsnaW1hZ2UvZ2lmJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJ107XG4gICAgICBpZiAoaW1hZ2VUeXBlcy5pbmRleE9mKGljb24uY3JlYXRpdmVUeXBlKSA+PSAwKSB7XG4gICAgICAgIGNvbnRlbnQgPSBcIjxpbWcgc3JjPSdcIiArIGljb24uc3RhdGljUmVzb3VyY2UgKyBcIicgd2lkdGg9J1wiICsgaWNvbi53aWR0aCArIFwiJyBoZWlnaHQ9J1wiICsgaWNvbi5oZWlnaHQgKyBcIic+XCI7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGljb24uaHRtbFJlc291cmNlKSB7XG4gICAgICBjb250ZW50ID0gaWNvbi5odG1sUmVzb3VyY2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKGljb24uaWZyYW1lUmVzb3VyY2UpIHtcbiAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgIGlmcmFtZS5zcmMgPSBpY29uLmlmcmFtZVJlc291cmNlO1xuICAgICAgaWZyYW1lLnNjcm9sbGluZyA9ICdubyc7XG4gICAgICBpZnJhbWUuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgaWZyYW1lLnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgIGlmcmFtZS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgY29udGVudCA9IGlmcmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJY29uQnlQcm9ncmFtIChwcm9ncmFtKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Lmljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhhdC5pY29uc1tpXS5pY29uLnByb2dyYW0gPT09IHByb2dyYW0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHZhciB0aGF0ID0gdGhpcztcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGljb25PYmogPSB7fTtcbiAgICBpY29uT2JqLmljb24gPSBpY29uc1tpXTtcbiAgICAvLyBtYWtlIHN1cmUgd2Ugb25seSBvbmUgaWNvbiBwZXIgcHJvZ3JhbVxuICAgIHZhciBpZHggPSBnZXRJY29uQnlQcm9ncmFtKGljb25PYmouaWNvbi5wcm9ncmFtKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIHRoaXMuaWNvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxuICAgIGljb25PYmouY29udGVudCA9IGdldENvbnRlbnQoaWNvbk9iai5pY29uKTtcbiAgICBpZiAoaWNvbk9iai5jb250ZW50KSB7XG4gICAgICB0aGlzLmljb25zLnB1c2goaWNvbk9iaik7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMuaWNvbnMubGVuZ3RoID4gMCkge1xuICAgIGNhbGxiYWNrKG51bGwpO1xuICB9XG4gIGVsc2Uge1xuICAgIGNhbGxiYWNrKG5ldyBWQVNURXJyb3IoJ0NvdWxkIG5vdCBjcmVhdGUgQWRJY29uIGNvbnRlbnQnLCA5MDApKTtcbiAgfVxuXG59O1xuXG5JY29uSW50ZWdyYXRvci5wcm90b3R5cGUuX3NldHVwRXZlbnRzID0gZnVuY3Rpb24gc2V0dXBFdmVudHMgKGNhbGxiYWNrKSB7XG4gIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gIHBsYXllclV0aWxzLm9uY2UocGxheWVyLCBbJ3Zhc3QuYWRFbmQnLCAndmFzdC5hZHNDYW5jZWwnLCAndmFzdC5hZFNraXAnLCAnYWRTdG9wJ10sIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhhdC5pY29ucy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAodGhhdC5jb250cm9sQmFyVGltZXIpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGF0LmNvbnRyb2xCYXJUaW1lcik7XG4gICAgICAgIHRoYXQuY29udHJvbEJhclRpbWVyID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhhdC5pY29ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaWNvbiA9IHRoYXQuaWNvbnNbaV07XG4gICAgICAgIGlmIChpY29uLmRpdikge1xuICAgICAgICAgIGlmIChpY29uLmNsaWNrSGFuZGxlcikge1xuICAgICAgICAgICAgaWNvbi5kaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpY29uLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBsYXllci5lbCgpLnJlbW92ZUNoaWxkKGljb24uZGl2KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhhdC5pY29ucyA9IFtdO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xufTtcblxuSWNvbkludGVncmF0b3IucHJvdG90eXBlLl9yZW5kZXJJY29ucyA9IGZ1bmN0aW9uIHJlbmRlckljb25zICgpIHtcbiAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyO1xuICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGljb24gPSB0aGlzLmljb25zW2ldO1xuXG4gICAgLy8gcG9zaXRpb24gYnkgb2Zmc2V0XG4gICAgdmFyIHhQb3NpdGlvbiA9ICdsZWZ0JzsgLy8gb3IgcmlnaHRcbiAgICB2YXIgeFBvc2l0aW9uT2Zmc2V0ID0gMDtcbiAgICB2YXIgeVBvc2l0aW9uID0gJ3RvcCc7ICAvLyBvciBib3R0b21cbiAgICB2YXIgeVBvc2l0aW9uT2Zmc2V0ID0gMDtcbiAgICB2YXIgdG9wTWFyZ2luID0gMDtcbiAgICB2YXIgYm90dG9tTWFyZ2luID0gMDsgICAvLyBtYXliZSBjb250cm9sIGJhciBoZWlnaHRcblxuICAgIGlmIChpY29uICYmIGljb24uaWNvbi54UG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICB4UG9zaXRpb24gPSAnbGVmdCc7XG4gICAgICAgIHhQb3NpdGlvbk9mZnNldCA9IDA7XG4gICAgfVxuICAgIGlmIChpY29uICYmIGljb24uaWNvbi54UG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgeFBvc2l0aW9uID0gJ3JpZ2h0JztcbiAgICAgICAgeFBvc2l0aW9uT2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgaWYgKGljb24gJiYgTnVtYmVyKGljb24uaWNvbi54UG9zaXRpb24pID49IDApIHtcbiAgICAgICAgeFBvc2l0aW9uID0gJ2xlZnQnO1xuICAgICAgICB4UG9zaXRpb25PZmZzZXQgPSBOdW1iZXIoaWNvbi54UG9zaXRpb24pO1xuICAgIH1cbiAgICBpZiAoaWNvbiAmJiBpY29uLmljb24ueVBvc2l0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgICB5UG9zaXRpb24gPSAnYm90dG9tJztcbiAgICAgICAgeVBvc2l0aW9uT2Zmc2V0ID0gMDtcbiAgICAgICAgeVBvc2l0aW9uT2Zmc2V0ID0geVBvc2l0aW9uT2Zmc2V0ICsgYm90dG9tTWFyZ2luO1xuICAgIH1cbiAgICBpZiAoaWNvbiAmJiBpY29uLmljb24ueVBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgICB5UG9zaXRpb24gPSAndG9wJztcbiAgICAgICAgeVBvc2l0aW9uT2Zmc2V0ID0gMDtcbiAgICAgICAgeVBvc2l0aW9uT2Zmc2V0ID0geVBvc2l0aW9uT2Zmc2V0ICsgdG9wTWFyZ2luO1xuICAgIH1cbiAgICBpZiAoaWNvbiAmJiBOdW1iZXIoaWNvbi5pY29uLnlQb3NpdGlvbikgPj0gMCkge1xuICAgICAgICB5UG9zaXRpb24gPSAndG9wJztcbiAgICAgICAgeVBvc2l0aW9uT2Zmc2V0ID0gTnVtYmVyKGljb24uaWNvbi55UG9zaXRpb24pO1xuICAgICAgICB5UG9zaXRpb25PZmZzZXQgPSB5UG9zaXRpb25PZmZzZXQgKyB0b3BNYXJnaW47XG4gICAgfVxuXG4gICAgdmFyIGRpc3BsYXlJY29uID0gcGxheWVyLmVsKCkub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwbGF5ZXIuZWwoKS5hcHBlbmRDaGlsZChkaXNwbGF5SWNvbik7XG5cbiAgICBkaXNwbGF5SWNvbi5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnYWRpY29uJyk7XG4gICAgZGlzcGxheUljb24uaWQgPSAnYWRpY29uXycgKyBpY29uLmljb24ucHJvZ3JhbTtcbiAgICBpZiAoaWNvbi5pY29uLnN0YXRpY1Jlc291cmNlKSB7XG4gICAgICBkaXNwbGF5SWNvbi5pbm5lckhUTUwgPSBpY29uLmNvbnRlbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGljb24uaWNvbi5odG1sUmVzb3VyY2UpIHtcbiAgICAgIGh0dHAuZ2V0KGljb24uY29udGVudCxcbiAgICAgICAgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgc3RhdHVzKSB7XG4gICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgZGlzcGxheUljb24uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIGRpc3BsYXlJY29uLmlubmVySFRNTCA9IHJlc3BvbnNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge3dpdGhDcmVkZW50aWFsczogdHJ1ZX0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGRpc3BsYXlJY29uLmFwcGVuZENoaWxkKGljb24uY29udGVudCk7XG4gICAgfVxuICAgIGRpc3BsYXlJY29uLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBkaXNwbGF5SWNvbi5zdHlsZVt4UG9zaXRpb25dID0geFBvc2l0aW9uT2Zmc2V0ICsgJ3B4JztcbiAgICBkaXNwbGF5SWNvbi5zdHlsZVt5UG9zaXRpb25dID0geVBvc2l0aW9uT2Zmc2V0ICsgJ3B4JztcbiAgICBkaXNwbGF5SWNvbi5zdHlsZS56SW5kZXggPSAyMTQ3NDgzNjQ3OyAvLyB0b3AgbW9zdCBvZiAzMmJpdFxuICAgIGRpc3BsYXlJY29uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaWNvbi5vcmlnWSA9IHlQb3NpdGlvbk9mZnNldDtcblxuICAgIC8vIHNldCB3aWR0aCwgaGVpZ2h0IG9mIGRpdiBlbGVtZW50XG4gICAgZGlzcGxheUljb24uc3R5bGUud2lkdGggPSBpY29uLmljb24ud2lkdGggKyAncHgnO1xuICAgIGRpc3BsYXlJY29uLnN0eWxlLmhlaWdodCA9IGljb24uaWNvbi5oZWlnaHQgKyAncHgnO1xuXG4gICAgaWNvbi5kaXYgPSBkaXNwbGF5SWNvbjtcblxuICAgIGlmIChpY29uLmljb24uaWNvbkNsaWNrVGhyb3VnaCkge1xuICAgICAgaWNvbi5kaXYuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgaWNvbi5jbGlja0hhbmRsZXIgPSBoYW5kbGVDbGljayhpY29uKTtcbiAgICAgIGljb24uZGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaWNvbi5jbGlja0hhbmRsZXIpO1xuICAgIH1cblxuICAgIHN0YXJ0SWNvbihpY29uLCB5UG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHRoaXMuaWNvbnMubGVuZ3RoID4gMCkge1xuICAgIHRoaXMuY29udHJvbEJhclRpbWVyID0gc2V0SW50ZXJ2YWwoYWRqdXN0SWNvbnNCeUNvbnRyb2xCYXIsIHV0aWxpdGllcy5pc0lFMTEoKSA/IDEwMCA6IDUwMCk7XG4gIH1cblxuICAvLyAqKioqIGxvY2FsIGZ1bmN0aW9ucyAqKioqIC8vXG4gIGZ1bmN0aW9uIGFkanVzdEljb25zQnlDb250cm9sQmFyICgpIHtcbiAgICB2YXIgY29tcFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhhdC5wbGF5ZXIuY29udHJvbEJhci5lbCgpLCBudWxsKTtcbiAgICB2YXIgY2JIaWRkZW5DdXIgPSBjb21wU3R5bGUuYmFja2ZhY2VWaXNpYmlsaXR5ID09PSAnaGlkZGVuJyB8fCBjb21wU3R5bGUudHJhbnNmb3JtICE9PSAnbm9uZSc7XG4gICAgaWYgKGNiSGlkZGVuQ3VyICE9PSB0aGF0LmNiSGlkZGVuKSB7XG4gICAgICB0aGF0LmNiSGlkZGVuID0gY2JIaWRkZW5DdXI7XG4gICAgICB2YXIgY2JIZWlnaHQgPSBjYkhpZGRlbkN1ciA/IDAgOiB0aGF0LnBsYXllci5jb250cm9sQmFyLmVsKCkub2Zmc2V0SGVpZ2h0O1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGF0Lmljb25zLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBpYyA9IHRoYXQuaWNvbnNba107XG4gICAgICAgIGlmIChpYy5kaXYgJiYgaWMuZGl2LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHtcbiAgICAgICAgICBpZiAoY2JIZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAvLyBjb250cm9sIGJhciB2aXNpYmxlXG4gICAgICAgICAgICBpZiAoZWxlbWVudHNJbnRlcnNlY3RlZChpYy5kaXYsIHRoYXQucGxheWVyLmNvbnRyb2xCYXIuZWwoKSkpIHtcbiAgICAgICAgICAgICAgaWYgKGljLmRpdi5zdHlsZS50b3AgJiYgaWMuZGl2LnN0eWxlLnRvcC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHlQb3MgPSBpYy5vcmlnWSAtIGNiSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGlmICh5UG9zIDwgMCkge1xuICAgICAgICAgICAgICAgICAgeVBvcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGljLmRpdi5zdHlsZS50b3AgPSB5UG9zICsgJ3B4JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpYy5kaXYuc3R5bGUuYm90dG9tID0gKGljLm9yaWdZICsgY2JIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhZGp1c3RJY29uc1Bvc2l0aW9uKGljLCBjYkhlaWdodCwgdGhhdCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGljLmRpdi5zdHlsZS50b3AgJiYgaWMuZGl2LnN0eWxlLnRvcC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGljLmRpdi5zdHlsZS50b3AgPSBpYy5vcmlnWSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgaWMuZGl2LnN0eWxlLmJvdHRvbSA9IChpYy5vcmlnWSArIGNiSGVpZ2h0KSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRqdXN0SWNvbnNQb3NpdGlvbiAoaWMsIGNiSGVpZ2h0LCB0aGF0LCBsZXZlbCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhhdC5pY29ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGljb24gPSB0aGF0Lmljb25zW2ldO1xuICAgICAgaWYgKGljb24uZGl2LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycgJiYgaWNvbi5kaXYgIT0gaWMuZGl2KSB7XG4gICAgICAgIGlmIChlbGVtZW50c0ludGVyc2VjdGVkKGljLmRpdiwgaWNvbi5kaXYpKSB7XG4gICAgICAgICAgaWYgKGljb24uZGl2LnN0eWxlLnRvcCAmJiBpY29uLmRpdi5zdHlsZS50b3AubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIHlQb3MgPSBpY29uLm9yaWdZIC0gY2JIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoeVBvcyA8IDApIHtcbiAgICAgICAgICAgICAgeVBvcyA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpY29uLmRpdi5zdHlsZS50b3AgPSB5UG9zICsgJ3B4JztcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpY29uLmRpdi5zdHlsZS5ib3R0b20gPSAoaWNvbi5vcmlnWSArIGNiSGVpZ2h0KSArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHByb3RlY3Rpb24gYWdhaW5zdCBpbmZpbml0ZSByZWN1cnNpdmVcbiAgICAgICAgICBsZXZlbCsrO1xuICAgICAgICAgIGlmIChsZXZlbCA8IDUpIHtcbiAgICAgICAgICAgIGFkanVzdEljb25zUG9zaXRpb24oaWNvbiwgY2JIZWlnaHQsIHRoYXQsIGxldmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlbGVtZW50c0ludGVyc2VjdGVkIChkaXYxLCBkaXYyKSB7XG4gICAgdmFyIGNvbGxpZGUgPSBmdW5jdGlvbiAoZWwxLCBlbDIpIHtcbiAgICAgIHZhciByZWN0MSA9IGVsMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciByZWN0MiA9IGVsMi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgcmV0dXJuICEoXG4gICAgICAgIHJlY3QxLnRvcCA+IHJlY3QyLmJvdHRvbSB8fFxuICAgICAgICByZWN0MS5yaWdodCA8IHJlY3QyLmxlZnQgfHxcbiAgICAgICAgcmVjdDEuYm90dG9tIDwgcmVjdDIudG9wIHx8XG4gICAgICAgIHJlY3QxLmxlZnQgPiByZWN0Mi5yaWdodFxuICAgICAgKTtcbiAgICB9O1xuICAgIHZhciBpbnNpZGUgPSBmdW5jdGlvbiAoZWwxLCBlbDIpIHtcbiAgICAgIHZhciByZWN0MSA9IGVsMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciByZWN0MiA9IGVsMi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgKChyZWN0Mi50b3AgPD0gcmVjdDEudG9wKSAmJiAocmVjdDEudG9wIDw9IHJlY3QyLmJvdHRvbSkpICYmXG4gICAgICAgICgocmVjdDIudG9wIDw9IHJlY3QxLmJvdHRvbSkgJiYgKHJlY3QxLmJvdHRvbSA8PSByZWN0Mi5ib3R0b20pKSAmJlxuICAgICAgICAoKHJlY3QyLmxlZnQgPD0gcmVjdDEubGVmdCkgJiYgKHJlY3QxLmxlZnQgPD0gcmVjdDIucmlnaHQpKSAmJlxuICAgICAgICAoKHJlY3QyLmxlZnQgPD0gcmVjdDEucmlnaHQpICYmIChyZWN0MS5yaWdodCA8PSByZWN0Mi5yaWdodCkpXG4gICAgICApO1xuICAgIH07XG4gICAgcmV0dXJuIGNvbGxpZGUoZGl2MSwgZGl2MikgfHwgaW5zaWRlKGRpdjEsIGRpdjIpIHx8IGluc2lkZShkaXYyLCBkaXYxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWNrVXJscyAodXJscykge1xuICAgIHVybHMuZm9yRWFjaChmdW5jdGlvbiAoc3JjKSB7XG4gICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWcuc3JjID0gc3JjO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2xpY2sgKGljb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdHJhY2tVcmxzKGljb24uaWNvbi5pY29uQ2xpY2tUcmFja2luZ3MpO1xuICAgICAgcGxheWVyLnBhdXNlKCk7XG4gICAgICB3aW5kb3cub3BlbihpY29uLmljb24uaWNvbkNsaWNrVGhyb3VnaCwgJ19ibGFuaycpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydEljb24gKGljb24sIHlQb3NpdGlvbikge1xuICAgIHZhciBvZmZzZXQgPSBpY29uLmljb24ub2Zmc2V0ICYmIGljb24uaWNvbi5vZmZzZXQgPiAwID8gaWNvbi5pY29uLm9mZnNldCA6IDA7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpY29uLmRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIHRyYWNrVXJscyhpY29uLmljb24uaWNvblZpZXdUcmFja2luZ3MpO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoYXQuaWNvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHRoYXQuaWNvbnNbal0uZGl2ICYmIHRoYXQuaWNvbnNbal0uZGl2ICE9IGljb24uZGl2KSB7XG4gICAgICAgICAgaWYgKGVsZW1lbnRzSW50ZXJzZWN0ZWQodGhhdC5pY29uc1tqXS5kaXYsIGljb24uZGl2KSkge1xuICAgICAgICAgICAgdmFyIHJlY3QxID0gdGhhdC5pY29uc1tqXS5kaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBpZiAoeVBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgICAgICAgICBpY29uLmRpdi5zdHlsZS50b3AgPSAodGhhdC5pY29uc1tqXS5kaXYub2Zmc2V0VG9wICsgdGhhdC5pY29uc1tqXS5kaXYub2Zmc2V0SGVpZ2h0ICsgMSkgKyAncHgnO1xuICAgICAgICAgICAgICBpY29uLm9yaWdZID0gdGhhdC5pY29uc1tqXS5kaXYub2Zmc2V0VG9wICsgdGhhdC5pY29uc1tqXS5kaXYub2Zmc2V0SGVpZ2h0ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgcmVjdDIgPSB0aGF0LnBsYXllci5lbCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICBpY29uLmRpdi5zdHlsZS5ib3R0b20gPSAocmVjdDIuaGVpZ2h0ICsgcmVjdDIudG9wIC0gcmVjdDEudG9wICsgMSkgKyAncHgnO1xuICAgICAgICAgICAgICBpY29uLm9yaWdZID0gcmVjdDIuaGVpZ2h0ICsgcmVjdDIudG9wIC0gcmVjdDEudG9wICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGljb24uaWNvbi5kdXJhdGlvbiAmJiBpY29uLmljb24uZHVyYXRpb24gPiAwKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IGljb24uaWNvbi5kdXJhdGlvbjtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGlkeCA9IHRoYXQuaWNvbnMuaW5kZXhPZihpY29uKTtcbiAgICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGlmIChpY29uLmNsaWNrSGFuZGxlcikge1xuICAgICAgICAgICAgICBpY29uLmRpdi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGljb24uY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllci5lbCgpLnJlbW92ZUNoaWxkKGljb24uZGl2KTtcbiAgICAgICAgICAgIHRoYXQuaWNvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBkdXJhdGlvbik7XG4gICAgICB9XG4gICAgfSwgb2Zmc2V0KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJY29uSW50ZWdyYXRvcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/icon/IconIntegrator.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Ad.js":
/*!************************************!*\
  !*** ./src/scripts/ads/vast/Ad.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar InLine = __webpack_require__(/*! ./InLine */ \"./src/scripts/ads/vast/InLine.js\");\nvar Wrapper = __webpack_require__(/*! ./Wrapper */ \"./src/scripts/ads/vast/Wrapper.js\");\n\nfunction Ad (adJTree) {\n  if (!(this instanceof Ad)) {\n    return new Ad(adJTree);\n  }\n  this.initialize(adJTree);\n}\n\nAd.prototype.initialize = function (adJTree) {\n  this.id = adJTree.attr('id');\n  this.sequence = adJTree.attr('sequence');\n  if (window.mol_vastVersion === 4) {\n\t  this.conditionalAd = adJTree.attr('conditionalAd');\n  }\n\n  if (adJTree.inLine) {\n    this.inLine = new InLine(adJTree.inLine);\n  }\n\n  if (adJTree.wrapper) {\n    this.wrapper = new Wrapper(adJTree.wrapper);\n  }\n};\n\nmodule.exports = Ad;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9BZC5qcz83YjFjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLGFBQWEsbUJBQU8sQ0FBQyxrREFBVTtBQUMvQixjQUFjLG1CQUFPLENBQUMsb0RBQVc7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvQWQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBJbkxpbmUgPSByZXF1aXJlKCcuL0luTGluZScpO1xudmFyIFdyYXBwZXIgPSByZXF1aXJlKCcuL1dyYXBwZXInKTtcblxuZnVuY3Rpb24gQWQgKGFkSlRyZWUpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEFkKSkge1xuICAgIHJldHVybiBuZXcgQWQoYWRKVHJlZSk7XG4gIH1cbiAgdGhpcy5pbml0aWFsaXplKGFkSlRyZWUpO1xufVxuXG5BZC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChhZEpUcmVlKSB7XG4gIHRoaXMuaWQgPSBhZEpUcmVlLmF0dHIoJ2lkJyk7XG4gIHRoaXMuc2VxdWVuY2UgPSBhZEpUcmVlLmF0dHIoJ3NlcXVlbmNlJyk7XG4gIGlmICh3aW5kb3cubW9sX3Zhc3RWZXJzaW9uID09PSA0KSB7XG5cdCAgdGhpcy5jb25kaXRpb25hbEFkID0gYWRKVHJlZS5hdHRyKCdjb25kaXRpb25hbEFkJyk7XG4gIH1cblxuICBpZiAoYWRKVHJlZS5pbkxpbmUpIHtcbiAgICB0aGlzLmluTGluZSA9IG5ldyBJbkxpbmUoYWRKVHJlZS5pbkxpbmUpO1xuICB9XG5cbiAgaWYgKGFkSlRyZWUud3JhcHBlcikge1xuICAgIHRoaXMud3JhcHBlciA9IG5ldyBXcmFwcGVyKGFkSlRyZWUud3JhcHBlcik7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQWQ7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Ad.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Category.js":
/*!******************************************!*\
  !*** ./src/scripts/ads/vast/Category.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nfunction Category (categoryJTree) {\n\t  if (!(this instanceof Category)) {\n\t    return new Category(categoryJTree);\n\t  }\n\n\t  this.authority = categoryJTree.attr('authority');\n\t  this.category = xml.keyValue(categoryJTree);\n}\n\nCategory.parseCategories = function parseCategoties (categoriesJTree) {\n\t  var categories = [];\n\t  var categoriesData;\n\t  if (categories) {\n\t\t  categoriesData = utilities.isArray(categoriesJTree) ? categoriesJTree : [categoriesJTree];\n\t\t  categoriesData.forEach(function (category) {\n\t\t\t  var cat = new Category(category);\n\t\t\t  if (cat.category && cat.category.length > 0 && cat.authority && cat.authority.length > 0) {\n\t\t\t\t  categories.push(new Category(category));\n\t\t\t  }\n\t\t  });\n\t  }\n\t  return categories;\n};\n\nmodule.exports = Category;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9DYXRlZ29yeS5qcz8wYjlhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQyxtREFBaUI7QUFDbkMsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvQ2F0ZWdvcnkuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciB4bWwgPSByZXF1aXJlKCcuLi8uLi91dGlscy94bWwnKTtcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91dGlsaXR5RnVuY3Rpb25zJyk7XG5cbmZ1bmN0aW9uIENhdGVnb3J5IChjYXRlZ29yeUpUcmVlKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIENhdGVnb3J5KSkge1xuXHQgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShjYXRlZ29yeUpUcmVlKTtcblx0ICB9XG5cblx0ICB0aGlzLmF1dGhvcml0eSA9IGNhdGVnb3J5SlRyZWUuYXR0cignYXV0aG9yaXR5Jyk7XG5cdCAgdGhpcy5jYXRlZ29yeSA9IHhtbC5rZXlWYWx1ZShjYXRlZ29yeUpUcmVlKTtcbn1cblxuQ2F0ZWdvcnkucGFyc2VDYXRlZ29yaWVzID0gZnVuY3Rpb24gcGFyc2VDYXRlZ290aWVzIChjYXRlZ29yaWVzSlRyZWUpIHtcblx0ICB2YXIgY2F0ZWdvcmllcyA9IFtdO1xuXHQgIHZhciBjYXRlZ29yaWVzRGF0YTtcblx0ICBpZiAoY2F0ZWdvcmllcykge1xuXHRcdCAgY2F0ZWdvcmllc0RhdGEgPSB1dGlsaXRpZXMuaXNBcnJheShjYXRlZ29yaWVzSlRyZWUpID8gY2F0ZWdvcmllc0pUcmVlIDogW2NhdGVnb3JpZXNKVHJlZV07XG5cdFx0ICBjYXRlZ29yaWVzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuXHRcdFx0ICB2YXIgY2F0ID0gbmV3IENhdGVnb3J5KGNhdGVnb3J5KTtcblx0XHRcdCAgaWYgKGNhdC5jYXRlZ29yeSAmJiBjYXQuY2F0ZWdvcnkubGVuZ3RoID4gMCAmJiBjYXQuYXV0aG9yaXR5ICYmIGNhdC5hdXRob3JpdHkubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQgIGNhdGVnb3JpZXMucHVzaChuZXcgQ2F0ZWdvcnkoY2F0ZWdvcnkpKTtcblx0XHRcdCAgfVxuXHRcdCAgfSk7XG5cdCAgfVxuXHQgIHJldHVybiBjYXRlZ29yaWVzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYXRlZ29yeTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Category.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Companion.js":
/*!*******************************************!*\
  !*** ./src/scripts/ads/vast/Companion.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar TrackingEvent = __webpack_require__(/*! ./TrackingEvent */ \"./src/scripts/ads/vast/TrackingEvent.js\");\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\n\nvar logger = __webpack_require__(/*! ../../utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\n\nfunction Companion (companionJTree) {\n  if (!(this instanceof Companion)) {\n    return new Companion(companionJTree);\n  }\n\n  logger.info('<Companion> found companion ad');\n  logger.debug('<Companion>  companionJTree:', companionJTree);\n\n  // Required Elements\n  this.creativeType = xml.attr(companionJTree.staticResource, 'creativeType');\n  this.staticResource = xml.keyValue(companionJTree.staticResource);\n\n  logger.info('<Companion>  creativeType: ' + this.creativeType);\n  logger.info('<Companion>  staticResource: ' + this.staticResource);\n\n  // Weird bug when the JXON tree is built it doesn't handle casing properly in this situation...\n  var htmlResource = null;\n  if (xml.keyValue(companionJTree.HTMLResource)) {\n    htmlResource = xml.keyValue(companionJTree.HTMLResource);\n  } else if (xml.keyValue(companionJTree.hTMLResource)) {\n    htmlResource = xml.keyValue(companionJTree.hTMLResource);\n  }\n\n  if (htmlResource !== null)\n  {\n    logger.info('<Companion> found html resource', htmlResource);\n  }\n\n  this.htmlResource = htmlResource;\n\n  var iframeResource = null;\n  if (xml.keyValue(companionJTree.IFrameResource)) {\n    iframeResource = xml.keyValue(companionJTree.IFrameResource);\n  } else if (xml.keyValue(companionJTree.iFrameresource)) {\n    iframeResource = xml.keyValue(companionJTree.iFrameresource);\n  }\n\n  if (iframeResource !== null)\n  {\n    logger.info('<Companion> found iframe resource', iframeResource);\n  }\n\n  this.iframeResource = iframeResource;\n\n  // Optional fields\n  this.id = xml.attr(companionJTree, 'id');\n  this.width = xml.attr(companionJTree, 'width');\n  this.height = xml.attr(companionJTree, 'height');\n  this.assetWidth = xml.attr(companionJTree, 'assetWidth');\n  this.assetHeight = xml.attr(companionJTree, 'assetHeight');\n  this.expandedWidth = xml.attr(companionJTree, 'expandedWidth');\n  this.expandedHeight = xml.attr(companionJTree, 'expandedHeight');\n  this.apiFramework = xml.attr(companionJTree, 'apiFramework');\n  this.adSlotID = xml.attr(companionJTree, 'adSlotID');\n  this.companionClickThrough = xml.keyValue(companionJTree.companionClickThrough);\n  this.trackingEvents = parseTrackingEvents(companionJTree.trackingEvents && companionJTree.trackingEvents.tracking);\n\n  if (window.mol_vastVersion === 4) {\n\t  this.pxratio = xml.attr(companionJTree, 'pxratio');\n  }\n\n  logger.info('<Companion>  companionClickThrough: ' + this.companionClickThrough);\n\n\n  // **** Local Functions **** //\n  function parseTrackingEvents (trackingEvents) {\n    var trackings = [];\n    if (utilities.isDefined(trackingEvents)) {\n      trackingEvents = utilities.isArray(trackingEvents) ? trackingEvents : [trackingEvents];\n      trackingEvents.forEach(function (trackingData) {\n        trackings.push(new TrackingEvent(trackingData));\n      });\n    }\n    return trackings;\n  }\n}\n\nmodule.exports = Companion;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9Db21wYW5pb24uanM/YjJiMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixvQkFBb0IsbUJBQU8sQ0FBQyxnRUFBaUI7O0FBRTdDLGdCQUFnQixtQkFBTyxDQUFDLDZFQUE4Qjs7QUFFdEQsVUFBVSxtQkFBTyxDQUFDLG1EQUFpQjs7QUFFbkMsYUFBYSxtQkFBTyxDQUFDLHVFQUEyQjs7O0FBR2hEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L0NvbXBhbmlvbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIFRyYWNraW5nRXZlbnQgPSByZXF1aXJlKCcuL1RyYWNraW5nRXZlbnQnKTtcblxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xuXG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvY29uc29sZUxvZ2dlcicpO1xuXG5cbmZ1bmN0aW9uIENvbXBhbmlvbiAoY29tcGFuaW9uSlRyZWUpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIENvbXBhbmlvbikpIHtcbiAgICByZXR1cm4gbmV3IENvbXBhbmlvbihjb21wYW5pb25KVHJlZSk7XG4gIH1cblxuICBsb2dnZXIuaW5mbygnPENvbXBhbmlvbj4gZm91bmQgY29tcGFuaW9uIGFkJyk7XG4gIGxvZ2dlci5kZWJ1ZygnPENvbXBhbmlvbj4gIGNvbXBhbmlvbkpUcmVlOicsIGNvbXBhbmlvbkpUcmVlKTtcblxuICAvLyBSZXF1aXJlZCBFbGVtZW50c1xuICB0aGlzLmNyZWF0aXZlVHlwZSA9IHhtbC5hdHRyKGNvbXBhbmlvbkpUcmVlLnN0YXRpY1Jlc291cmNlLCAnY3JlYXRpdmVUeXBlJyk7XG4gIHRoaXMuc3RhdGljUmVzb3VyY2UgPSB4bWwua2V5VmFsdWUoY29tcGFuaW9uSlRyZWUuc3RhdGljUmVzb3VyY2UpO1xuXG4gIGxvZ2dlci5pbmZvKCc8Q29tcGFuaW9uPiAgY3JlYXRpdmVUeXBlOiAnICsgdGhpcy5jcmVhdGl2ZVR5cGUpO1xuICBsb2dnZXIuaW5mbygnPENvbXBhbmlvbj4gIHN0YXRpY1Jlc291cmNlOiAnICsgdGhpcy5zdGF0aWNSZXNvdXJjZSk7XG5cbiAgLy8gV2VpcmQgYnVnIHdoZW4gdGhlIEpYT04gdHJlZSBpcyBidWlsdCBpdCBkb2Vzbid0IGhhbmRsZSBjYXNpbmcgcHJvcGVybHkgaW4gdGhpcyBzaXR1YXRpb24uLi5cbiAgdmFyIGh0bWxSZXNvdXJjZSA9IG51bGw7XG4gIGlmICh4bWwua2V5VmFsdWUoY29tcGFuaW9uSlRyZWUuSFRNTFJlc291cmNlKSkge1xuICAgIGh0bWxSZXNvdXJjZSA9IHhtbC5rZXlWYWx1ZShjb21wYW5pb25KVHJlZS5IVE1MUmVzb3VyY2UpO1xuICB9IGVsc2UgaWYgKHhtbC5rZXlWYWx1ZShjb21wYW5pb25KVHJlZS5oVE1MUmVzb3VyY2UpKSB7XG4gICAgaHRtbFJlc291cmNlID0geG1sLmtleVZhbHVlKGNvbXBhbmlvbkpUcmVlLmhUTUxSZXNvdXJjZSk7XG4gIH1cblxuICBpZiAoaHRtbFJlc291cmNlICE9PSBudWxsKVxuICB7XG4gICAgbG9nZ2VyLmluZm8oJzxDb21wYW5pb24+IGZvdW5kIGh0bWwgcmVzb3VyY2UnLCBodG1sUmVzb3VyY2UpO1xuICB9XG5cbiAgdGhpcy5odG1sUmVzb3VyY2UgPSBodG1sUmVzb3VyY2U7XG5cbiAgdmFyIGlmcmFtZVJlc291cmNlID0gbnVsbDtcbiAgaWYgKHhtbC5rZXlWYWx1ZShjb21wYW5pb25KVHJlZS5JRnJhbWVSZXNvdXJjZSkpIHtcbiAgICBpZnJhbWVSZXNvdXJjZSA9IHhtbC5rZXlWYWx1ZShjb21wYW5pb25KVHJlZS5JRnJhbWVSZXNvdXJjZSk7XG4gIH0gZWxzZSBpZiAoeG1sLmtleVZhbHVlKGNvbXBhbmlvbkpUcmVlLmlGcmFtZXJlc291cmNlKSkge1xuICAgIGlmcmFtZVJlc291cmNlID0geG1sLmtleVZhbHVlKGNvbXBhbmlvbkpUcmVlLmlGcmFtZXJlc291cmNlKTtcbiAgfVxuXG4gIGlmIChpZnJhbWVSZXNvdXJjZSAhPT0gbnVsbClcbiAge1xuICAgIGxvZ2dlci5pbmZvKCc8Q29tcGFuaW9uPiBmb3VuZCBpZnJhbWUgcmVzb3VyY2UnLCBpZnJhbWVSZXNvdXJjZSk7XG4gIH1cblxuICB0aGlzLmlmcmFtZVJlc291cmNlID0gaWZyYW1lUmVzb3VyY2U7XG5cbiAgLy8gT3B0aW9uYWwgZmllbGRzXG4gIHRoaXMuaWQgPSB4bWwuYXR0cihjb21wYW5pb25KVHJlZSwgJ2lkJyk7XG4gIHRoaXMud2lkdGggPSB4bWwuYXR0cihjb21wYW5pb25KVHJlZSwgJ3dpZHRoJyk7XG4gIHRoaXMuaGVpZ2h0ID0geG1sLmF0dHIoY29tcGFuaW9uSlRyZWUsICdoZWlnaHQnKTtcbiAgdGhpcy5hc3NldFdpZHRoID0geG1sLmF0dHIoY29tcGFuaW9uSlRyZWUsICdhc3NldFdpZHRoJyk7XG4gIHRoaXMuYXNzZXRIZWlnaHQgPSB4bWwuYXR0cihjb21wYW5pb25KVHJlZSwgJ2Fzc2V0SGVpZ2h0Jyk7XG4gIHRoaXMuZXhwYW5kZWRXaWR0aCA9IHhtbC5hdHRyKGNvbXBhbmlvbkpUcmVlLCAnZXhwYW5kZWRXaWR0aCcpO1xuICB0aGlzLmV4cGFuZGVkSGVpZ2h0ID0geG1sLmF0dHIoY29tcGFuaW9uSlRyZWUsICdleHBhbmRlZEhlaWdodCcpO1xuICB0aGlzLmFwaUZyYW1ld29yayA9IHhtbC5hdHRyKGNvbXBhbmlvbkpUcmVlLCAnYXBpRnJhbWV3b3JrJyk7XG4gIHRoaXMuYWRTbG90SUQgPSB4bWwuYXR0cihjb21wYW5pb25KVHJlZSwgJ2FkU2xvdElEJyk7XG4gIHRoaXMuY29tcGFuaW9uQ2xpY2tUaHJvdWdoID0geG1sLmtleVZhbHVlKGNvbXBhbmlvbkpUcmVlLmNvbXBhbmlvbkNsaWNrVGhyb3VnaCk7XG4gIHRoaXMudHJhY2tpbmdFdmVudHMgPSBwYXJzZVRyYWNraW5nRXZlbnRzKGNvbXBhbmlvbkpUcmVlLnRyYWNraW5nRXZlbnRzICYmIGNvbXBhbmlvbkpUcmVlLnRyYWNraW5nRXZlbnRzLnRyYWNraW5nKTtcblxuICBpZiAod2luZG93Lm1vbF92YXN0VmVyc2lvbiA9PT0gNCkge1xuXHQgIHRoaXMucHhyYXRpbyA9IHhtbC5hdHRyKGNvbXBhbmlvbkpUcmVlLCAncHhyYXRpbycpO1xuICB9XG5cbiAgbG9nZ2VyLmluZm8oJzxDb21wYW5pb24+ICBjb21wYW5pb25DbGlja1Rocm91Z2g6ICcgKyB0aGlzLmNvbXBhbmlvbkNsaWNrVGhyb3VnaCk7XG5cblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gIGZ1bmN0aW9uIHBhcnNlVHJhY2tpbmdFdmVudHMgKHRyYWNraW5nRXZlbnRzKSB7XG4gICAgdmFyIHRyYWNraW5ncyA9IFtdO1xuICAgIGlmICh1dGlsaXRpZXMuaXNEZWZpbmVkKHRyYWNraW5nRXZlbnRzKSkge1xuICAgICAgdHJhY2tpbmdFdmVudHMgPSB1dGlsaXRpZXMuaXNBcnJheSh0cmFja2luZ0V2ZW50cykgPyB0cmFja2luZ0V2ZW50cyA6IFt0cmFja2luZ0V2ZW50c107XG4gICAgICB0cmFja2luZ0V2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFja2luZ0RhdGEpIHtcbiAgICAgICAgdHJhY2tpbmdzLnB1c2gobmV3IFRyYWNraW5nRXZlbnQodHJhY2tpbmdEYXRhKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYWNraW5ncztcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBhbmlvbjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Companion.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Creative.js":
/*!******************************************!*\
  !*** ./src/scripts/ads/vast/Creative.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar Linear = __webpack_require__(/*! ./Linear */ \"./src/scripts/ads/vast/Linear.js\");\nvar Companion = __webpack_require__(/*! ./Companion */ \"./src/scripts/ads/vast/Companion.js\");\nvar UniversalAdId = __webpack_require__(/*! ./UniversalAdId */ \"./src/scripts/ads/vast/UniversalAdId.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nfunction Creative (creativeJTree) {\n  if (!(this instanceof Creative)) {\n    return new Creative(creativeJTree);\n  }\n\n  this.id = creativeJTree.attr('id');\n  this.sequence = creativeJTree.attr('sequence');\n  this.adId = creativeJTree.attr('adId');\n  this.apiFramework = creativeJTree.attr('apiFramework');\n\n  if (creativeJTree.linear) {\n    this.linear = new Linear(creativeJTree.linear);\n  }\n\n  if (creativeJTree.companionAds) {\n    var companions = [];\n    var companionAds = creativeJTree.companionAds && creativeJTree.companionAds.companion;\n    if (utilities.isDefined(companionAds)) {\n      companionAds = utilities.isArray(companionAds) ? companionAds : [companionAds];\n      companionAds.forEach(function (companionData) {\n        companions.push(new Companion(companionData));\n      });\n    }\n    this.companionAds = companions;\n  }\n\n  if (window.mol_vastVersion === 4) {\n\t  this.universalAdId = new UniversalAdId(creativeJTree.universalAdId);\n  }\n}\n\n/**\n * Returns true if the browser supports at the creative.\n */\nCreative.prototype.isSupported = function () {\n  if (this.linear) {\n    return this.linear.isSupported();\n  }\n\n  return true;\n};\n\nCreative.parseCreatives = function parseCreatives (creativesJTree) {\n  var creatives = [];\n  var creativesData;\n  if (utilities.isDefined(creativesJTree) && utilities.isDefined(creativesJTree.creative)) {\n    creativesData = utilities.isArray(creativesJTree.creative) ? creativesJTree.creative : [creativesJTree.creative];\n    creativesData.forEach(function (creative) {\n      creatives.push(new Creative(creative));\n    });\n  }\n  return creatives;\n};\n\nmodule.exports = Creative;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9DcmVhdGl2ZS5qcz9iOGU2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLGFBQWEsbUJBQU8sQ0FBQyxrREFBVTtBQUMvQixnQkFBZ0IsbUJBQU8sQ0FBQyx3REFBYTtBQUNyQyxvQkFBb0IsbUJBQU8sQ0FBQyxnRUFBaUI7QUFDN0MsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvQ3JlYXRpdmUuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBMaW5lYXIgPSByZXF1aXJlKCcuL0xpbmVhcicpO1xudmFyIENvbXBhbmlvbiA9IHJlcXVpcmUoJy4vQ29tcGFuaW9uJyk7XG52YXIgVW5pdmVyc2FsQWRJZCA9IHJlcXVpcmUoJy4vVW5pdmVyc2FsQWRJZCcpO1xudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxuZnVuY3Rpb24gQ3JlYXRpdmUgKGNyZWF0aXZlSlRyZWUpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIENyZWF0aXZlKSkge1xuICAgIHJldHVybiBuZXcgQ3JlYXRpdmUoY3JlYXRpdmVKVHJlZSk7XG4gIH1cblxuICB0aGlzLmlkID0gY3JlYXRpdmVKVHJlZS5hdHRyKCdpZCcpO1xuICB0aGlzLnNlcXVlbmNlID0gY3JlYXRpdmVKVHJlZS5hdHRyKCdzZXF1ZW5jZScpO1xuICB0aGlzLmFkSWQgPSBjcmVhdGl2ZUpUcmVlLmF0dHIoJ2FkSWQnKTtcbiAgdGhpcy5hcGlGcmFtZXdvcmsgPSBjcmVhdGl2ZUpUcmVlLmF0dHIoJ2FwaUZyYW1ld29yaycpO1xuXG4gIGlmIChjcmVhdGl2ZUpUcmVlLmxpbmVhcikge1xuICAgIHRoaXMubGluZWFyID0gbmV3IExpbmVhcihjcmVhdGl2ZUpUcmVlLmxpbmVhcik7XG4gIH1cblxuICBpZiAoY3JlYXRpdmVKVHJlZS5jb21wYW5pb25BZHMpIHtcbiAgICB2YXIgY29tcGFuaW9ucyA9IFtdO1xuICAgIHZhciBjb21wYW5pb25BZHMgPSBjcmVhdGl2ZUpUcmVlLmNvbXBhbmlvbkFkcyAmJiBjcmVhdGl2ZUpUcmVlLmNvbXBhbmlvbkFkcy5jb21wYW5pb247XG4gICAgaWYgKHV0aWxpdGllcy5pc0RlZmluZWQoY29tcGFuaW9uQWRzKSkge1xuICAgICAgY29tcGFuaW9uQWRzID0gdXRpbGl0aWVzLmlzQXJyYXkoY29tcGFuaW9uQWRzKSA/IGNvbXBhbmlvbkFkcyA6IFtjb21wYW5pb25BZHNdO1xuICAgICAgY29tcGFuaW9uQWRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBhbmlvbkRhdGEpIHtcbiAgICAgICAgY29tcGFuaW9ucy5wdXNoKG5ldyBDb21wYW5pb24oY29tcGFuaW9uRGF0YSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuY29tcGFuaW9uQWRzID0gY29tcGFuaW9ucztcbiAgfVxuXG4gIGlmICh3aW5kb3cubW9sX3Zhc3RWZXJzaW9uID09PSA0KSB7XG5cdCAgdGhpcy51bml2ZXJzYWxBZElkID0gbmV3IFVuaXZlcnNhbEFkSWQoY3JlYXRpdmVKVHJlZS51bml2ZXJzYWxBZElkKTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBhdCB0aGUgY3JlYXRpdmUuXG4gKi9cbkNyZWF0aXZlLnByb3RvdHlwZS5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMubGluZWFyKSB7XG4gICAgcmV0dXJuIHRoaXMubGluZWFyLmlzU3VwcG9ydGVkKCk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkNyZWF0aXZlLnBhcnNlQ3JlYXRpdmVzID0gZnVuY3Rpb24gcGFyc2VDcmVhdGl2ZXMgKGNyZWF0aXZlc0pUcmVlKSB7XG4gIHZhciBjcmVhdGl2ZXMgPSBbXTtcbiAgdmFyIGNyZWF0aXZlc0RhdGE7XG4gIGlmICh1dGlsaXRpZXMuaXNEZWZpbmVkKGNyZWF0aXZlc0pUcmVlKSAmJiB1dGlsaXRpZXMuaXNEZWZpbmVkKGNyZWF0aXZlc0pUcmVlLmNyZWF0aXZlKSkge1xuICAgIGNyZWF0aXZlc0RhdGEgPSB1dGlsaXRpZXMuaXNBcnJheShjcmVhdGl2ZXNKVHJlZS5jcmVhdGl2ZSkgPyBjcmVhdGl2ZXNKVHJlZS5jcmVhdGl2ZSA6IFtjcmVhdGl2ZXNKVHJlZS5jcmVhdGl2ZV07XG4gICAgY3JlYXRpdmVzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChjcmVhdGl2ZSkge1xuICAgICAgY3JlYXRpdmVzLnB1c2gobmV3IENyZWF0aXZlKGNyZWF0aXZlKSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0aXZlcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ3JlYXRpdmU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Creative.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Icon.js":
/*!**************************************!*\
  !*** ./src/scripts/ads/vast/Icon.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\nvar parsers = __webpack_require__(/*! ./parsers */ \"./src/scripts/ads/vast/parsers.js\");\n\nvar attributesList = [\n  'program',\n  'width',\n  'height',\n  'xPosition',\n  'yPosition',\n  'duration',\n  'offset',\n  'apiFramework',\n  'pxratio'\n];\n\nfunction Icon (iconJTree) {\n  if (!(this instanceof Icon)) {\n    return new Icon(iconJTree);\n  }\n\n  // Attributes\n  for (var x = 0; x < attributesList.length; x++) {\n    var attribute = attributesList[x];\n    this[attribute] = iconJTree.attr(attribute);\n  }\n  if (this.duration) {\n    this.duration = parsers.duration(this.duration);\n  }\n  if (this.offset) {\n    this.offset = parsers.duration(this.offset);\n  }\n\n  // Required Elements\n  this.creativeType = xml.attr(iconJTree.staticResource, 'creativeType');\n  this.staticResource = xml.keyValue(iconJTree.staticResource);\n\n  var htmlResource = null;\n  if (xml.keyValue(iconJTree.HTMLResource)) {\n    htmlResource = xml.keyValue(iconJTree.HTMLResource);\n  } else if (xml.keyValue(iconJTree.hTMLResource)) {\n    htmlResource = xml.keyValue(iconJTree.hTMLResource);\n  }\n\n  this.htmlResource = htmlResource;\n\n  var iframeResource = null;\n  if (xml.keyValue(iconJTree.IFrameResource)) {\n    iframeResource = xml.keyValue(iconJTree.IFrameResource);\n  } else if (xml.keyValue(iconJTree.iFrameResource)) {\n    iframeResource = xml.keyValue(iconJTree.iFrameResource);\n  }\n\n  this.iframeResource = iframeResource;\n\n  this.iconViewTrackings = parseTrackings(iconJTree.iconViewTracking);\n\n  if (iconJTree.iconClicks) {\n    this.iconClickThrough = xml.keyValue(iconJTree.iconClicks.iconClickThrough);\n    this.iconClickTrackings = parseTrackings(iconJTree.iconClicks.iconClickTracking);\n  }\n\n  // Local functions\n  function parseTrackings (trackings) {\n    if (trackings) {\n      trackings = utilities.isArray(trackings) ? trackings : [trackings];\n      return utilities.transformArray(trackings, function (trackings) {\n        if (utilities.isNotEmptyString(trackings.keyValue)) {\n          return trackings.keyValue;\n        }\n        return undefined;\n      });\n    }\n    return [];\n  }\n}\n\nmodule.exports = Icon;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9JY29uLmpzPzg4YzMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCO0FBQ3RELFVBQVUsbUJBQU8sQ0FBQyxtREFBaUI7QUFDbkMsY0FBYyxtQkFBTyxDQUFDLG9EQUFXOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLDJCQUEyQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L0ljb24uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91dGlsaXR5RnVuY3Rpb25zJyk7XG52YXIgeG1sID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMveG1sJyk7XG52YXIgcGFyc2VycyA9IHJlcXVpcmUoJy4vcGFyc2VycycpO1xuXG52YXIgYXR0cmlidXRlc0xpc3QgPSBbXG4gICdwcm9ncmFtJyxcbiAgJ3dpZHRoJyxcbiAgJ2hlaWdodCcsXG4gICd4UG9zaXRpb24nLFxuICAneVBvc2l0aW9uJyxcbiAgJ2R1cmF0aW9uJyxcbiAgJ29mZnNldCcsXG4gICdhcGlGcmFtZXdvcmsnLFxuICAncHhyYXRpbydcbl07XG5cbmZ1bmN0aW9uIEljb24gKGljb25KVHJlZSkge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSWNvbikpIHtcbiAgICByZXR1cm4gbmV3IEljb24oaWNvbkpUcmVlKTtcbiAgfVxuXG4gIC8vIEF0dHJpYnV0ZXNcbiAgZm9yICh2YXIgeCA9IDA7IHggPCBhdHRyaWJ1dGVzTGlzdC5sZW5ndGg7IHgrKykge1xuICAgIHZhciBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzTGlzdFt4XTtcbiAgICB0aGlzW2F0dHJpYnV0ZV0gPSBpY29uSlRyZWUuYXR0cihhdHRyaWJ1dGUpO1xuICB9XG4gIGlmICh0aGlzLmR1cmF0aW9uKSB7XG4gICAgdGhpcy5kdXJhdGlvbiA9IHBhcnNlcnMuZHVyYXRpb24odGhpcy5kdXJhdGlvbik7XG4gIH1cbiAgaWYgKHRoaXMub2Zmc2V0KSB7XG4gICAgdGhpcy5vZmZzZXQgPSBwYXJzZXJzLmR1cmF0aW9uKHRoaXMub2Zmc2V0KTtcbiAgfVxuXG4gIC8vIFJlcXVpcmVkIEVsZW1lbnRzXG4gIHRoaXMuY3JlYXRpdmVUeXBlID0geG1sLmF0dHIoaWNvbkpUcmVlLnN0YXRpY1Jlc291cmNlLCAnY3JlYXRpdmVUeXBlJyk7XG4gIHRoaXMuc3RhdGljUmVzb3VyY2UgPSB4bWwua2V5VmFsdWUoaWNvbkpUcmVlLnN0YXRpY1Jlc291cmNlKTtcblxuICB2YXIgaHRtbFJlc291cmNlID0gbnVsbDtcbiAgaWYgKHhtbC5rZXlWYWx1ZShpY29uSlRyZWUuSFRNTFJlc291cmNlKSkge1xuICAgIGh0bWxSZXNvdXJjZSA9IHhtbC5rZXlWYWx1ZShpY29uSlRyZWUuSFRNTFJlc291cmNlKTtcbiAgfSBlbHNlIGlmICh4bWwua2V5VmFsdWUoaWNvbkpUcmVlLmhUTUxSZXNvdXJjZSkpIHtcbiAgICBodG1sUmVzb3VyY2UgPSB4bWwua2V5VmFsdWUoaWNvbkpUcmVlLmhUTUxSZXNvdXJjZSk7XG4gIH1cblxuICB0aGlzLmh0bWxSZXNvdXJjZSA9IGh0bWxSZXNvdXJjZTtcblxuICB2YXIgaWZyYW1lUmVzb3VyY2UgPSBudWxsO1xuICBpZiAoeG1sLmtleVZhbHVlKGljb25KVHJlZS5JRnJhbWVSZXNvdXJjZSkpIHtcbiAgICBpZnJhbWVSZXNvdXJjZSA9IHhtbC5rZXlWYWx1ZShpY29uSlRyZWUuSUZyYW1lUmVzb3VyY2UpO1xuICB9IGVsc2UgaWYgKHhtbC5rZXlWYWx1ZShpY29uSlRyZWUuaUZyYW1lUmVzb3VyY2UpKSB7XG4gICAgaWZyYW1lUmVzb3VyY2UgPSB4bWwua2V5VmFsdWUoaWNvbkpUcmVlLmlGcmFtZVJlc291cmNlKTtcbiAgfVxuXG4gIHRoaXMuaWZyYW1lUmVzb3VyY2UgPSBpZnJhbWVSZXNvdXJjZTtcblxuICB0aGlzLmljb25WaWV3VHJhY2tpbmdzID0gcGFyc2VUcmFja2luZ3MoaWNvbkpUcmVlLmljb25WaWV3VHJhY2tpbmcpO1xuXG4gIGlmIChpY29uSlRyZWUuaWNvbkNsaWNrcykge1xuICAgIHRoaXMuaWNvbkNsaWNrVGhyb3VnaCA9IHhtbC5rZXlWYWx1ZShpY29uSlRyZWUuaWNvbkNsaWNrcy5pY29uQ2xpY2tUaHJvdWdoKTtcbiAgICB0aGlzLmljb25DbGlja1RyYWNraW5ncyA9IHBhcnNlVHJhY2tpbmdzKGljb25KVHJlZS5pY29uQ2xpY2tzLmljb25DbGlja1RyYWNraW5nKTtcbiAgfVxuXG4gIC8vIExvY2FsIGZ1bmN0aW9uc1xuICBmdW5jdGlvbiBwYXJzZVRyYWNraW5ncyAodHJhY2tpbmdzKSB7XG4gICAgaWYgKHRyYWNraW5ncykge1xuICAgICAgdHJhY2tpbmdzID0gdXRpbGl0aWVzLmlzQXJyYXkodHJhY2tpbmdzKSA/IHRyYWNraW5ncyA6IFt0cmFja2luZ3NdO1xuICAgICAgcmV0dXJuIHV0aWxpdGllcy50cmFuc2Zvcm1BcnJheSh0cmFja2luZ3MsIGZ1bmN0aW9uICh0cmFja2luZ3MpIHtcbiAgICAgICAgaWYgKHV0aWxpdGllcy5pc05vdEVtcHR5U3RyaW5nKHRyYWNraW5ncy5rZXlWYWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJhY2tpbmdzLmtleVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSWNvbjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Icon.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/InLine.js":
/*!****************************************!*\
  !*** ./src/scripts/ads/vast/InLine.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar vastUtil = __webpack_require__(/*! ./vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\nvar Creative = __webpack_require__(/*! ./Creative */ \"./src/scripts/ads/vast/Creative.js\");\nvar Category = __webpack_require__(/*! ./Category */ \"./src/scripts/ads/vast/Category.js\");\nvar ViewableImpression = __webpack_require__(/*! ./ViewableImpression */ \"./src/scripts/ads/vast/ViewableImpression.js\");\nvar Verification = __webpack_require__(/*! ./Verification */ \"./src/scripts/ads/vast/Verification.js\");\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\n\nfunction InLine (inlineJTree) {\n  if (!(this instanceof InLine)) {\n    return new InLine(inlineJTree);\n  }\n\n  // Required Fields\n  this.adTitle = xml.keyValue(inlineJTree.adTitle);\n  this.adSystem = xml.keyValue(inlineJTree.adSystem);\n  this.impressions = vastUtil.parseImpressions(inlineJTree.impression);\n  this.creatives = Creative.parseCreatives(inlineJTree.creatives);\n\n  // Optional Fields\n  this.description = xml.keyValue(inlineJTree.description);\n  this.advertiser = xml.keyValue(inlineJTree.advertiser);\n  this.surveys = parseSurveys(inlineJTree.survey);\n  // this.error = xml.keyValue(inlineJTree.error);\n  this.errors = vastUtil.parseErrors(inlineJTree.error);\n  this.pricing = xml.keyValue(inlineJTree.pricing);\n  this.extensions = inlineJTree.extensions;\n  if (this.extensions) {\n\t  this.moat = parseMoat(this.extensions);\n  }\n  if (window.mol_vastVersion === 4) {\n\t  if (inlineJTree.category) {\n\t\t  this.categories = Category.parseCategories(inlineJTree.category);\n\t  }\n\t  if (inlineJTree.viewableImpression) {\n\t\t  this.viewableImpression = new ViewableImpression(inlineJTree.viewableImpression);\n\t  }\n\t  if (inlineJTree.adVerifications) {\n\t\t  this.adVerifications = Verification.parseAdVerifications(inlineJTree.adVerifications);\n\t  }\n  }\n\n  // **** Local Functions **** //\n  function parseSurveys (inlineSurveys) {\n    if (inlineSurveys) {\n      return utilities.transformArray(utilities.isArray(inlineSurveys) ? inlineSurveys : [inlineSurveys], function (survey) {\n        if (utilities.isNotEmptyString(survey.keyValue)) {\n          return {\n            uri: survey.keyValue,\n            type: survey.attr('type')\n          };\n        }\n\n        return undefined;\n      });\n    }\n    return [];\n  }\n\n  function parseMoat (extensions) {\n\t  var getMoatConfigData = function (arrExtentions) {\n\t\t  for (var i = 0; i < arrExtentions.length; i++) {\n\t\t\t  var extension = arrExtentions[i].extension;\n\t\t\t  if (extension && extension.moat) {\n\t\t\t\t  var moat = {};\n\t\t\t\t  var value = xml.keyValue(extension.moat);\n\t\t\t\t  var arr = value.split(';');\n\t\t\t\t  for (var j = 0; j < arr.length; j++) {\n\t\t\t\t\t  var params = arr[j].split('=');\n\t\t\t\t\t  if (params && params.length === 2) {\n\t\t\t\t\t\t  moat[params[0]] = params[1];\n\t\t\t\t\t  }\n\t\t\t\t  }\n\t\t\t\t  return moat;\n\t\t\t  }\n\t\t  }\n\t\t  return undefined;\n\t  };\n\t  if (extensions) {\n\t\t  return getMoatConfigData(utilities.isArray(extensions) ? extensions : [extensions]);\n\t  }\n\t  return undefined;\n  }\n}\n\n\n/**\n * Returns true if the browser supports all the creatives.\n */\nInLine.prototype.isSupported = function () {\n  var i, len;\n\n  if (this.creatives.length === 0) {\n    return false;\n  }\n\n  for (i = 0, len = this.creatives.length; i < len; i += 1) {\n    if (!this.creatives[i].isSupported()) {\n      return false;\n    }\n  }\n  return true;\n};\n\nmodule.exports = InLine;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9JbkxpbmUuanM/ODZjMSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixlQUFlLG1CQUFPLENBQUMsc0RBQVk7QUFDbkMsZUFBZSxtQkFBTyxDQUFDLHNEQUFZO0FBQ25DLGVBQWUsbUJBQU8sQ0FBQyxzREFBWTtBQUNuQyx5QkFBeUIsbUJBQU8sQ0FBQywwRUFBc0I7QUFDdkQsbUJBQW1CLG1CQUFPLENBQUMsOERBQWdCOztBQUUzQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7QUFDdEQsVUFBVSxtQkFBTyxDQUFDLG1EQUFpQjs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQiwwQkFBMEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIscUJBQXFCLGdCQUFnQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMENBQTBDLFNBQVM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvSW5MaW5lLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdmFzdFV0aWwgPSByZXF1aXJlKCcuL3Zhc3RVdGlsJyk7XG52YXIgQ3JlYXRpdmUgPSByZXF1aXJlKCcuL0NyZWF0aXZlJyk7XG52YXIgQ2F0ZWdvcnkgPSByZXF1aXJlKCcuL0NhdGVnb3J5Jyk7XG52YXIgVmlld2FibGVJbXByZXNzaW9uID0gcmVxdWlyZSgnLi9WaWV3YWJsZUltcHJlc3Npb24nKTtcbnZhciBWZXJpZmljYXRpb24gPSByZXF1aXJlKCcuL1ZlcmlmaWNhdGlvbicpO1xuXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xuXG5mdW5jdGlvbiBJbkxpbmUgKGlubGluZUpUcmVlKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBJbkxpbmUpKSB7XG4gICAgcmV0dXJuIG5ldyBJbkxpbmUoaW5saW5lSlRyZWUpO1xuICB9XG5cbiAgLy8gUmVxdWlyZWQgRmllbGRzXG4gIHRoaXMuYWRUaXRsZSA9IHhtbC5rZXlWYWx1ZShpbmxpbmVKVHJlZS5hZFRpdGxlKTtcbiAgdGhpcy5hZFN5c3RlbSA9IHhtbC5rZXlWYWx1ZShpbmxpbmVKVHJlZS5hZFN5c3RlbSk7XG4gIHRoaXMuaW1wcmVzc2lvbnMgPSB2YXN0VXRpbC5wYXJzZUltcHJlc3Npb25zKGlubGluZUpUcmVlLmltcHJlc3Npb24pO1xuICB0aGlzLmNyZWF0aXZlcyA9IENyZWF0aXZlLnBhcnNlQ3JlYXRpdmVzKGlubGluZUpUcmVlLmNyZWF0aXZlcyk7XG5cbiAgLy8gT3B0aW9uYWwgRmllbGRzXG4gIHRoaXMuZGVzY3JpcHRpb24gPSB4bWwua2V5VmFsdWUoaW5saW5lSlRyZWUuZGVzY3JpcHRpb24pO1xuICB0aGlzLmFkdmVydGlzZXIgPSB4bWwua2V5VmFsdWUoaW5saW5lSlRyZWUuYWR2ZXJ0aXNlcik7XG4gIHRoaXMuc3VydmV5cyA9IHBhcnNlU3VydmV5cyhpbmxpbmVKVHJlZS5zdXJ2ZXkpO1xuICAvLyB0aGlzLmVycm9yID0geG1sLmtleVZhbHVlKGlubGluZUpUcmVlLmVycm9yKTtcbiAgdGhpcy5lcnJvcnMgPSB2YXN0VXRpbC5wYXJzZUVycm9ycyhpbmxpbmVKVHJlZS5lcnJvcik7XG4gIHRoaXMucHJpY2luZyA9IHhtbC5rZXlWYWx1ZShpbmxpbmVKVHJlZS5wcmljaW5nKTtcbiAgdGhpcy5leHRlbnNpb25zID0gaW5saW5lSlRyZWUuZXh0ZW5zaW9ucztcbiAgaWYgKHRoaXMuZXh0ZW5zaW9ucykge1xuXHQgIHRoaXMubW9hdCA9IHBhcnNlTW9hdCh0aGlzLmV4dGVuc2lvbnMpO1xuICB9XG4gIGlmICh3aW5kb3cubW9sX3Zhc3RWZXJzaW9uID09PSA0KSB7XG5cdCAgaWYgKGlubGluZUpUcmVlLmNhdGVnb3J5KSB7XG5cdFx0ICB0aGlzLmNhdGVnb3JpZXMgPSBDYXRlZ29yeS5wYXJzZUNhdGVnb3JpZXMoaW5saW5lSlRyZWUuY2F0ZWdvcnkpO1xuXHQgIH1cblx0ICBpZiAoaW5saW5lSlRyZWUudmlld2FibGVJbXByZXNzaW9uKSB7XG5cdFx0ICB0aGlzLnZpZXdhYmxlSW1wcmVzc2lvbiA9IG5ldyBWaWV3YWJsZUltcHJlc3Npb24oaW5saW5lSlRyZWUudmlld2FibGVJbXByZXNzaW9uKTtcblx0ICB9XG5cdCAgaWYgKGlubGluZUpUcmVlLmFkVmVyaWZpY2F0aW9ucykge1xuXHRcdCAgdGhpcy5hZFZlcmlmaWNhdGlvbnMgPSBWZXJpZmljYXRpb24ucGFyc2VBZFZlcmlmaWNhdGlvbnMoaW5saW5lSlRyZWUuYWRWZXJpZmljYXRpb25zKTtcblx0ICB9XG4gIH1cblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gIGZ1bmN0aW9uIHBhcnNlU3VydmV5cyAoaW5saW5lU3VydmV5cykge1xuICAgIGlmIChpbmxpbmVTdXJ2ZXlzKSB7XG4gICAgICByZXR1cm4gdXRpbGl0aWVzLnRyYW5zZm9ybUFycmF5KHV0aWxpdGllcy5pc0FycmF5KGlubGluZVN1cnZleXMpID8gaW5saW5lU3VydmV5cyA6IFtpbmxpbmVTdXJ2ZXlzXSwgZnVuY3Rpb24gKHN1cnZleSkge1xuICAgICAgICBpZiAodXRpbGl0aWVzLmlzTm90RW1wdHlTdHJpbmcoc3VydmV5LmtleVZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmk6IHN1cnZleS5rZXlWYWx1ZSxcbiAgICAgICAgICAgIHR5cGU6IHN1cnZleS5hdHRyKCd0eXBlJylcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZU1vYXQgKGV4dGVuc2lvbnMpIHtcblx0ICB2YXIgZ2V0TW9hdENvbmZpZ0RhdGEgPSBmdW5jdGlvbiAoYXJyRXh0ZW50aW9ucykge1xuXHRcdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJFeHRlbnRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHQgIHZhciBleHRlbnNpb24gPSBhcnJFeHRlbnRpb25zW2ldLmV4dGVuc2lvbjtcblx0XHRcdCAgaWYgKGV4dGVuc2lvbiAmJiBleHRlbnNpb24ubW9hdCkge1xuXHRcdFx0XHQgIHZhciBtb2F0ID0ge307XG5cdFx0XHRcdCAgdmFyIHZhbHVlID0geG1sLmtleVZhbHVlKGV4dGVuc2lvbi5tb2F0KTtcblx0XHRcdFx0ICB2YXIgYXJyID0gdmFsdWUuc3BsaXQoJzsnKTtcblx0XHRcdFx0ICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdCAgdmFyIHBhcmFtcyA9IGFycltqXS5zcGxpdCgnPScpO1xuXHRcdFx0XHRcdCAgaWYgKHBhcmFtcyAmJiBwYXJhbXMubGVuZ3RoID09PSAyKSB7XG5cdFx0XHRcdFx0XHQgIG1vYXRbcGFyYW1zWzBdXSA9IHBhcmFtc1sxXTtcblx0XHRcdFx0XHQgIH1cblx0XHRcdFx0ICB9XG5cdFx0XHRcdCAgcmV0dXJuIG1vYXQ7XG5cdFx0XHQgIH1cblx0XHQgIH1cblx0XHQgIHJldHVybiB1bmRlZmluZWQ7XG5cdCAgfTtcblx0ICBpZiAoZXh0ZW5zaW9ucykge1xuXHRcdCAgcmV0dXJuIGdldE1vYXRDb25maWdEYXRhKHV0aWxpdGllcy5pc0FycmF5KGV4dGVuc2lvbnMpID8gZXh0ZW5zaW9ucyA6IFtleHRlbnNpb25zXSk7XG5cdCAgfVxuXHQgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBhbGwgdGhlIGNyZWF0aXZlcy5cbiAqL1xuSW5MaW5lLnByb3RvdHlwZS5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGksIGxlbjtcblxuICBpZiAodGhpcy5jcmVhdGl2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChpID0gMCwgbGVuID0gdGhpcy5jcmVhdGl2ZXMubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICBpZiAoIXRoaXMuY3JlYXRpdmVzW2ldLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEluTGluZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/InLine.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/InteractiveCreativeFile.js":
/*!*********************************************************!*\
  !*** ./src/scripts/ads/vast/InteractiveCreativeFile.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nfunction InteractiveCreativeFile (interactiveCreativeFileJTree) {\n  if (!(this instanceof InteractiveCreativeFile)) {\n    return new InteractiveCreativeFile(interactiveCreativeFileJTree);\n  }\n\n  this.type = interactiveCreativeFileJTree.attr('type');\n  this.apiFramework = interactiveCreativeFileJTree.attr('apiFramework');\n  this.src = xml.keyValue(interactiveCreativeFileJTree);\n}\n\nInteractiveCreativeFile.parseInteractiveCreativeFiles = function parseInteractiveCreativeFiles (icfsJTree) {\n  var interactiveCreativeFiles = [];\n  var interactiveCreativeFilesData;\n  if (utilities.isDefined(icfsJTree)) {\n\t  interactiveCreativeFilesData = utilities.isArray(icfsJTree) ? icfsJTree : [icfsJTree];\n\t  interactiveCreativeFilesData.forEach(function (fileJTree) {\n\t\t  interactiveCreativeFiles.push(new InteractiveCreativeFile(fileJTree));\n    });\n  }\n  return interactiveCreativeFiles;\n};\n\nmodule.exports = InteractiveCreativeFile;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9JbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZS5qcz9jNDVhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQyxtREFBaUI7QUFDbkMsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9JbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxuZnVuY3Rpb24gSW50ZXJhY3RpdmVDcmVhdGl2ZUZpbGUgKGludGVyYWN0aXZlQ3JlYXRpdmVGaWxlSlRyZWUpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEludGVyYWN0aXZlQ3JlYXRpdmVGaWxlKSkge1xuICAgIHJldHVybiBuZXcgSW50ZXJhY3RpdmVDcmVhdGl2ZUZpbGUoaW50ZXJhY3RpdmVDcmVhdGl2ZUZpbGVKVHJlZSk7XG4gIH1cblxuICB0aGlzLnR5cGUgPSBpbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZUpUcmVlLmF0dHIoJ3R5cGUnKTtcbiAgdGhpcy5hcGlGcmFtZXdvcmsgPSBpbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZUpUcmVlLmF0dHIoJ2FwaUZyYW1ld29yaycpO1xuICB0aGlzLnNyYyA9IHhtbC5rZXlWYWx1ZShpbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZUpUcmVlKTtcbn1cblxuSW50ZXJhY3RpdmVDcmVhdGl2ZUZpbGUucGFyc2VJbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZXMgPSBmdW5jdGlvbiBwYXJzZUludGVyYWN0aXZlQ3JlYXRpdmVGaWxlcyAoaWNmc0pUcmVlKSB7XG4gIHZhciBpbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZXMgPSBbXTtcbiAgdmFyIGludGVyYWN0aXZlQ3JlYXRpdmVGaWxlc0RhdGE7XG4gIGlmICh1dGlsaXRpZXMuaXNEZWZpbmVkKGljZnNKVHJlZSkpIHtcblx0ICBpbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZXNEYXRhID0gdXRpbGl0aWVzLmlzQXJyYXkoaWNmc0pUcmVlKSA/IGljZnNKVHJlZSA6IFtpY2ZzSlRyZWVdO1xuXHQgIGludGVyYWN0aXZlQ3JlYXRpdmVGaWxlc0RhdGEuZm9yRWFjaChmdW5jdGlvbiAoZmlsZUpUcmVlKSB7XG5cdFx0ICBpbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZXMucHVzaChuZXcgSW50ZXJhY3RpdmVDcmVhdGl2ZUZpbGUoZmlsZUpUcmVlKSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGludGVyYWN0aXZlQ3JlYXRpdmVGaWxlcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJhY3RpdmVDcmVhdGl2ZUZpbGU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/InteractiveCreativeFile.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Linear.js":
/*!****************************************!*\
  !*** ./src/scripts/ads/vast/Linear.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar TrackingEvent = __webpack_require__(/*! ./TrackingEvent */ \"./src/scripts/ads/vast/TrackingEvent.js\");\nvar MediaFile = __webpack_require__(/*! ./MediaFile */ \"./src/scripts/ads/vast/MediaFile.js\");\nvar VideoClicks = __webpack_require__(/*! ./VideoClicks */ \"./src/scripts/ads/vast/VideoClicks.js\");\nvar InteractiveCreativeFile = __webpack_require__(/*! ./InteractiveCreativeFile */ \"./src/scripts/ads/vast/InteractiveCreativeFile.js\");\nvar Icon = __webpack_require__(/*! ./Icon */ \"./src/scripts/ads/vast/Icon.js\");\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar parsers = __webpack_require__(/*! ./parsers */ \"./src/scripts/ads/vast/parsers.js\");\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\n\n\nfunction Linear (linearJTree) {\n  if (!(this instanceof Linear)) {\n    return new Linear(linearJTree);\n  }\n\n  // Required Elements\n  this.duration = parsers.duration(xml.keyValue(linearJTree.duration));\n  this.mediaFiles = parseMediaFiles(linearJTree.mediaFiles && linearJTree.mediaFiles.mediaFile);\n\n  // Optional fields\n  this.trackingEvents = parseTrackingEvents(linearJTree.trackingEvents && linearJTree.trackingEvents.tracking, this.duration);\n  this.skipoffset = parsers.offset(xml.attr(linearJTree, 'skipoffset'), this.duration);\n\n  // adjust skipoffset to publisher settings\n  if (this.duration && window._molSettings && window._molSettings.skippable) {\n\t  if (window._molSettings.skippable.enabled) {\n\t\t if (this.duration >= window._molSettings.skippable.videoThreshold) {\n\t\t\t this.skipoffset = window._molSettings.skippable.videoOffset;\n\t\t }\n\t\t else {\n\t\t\t this.skipoffset = null;\n\t\t }\n\t  }\n\t  else {\n\t\t  this.skipoffset = null;\n\t  }\n  }\n\n  if (linearJTree.videoClicks) {\n    this.videoClicks = new VideoClicks(linearJTree.videoClicks);\n  }\n\n  if (linearJTree.adParameters) {\n    this.adParameters = xml.keyValue(linearJTree.adParameters);\n\n    if (xml.attr(linearJTree.adParameters, 'xmlEncoded')) {\n      this.adParameters = xml.decode(this.adParameters);\n    }\n  }\n\n  if (window.mol_vastVersion === 4) {\n\t  if (linearJTree.mediaFiles && linearJTree.mediaFiles.mezzanine) {\n\t\t  this.mezzanine = xml.keyValue(linearJTree.mediaFiles.mezzanine);\n\t  }\n\t  if (linearJTree.mediaFiles && linearJTree.mediaFiles.interactiveCreativeFile) {\n\t\t  this.interactiveCreativeFiles = InteractiveCreativeFile.parseInteractiveCreativeFiles(linearJTree.mediaFiles.interactiveCreativeFile);\n\t  }\n  }\n\n  if (linearJTree.icons) {\n    this.icons = parseIcons(linearJTree.icons && linearJTree.icons.icon);\n  }\n\n  // **** Local Functions **** //\n  function parseTrackingEvents (trackingEvents, duration) {\n    var trackings = [];\n    if (utilities.isDefined(trackingEvents)) {\n      trackingEvents = utilities.isArray(trackingEvents) ? trackingEvents : [trackingEvents];\n      trackingEvents.forEach(function (trackingData) {\n        trackings.push(new TrackingEvent(trackingData, duration));\n      });\n    }\n    return trackings;\n  }\n\n  function parseMediaFiles (mediaFilesJxonTree) {\n    var mediaFiles = [];\n    if (utilities.isDefined(mediaFilesJxonTree)) {\n      mediaFilesJxonTree = utilities.isArray(mediaFilesJxonTree) ? mediaFilesJxonTree : [mediaFilesJxonTree];\n\n      mediaFilesJxonTree.forEach(function (mfData) {\n        mediaFiles.push(new MediaFile(mfData));\n      });\n    }\n    return mediaFiles;\n  }\n\n  function parseIcons (iconsJxonTree) {\n    var icons = [];\n    if (utilities.isDefined(iconsJxonTree)) {\n      iconsJxonTree = utilities.isArray(iconsJxonTree) ? iconsJxonTree : [iconsJxonTree];\n\n      iconsJxonTree.forEach(function (iconData) {\n        icons.push(new Icon(iconData));\n      });\n    }\n    return icons;\n  }\n}\n\n/**\n * Must return true if at least one of the MediaFiles' type is supported\n */\nLinear.prototype.isSupported = function () {\n  var i, len;\n  for (i = 0, len = this.mediaFiles.length; i < len; i += 1) {\n    if (this.mediaFiles[i].isSupported()) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nmodule.exports = Linear;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9MaW5lYXIuanM/ZGFhNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixvQkFBb0IsbUJBQU8sQ0FBQyxnRUFBaUI7QUFDN0MsZ0JBQWdCLG1CQUFPLENBQUMsd0RBQWE7QUFDckMsa0JBQWtCLG1CQUFPLENBQUMsNERBQWU7QUFDekMsOEJBQThCLG1CQUFPLENBQUMsb0ZBQTJCO0FBQ2pFLFdBQVcsbUJBQU8sQ0FBQyw4Q0FBUTs7QUFFM0IsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCO0FBQ3RELGNBQWMsbUJBQU8sQ0FBQyxvREFBVzs7QUFFakMsVUFBVSxtQkFBTyxDQUFDLG1EQUFpQjs7O0FBR25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFNBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L0xpbmVhci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIFRyYWNraW5nRXZlbnQgPSByZXF1aXJlKCcuL1RyYWNraW5nRXZlbnQnKTtcbnZhciBNZWRpYUZpbGUgPSByZXF1aXJlKCcuL01lZGlhRmlsZScpO1xudmFyIFZpZGVvQ2xpY2tzID0gcmVxdWlyZSgnLi9WaWRlb0NsaWNrcycpO1xudmFyIEludGVyYWN0aXZlQ3JlYXRpdmVGaWxlID0gcmVxdWlyZSgnLi9JbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZScpO1xudmFyIEljb24gPSByZXF1aXJlKCcuL0ljb24nKTtcblxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcbnZhciBwYXJzZXJzID0gcmVxdWlyZSgnLi9wYXJzZXJzJyk7XG5cbnZhciB4bWwgPSByZXF1aXJlKCcuLi8uLi91dGlscy94bWwnKTtcblxuXG5mdW5jdGlvbiBMaW5lYXIgKGxpbmVhckpUcmVlKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBMaW5lYXIpKSB7XG4gICAgcmV0dXJuIG5ldyBMaW5lYXIobGluZWFySlRyZWUpO1xuICB9XG5cbiAgLy8gUmVxdWlyZWQgRWxlbWVudHNcbiAgdGhpcy5kdXJhdGlvbiA9IHBhcnNlcnMuZHVyYXRpb24oeG1sLmtleVZhbHVlKGxpbmVhckpUcmVlLmR1cmF0aW9uKSk7XG4gIHRoaXMubWVkaWFGaWxlcyA9IHBhcnNlTWVkaWFGaWxlcyhsaW5lYXJKVHJlZS5tZWRpYUZpbGVzICYmIGxpbmVhckpUcmVlLm1lZGlhRmlsZXMubWVkaWFGaWxlKTtcblxuICAvLyBPcHRpb25hbCBmaWVsZHNcbiAgdGhpcy50cmFja2luZ0V2ZW50cyA9IHBhcnNlVHJhY2tpbmdFdmVudHMobGluZWFySlRyZWUudHJhY2tpbmdFdmVudHMgJiYgbGluZWFySlRyZWUudHJhY2tpbmdFdmVudHMudHJhY2tpbmcsIHRoaXMuZHVyYXRpb24pO1xuICB0aGlzLnNraXBvZmZzZXQgPSBwYXJzZXJzLm9mZnNldCh4bWwuYXR0cihsaW5lYXJKVHJlZSwgJ3NraXBvZmZzZXQnKSwgdGhpcy5kdXJhdGlvbik7XG5cbiAgLy8gYWRqdXN0IHNraXBvZmZzZXQgdG8gcHVibGlzaGVyIHNldHRpbmdzXG4gIGlmICh0aGlzLmR1cmF0aW9uICYmIHdpbmRvdy5fbW9sU2V0dGluZ3MgJiYgd2luZG93Ll9tb2xTZXR0aW5ncy5za2lwcGFibGUpIHtcblx0ICBpZiAod2luZG93Ll9tb2xTZXR0aW5ncy5za2lwcGFibGUuZW5hYmxlZCkge1xuXHRcdCBpZiAodGhpcy5kdXJhdGlvbiA+PSB3aW5kb3cuX21vbFNldHRpbmdzLnNraXBwYWJsZS52aWRlb1RocmVzaG9sZCkge1xuXHRcdFx0IHRoaXMuc2tpcG9mZnNldCA9IHdpbmRvdy5fbW9sU2V0dGluZ3Muc2tpcHBhYmxlLnZpZGVvT2Zmc2V0O1xuXHRcdCB9XG5cdFx0IGVsc2Uge1xuXHRcdFx0IHRoaXMuc2tpcG9mZnNldCA9IG51bGw7XG5cdFx0IH1cblx0ICB9XG5cdCAgZWxzZSB7XG5cdFx0ICB0aGlzLnNraXBvZmZzZXQgPSBudWxsO1xuXHQgIH1cbiAgfVxuXG4gIGlmIChsaW5lYXJKVHJlZS52aWRlb0NsaWNrcykge1xuICAgIHRoaXMudmlkZW9DbGlja3MgPSBuZXcgVmlkZW9DbGlja3MobGluZWFySlRyZWUudmlkZW9DbGlja3MpO1xuICB9XG5cbiAgaWYgKGxpbmVhckpUcmVlLmFkUGFyYW1ldGVycykge1xuICAgIHRoaXMuYWRQYXJhbWV0ZXJzID0geG1sLmtleVZhbHVlKGxpbmVhckpUcmVlLmFkUGFyYW1ldGVycyk7XG5cbiAgICBpZiAoeG1sLmF0dHIobGluZWFySlRyZWUuYWRQYXJhbWV0ZXJzLCAneG1sRW5jb2RlZCcpKSB7XG4gICAgICB0aGlzLmFkUGFyYW1ldGVycyA9IHhtbC5kZWNvZGUodGhpcy5hZFBhcmFtZXRlcnMpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh3aW5kb3cubW9sX3Zhc3RWZXJzaW9uID09PSA0KSB7XG5cdCAgaWYgKGxpbmVhckpUcmVlLm1lZGlhRmlsZXMgJiYgbGluZWFySlRyZWUubWVkaWFGaWxlcy5tZXp6YW5pbmUpIHtcblx0XHQgIHRoaXMubWV6emFuaW5lID0geG1sLmtleVZhbHVlKGxpbmVhckpUcmVlLm1lZGlhRmlsZXMubWV6emFuaW5lKTtcblx0ICB9XG5cdCAgaWYgKGxpbmVhckpUcmVlLm1lZGlhRmlsZXMgJiYgbGluZWFySlRyZWUubWVkaWFGaWxlcy5pbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZSkge1xuXHRcdCAgdGhpcy5pbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZXMgPSBJbnRlcmFjdGl2ZUNyZWF0aXZlRmlsZS5wYXJzZUludGVyYWN0aXZlQ3JlYXRpdmVGaWxlcyhsaW5lYXJKVHJlZS5tZWRpYUZpbGVzLmludGVyYWN0aXZlQ3JlYXRpdmVGaWxlKTtcblx0ICB9XG4gIH1cblxuICBpZiAobGluZWFySlRyZWUuaWNvbnMpIHtcbiAgICB0aGlzLmljb25zID0gcGFyc2VJY29ucyhsaW5lYXJKVHJlZS5pY29ucyAmJiBsaW5lYXJKVHJlZS5pY29ucy5pY29uKTtcbiAgfVxuXG4gIC8vICoqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cbiAgZnVuY3Rpb24gcGFyc2VUcmFja2luZ0V2ZW50cyAodHJhY2tpbmdFdmVudHMsIGR1cmF0aW9uKSB7XG4gICAgdmFyIHRyYWNraW5ncyA9IFtdO1xuICAgIGlmICh1dGlsaXRpZXMuaXNEZWZpbmVkKHRyYWNraW5nRXZlbnRzKSkge1xuICAgICAgdHJhY2tpbmdFdmVudHMgPSB1dGlsaXRpZXMuaXNBcnJheSh0cmFja2luZ0V2ZW50cykgPyB0cmFja2luZ0V2ZW50cyA6IFt0cmFja2luZ0V2ZW50c107XG4gICAgICB0cmFja2luZ0V2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFja2luZ0RhdGEpIHtcbiAgICAgICAgdHJhY2tpbmdzLnB1c2gobmV3IFRyYWNraW5nRXZlbnQodHJhY2tpbmdEYXRhLCBkdXJhdGlvbikpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0cmFja2luZ3M7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZU1lZGlhRmlsZXMgKG1lZGlhRmlsZXNKeG9uVHJlZSkge1xuICAgIHZhciBtZWRpYUZpbGVzID0gW107XG4gICAgaWYgKHV0aWxpdGllcy5pc0RlZmluZWQobWVkaWFGaWxlc0p4b25UcmVlKSkge1xuICAgICAgbWVkaWFGaWxlc0p4b25UcmVlID0gdXRpbGl0aWVzLmlzQXJyYXkobWVkaWFGaWxlc0p4b25UcmVlKSA/IG1lZGlhRmlsZXNKeG9uVHJlZSA6IFttZWRpYUZpbGVzSnhvblRyZWVdO1xuXG4gICAgICBtZWRpYUZpbGVzSnhvblRyZWUuZm9yRWFjaChmdW5jdGlvbiAobWZEYXRhKSB7XG4gICAgICAgIG1lZGlhRmlsZXMucHVzaChuZXcgTWVkaWFGaWxlKG1mRGF0YSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtZWRpYUZpbGVzO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VJY29ucyAoaWNvbnNKeG9uVHJlZSkge1xuICAgIHZhciBpY29ucyA9IFtdO1xuICAgIGlmICh1dGlsaXRpZXMuaXNEZWZpbmVkKGljb25zSnhvblRyZWUpKSB7XG4gICAgICBpY29uc0p4b25UcmVlID0gdXRpbGl0aWVzLmlzQXJyYXkoaWNvbnNKeG9uVHJlZSkgPyBpY29uc0p4b25UcmVlIDogW2ljb25zSnhvblRyZWVdO1xuXG4gICAgICBpY29uc0p4b25UcmVlLmZvckVhY2goZnVuY3Rpb24gKGljb25EYXRhKSB7XG4gICAgICAgIGljb25zLnB1c2gobmV3IEljb24oaWNvbkRhdGEpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaWNvbnM7XG4gIH1cbn1cblxuLyoqXG4gKiBNdXN0IHJldHVybiB0cnVlIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgTWVkaWFGaWxlcycgdHlwZSBpcyBzdXBwb3J0ZWRcbiAqL1xuTGluZWFyLnByb3RvdHlwZS5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGksIGxlbjtcbiAgZm9yIChpID0gMCwgbGVuID0gdGhpcy5tZWRpYUZpbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgaWYgKHRoaXMubWVkaWFGaWxlc1tpXS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IExpbmVhcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Linear.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/MediaFile.js":
/*!*******************************************!*\
  !*** ./src/scripts/ads/vast/MediaFile.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\nvar vastUtil = __webpack_require__(/*! ./vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\n\nvar attributesList = [\n  // Required attributes\n  'delivery',\n  'type',\n  'width',\n  'height',\n  // Optional attributes\n  'codec',\n  'id',\n  'bitrate',\n  'minBitrate',\n  'maxBitrate',\n  'scalable',\n  'maintainAspectRatio',\n  'apiFramework'\n];\n\nfunction MediaFile (mediaFileJTree) {\n  if (!(this instanceof MediaFile)) {\n    return new MediaFile(mediaFileJTree);\n  }\n\n  // Required attributes\n  this.src = xml.keyValue(mediaFileJTree);\n\n  for (var x = 0; x < attributesList.length; x++) {\n    var attribute = attributesList[x];\n    this[attribute] = mediaFileJTree.attr(attribute);\n  }\n}\n\nMediaFile.prototype.isSupported = function () {\n  if (vastUtil.isVPAID(this)) {\n    return !!vastUtil.findSupportedVPAIDTech(this.type);\n  }\n\n  if (this.type === 'video/x-flv') {\n    return false;\n  }\n\n  return true;\n};\n\nmodule.exports = MediaFile;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9NZWRpYUZpbGUuanM/ZmEzNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixVQUFVLG1CQUFPLENBQUMsbURBQWlCO0FBQ25DLGVBQWUsbUJBQU8sQ0FBQyxzREFBWTs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpQkFBaUIsMkJBQTJCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvTWVkaWFGaWxlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgeG1sID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMveG1sJyk7XG52YXIgdmFzdFV0aWwgPSByZXF1aXJlKCcuL3Zhc3RVdGlsJyk7XG5cbnZhciBhdHRyaWJ1dGVzTGlzdCA9IFtcbiAgLy8gUmVxdWlyZWQgYXR0cmlidXRlc1xuICAnZGVsaXZlcnknLFxuICAndHlwZScsXG4gICd3aWR0aCcsXG4gICdoZWlnaHQnLFxuICAvLyBPcHRpb25hbCBhdHRyaWJ1dGVzXG4gICdjb2RlYycsXG4gICdpZCcsXG4gICdiaXRyYXRlJyxcbiAgJ21pbkJpdHJhdGUnLFxuICAnbWF4Qml0cmF0ZScsXG4gICdzY2FsYWJsZScsXG4gICdtYWludGFpbkFzcGVjdFJhdGlvJyxcbiAgJ2FwaUZyYW1ld29yaydcbl07XG5cbmZ1bmN0aW9uIE1lZGlhRmlsZSAobWVkaWFGaWxlSlRyZWUpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE1lZGlhRmlsZSkpIHtcbiAgICByZXR1cm4gbmV3IE1lZGlhRmlsZShtZWRpYUZpbGVKVHJlZSk7XG4gIH1cblxuICAvLyBSZXF1aXJlZCBhdHRyaWJ1dGVzXG4gIHRoaXMuc3JjID0geG1sLmtleVZhbHVlKG1lZGlhRmlsZUpUcmVlKTtcblxuICBmb3IgKHZhciB4ID0gMDsgeCA8IGF0dHJpYnV0ZXNMaXN0Lmxlbmd0aDsgeCsrKSB7XG4gICAgdmFyIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNMaXN0W3hdO1xuICAgIHRoaXNbYXR0cmlidXRlXSA9IG1lZGlhRmlsZUpUcmVlLmF0dHIoYXR0cmlidXRlKTtcbiAgfVxufVxuXG5NZWRpYUZpbGUucHJvdG90eXBlLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuICBpZiAodmFzdFV0aWwuaXNWUEFJRCh0aGlzKSkge1xuICAgIHJldHVybiAhIXZhc3RVdGlsLmZpbmRTdXBwb3J0ZWRWUEFJRFRlY2godGhpcy50eXBlKTtcbiAgfVxuXG4gIGlmICh0aGlzLnR5cGUgPT09ICd2aWRlby94LWZsdicpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTWVkaWFGaWxlO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/MediaFile.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/TrackingEvent.js":
/*!***********************************************!*\
  !*** ./src/scripts/ads/vast/TrackingEvent.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar parsers = __webpack_require__(/*! ./parsers */ \"./src/scripts/ads/vast/parsers.js\");\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\n\nfunction TrackingEvent (trackingJTree, duration) {\n  if (!(this instanceof TrackingEvent)) {\n    return new TrackingEvent(trackingJTree, duration);\n  }\n\n  this.name = trackingJTree.attr('event');\n  this.uri = xml.keyValue(trackingJTree);\n\n  if (this.name === 'progress') {\n    this.offset = parsers.offset(trackingJTree.attr('offset'), duration);\n  }\n}\n\nmodule.exports = TrackingEvent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9UcmFja2luZ0V2ZW50LmpzP2UwYmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsY0FBYyxtQkFBTyxDQUFDLG9EQUFXOztBQUVqQyxVQUFVLG1CQUFPLENBQUMsbURBQWlCOztBQUVuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvVHJhY2tpbmdFdmVudC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHBhcnNlcnMgPSByZXF1aXJlKCcuL3BhcnNlcnMnKTtcblxudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xuXG5mdW5jdGlvbiBUcmFja2luZ0V2ZW50ICh0cmFja2luZ0pUcmVlLCBkdXJhdGlvbikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhY2tpbmdFdmVudCkpIHtcbiAgICByZXR1cm4gbmV3IFRyYWNraW5nRXZlbnQodHJhY2tpbmdKVHJlZSwgZHVyYXRpb24pO1xuICB9XG5cbiAgdGhpcy5uYW1lID0gdHJhY2tpbmdKVHJlZS5hdHRyKCdldmVudCcpO1xuICB0aGlzLnVyaSA9IHhtbC5rZXlWYWx1ZSh0cmFja2luZ0pUcmVlKTtcblxuICBpZiAodGhpcy5uYW1lID09PSAncHJvZ3Jlc3MnKSB7XG4gICAgdGhpcy5vZmZzZXQgPSBwYXJzZXJzLm9mZnNldCh0cmFja2luZ0pUcmVlLmF0dHIoJ29mZnNldCcpLCBkdXJhdGlvbik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUcmFja2luZ0V2ZW50O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/TrackingEvent.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/UniversalAdId.js":
/*!***********************************************!*\
  !*** ./src/scripts/ads/vast/UniversalAdId.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction UniversalAdId (universalAdIdJTree) {\n\t  if (!(this instanceof UniversalAdId)) {\n\t    return new UniversalAdId(universalAdIdJTree);\n\t  }\n\n\t  if (universalAdIdJTree) {\n\t\tthis.idRegistry = universalAdIdJTree.attr('idRegistry');\n\t\tthis.idValue = universalAdIdJTree.attr('idValue');\n\t  }\n\t  else {\n\t\tthis.idRegistry = 'unknown';\n\t\tthis.idValue = 'unknown';\n\t  }\n}\n\nmodule.exports = UniversalAdId;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9Vbml2ZXJzYWxBZElkLmpzPzBhODQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvVW5pdmVyc2FsQWRJZC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gVW5pdmVyc2FsQWRJZCAodW5pdmVyc2FsQWRJZEpUcmVlKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVuaXZlcnNhbEFkSWQpKSB7XG5cdCAgICByZXR1cm4gbmV3IFVuaXZlcnNhbEFkSWQodW5pdmVyc2FsQWRJZEpUcmVlKTtcblx0ICB9XG5cblx0ICBpZiAodW5pdmVyc2FsQWRJZEpUcmVlKSB7XG5cdFx0dGhpcy5pZFJlZ2lzdHJ5ID0gdW5pdmVyc2FsQWRJZEpUcmVlLmF0dHIoJ2lkUmVnaXN0cnknKTtcblx0XHR0aGlzLmlkVmFsdWUgPSB1bml2ZXJzYWxBZElkSlRyZWUuYXR0cignaWRWYWx1ZScpO1xuXHQgIH1cblx0ICBlbHNlIHtcblx0XHR0aGlzLmlkUmVnaXN0cnkgPSAndW5rbm93bic7XG5cdFx0dGhpcy5pZFZhbHVlID0gJ3Vua25vd24nO1xuXHQgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVbml2ZXJzYWxBZElkO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/UniversalAdId.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/VASTClient.js":
/*!********************************************!*\
  !*** ./src/scripts/ads/vast/VASTClient.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar Ad = __webpack_require__(/*! ./Ad */ \"./src/scripts/ads/vast/Ad.js\");\nvar VASTError = __webpack_require__(/*! ./VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\nvar VASTResponse = __webpack_require__(/*! ./VASTResponse */ \"./src/scripts/ads/vast/VASTResponse.js\");\nvar vastUtil = __webpack_require__(/*! ./vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\n\nvar async = __webpack_require__(/*! ../../utils/async */ \"./src/scripts/utils/async.js\");\nvar http = __webpack_require__(/*! ../../utils/http */ \"./src/scripts/utils/http.js\").http;\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\n\nvar logger = __webpack_require__(/*! ../../utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nfunction VASTClient (options) {\n  if (!(this instanceof VASTClient)) {\n    return new VASTClient(options);\n  }\n  var defaultOptions = {\n    WRAPPER_LIMIT: options && options.wrapperLimit && options.wrapperLimit > 0 ? options.wrapperLimit : 5\n  };\n\n  options = options || {};\n  this.settings = utilities.extend({}, options, defaultOptions);\n  this.errorURLMacros = [];\n}\n\nVASTClient.prototype.getVASTResponse = function getVASTResponse (adTagUrl, callback) {\n  var that = this;\n\n  var error = sanityCheck(adTagUrl, callback);\n  if (error) {\n    if (utilities.isFunction(callback)) {\n      return callback(error);\n    }\n    throw error;\n  }\n\n  async.waterfall([\n      this._getVASTAd.bind(this, adTagUrl),\n      buildVASTResponse\n    ],\n    callback);\n\n  // **** Local Functions **** //\n  function buildVASTResponse (adsChain, cb) {\n    try {\n      var response = that._buildVASTResponse(adsChain);\n      cb(null, response);\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  function sanityCheck (adTagUrl, cb) {\n    if (!adTagUrl) {\n      return new VASTError('on VASTClient.getVASTResponse, missing ad tag URL');\n    }\n\n    if (!utilities.isFunction(cb)) {\n      return new VASTError('on VASTClient.getVASTResponse, missing callback function');\n    }\n  }\n};\n\nVASTClient.prototype._getVASTAd = function (adTagUrl, callback) {\n  var that = this;\n\n  getAdWaterfall(adTagUrl, function (error, vastTree) {\n    var waterfallAds = vastTree && utilities.isArray(vastTree.ads) ? vastTree.ads : null;\n    if (error) {\n      that._trackError(error, waterfallAds);\n      return callback(error, waterfallAds);\n    }\n    getAd(waterfallAds.shift(), [], waterfallHandler);\n\n    // **** Local Functions **** //\n    function waterfallHandler (error, adChain) {\n      if (error) {\n        that._trackError(error, adChain);\n        if (waterfallAds.length > 0) {\n          getAd(waterfallAds.shift(), [], waterfallHandler);\n        } else {\n          callback(error, adChain);\n        }\n      } else {\n        callback(null, adChain);\n      }\n    }\n  });\n\n  // **** Local Functions **** //\n  function getAdWaterfall (adTagUrl, callback) {\n    var requestVastXML = that._requestVASTXml.bind(that, adTagUrl);\n    async.waterfall([\n      requestVastXML,\n      buildVastWaterfall\n    ], callback);\n  }\n\n  function buildVastWaterfall (xmlStr, callback) {\n    var vastTree;\n    try {\n      vastTree = xml.toJXONTree(xmlStr);\n      logger.debug('built JXONTree from VAST response:', vastTree);\n\n      if (utilities.isArray(vastTree.ad)) {\n        vastTree.ads = vastTree.ad;\n      } else if (vastTree.ad) {\n        vastTree.ads = [vastTree.ad];\n      } else {\n        vastTree.ads = [];\n      }\n      callback(validateVASTTree(vastTree), vastTree);\n\n    } catch (e) {\n      callback(new VASTError('on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml', 100), null);\n    }\n  }\n\n  function validateVASTTree (vastTree) {\n    var vastVersion = xml.attr(vastTree, 'version');\n\n    if (!vastTree.ad) {\n      return new VASTError('on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree', 303);\n    }\n\n    // if (vastVersion && (vastVersion != 3 && vastVersion != 2)) {\n    if (vastVersion && (vastVersion !== 3 && vastVersion !== 2 && vastVersion !== 4)) {\n      return new VASTError('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version \"' + vastVersion + '\"', 102);\n    }\n    window.mol_vastVersion = vastVersion;\n\n    return null;\n  }\n\n  function getAd (adTagUrl, adChain, callback) {\n    if (adChain.length >= that.settings.WRAPPER_LIMIT) {\n      return callback(new VASTError('on VASTClient.getVASTAd.getAd, player\\'s wrapper limit reached (the limit is ' + that.settings.WRAPPER_LIMIT + ')', 302), adChain);\n    }\n\n    async.waterfall([\n      function (next) {\n        if (utilities.isString(adTagUrl)) {\n          requestVASTAd(adTagUrl, next);\n        } else {\n          next(null, adTagUrl);\n        }\n      },\n      buildAd\n    ], function (error, ad) {\n      if (ad) {\n        adChain.push(ad);\n      }\n\n      if (error) {\n        return callback(error, adChain);\n      }\n\n      if (ad.wrapper) {\n        return getAd(ad.wrapper.VASTAdTagURI, adChain, callback);\n      }\n\n      return callback(null, adChain);\n    });\n  }\n\n  function buildAd (adJxonTree, callback) {\n    try {\n      var ad = new Ad(adJxonTree);\n      callback(validateAd(ad), ad);\n    } catch (e) {\n      callback(new VASTError('on VASTClient.getVASTAd.buildAd, error parsing xml', 100), null);\n    }\n  }\n\n  function validateAd (ad) {\n    var wrapper = ad.wrapper;\n    var inLine = ad.inLine;\n    var errMsgPrefix = 'on VASTClient.getVASTAd.validateAd, ';\n\n    if (inLine && wrapper) {\n      return new VASTError(errMsgPrefix + 'InLine and Wrapper both found on the same Ad', 101);\n    }\n\n    if (!inLine && !wrapper) {\n      return new VASTError(errMsgPrefix + 'nor wrapper nor inline elements found on the Ad', 101);\n    }\n\n    if (inLine && !inLine.isSupported()) {\n      return new VASTError(errMsgPrefix + 'could not find MediaFile that is supported by this video player', 403);\n    }\n\n    if (wrapper && !wrapper.VASTAdTagURI) {\n      return new VASTError(errMsgPrefix + 'missing VASTAdTagURI in wrapper', 101);\n    }\n\n    return null;\n  }\n\n  function requestVASTAd (adTagUrl, callback) {\n    that._requestVASTXml(adTagUrl, function (error, xmlStr) {\n      if (error) {\n        return callback(error);\n      }\n      try {\n        var vastTree = xml.toJXONTree(xmlStr);\n        callback(validateVASTTree(vastTree), vastTree.ad);\n      } catch (e) {\n        callback(new VASTError('on VASTClient.getVASTAd.requestVASTAd, error parsing xml', 100));\n      }\n    });\n  }\n};\n\nVASTClient.prototype._requestVASTXml = function requestVASTXml (adTagUrl, callback) {\n  try {\n    if (utilities.isFunction(adTagUrl)) {\n      adTagUrl(requestHandler);\n    } else {\n      logger.info('requesting adTagUrl: ' + adTagUrl);\n      http.get(adTagUrl, requestHandler, {\n        withCredentials: true\n      });\n    }\n  } catch (e) {\n    callback(e);\n  }\n\n  // **** Local functions **** //\n  function requestHandler (error, response, status) {\n    if (error) {\n      var errStr1 = 'on VASTClient.requestVastXML, HTTP request error with status \\'' + status + '\\'';\n      var errStr2 = 'on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn';\n      var errMsg = utilities.isDefined(status) ? errStr1 : errStr2;\n\n      return callback(new VASTError(errMsg, 301), null);\n    }\n\n    callback(null, response);\n  }\n};\n\nVASTClient.prototype._buildVASTResponse = function buildVASTResponse (adsChain) {\n  var response = new VASTResponse();\n  addAdsToResponse(response, adsChain);\n  validateResponse(response);\n\n  return response;\n\n  // **** Local Function **** //\n  function addAdsToResponse (response, ads) {\n    ads.forEach(function (ad) {\n      response.addAd(ad);\n    });\n  }\n\n  function validateResponse (response) {\n    var progressEvents = response.trackingEvents.progress;\n\n    if (!response.hasLinear()) {\n      throw new VASTError('on VASTClient._buildVASTResponse, Received an Ad type that is not supported', 200);\n    }\n\n    if (response.duration === undefined) {\n      throw new VASTError('on VASTClient._buildVASTResponse, Missing duration field in VAST response', 101);\n    }\n\n    if (progressEvents) {\n      progressEvents.forEach(function (progressEvent) {\n        if (!utilities.isNumber(progressEvent.offset)) {\n          throw new VASTError('on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event', 101);\n        }\n      });\n    }\n  }\n};\n\nVASTClient.prototype._trackError = function (error, adChain) {\n  if (!utilities.isArray(adChain) || adChain.length === 0) {   // There is nothing to track\n    return;\n  }\n\n  var errorURLMacros = [];\n  adChain.forEach(addErrorUrlMacros);\n  vastUtil.track(errorURLMacros, {ERRORCODE: error.code || 900});  // 900 <== Undefined error\n\n  // **** Local Functions **** //\n  function addErrorUrlMacros (ad) {\n    /*\n    if (ad.wrapper && ad.wrapper.error && typeof(ad.wrapper.error) === 'string') {\n        errorURLMacros.push(ad.wrapper.error);\n    }\n\n    if (ad.inLine && ad.inLine.error && typeof(ad.inLine.error) === 'string') {\n    \terrorURLMacros.push(ad.inLine.error);\n    }\n    */\n\n      if (ad.wrapper && ad.wrapper.errors && Array.isArray(ad.wrapper.errors)) {\n    \t  errorURLMacros = errorURLMacros.concat(ad.wrapper.errors);\n      }\n\n      if (ad.inLine && ad.inLine.errors && Array.isArray(ad.inLine.errors)) {\n    \t  errorURLMacros = errorURLMacros.concat(ad.inLine.errors);\n      }\n  }\n};\n\nmodule.exports = VASTClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WQVNUQ2xpZW50LmpzPzQ5NjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsU0FBUyxtQkFBTyxDQUFDLDBDQUFNO0FBQ3ZCLGdCQUFnQixtQkFBTyxDQUFDLHdEQUFhO0FBQ3JDLG1CQUFtQixtQkFBTyxDQUFDLDhEQUFnQjtBQUMzQyxlQUFlLG1CQUFPLENBQUMsc0RBQVk7O0FBRW5DLFlBQVksbUJBQU8sQ0FBQyx1REFBbUI7QUFDdkMsV0FBVyxtQkFBTyxDQUFDLHFEQUFrQjtBQUNyQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7QUFDdEQsVUFBVSxtQkFBTyxDQUFDLG1EQUFpQjs7QUFFbkMsYUFBYSxtQkFBTyxDQUFDLHVFQUEyQjs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkIsRUFBRTs7QUFFakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvVkFTVENsaWVudC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIEFkID0gcmVxdWlyZSgnLi9BZCcpO1xudmFyIFZBU1RFcnJvciA9IHJlcXVpcmUoJy4vVkFTVEVycm9yJyk7XG52YXIgVkFTVFJlc3BvbnNlID0gcmVxdWlyZSgnLi9WQVNUUmVzcG9uc2UnKTtcbnZhciB2YXN0VXRpbCA9IHJlcXVpcmUoJy4vdmFzdFV0aWwnKTtcblxudmFyIGFzeW5jID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvYXN5bmMnKTtcbnZhciBodHRwID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvaHR0cCcpLmh0dHA7XG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xuXG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvY29uc29sZUxvZ2dlcicpO1xuXG5mdW5jdGlvbiBWQVNUQ2xpZW50IChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBWQVNUQ2xpZW50KSkge1xuICAgIHJldHVybiBuZXcgVkFTVENsaWVudChvcHRpb25zKTtcbiAgfVxuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgV1JBUFBFUl9MSU1JVDogb3B0aW9ucyAmJiBvcHRpb25zLndyYXBwZXJMaW1pdCAmJiBvcHRpb25zLndyYXBwZXJMaW1pdCA+IDAgPyBvcHRpb25zLndyYXBwZXJMaW1pdCA6IDVcbiAgfTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5zZXR0aW5ncyA9IHV0aWxpdGllcy5leHRlbmQoe30sIG9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKTtcbiAgdGhpcy5lcnJvclVSTE1hY3JvcyA9IFtdO1xufVxuXG5WQVNUQ2xpZW50LnByb3RvdHlwZS5nZXRWQVNUUmVzcG9uc2UgPSBmdW5jdGlvbiBnZXRWQVNUUmVzcG9uc2UgKGFkVGFnVXJsLCBjYWxsYmFjaykge1xuICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgdmFyIGVycm9yID0gc2FuaXR5Q2hlY2soYWRUYWdVcmwsIGNhbGxiYWNrKTtcbiAgaWYgKGVycm9yKSB7XG4gICAgaWYgKHV0aWxpdGllcy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cblxuICBhc3luYy53YXRlcmZhbGwoW1xuICAgICAgdGhpcy5fZ2V0VkFTVEFkLmJpbmQodGhpcywgYWRUYWdVcmwpLFxuICAgICAgYnVpbGRWQVNUUmVzcG9uc2VcbiAgICBdLFxuICAgIGNhbGxiYWNrKTtcblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gIGZ1bmN0aW9uIGJ1aWxkVkFTVFJlc3BvbnNlIChhZHNDaGFpbiwgY2IpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHJlc3BvbnNlID0gdGhhdC5fYnVpbGRWQVNUUmVzcG9uc2UoYWRzQ2hhaW4pO1xuICAgICAgY2IobnVsbCwgcmVzcG9uc2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNiKGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNhbml0eUNoZWNrIChhZFRhZ1VybCwgY2IpIHtcbiAgICBpZiAoIWFkVGFnVXJsKSB7XG4gICAgICByZXR1cm4gbmV3IFZBU1RFcnJvcignb24gVkFTVENsaWVudC5nZXRWQVNUUmVzcG9uc2UsIG1pc3NpbmcgYWQgdGFnIFVSTCcpO1xuICAgIH1cblxuICAgIGlmICghdXRpbGl0aWVzLmlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICByZXR1cm4gbmV3IFZBU1RFcnJvcignb24gVkFTVENsaWVudC5nZXRWQVNUUmVzcG9uc2UsIG1pc3NpbmcgY2FsbGJhY2sgZnVuY3Rpb24nKTtcbiAgICB9XG4gIH1cbn07XG5cblZBU1RDbGllbnQucHJvdG90eXBlLl9nZXRWQVNUQWQgPSBmdW5jdGlvbiAoYWRUYWdVcmwsIGNhbGxiYWNrKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcblxuICBnZXRBZFdhdGVyZmFsbChhZFRhZ1VybCwgZnVuY3Rpb24gKGVycm9yLCB2YXN0VHJlZSkge1xuICAgIHZhciB3YXRlcmZhbGxBZHMgPSB2YXN0VHJlZSAmJiB1dGlsaXRpZXMuaXNBcnJheSh2YXN0VHJlZS5hZHMpID8gdmFzdFRyZWUuYWRzIDogbnVsbDtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRoYXQuX3RyYWNrRXJyb3IoZXJyb3IsIHdhdGVyZmFsbEFkcyk7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIHdhdGVyZmFsbEFkcyk7XG4gICAgfVxuICAgIGdldEFkKHdhdGVyZmFsbEFkcy5zaGlmdCgpLCBbXSwgd2F0ZXJmYWxsSGFuZGxlcik7XG5cbiAgICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gICAgZnVuY3Rpb24gd2F0ZXJmYWxsSGFuZGxlciAoZXJyb3IsIGFkQ2hhaW4pIHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aGF0Ll90cmFja0Vycm9yKGVycm9yLCBhZENoYWluKTtcbiAgICAgICAgaWYgKHdhdGVyZmFsbEFkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZ2V0QWQod2F0ZXJmYWxsQWRzLnNoaWZ0KCksIFtdLCB3YXRlcmZhbGxIYW5kbGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhlcnJvciwgYWRDaGFpbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIGFkQ2hhaW4pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiBnZXRBZFdhdGVyZmFsbCAoYWRUYWdVcmwsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJlcXVlc3RWYXN0WE1MID0gdGhhdC5fcmVxdWVzdFZBU1RYbWwuYmluZCh0aGF0LCBhZFRhZ1VybCk7XG4gICAgYXN5bmMud2F0ZXJmYWxsKFtcbiAgICAgIHJlcXVlc3RWYXN0WE1MLFxuICAgICAgYnVpbGRWYXN0V2F0ZXJmYWxsXG4gICAgXSwgY2FsbGJhY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRWYXN0V2F0ZXJmYWxsICh4bWxTdHIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHZhc3RUcmVlO1xuICAgIHRyeSB7XG4gICAgICB2YXN0VHJlZSA9IHhtbC50b0pYT05UcmVlKHhtbFN0cik7XG4gICAgICBsb2dnZXIuZGVidWcoJ2J1aWx0IEpYT05UcmVlIGZyb20gVkFTVCByZXNwb25zZTonLCB2YXN0VHJlZSk7XG5cbiAgICAgIGlmICh1dGlsaXRpZXMuaXNBcnJheSh2YXN0VHJlZS5hZCkpIHtcbiAgICAgICAgdmFzdFRyZWUuYWRzID0gdmFzdFRyZWUuYWQ7XG4gICAgICB9IGVsc2UgaWYgKHZhc3RUcmVlLmFkKSB7XG4gICAgICAgIHZhc3RUcmVlLmFkcyA9IFt2YXN0VHJlZS5hZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXN0VHJlZS5hZHMgPSBbXTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKHZhbGlkYXRlVkFTVFRyZWUodmFzdFRyZWUpLCB2YXN0VHJlZSk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYWxsYmFjayhuZXcgVkFTVEVycm9yKCdvbiBWQVNUQ2xpZW50LmdldFZBU1RBZC5idWlsZFZhc3RXYXRlcmZhbGwsIGVycm9yIHBhcnNpbmcgeG1sJywgMTAwKSwgbnVsbCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGVWQVNUVHJlZSAodmFzdFRyZWUpIHtcbiAgICB2YXIgdmFzdFZlcnNpb24gPSB4bWwuYXR0cih2YXN0VHJlZSwgJ3ZlcnNpb24nKTtcblxuICAgIGlmICghdmFzdFRyZWUuYWQpIHtcbiAgICAgIHJldHVybiBuZXcgVkFTVEVycm9yKCdvbiBWQVNUQ2xpZW50LmdldFZBU1RBZC52YWxpZGF0ZVZBU1RUcmVlLCBubyBBZCBpbiBWQVNUIHRyZWUnLCAzMDMpO1xuICAgIH1cblxuICAgIC8vIGlmICh2YXN0VmVyc2lvbiAmJiAodmFzdFZlcnNpb24gIT0gMyAmJiB2YXN0VmVyc2lvbiAhPSAyKSkge1xuICAgIGlmICh2YXN0VmVyc2lvbiAmJiAodmFzdFZlcnNpb24gIT09IDMgJiYgdmFzdFZlcnNpb24gIT09IDIgJiYgdmFzdFZlcnNpb24gIT09IDQpKSB7XG4gICAgICByZXR1cm4gbmV3IFZBU1RFcnJvcignb24gVkFTVENsaWVudC5nZXRWQVNUQWQudmFsaWRhdGVWQVNUVHJlZSwgbm90IHN1cHBvcnRlZCBWQVNUIHZlcnNpb24gXCInICsgdmFzdFZlcnNpb24gKyAnXCInLCAxMDIpO1xuICAgIH1cbiAgICB3aW5kb3cubW9sX3Zhc3RWZXJzaW9uID0gdmFzdFZlcnNpb247XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFkIChhZFRhZ1VybCwgYWRDaGFpbiwgY2FsbGJhY2spIHtcbiAgICBpZiAoYWRDaGFpbi5sZW5ndGggPj0gdGhhdC5zZXR0aW5ncy5XUkFQUEVSX0xJTUlUKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IFZBU1RFcnJvcignb24gVkFTVENsaWVudC5nZXRWQVNUQWQuZ2V0QWQsIHBsYXllclxcJ3Mgd3JhcHBlciBsaW1pdCByZWFjaGVkICh0aGUgbGltaXQgaXMgJyArIHRoYXQuc2V0dGluZ3MuV1JBUFBFUl9MSU1JVCArICcpJywgMzAyKSwgYWRDaGFpbik7XG4gICAgfVxuXG4gICAgYXN5bmMud2F0ZXJmYWxsKFtcbiAgICAgIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIGlmICh1dGlsaXRpZXMuaXNTdHJpbmcoYWRUYWdVcmwpKSB7XG4gICAgICAgICAgcmVxdWVzdFZBU1RBZChhZFRhZ1VybCwgbmV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dChudWxsLCBhZFRhZ1VybCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBidWlsZEFkXG4gICAgXSwgZnVuY3Rpb24gKGVycm9yLCBhZCkge1xuICAgICAgaWYgKGFkKSB7XG4gICAgICAgIGFkQ2hhaW4ucHVzaChhZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IsIGFkQ2hhaW4pO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWQud3JhcHBlcikge1xuICAgICAgICByZXR1cm4gZ2V0QWQoYWQud3JhcHBlci5WQVNUQWRUYWdVUkksIGFkQ2hhaW4sIGNhbGxiYWNrKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGFkQ2hhaW4pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRBZCAoYWRKeG9uVHJlZSwgY2FsbGJhY2spIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGFkID0gbmV3IEFkKGFkSnhvblRyZWUpO1xuICAgICAgY2FsbGJhY2sodmFsaWRhdGVBZChhZCksIGFkKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYWxsYmFjayhuZXcgVkFTVEVycm9yKCdvbiBWQVNUQ2xpZW50LmdldFZBU1RBZC5idWlsZEFkLCBlcnJvciBwYXJzaW5nIHhtbCcsIDEwMCksIG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlQWQgKGFkKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBhZC53cmFwcGVyO1xuICAgIHZhciBpbkxpbmUgPSBhZC5pbkxpbmU7XG4gICAgdmFyIGVyck1zZ1ByZWZpeCA9ICdvbiBWQVNUQ2xpZW50LmdldFZBU1RBZC52YWxpZGF0ZUFkLCAnO1xuXG4gICAgaWYgKGluTGluZSAmJiB3cmFwcGVyKSB7XG4gICAgICByZXR1cm4gbmV3IFZBU1RFcnJvcihlcnJNc2dQcmVmaXggKyAnSW5MaW5lIGFuZCBXcmFwcGVyIGJvdGggZm91bmQgb24gdGhlIHNhbWUgQWQnLCAxMDEpO1xuICAgIH1cblxuICAgIGlmICghaW5MaW5lICYmICF3cmFwcGVyKSB7XG4gICAgICByZXR1cm4gbmV3IFZBU1RFcnJvcihlcnJNc2dQcmVmaXggKyAnbm9yIHdyYXBwZXIgbm9yIGlubGluZSBlbGVtZW50cyBmb3VuZCBvbiB0aGUgQWQnLCAxMDEpO1xuICAgIH1cblxuICAgIGlmIChpbkxpbmUgJiYgIWluTGluZS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICByZXR1cm4gbmV3IFZBU1RFcnJvcihlcnJNc2dQcmVmaXggKyAnY291bGQgbm90IGZpbmQgTWVkaWFGaWxlIHRoYXQgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgdmlkZW8gcGxheWVyJywgNDAzKTtcbiAgICB9XG5cbiAgICBpZiAod3JhcHBlciAmJiAhd3JhcHBlci5WQVNUQWRUYWdVUkkpIHtcbiAgICAgIHJldHVybiBuZXcgVkFTVEVycm9yKGVyck1zZ1ByZWZpeCArICdtaXNzaW5nIFZBU1RBZFRhZ1VSSSBpbiB3cmFwcGVyJywgMTAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcXVlc3RWQVNUQWQgKGFkVGFnVXJsLCBjYWxsYmFjaykge1xuICAgIHRoYXQuX3JlcXVlc3RWQVNUWG1sKGFkVGFnVXJsLCBmdW5jdGlvbiAoZXJyb3IsIHhtbFN0cikge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdmFzdFRyZWUgPSB4bWwudG9KWE9OVHJlZSh4bWxTdHIpO1xuICAgICAgICBjYWxsYmFjayh2YWxpZGF0ZVZBU1RUcmVlKHZhc3RUcmVlKSwgdmFzdFRyZWUuYWQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWxsYmFjayhuZXcgVkFTVEVycm9yKCdvbiBWQVNUQ2xpZW50LmdldFZBU1RBZC5yZXF1ZXN0VkFTVEFkLCBlcnJvciBwYXJzaW5nIHhtbCcsIDEwMCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG5WQVNUQ2xpZW50LnByb3RvdHlwZS5fcmVxdWVzdFZBU1RYbWwgPSBmdW5jdGlvbiByZXF1ZXN0VkFTVFhtbCAoYWRUYWdVcmwsIGNhbGxiYWNrKSB7XG4gIHRyeSB7XG4gICAgaWYgKHV0aWxpdGllcy5pc0Z1bmN0aW9uKGFkVGFnVXJsKSkge1xuICAgICAgYWRUYWdVcmwocmVxdWVzdEhhbmRsZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIuaW5mbygncmVxdWVzdGluZyBhZFRhZ1VybDogJyArIGFkVGFnVXJsKTtcbiAgICAgIGh0dHAuZ2V0KGFkVGFnVXJsLCByZXF1ZXN0SGFuZGxlciwge1xuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhbGxiYWNrKGUpO1xuICB9XG5cbiAgLy8gKioqKiBMb2NhbCBmdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiByZXF1ZXN0SGFuZGxlciAoZXJyb3IsIHJlc3BvbnNlLCBzdGF0dXMpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHZhciBlcnJTdHIxID0gJ29uIFZBU1RDbGllbnQucmVxdWVzdFZhc3RYTUwsIEhUVFAgcmVxdWVzdCBlcnJvciB3aXRoIHN0YXR1cyBcXCcnICsgc3RhdHVzICsgJ1xcJyc7XG4gICAgICB2YXIgZXJyU3RyMiA9ICdvbiBWQVNUQ2xpZW50LnJlcXVlc3RWYXN0WE1MLCBFcnJvciBnZXR0aW5nIHRoZSB0aGUgVkFTVCBYTUwgd2l0aCBoZSBwYXNzZWQgYWRUYWdYTUwgZm4nO1xuICAgICAgdmFyIGVyck1zZyA9IHV0aWxpdGllcy5pc0RlZmluZWQoc3RhdHVzKSA/IGVyclN0cjEgOiBlcnJTdHIyO1xuXG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IFZBU1RFcnJvcihlcnJNc2csIDMwMSksIG51bGwpO1xuICAgIH1cblxuICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTtcbiAgfVxufTtcblxuVkFTVENsaWVudC5wcm90b3R5cGUuX2J1aWxkVkFTVFJlc3BvbnNlID0gZnVuY3Rpb24gYnVpbGRWQVNUUmVzcG9uc2UgKGFkc0NoYWluKSB7XG4gIHZhciByZXNwb25zZSA9IG5ldyBWQVNUUmVzcG9uc2UoKTtcbiAgYWRkQWRzVG9SZXNwb25zZShyZXNwb25zZSwgYWRzQ2hhaW4pO1xuICB2YWxpZGF0ZVJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICByZXR1cm4gcmVzcG9uc2U7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbiAqKioqIC8vXG4gIGZ1bmN0aW9uIGFkZEFkc1RvUmVzcG9uc2UgKHJlc3BvbnNlLCBhZHMpIHtcbiAgICBhZHMuZm9yRWFjaChmdW5jdGlvbiAoYWQpIHtcbiAgICAgIHJlc3BvbnNlLmFkZEFkKGFkKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlUmVzcG9uc2UgKHJlc3BvbnNlKSB7XG4gICAgdmFyIHByb2dyZXNzRXZlbnRzID0gcmVzcG9uc2UudHJhY2tpbmdFdmVudHMucHJvZ3Jlc3M7XG5cbiAgICBpZiAoIXJlc3BvbnNlLmhhc0xpbmVhcigpKSB7XG4gICAgICB0aHJvdyBuZXcgVkFTVEVycm9yKCdvbiBWQVNUQ2xpZW50Ll9idWlsZFZBU1RSZXNwb25zZSwgUmVjZWl2ZWQgYW4gQWQgdHlwZSB0aGF0IGlzIG5vdCBzdXBwb3J0ZWQnLCAyMDApO1xuICAgIH1cblxuICAgIGlmIChyZXNwb25zZS5kdXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgVkFTVEVycm9yKCdvbiBWQVNUQ2xpZW50Ll9idWlsZFZBU1RSZXNwb25zZSwgTWlzc2luZyBkdXJhdGlvbiBmaWVsZCBpbiBWQVNUIHJlc3BvbnNlJywgMTAxKTtcbiAgICB9XG5cbiAgICBpZiAocHJvZ3Jlc3NFdmVudHMpIHtcbiAgICAgIHByb2dyZXNzRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKHByb2dyZXNzRXZlbnQpIHtcbiAgICAgICAgaWYgKCF1dGlsaXRpZXMuaXNOdW1iZXIocHJvZ3Jlc3NFdmVudC5vZmZzZXQpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZBU1RFcnJvcignb24gVkFTVENsaWVudC5fYnVpbGRWQVNUUmVzcG9uc2UsIG1pc3Npbmcgb3Igd3Jvbmcgb2Zmc2V0IGF0dHJpYnV0ZSBvbiBwcm9ncmVzcyB0cmFja2luZyBldmVudCcsIDEwMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuVkFTVENsaWVudC5wcm90b3R5cGUuX3RyYWNrRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGFkQ2hhaW4pIHtcbiAgaWYgKCF1dGlsaXRpZXMuaXNBcnJheShhZENoYWluKSB8fCBhZENoYWluLmxlbmd0aCA9PT0gMCkgeyAgIC8vIFRoZXJlIGlzIG5vdGhpbmcgdG8gdHJhY2tcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZXJyb3JVUkxNYWNyb3MgPSBbXTtcbiAgYWRDaGFpbi5mb3JFYWNoKGFkZEVycm9yVXJsTWFjcm9zKTtcbiAgdmFzdFV0aWwudHJhY2soZXJyb3JVUkxNYWNyb3MsIHtFUlJPUkNPREU6IGVycm9yLmNvZGUgfHwgOTAwfSk7ICAvLyA5MDAgPD09IFVuZGVmaW5lZCBlcnJvclxuXG4gIC8vICoqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cbiAgZnVuY3Rpb24gYWRkRXJyb3JVcmxNYWNyb3MgKGFkKSB7XG4gICAgLypcbiAgICBpZiAoYWQud3JhcHBlciAmJiBhZC53cmFwcGVyLmVycm9yICYmIHR5cGVvZihhZC53cmFwcGVyLmVycm9yKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZXJyb3JVUkxNYWNyb3MucHVzaChhZC53cmFwcGVyLmVycm9yKTtcbiAgICB9XG5cbiAgICBpZiAoYWQuaW5MaW5lICYmIGFkLmluTGluZS5lcnJvciAmJiB0eXBlb2YoYWQuaW5MaW5lLmVycm9yKSA9PT0gJ3N0cmluZycpIHtcbiAgICBcdGVycm9yVVJMTWFjcm9zLnB1c2goYWQuaW5MaW5lLmVycm9yKTtcbiAgICB9XG4gICAgKi9cblxuICAgICAgaWYgKGFkLndyYXBwZXIgJiYgYWQud3JhcHBlci5lcnJvcnMgJiYgQXJyYXkuaXNBcnJheShhZC53cmFwcGVyLmVycm9ycykpIHtcbiAgICBcdCAgZXJyb3JVUkxNYWNyb3MgPSBlcnJvclVSTE1hY3Jvcy5jb25jYXQoYWQud3JhcHBlci5lcnJvcnMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWQuaW5MaW5lICYmIGFkLmluTGluZS5lcnJvcnMgJiYgQXJyYXkuaXNBcnJheShhZC5pbkxpbmUuZXJyb3JzKSkge1xuICAgIFx0ICBlcnJvclVSTE1hY3JvcyA9IGVycm9yVVJMTWFjcm9zLmNvbmNhdChhZC5pbkxpbmUuZXJyb3JzKTtcbiAgICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWQVNUQ2xpZW50O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/VASTClient.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/VASTError.js":
/*!*******************************************!*\
  !*** ./src/scripts/ads/vast/VASTError.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction VASTError (message, code) {\n  this.message = 'VAST Error: ' + (message || '');\n  if (code) {\n    this.code = code;\n  }\n}\n\nVASTError.prototype = new Error();\nVASTError.prototype.name = 'VAST Error';\n\nmodule.exports = VASTError;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WQVNURXJyb3IuanM/ZWM3OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L1ZBU1RFcnJvci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gVkFTVEVycm9yIChtZXNzYWdlLCBjb2RlKSB7XG4gIHRoaXMubWVzc2FnZSA9ICdWQVNUIEVycm9yOiAnICsgKG1lc3NhZ2UgfHwgJycpO1xuICBpZiAoY29kZSkge1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gIH1cbn1cblxuVkFTVEVycm9yLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xuVkFTVEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ1ZBU1QgRXJyb3InO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZBU1RFcnJvcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/VASTError.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/VASTIntegrator.js":
/*!************************************************!*\
  !*** ./src/scripts/ads/vast/VASTIntegrator.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/**\n * Inner helper class that deals with the logic of the individual steps needed to setup an ad in the player.\n *\n * @param player {object} instance of the player that will play the ad. It assumes that the videojs-contrib-ads plugin\n *                        has been initialized when you use its utility functions.\n *\n * @constructor\n */\n\nvar VASTResponse = __webpack_require__(/*! ./VASTResponse */ \"./src/scripts/ads/vast/VASTResponse.js\");\nvar VASTError = __webpack_require__(/*! ./VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\nvar VASTTracker = __webpack_require__(/*! ./VASTTracker */ \"./src/scripts/ads/vast/VASTTracker.js\");\nvar vastUtil = __webpack_require__(/*! ./vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\n\nvar async = __webpack_require__(/*! ../../utils/async */ \"./src/scripts/utils/async.js\");\nvar dom = __webpack_require__(/*! ../../utils/dom */ \"./src/scripts/utils/dom.js\");\nvar playerUtils = __webpack_require__(/*! ../../utils/playerUtils */ \"./src/scripts/utils/playerUtils.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nvar logger = __webpack_require__(/*! ../../utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nfunction VASTIntegrator (player) {\n  if (!(this instanceof VASTIntegrator)) {\n    return new VASTIntegrator(player);\n  }\n\n  this.player = player;\n  this.enableFullscreenClickIFrame = false;\n}\n\nVASTIntegrator.prototype.playAd = function playAd (vastResponse, callback) {\n  var that = this;\n  callback = callback || utilities.noop;\n\n  if (!(vastResponse instanceof VASTResponse)) {\n    return callback(new VASTError('On VASTIntegrator, missing required VASTResponse'));\n  }\n\n  async.waterfall([\n    function (next) {\n      next(null, vastResponse);\n    },\n    this._selectAdSource.bind(this),\n    this._createVASTTracker.bind(this),\n    this._addClickThrough.bind(this),\n    this._addClickThroughDivBlocker.bind(this),\n    this._addSkipButton.bind(this),\n    this._setupEvents.bind(this),\n    this._playSelectedAd.bind(this)\n  ], function (error, response) {\n    if (error && response) {\n        if (window.MoatApiReference) {\n        \twindow.MoatApiReference.dispatchEvent({type: 'AdError', adVolume: that.player.volume()});\n        }\n      that._trackError(error, response);\n    }\n    callback(error, response);\n  });\n\n  this._adUnit = {\n    _src: null,\n    type: 'VAST',\n    pauseAd: function () {\n      that.player.pause(true);\n    },\n\n    resumeAd: function () {\n      that.player.play(true);\n    },\n\n    isPaused: function () {\n      return that.player.paused(true);\n    },\n\n    getSrc: function () {\n      return this._src;\n    }\n  };\n\n  return this._adUnit;\n};\n\nVASTIntegrator.prototype._selectAdSource = function selectAdSource (response, callback) {\n  var source;\n\n  var playerWidth = dom.getDimension(this.player.el()).width;\n  response.mediaFiles.sort(function compareTo (a, b) {\n    var deltaA = Math.abs(playerWidth - a.width);\n    var deltaB = Math.abs(playerWidth - b.width);\n    return deltaA - deltaB;\n  });\n\n  source = this.player.selectSource(response.mediaFiles).source;\n  if (source) {\n    this.player.trigger({type: 'trace.message', data: {message: 'Playing ' + source.src + ' (type = ' + source.type + ')'}});\n  }\n\n  if (source) {\n    logger.info('selected source: ', source);\n    if (this._adUnit) {\n      this._adUnit._src = source;\n    }\n    return callback(null, source, response);\n  }\n\n  // code 403 <== Couldn't find MediaFile that is supported by this video player\n  callback(new VASTError('Could not find Ad mediafile supported by this player', 403), response);\n};\n\nVASTIntegrator.prototype._createVASTTracker = function createVASTTracker (adMediaFile, response, callback) {\n  try {\n    callback(null, adMediaFile, new VASTTracker(adMediaFile.src, response), response);\n  } catch (e) {\n    callback(e, response);\n  }\n};\n\nVASTIntegrator.prototype._setupEvents = function setupEvents (adMediaFile, tracker, response, callback) {\n  var previouslyMuted;\n  var player = this.player;\n  player.on('fullscreenchange', trackFullscreenChange);\n  player.on('vast.adStart', trackImpressions);\n  player.on('pause', trackPause);\n  player.on('timeupdate', trackProgress);\n  player.on('volumechange', trackVolumeChange);\n\n  playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], unbindEvents);\n  playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel', 'vast.adSkip'], function (evt) {\n    if (evt.type === 'vast.adEnd') {\n      tracker.trackComplete();\n    }\n    if (window.MoatApiReference) {\n    \tvar type = evt.type === 'vast.adEnd' ? 'AdVideoComplete' : 'AdStopped';\n  \t  window.MoatApiReference.dispatchEvent({type: type, adVolume: player.volume()});\n    }\n  });\n\n  player.one('adStop', function () {\n\t player.trigger('vast.adsCancel');\n  });\n\n  return callback(null, adMediaFile, response);\n\n  // **** Local Functions **** //\n  function unbindEvents () {\n    player.off('fullscreenchange', trackFullscreenChange);\n    player.off('vast.adStart', trackImpressions);\n    player.off('pause', trackPause);\n    player.off('timeupdate', trackProgress);\n    player.off('volumechange', trackVolumeChange);\n  }\n\n  function trackFullscreenChange () {\n    if (player.isFullscreen()) {\n      tracker.trackFullscreen();\n    } else {\n      tracker.trackExitFullscreen();\n    }\n  }\n\n  function trackPause () {\n    // NOTE: Whenever a video ends the video Element triggers a 'pause' event before the 'ended' event.\n    //       We should not track this pause event because it makes the VAST tracking confusing again we use a\n    //       Threshold of 2 seconds to prevent false positives on IOS.\n\t\tif (window._molSettings.breakDuration) {\n\t\t\tif (window._molSettings.realVideoDuration) {\n\t\t\t    if (Math.abs(window._molSettings.realVideoDuration - player.currentTime()) < 2) {\n\t\t\t        return;\n\t\t\t    }\n\t\t\t}\n\t\t}\n\t\telse if (Math.abs(player.duration() - player.currentTime()) < 2) {\n\t      return;\n\t    }\n\n    if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdPaused', adVolume: player.volume()});\n    }\n    tracker.trackPause();\n    playerUtils.showBigPlayButton(player, true);\n    playerUtils.once(player, ['play', 'vast.adEnd', 'vast.adsCancel'], function (evt) {\n      if (evt.type === 'play') {\n\t    if (window.MoatApiReference) {\n\t    \t  window.MoatApiReference.dispatchEvent({type: 'AdPlaying', adVolume: player.volume()});\n\t    }\n        tracker.trackResume();\n        playerUtils.showBigPlayButton(player, false);\n      }\n    });\n  }\n\n  function trackProgress () {\n    var currentTimeInMs = player.currentTime() * 1000;\n    tracker.trackProgress(currentTimeInMs);\n  }\n\n  function trackImpressions () {\n    if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdImpression', adVolume: player.volume()});\n    }\n    tracker.trackImpressions();\n    tracker.trackCreativeView();\n  }\n\n  function trackVolumeChange () {\n    if (window.MoatApiReference) {\n  \t  window.MoatApiReference.dispatchEvent({type: 'AdVolumeChange', adVolume: player.volume()});\n    }\n    var muted = player.muted();\n    if (muted) {\n      tracker.trackMute();\n    } else if (previouslyMuted) {\n      tracker.trackUnmute();\n    }\n    previouslyMuted = muted;\n  }\n};\n\nVASTIntegrator.prototype._addSkipButton = function addSkipButton (source, tracker, response, callback) {\n  var skipOffsetInSec;\n  var that = this;\n\n  if (utilities.isNumber(response.skipoffset)) {\n    skipOffsetInSec = response.skipoffset / 1000;\n    addSkipButtonToPlayer(this.player, skipOffsetInSec);\n  }\n  callback(null, source, tracker, response);\n\n  // **** Local function **** //\n  function addSkipButtonToPlayer (player, skipOffset) {\n    var skipButton = createSkipButton(player);\n    var updateSkipButton = updateSkipButtonState.bind(that, skipButton, skipOffset, player);\n\n    player.el().appendChild(skipButton);\n    player.on('timeupdate', updateSkipButton);\n\n    playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], removeSkipButton);\n\n    function removeSkipButton () {\n      player.off('timeupdate', updateSkipButton);\n      dom.remove(skipButton);\n    }\n  }\n\n  function createSkipButton (player) {\n    var skipButton = window.document.createElement('div');\n    dom.addClass(skipButton, 'vast-skip-button');\n    skipButton.id = 'adSkipButton';\n\n    skipButton.onclick = function (e) {\n      if (dom.hasClass(skipButton, 'enabled')) {\n          if (window.MoatApiReference) {\n        \t  window.MoatApiReference.dispatchEvent({type: 'AdSkipped', adVolume: player.volume()});\n          }\n        tracker.trackSkip();\n        player.trigger('vast.adSkip');\n      }\n      playerUtils.showBigPlayButton(player, false);\n\n      // We prevent event propagation to avoid problems with the clickThrough and so on\n      if (window.Event.prototype.stopPropagation !== undefined) {\n        e.stopPropagation();\n      } else {\n        return false;\n      }\n    };\n\n    return skipButton;\n  }\n\n  function updateSkipButtonState (skipButton, skipOffset, player) {\n    var timeLeft = Math.ceil(skipOffset - player.currentTime());\n    // if skip button enabled never show before-button skip text\n    if (timeLeft > 0 && !dom.hasClass(skipButton, 'enabled')) {\n        skipButton.innerHTML = '<p class=\"vast-skip-button-text\">' + window._molSettings.skipText.replace('%%TIME%%', utilities.toFixedDigits(timeLeft, 2)) + '</p>';\n    } else {\n      if (!dom.hasClass(skipButton, 'enabled')) {\n        dom.addClass(skipButton, 'enabled');\n        skipButton.innerHTML = window._molSettings.skipButtonText;\n      }\n    }\n    var iframeBackButton = window.document.getElementById('iframeBackButton');\n    if (!iframeBackButton) {\n        skipButton.style.display = 'block';\n    }\n  }\n};\n\nVASTIntegrator.prototype._addClickThrough = function addClickThrough (mediaFile, tracker, response, callback) {\n  var enableFullscreenClickIFrame = this.enableFullscreenClickIFrame;\n\n  var player = this.player;\n  var blocker = createClickThroughBlocker(player, tracker, response);\n  var updateBlocker = updateBlockerURL.bind(this, blocker, response, player);\n\n  player.el().insertBefore(blocker, player.controlBar.el());\n  player.on('timeupdate', updateBlocker);\n  playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], removeBlocker);\n\n  if (enableFullscreenClickIFrame) {\n\t  player.on('fullscreenchange', updateDisplayStyle);\n  }\n\n  return callback(null, mediaFile, tracker, response);\n\n  // **** Local Functions **** //\n\n  function createClickThroughBlocker (player, tracker, response) {\n\t\tif (window._molSettings.disableClickThru) {\n\t\t    var blockerDiv = window.document.createElement('div');\n\t\t    dom.addClass(blockerDiv, 'vast-blocker');\n\t\t\treturn blockerDiv;\n\t\t}\n    var blocker = window.document.createElement('a');\n    var clickThroughMacro = response.clickThrough;\n\n    dom.addClass(blocker, 'vast-blocker');\n    // 'a' tag in iOS sometime does not navigate. We will use window.open to navigate for iOS.\n    if (!utilities.isIDevice()) {\n      blocker.href = generateClickThroughURL(clickThroughMacro, player);\n    }\n\n    if (utilities.isString(clickThroughMacro)) {\n      blocker.target = '_blank';\n    }\n\n    var clickHandler = function (e) {\n        if (player.paused()) {\n            player.play();\n\n            // We prevent event propagation to avoid problems with the player's normal pause mechanism\n            if (window.Event.prototype.stopPropagation !== undefined) {\n              e.stopPropagation();\n            }\n            return false;\n        }\n\n        player.pause();\n        tracker.trackClick();\n\n        if (window.MoatApiReference) {\n          window.MoatApiReference.dispatchEvent({type: 'AdClickThru', adVolume: player.volume()});\n        }\n        if (utilities.isIDevice()) {\n          // We are using window.open to navigate for iOS.\n          setTimeout(function () {\n            window.open(generateClickThroughURL(clickThroughMacro, player), '_blank');\n          }, 1);\n          if (window.Event.prototype.stopPropagation !== undefined) {\n              e.stopPropagation();\n          }\n          // player.pause() in iOS sometime does not work. To make sure player paused we will try pause player in 500 msecs.\n          setTimeout(function () {\n            if (!player.paused()) {\n              player.pause();\n            }\n          }, 500);\n        }\n        // Brightcove has a bug where they send an \"ended\" event if paused within a couple seconds of the video end. In this case, the listener\n        // that shows the big play button (among other things) gets removed before the handler fires. This fix makes sure the big button still appears.\n        var remaining = player.duration() - player.currentTime();\n        if (remaining < 3 && remaining > 0) {\n          setTimeout(function () {\n            playerUtils.showBigPlayButton(player, true);\n            playerUtils.once(player, ['playing', 'vast.adEnd', 'vast.adsCancel', 'vast.adSkip'], function () {\n              playerUtils.showBigPlayButton(player, false);\n            });\n          }, 500);\n        }\n    };\n\n    if (utilities.isIDevice()) {\n      blocker.ontouchend = clickHandler;\n    }\n    else {\n      blocker.onclick = clickHandler;\n    }\n\n    if (player.isFullscreen() && enableFullscreenClickIFrame) {\n    \tblocker.style.display = 'none';\n    }\n\n    return blocker;\n  }\n\n  function updateBlockerURL (blocker, response, player) {\n    // 'a' tag in iOS sometime does not navigate. We will use window.open to navigate for iOS.\n    if (!utilities.isIDevice()) {\n      blocker.href = generateClickThroughURL(response.clickThrough, player);\n    }\n  }\n\n  function generateClickThroughURL (clickThroughMacro, player) {\n    var variables = {\n      ASSETURI: mediaFile.src,\n      CONTENTPLAYHEAD: vastUtil.formatProgress(player.currentTime() * 1000)\n    };\n\n    return clickThroughMacro ? vastUtil.parseURLMacro(clickThroughMacro, variables) : '#';\n  }\n\n  function updateDisplayStyle () {\n\t  blocker.style.display = player.isFullscreen() ? 'none' : 'block';\n  }\n\n  function removeBlocker () {\n    player.off('timeupdate', updateBlocker);\n\tplayer.off('fullscreenchange', updateDisplayStyle);\n    dom.remove(blocker);\n  }\n};\n\nVASTIntegrator.prototype._addClickThroughDivBlocker = function addClickThrough (mediaFile, tracker, response, callback) {\n\tif (!this.enableFullscreenClickIFrame) {\n\t\treturn callback(null, mediaFile, tracker, response);\n\t}\n\tvar player = this.player;\n\t  var blocker = createClickThroughDiv(player, tracker, response);\n\t  var updateBlocker = updateBlockerURL.bind(this, blocker, response, player);\n\t  var blockerUrl;\n\t  var iFrame;\n\t  var iFrameBackButton;\n\n\t  player.el().insertBefore(blocker, player.controlBar.el());\n\t  player.on('timeupdate', updateBlocker);\n\t  playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], removeBlocker);\n\n\t  player.on('fullscreenchange', updateDisplayStyle);\n\n\t  return callback(null, mediaFile, tracker, response);\n\n\t  function createClickThroughDiv (player, tracker) {\n\t    var blocker = window.document.createElement('div');\n\n\t    dom.addClass(blocker, 'vast-blocker');\n\n\t\tif (!window._molSettings.disableClickThru) {\n\t\t    blocker.onclick = function (e) {\n\t\t      if (player.paused()) {\n\t\t        player.play();\n\n\t\t        // We prevent event propagation to avoid problems with the player's normal pause mechanism\n\t\t        if (window.Event.prototype.stopPropagation !== undefined) {\n\t\t          e.stopPropagation();\n\t\t        }\n\t\t        return false;\n\t\t      }\n\n\t\t      player.pause();\n\t\t      tracker.trackClick();\n\n\t\t      if (window.MoatApiReference) {\n\t\t    \t  window.MoatApiReference.dispatchEvent({type: 'AdClickThru', adVolume: player.volume()});\n\t\t      }\n\n\t\t      // create IFrame with back button\n\t\t      iFrame = window.document.createElement('iframe');\n\t\t\t  dom.addClass(iFrame, 'vast-blocker');\n\t\t\t  iFrame.src = blockerUrl;\n\t\t\t  blocker.appendChild(iFrame);\n\n\t\t\t  iFrameBackButton = window.document.createElement('div');\n\t\t\t  dom.addClass(iFrameBackButton, 'vast-back-button');\n\t\t      dom.addClass(iFrameBackButton, 'enabled');\n\t\t\t  iFrameBackButton.innerHTML = 'Back';\n\t\t\t  iFrameBackButton.id = 'iframeBackButton';\n\t\t\t  blocker.appendChild(iFrameBackButton);\n\t\t\t  iFrameBackButton.addEventListener('click', function () {\n\t\t\t\t  blocker.removeChild(iFrame);\n\t\t\t\t  iFrame = null;\n\t\t\t\t  blocker.removeChild(iFrameBackButton);\n\t\t\t\t  iFrameBackButton = null;\n\n\t\t\t\t  // show controls\n\t\t\t\t  var skipButton = window.document.getElementById('adSkipButton');\n\t\t\t\t  if (skipButton) {\n\t\t\t\t\t  skipButton.style.display = 'block';\n\t\t\t\t  }\n\t\t\t\t  player.controls(true);\n\n\t\t\t\t  if (window.Event.prototype.stopPropagation !== undefined) {\n\t\t\t          e.stopPropagation();\n\t\t\t\t  }\n\t\t\t  });\n\n\t\t\t  // hide controls\n\t\t\t  setTimeout(function () {\n\t\t\t\t  playerUtils.showBigPlayButton(player, false);\n\t\t\t  }, 1);\n\t\t\t  var skipButton = window.document.getElementById('adSkipButton');\n\t\t\t  if (skipButton) {\n\t\t\t\t  skipButton.style.display = 'none';\n\t\t\t  }\n\t\t\t  player.controls(false);\n\n\t\t    };\n\t\t}\n\n\t    if (!player.isFullscreen()) {\n\t    \tblocker.style.display = 'none';\n\t    }\n\n\t    return blocker;\n\t  }\n\n\t  function updateBlockerURL (blocker, response, player) {\n\t\t  blockerUrl = generateClickThroughURL(response.clickThrough, player);\n\t  }\n\n\t  function generateClickThroughURL (clickThroughMacro, player) {\n\t    var variables = {\n\t      ASSETURI: mediaFile.src,\n\t      CONTENTPLAYHEAD: vastUtil.formatProgress(player.currentTime() * 1000)\n\t    };\n\n\t    return clickThroughMacro ? vastUtil.parseURLMacro(clickThroughMacro, variables) : '#';\n\t  }\n\n\t  function updateDisplayStyle () {\n\t\t  blocker.style.display = player.isFullscreen() ? 'block' : 'none';\n\t\t  if (!player.isFullscreen() && iFrame) {\n\t\t\t  blocker.removeChild(iFrame);\n\t\t\t  iFrame = null;\n\t\t\t  blocker.removeChild(iFrameBackButton);\n\t\t\t  iFrameBackButton = null;\n\n\t\t\t  playerUtils.showBigPlayButton(player, true);\n\t\t\t  var skipButton = window.document.getElementById('adSkipButton');\n\t\t\t  if (skipButton) {\n\t\t\t\t  skipButton.style.display = 'none';\n\t\t\t  }\n\t\t\t  player.controls(true);\n\t\t  }\n\t  }\n\n\t  function removeBlocker () {\n\t    player.off('timeupdate', updateBlocker);\n\t\tplayer.off('fullscreenchange', updateDisplayStyle);\n\t    dom.remove(blocker);\n\t  }\n};\n\nVASTIntegrator.prototype._playSelectedAd = function playSelectedAd (source, response, callback) {\n  var player = this.player;\n\n  // This check is necessary to prevent a race condition where the ad loading waterfall may reach this point after ads were cancelled (mid-waterfall).\n  if (player && player.vast && player.vast.adsCancelled === true) {\n    callback(null);\n    return;\n  }\n\n  // window.MoatApiReference = null;\n\n  var mainDuration = player.duration();\n  logger.debug('<VASTIntegrator._playSelectedAd>  Main content duration: ' + mainDuration);\n  player.preload('auto'); // without preload=auto the durationchange event is never fired\n  player.src(source);\n\n  logger.debug('<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad...');\n\n  playerUtils.once(player, ['durationchange', 'simulateDurationchange', 'error', 'vast.adsCancel'], function (evt) {\n    if (tempInt) {\n      clearInterval(tempInt);\n      tempInt = null;\n    }\n    if (evt.type === 'durationchange' || evt.type === 'simulateDurationchange') {\n      logger.debug('<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()');\n      playAd();\n    } else if (evt.type === 'error') {\n      callback(new VASTError('on VASTIntegrator, Player is unable to play the Ad', 400), response);\n    }\n    // NOTE: If the ads get canceled we do nothing/\n  });\n\n  // !!! Sometimes durationchange event nor fired when source of player changed.\n  // In this case we try to figured out if duration changed and fire durationchange event by ourself.\n  var durationchangeNotFired = false;\n  var tempInt = setInterval(function () {\n    logger.debug('<VASTIntegrator._playSelectedAd> Ad video duration: ' + player.duration());\n    var curDur = player.duration();\n    if (!isNaN(curDur) &&  mainDuration != player.duration()) {\n      clearInterval(tempInt);\n      tempInt = null;\n      durationchangeNotFired = true;\n      logger.debug('<VASTIntegrator._playSelectedAd> Trigger simulateDurationchange event');\n      player.trigger('simulateDurationchange'); // fire simulateDurationchange event\n    }\n  }, 500);\n  // stop checking duration in 5 secons\n  setTimeout(function () {\n    if (tempInt) {\n      clearInterval(tempInt);\n      tempInt = null;\n    }\n  }, 5000);\n\n  // ***** Local Functions **** //\n  function playAd () {\n\n    playerUtils.once(player, ['playing', 'alreadyPlaying', 'vast.adsCancel'], function (evt) {\n      if (evt.type === 'vast.adsCancel') {\n        return;\n      }\n\n      /* Copyright (c) 2011-2016 Moat Inc. All Rights Reserved. */\n      /*\n      function initMoatTracking(a,c,d,h,k){var f=document.createElement(\"script\"),b=[];c={adData:{ids:c,duration:d,url:k},dispatchEvent:function(a){this.sendEvent?(b&&(b.push(a),a=b,b=!1),this.sendEvent(a)):b.push(a)}};d=\"_moatApi\"+Math.floor(1E8*Math.random());var e,g;try{e=a.ownerDocument,g=e.defaultView||e.parentWindow}catch(l){e=document,g=window}g[d]=c;f.type=\"text/javascript\";a&&a.insertBefore(f,a.childNodes[0]||null);f.src=\"https://z.moatads.com/\"+h+\"/moatvideo.js#\"+d;return c};\n      window.MoatApiReference = null;\n      if (response.ads && response.ads.length > 0 && response.ads[0].inLine && response.ads[0].inLine.moat) {\n    \t  var ids = {level1: response.ads[0].inLine.moat.advid,\n    \t\t\t     level2: response.ads[0].inLine.moat.cpgid,\n    \t\t\t     level3: response.ads[0].inLine.moat.cpid,\n    \t\t\t     level4: response.ads[0].inLine.moat.crid};\n    \t  if (response.ads[0].inLine.moat.site_id) {\n    \t\t  ids.slicer1 = response.ads[0].inLine.moat.site_id;\n    \t  }\n    \t  window.MoatApiReference = initMoatTracking(player.el_, ids, player.duration(), response.ads[0].inLine.moat.partnercode, player.currentSource().src);\n    \t  //window.MoatApiReference = initMoatTracking(player.el_, ids, player.duration(), 'ninemediavpaid78961164', player.currentSource().src);\n      }\n      if (window._molSettings.viewabilityTracking) {\n    \t  window._molSettings.viewabilityTracking.init(window._molSettings.viewability.contextId,\n    \t\t\t  player.duration(), player.el_.offsetWidth, player.el_.offsetHeight);\n      }\n      */\n\n      logger.debug('<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart...');\n\n      player.trigger('vast.adStart');\n\n      if (utilities.isMobile()) {\n          // VIDLA-2336 (simulate user activity to make sure control-bar is visible on mobile devices)\n          for (var i = 0; i < 5; i++) {\n          \tsetTimeout(function () {\n          \t\tplayer.userActive(true);\n          \t}, i * 2000);\n          }\n      }\n\n      if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdVideoStart', adVolume: player.volume()});\n      }\n\n      player.on('ended', proceed);\n      player.on('vast.adsCancel', proceed);\n      player.on('vast.adSkip', proceed);\n\n      function proceed (evt) {\n\n          if (evt.type === 'ended') {\n              // Ignore ended event if the Ad time was not 'near' the end\n              // avoids issues where IOS controls could skip the Ad\n            \tif (window._molSettings.breakDuration) {\n            \t\tif (window._molSettings.realVideoDuration) {\n            \t\t    if ((window._molSettings.realVideoDuration - player.currentTime()) > 3) {\n            \t\t        return;\n            \t\t    }\n            \t\t}\n            \t}\n            \telse if ((player.duration() - player.currentTime()) > 3) {\n    \t\t\t\treturn;\n    \t\t\t}\n            }\n\n        /*\n        if(evt.type === 'ended' && (player.duration() - player.currentTime()) > 3 ) {\n          // Ignore ended event if the Ad time was not 'near' the end\n          // avoids issues where IOS controls could skip the Ad\n          return;\n        }\n        */\n\n        player.off('ended', proceed);\n        player.off('vast.adsCancel', proceed);\n        player.off('vast.adSkip', proceed);\n\n        // NOTE: if the ads get cancel we do nothing apart removing the listners\n        if (evt.type === 'ended' || evt.type === 'vast.adSkip') {\n          callback(null, response);\n        }\n      }\n    });\n\n    logger.debug('<VASTIntegrator._playSelectedAd/playAd> calling player.play()...');\n\n    // player.muted(true);\n    if (player.currentTime() > 0 || durationchangeNotFired) {\n      logger.debug('<VASTIntegrator._playSelectedAd/playAd> Trigger alreadyPlaying event if ad video already playing or durationchange not fired');\n      player.trigger('alreadyPlaying');\n    }\n    else {\n      player.play();\n    }\n  }\n};\n\nVASTIntegrator.prototype._trackError = function trackError (error, response) {\n  vastUtil.track(response.errorURLMacros, {ERRORCODE: error.code || 900});\n};\n\nmodule.exports = VASTIntegrator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WQVNUSW50ZWdyYXRvci5qcz8wOTEzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixtQkFBTyxDQUFDLDhEQUFnQjtBQUMzQyxnQkFBZ0IsbUJBQU8sQ0FBQyx3REFBYTtBQUNyQyxrQkFBa0IsbUJBQU8sQ0FBQyw0REFBZTtBQUN6QyxlQUFlLG1CQUFPLENBQUMsc0RBQVk7O0FBRW5DLFlBQVksbUJBQU8sQ0FBQyx1REFBbUI7QUFDdkMsVUFBVSxtQkFBTyxDQUFDLG1EQUFpQjtBQUNuQyxrQkFBa0IsbUJBQU8sQ0FBQyxtRUFBeUI7QUFDbkQsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCOztBQUV0RCxhQUFhLG1CQUFPLENBQUMsdUVBQTJCOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0RBQWdEO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLHlCQUF5Qiw4QkFBOEIsb0VBQW9FO0FBQzNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsc0NBQXNDO0FBQ2xGO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4Qyw0Q0FBNEM7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDZDQUE2QztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOENBQThDLGdEQUFnRDtBQUM5RjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNENBQTRDLGtEQUFrRDtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsNkNBQTZDO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaURBQWlELCtDQUErQztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0QsK0NBQStDO0FBQy9GOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyw0Q0FBNEMsR0FBRyxRQUFRLHVCQUF1QiwyQkFBMkIsdUVBQXVFLDJDQUEyQyxRQUFRLElBQUksa0RBQWtELFNBQVMsb0JBQW9CLE9BQU8seUJBQXlCLDJDQUEyQyxvREFBb0Q7QUFDaGU7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhFQUE4RTs7QUFFOUU7O0FBRUE7QUFDQTtBQUNBLHlCQUF5QixPQUFPO0FBQ2hDO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QyxnREFBZ0Q7QUFDOUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLDZCQUE2QjtBQUN4RTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L1ZBU1RJbnRlZ3JhdG9yLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIElubmVyIGhlbHBlciBjbGFzcyB0aGF0IGRlYWxzIHdpdGggdGhlIGxvZ2ljIG9mIHRoZSBpbmRpdmlkdWFsIHN0ZXBzIG5lZWRlZCB0byBzZXR1cCBhbiBhZCBpbiB0aGUgcGxheWVyLlxuICpcbiAqIEBwYXJhbSBwbGF5ZXIge29iamVjdH0gaW5zdGFuY2Ugb2YgdGhlIHBsYXllciB0aGF0IHdpbGwgcGxheSB0aGUgYWQuIEl0IGFzc3VtZXMgdGhhdCB0aGUgdmlkZW9qcy1jb250cmliLWFkcyBwbHVnaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgd2hlbiB5b3UgdXNlIGl0cyB1dGlsaXR5IGZ1bmN0aW9ucy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG52YXIgVkFTVFJlc3BvbnNlID0gcmVxdWlyZSgnLi9WQVNUUmVzcG9uc2UnKTtcbnZhciBWQVNURXJyb3IgPSByZXF1aXJlKCcuL1ZBU1RFcnJvcicpO1xudmFyIFZBU1RUcmFja2VyID0gcmVxdWlyZSgnLi9WQVNUVHJhY2tlcicpO1xudmFyIHZhc3RVdGlsID0gcmVxdWlyZSgnLi92YXN0VXRpbCcpO1xuXG52YXIgYXN5bmMgPSByZXF1aXJlKCcuLi8uLi91dGlscy9hc3luYycpO1xudmFyIGRvbSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2RvbScpO1xudmFyIHBsYXllclV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvcGxheWVyVXRpbHMnKTtcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91dGlsaXR5RnVuY3Rpb25zJyk7XG5cbnZhciBsb2dnZXIgPSByZXF1aXJlKCcuLi8uLi91dGlscy9jb25zb2xlTG9nZ2VyJyk7XG5cbmZ1bmN0aW9uIFZBU1RJbnRlZ3JhdG9yIChwbGF5ZXIpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFZBU1RJbnRlZ3JhdG9yKSkge1xuICAgIHJldHVybiBuZXcgVkFTVEludGVncmF0b3IocGxheWVyKTtcbiAgfVxuXG4gIHRoaXMucGxheWVyID0gcGxheWVyO1xuICB0aGlzLmVuYWJsZUZ1bGxzY3JlZW5DbGlja0lGcmFtZSA9IGZhbHNlO1xufVxuXG5WQVNUSW50ZWdyYXRvci5wcm90b3R5cGUucGxheUFkID0gZnVuY3Rpb24gcGxheUFkICh2YXN0UmVzcG9uc2UsIGNhbGxiYWNrKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCB1dGlsaXRpZXMubm9vcDtcblxuICBpZiAoISh2YXN0UmVzcG9uc2UgaW5zdGFuY2VvZiBWQVNUUmVzcG9uc2UpKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBWQVNURXJyb3IoJ09uIFZBU1RJbnRlZ3JhdG9yLCBtaXNzaW5nIHJlcXVpcmVkIFZBU1RSZXNwb25zZScpKTtcbiAgfVxuXG4gIGFzeW5jLndhdGVyZmFsbChbXG4gICAgZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIG5leHQobnVsbCwgdmFzdFJlc3BvbnNlKTtcbiAgICB9LFxuICAgIHRoaXMuX3NlbGVjdEFkU291cmNlLmJpbmQodGhpcyksXG4gICAgdGhpcy5fY3JlYXRlVkFTVFRyYWNrZXIuYmluZCh0aGlzKSxcbiAgICB0aGlzLl9hZGRDbGlja1Rocm91Z2guYmluZCh0aGlzKSxcbiAgICB0aGlzLl9hZGRDbGlja1Rocm91Z2hEaXZCbG9ja2VyLmJpbmQodGhpcyksXG4gICAgdGhpcy5fYWRkU2tpcEJ1dHRvbi5iaW5kKHRoaXMpLFxuICAgIHRoaXMuX3NldHVwRXZlbnRzLmJpbmQodGhpcyksXG4gICAgdGhpcy5fcGxheVNlbGVjdGVkQWQuYmluZCh0aGlzKVxuICBdLCBmdW5jdGlvbiAoZXJyb3IsIHJlc3BvbnNlKSB7XG4gICAgaWYgKGVycm9yICYmIHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgICAgICBcdHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZEVycm9yJywgYWRWb2x1bWU6IHRoYXQucGxheWVyLnZvbHVtZSgpfSk7XG4gICAgICAgIH1cbiAgICAgIHRoYXQuX3RyYWNrRXJyb3IoZXJyb3IsIHJlc3BvbnNlKTtcbiAgICB9XG4gICAgY2FsbGJhY2soZXJyb3IsIHJlc3BvbnNlKTtcbiAgfSk7XG5cbiAgdGhpcy5fYWRVbml0ID0ge1xuICAgIF9zcmM6IG51bGwsXG4gICAgdHlwZTogJ1ZBU1QnLFxuICAgIHBhdXNlQWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoYXQucGxheWVyLnBhdXNlKHRydWUpO1xuICAgIH0sXG5cbiAgICByZXN1bWVBZDogZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC5wbGF5ZXIucGxheSh0cnVlKTtcbiAgICB9LFxuXG4gICAgaXNQYXVzZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0LnBsYXllci5wYXVzZWQodHJ1ZSk7XG4gICAgfSxcblxuICAgIGdldFNyYzogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3NyYztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHRoaXMuX2FkVW5pdDtcbn07XG5cblZBU1RJbnRlZ3JhdG9yLnByb3RvdHlwZS5fc2VsZWN0QWRTb3VyY2UgPSBmdW5jdGlvbiBzZWxlY3RBZFNvdXJjZSAocmVzcG9uc2UsIGNhbGxiYWNrKSB7XG4gIHZhciBzb3VyY2U7XG5cbiAgdmFyIHBsYXllcldpZHRoID0gZG9tLmdldERpbWVuc2lvbih0aGlzLnBsYXllci5lbCgpKS53aWR0aDtcbiAgcmVzcG9uc2UubWVkaWFGaWxlcy5zb3J0KGZ1bmN0aW9uIGNvbXBhcmVUbyAoYSwgYikge1xuICAgIHZhciBkZWx0YUEgPSBNYXRoLmFicyhwbGF5ZXJXaWR0aCAtIGEud2lkdGgpO1xuICAgIHZhciBkZWx0YUIgPSBNYXRoLmFicyhwbGF5ZXJXaWR0aCAtIGIud2lkdGgpO1xuICAgIHJldHVybiBkZWx0YUEgLSBkZWx0YUI7XG4gIH0pO1xuXG4gIHNvdXJjZSA9IHRoaXMucGxheWVyLnNlbGVjdFNvdXJjZShyZXNwb25zZS5tZWRpYUZpbGVzKS5zb3VyY2U7XG4gIGlmIChzb3VyY2UpIHtcbiAgICB0aGlzLnBsYXllci50cmlnZ2VyKHt0eXBlOiAndHJhY2UubWVzc2FnZScsIGRhdGE6IHttZXNzYWdlOiAnUGxheWluZyAnICsgc291cmNlLnNyYyArICcgKHR5cGUgPSAnICsgc291cmNlLnR5cGUgKyAnKSd9fSk7XG4gIH1cblxuICBpZiAoc291cmNlKSB7XG4gICAgbG9nZ2VyLmluZm8oJ3NlbGVjdGVkIHNvdXJjZTogJywgc291cmNlKTtcbiAgICBpZiAodGhpcy5fYWRVbml0KSB7XG4gICAgICB0aGlzLl9hZFVuaXQuX3NyYyA9IHNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHNvdXJjZSwgcmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gY29kZSA0MDMgPD09IENvdWxkbid0IGZpbmQgTWVkaWFGaWxlIHRoYXQgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgdmlkZW8gcGxheWVyXG4gIGNhbGxiYWNrKG5ldyBWQVNURXJyb3IoJ0NvdWxkIG5vdCBmaW5kIEFkIG1lZGlhZmlsZSBzdXBwb3J0ZWQgYnkgdGhpcyBwbGF5ZXInLCA0MDMpLCByZXNwb25zZSk7XG59O1xuXG5WQVNUSW50ZWdyYXRvci5wcm90b3R5cGUuX2NyZWF0ZVZBU1RUcmFja2VyID0gZnVuY3Rpb24gY3JlYXRlVkFTVFRyYWNrZXIgKGFkTWVkaWFGaWxlLCByZXNwb25zZSwgY2FsbGJhY2spIHtcbiAgdHJ5IHtcbiAgICBjYWxsYmFjayhudWxsLCBhZE1lZGlhRmlsZSwgbmV3IFZBU1RUcmFja2VyKGFkTWVkaWFGaWxlLnNyYywgcmVzcG9uc2UpLCByZXNwb25zZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjYWxsYmFjayhlLCByZXNwb25zZSk7XG4gIH1cbn07XG5cblZBU1RJbnRlZ3JhdG9yLnByb3RvdHlwZS5fc2V0dXBFdmVudHMgPSBmdW5jdGlvbiBzZXR1cEV2ZW50cyAoYWRNZWRpYUZpbGUsIHRyYWNrZXIsIHJlc3BvbnNlLCBjYWxsYmFjaykge1xuICB2YXIgcHJldmlvdXNseU11dGVkO1xuICB2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gIHBsYXllci5vbignZnVsbHNjcmVlbmNoYW5nZScsIHRyYWNrRnVsbHNjcmVlbkNoYW5nZSk7XG4gIHBsYXllci5vbigndmFzdC5hZFN0YXJ0JywgdHJhY2tJbXByZXNzaW9ucyk7XG4gIHBsYXllci5vbigncGF1c2UnLCB0cmFja1BhdXNlKTtcbiAgcGxheWVyLm9uKCd0aW1ldXBkYXRlJywgdHJhY2tQcm9ncmVzcyk7XG4gIHBsYXllci5vbigndm9sdW1lY2hhbmdlJywgdHJhY2tWb2x1bWVDaGFuZ2UpO1xuXG4gIHBsYXllclV0aWxzLm9uY2UocGxheWVyLCBbJ3Zhc3QuYWRFbmQnLCAndmFzdC5hZHNDYW5jZWwnXSwgdW5iaW5kRXZlbnRzKTtcbiAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsndmFzdC5hZEVuZCcsICd2YXN0LmFkc0NhbmNlbCcsICd2YXN0LmFkU2tpcCddLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgaWYgKGV2dC50eXBlID09PSAndmFzdC5hZEVuZCcpIHtcbiAgICAgIHRyYWNrZXIudHJhY2tDb21wbGV0ZSgpO1xuICAgIH1cbiAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcbiAgICBcdHZhciB0eXBlID0gZXZ0LnR5cGUgPT09ICd2YXN0LmFkRW5kJyA/ICdBZFZpZGVvQ29tcGxldGUnIDogJ0FkU3RvcHBlZCc7XG4gIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiB0eXBlLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgfVxuICB9KTtcblxuICBwbGF5ZXIub25lKCdhZFN0b3AnLCBmdW5jdGlvbiAoKSB7XG5cdCBwbGF5ZXIudHJpZ2dlcigndmFzdC5hZHNDYW5jZWwnKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGFkTWVkaWFGaWxlLCByZXNwb25zZSk7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiB1bmJpbmRFdmVudHMgKCkge1xuICAgIHBsYXllci5vZmYoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB0cmFja0Z1bGxzY3JlZW5DaGFuZ2UpO1xuICAgIHBsYXllci5vZmYoJ3Zhc3QuYWRTdGFydCcsIHRyYWNrSW1wcmVzc2lvbnMpO1xuICAgIHBsYXllci5vZmYoJ3BhdXNlJywgdHJhY2tQYXVzZSk7XG4gICAgcGxheWVyLm9mZigndGltZXVwZGF0ZScsIHRyYWNrUHJvZ3Jlc3MpO1xuICAgIHBsYXllci5vZmYoJ3ZvbHVtZWNoYW5nZScsIHRyYWNrVm9sdW1lQ2hhbmdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWNrRnVsbHNjcmVlbkNoYW5nZSAoKSB7XG4gICAgaWYgKHBsYXllci5pc0Z1bGxzY3JlZW4oKSkge1xuICAgICAgdHJhY2tlci50cmFja0Z1bGxzY3JlZW4oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhY2tlci50cmFja0V4aXRGdWxsc2NyZWVuKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJhY2tQYXVzZSAoKSB7XG4gICAgLy8gTk9URTogV2hlbmV2ZXIgYSB2aWRlbyBlbmRzIHRoZSB2aWRlbyBFbGVtZW50IHRyaWdnZXJzIGEgJ3BhdXNlJyBldmVudCBiZWZvcmUgdGhlICdlbmRlZCcgZXZlbnQuXG4gICAgLy8gICAgICAgV2Ugc2hvdWxkIG5vdCB0cmFjayB0aGlzIHBhdXNlIGV2ZW50IGJlY2F1c2UgaXQgbWFrZXMgdGhlIFZBU1QgdHJhY2tpbmcgY29uZnVzaW5nIGFnYWluIHdlIHVzZSBhXG4gICAgLy8gICAgICAgVGhyZXNob2xkIG9mIDIgc2Vjb25kcyB0byBwcmV2ZW50IGZhbHNlIHBvc2l0aXZlcyBvbiBJT1MuXG5cdFx0aWYgKHdpbmRvdy5fbW9sU2V0dGluZ3MuYnJlYWtEdXJhdGlvbikge1xuXHRcdFx0aWYgKHdpbmRvdy5fbW9sU2V0dGluZ3MucmVhbFZpZGVvRHVyYXRpb24pIHtcblx0XHRcdCAgICBpZiAoTWF0aC5hYnMod2luZG93Ll9tb2xTZXR0aW5ncy5yZWFsVmlkZW9EdXJhdGlvbiAtIHBsYXllci5jdXJyZW50VGltZSgpKSA8IDIpIHtcblx0XHRcdCAgICAgICAgcmV0dXJuO1xuXHRcdFx0ICAgIH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZiAoTWF0aC5hYnMocGxheWVyLmR1cmF0aW9uKCkgLSBwbGF5ZXIuY3VycmVudFRpbWUoKSkgPCAyKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblxuICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRQYXVzZWQnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgfVxuICAgIHRyYWNrZXIudHJhY2tQYXVzZSgpO1xuICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgdHJ1ZSk7XG4gICAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsncGxheScsICd2YXN0LmFkRW5kJywgJ3Zhc3QuYWRzQ2FuY2VsJ10sIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGlmIChldnQudHlwZSA9PT0gJ3BsYXknKSB7XG5cdCAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcblx0ICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRQbGF5aW5nJywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuXHQgICAgfVxuICAgICAgICB0cmFja2VyLnRyYWNrUmVzdW1lKCk7XG4gICAgICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhY2tQcm9ncmVzcyAoKSB7XG4gICAgdmFyIGN1cnJlbnRUaW1lSW5NcyA9IHBsYXllci5jdXJyZW50VGltZSgpICogMTAwMDtcbiAgICB0cmFja2VyLnRyYWNrUHJvZ3Jlc3MoY3VycmVudFRpbWVJbk1zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWNrSW1wcmVzc2lvbnMgKCkge1xuICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRJbXByZXNzaW9uJywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuICAgIH1cbiAgICB0cmFja2VyLnRyYWNrSW1wcmVzc2lvbnMoKTtcbiAgICB0cmFja2VyLnRyYWNrQ3JlYXRpdmVWaWV3KCk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFja1ZvbHVtZUNoYW5nZSAoKSB7XG4gICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG4gIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRWb2x1bWVDaGFuZ2UnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgfVxuICAgIHZhciBtdXRlZCA9IHBsYXllci5tdXRlZCgpO1xuICAgIGlmIChtdXRlZCkge1xuICAgICAgdHJhY2tlci50cmFja011dGUoKTtcbiAgICB9IGVsc2UgaWYgKHByZXZpb3VzbHlNdXRlZCkge1xuICAgICAgdHJhY2tlci50cmFja1VubXV0ZSgpO1xuICAgIH1cbiAgICBwcmV2aW91c2x5TXV0ZWQgPSBtdXRlZDtcbiAgfVxufTtcblxuVkFTVEludGVncmF0b3IucHJvdG90eXBlLl9hZGRTa2lwQnV0dG9uID0gZnVuY3Rpb24gYWRkU2tpcEJ1dHRvbiAoc291cmNlLCB0cmFja2VyLCByZXNwb25zZSwgY2FsbGJhY2spIHtcbiAgdmFyIHNraXBPZmZzZXRJblNlYztcbiAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gIGlmICh1dGlsaXRpZXMuaXNOdW1iZXIocmVzcG9uc2Uuc2tpcG9mZnNldCkpIHtcbiAgICBza2lwT2Zmc2V0SW5TZWMgPSByZXNwb25zZS5za2lwb2Zmc2V0IC8gMTAwMDtcbiAgICBhZGRTa2lwQnV0dG9uVG9QbGF5ZXIodGhpcy5wbGF5ZXIsIHNraXBPZmZzZXRJblNlYyk7XG4gIH1cbiAgY2FsbGJhY2sobnVsbCwgc291cmNlLCB0cmFja2VyLCByZXNwb25zZSk7XG5cbiAgLy8gKioqKiBMb2NhbCBmdW5jdGlvbiAqKioqIC8vXG4gIGZ1bmN0aW9uIGFkZFNraXBCdXR0b25Ub1BsYXllciAocGxheWVyLCBza2lwT2Zmc2V0KSB7XG4gICAgdmFyIHNraXBCdXR0b24gPSBjcmVhdGVTa2lwQnV0dG9uKHBsYXllcik7XG4gICAgdmFyIHVwZGF0ZVNraXBCdXR0b24gPSB1cGRhdGVTa2lwQnV0dG9uU3RhdGUuYmluZCh0aGF0LCBza2lwQnV0dG9uLCBza2lwT2Zmc2V0LCBwbGF5ZXIpO1xuXG4gICAgcGxheWVyLmVsKCkuYXBwZW5kQ2hpbGQoc2tpcEJ1dHRvbik7XG4gICAgcGxheWVyLm9uKCd0aW1ldXBkYXRlJywgdXBkYXRlU2tpcEJ1dHRvbik7XG5cbiAgICBwbGF5ZXJVdGlscy5vbmNlKHBsYXllciwgWyd2YXN0LmFkRW5kJywgJ3Zhc3QuYWRzQ2FuY2VsJ10sIHJlbW92ZVNraXBCdXR0b24pO1xuXG4gICAgZnVuY3Rpb24gcmVtb3ZlU2tpcEJ1dHRvbiAoKSB7XG4gICAgICBwbGF5ZXIub2ZmKCd0aW1ldXBkYXRlJywgdXBkYXRlU2tpcEJ1dHRvbik7XG4gICAgICBkb20ucmVtb3ZlKHNraXBCdXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVNraXBCdXR0b24gKHBsYXllcikge1xuICAgIHZhciBza2lwQnV0dG9uID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRvbS5hZGRDbGFzcyhza2lwQnV0dG9uLCAndmFzdC1za2lwLWJ1dHRvbicpO1xuICAgIHNraXBCdXR0b24uaWQgPSAnYWRTa2lwQnV0dG9uJztcblxuICAgIHNraXBCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZG9tLmhhc0NsYXNzKHNraXBCdXR0b24sICdlbmFibGVkJykpIHtcbiAgICAgICAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcbiAgICAgICAgXHQgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFNraXBwZWQnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgICAgICAgfVxuICAgICAgICB0cmFja2VyLnRyYWNrU2tpcCgpO1xuICAgICAgICBwbGF5ZXIudHJpZ2dlcigndmFzdC5hZFNraXAnKTtcbiAgICAgIH1cbiAgICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuXG4gICAgICAvLyBXZSBwcmV2ZW50IGV2ZW50IHByb3BhZ2F0aW9uIHRvIGF2b2lkIHByb2JsZW1zIHdpdGggdGhlIGNsaWNrVGhyb3VnaCBhbmQgc28gb25cbiAgICAgIGlmICh3aW5kb3cuRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBza2lwQnV0dG9uO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2tpcEJ1dHRvblN0YXRlIChza2lwQnV0dG9uLCBza2lwT2Zmc2V0LCBwbGF5ZXIpIHtcbiAgICB2YXIgdGltZUxlZnQgPSBNYXRoLmNlaWwoc2tpcE9mZnNldCAtIHBsYXllci5jdXJyZW50VGltZSgpKTtcbiAgICAvLyBpZiBza2lwIGJ1dHRvbiBlbmFibGVkIG5ldmVyIHNob3cgYmVmb3JlLWJ1dHRvbiBza2lwIHRleHRcbiAgICBpZiAodGltZUxlZnQgPiAwICYmICFkb20uaGFzQ2xhc3Moc2tpcEJ1dHRvbiwgJ2VuYWJsZWQnKSkge1xuICAgICAgICBza2lwQnV0dG9uLmlubmVySFRNTCA9ICc8cCBjbGFzcz1cInZhc3Qtc2tpcC1idXR0b24tdGV4dFwiPicgKyB3aW5kb3cuX21vbFNldHRpbmdzLnNraXBUZXh0LnJlcGxhY2UoJyUlVElNRSUlJywgdXRpbGl0aWVzLnRvRml4ZWREaWdpdHModGltZUxlZnQsIDIpKSArICc8L3A+JztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFkb20uaGFzQ2xhc3Moc2tpcEJ1dHRvbiwgJ2VuYWJsZWQnKSkge1xuICAgICAgICBkb20uYWRkQ2xhc3Moc2tpcEJ1dHRvbiwgJ2VuYWJsZWQnKTtcbiAgICAgICAgc2tpcEJ1dHRvbi5pbm5lckhUTUwgPSB3aW5kb3cuX21vbFNldHRpbmdzLnNraXBCdXR0b25UZXh0O1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaWZyYW1lQmFja0J1dHRvbiA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWZyYW1lQmFja0J1dHRvbicpO1xuICAgIGlmICghaWZyYW1lQmFja0J1dHRvbikge1xuICAgICAgICBza2lwQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbiAgfVxufTtcblxuVkFTVEludGVncmF0b3IucHJvdG90eXBlLl9hZGRDbGlja1Rocm91Z2ggPSBmdW5jdGlvbiBhZGRDbGlja1Rocm91Z2ggKG1lZGlhRmlsZSwgdHJhY2tlciwgcmVzcG9uc2UsIGNhbGxiYWNrKSB7XG4gIHZhciBlbmFibGVGdWxsc2NyZWVuQ2xpY2tJRnJhbWUgPSB0aGlzLmVuYWJsZUZ1bGxzY3JlZW5DbGlja0lGcmFtZTtcblxuICB2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gIHZhciBibG9ja2VyID0gY3JlYXRlQ2xpY2tUaHJvdWdoQmxvY2tlcihwbGF5ZXIsIHRyYWNrZXIsIHJlc3BvbnNlKTtcbiAgdmFyIHVwZGF0ZUJsb2NrZXIgPSB1cGRhdGVCbG9ja2VyVVJMLmJpbmQodGhpcywgYmxvY2tlciwgcmVzcG9uc2UsIHBsYXllcik7XG5cbiAgcGxheWVyLmVsKCkuaW5zZXJ0QmVmb3JlKGJsb2NrZXIsIHBsYXllci5jb250cm9sQmFyLmVsKCkpO1xuICBwbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB1cGRhdGVCbG9ja2VyKTtcbiAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsndmFzdC5hZEVuZCcsICd2YXN0LmFkc0NhbmNlbCddLCByZW1vdmVCbG9ja2VyKTtcblxuICBpZiAoZW5hYmxlRnVsbHNjcmVlbkNsaWNrSUZyYW1lKSB7XG5cdCAgcGxheWVyLm9uKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlRGlzcGxheVN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBjYWxsYmFjayhudWxsLCBtZWRpYUZpbGUsIHRyYWNrZXIsIHJlc3BvbnNlKTtcblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG5cbiAgZnVuY3Rpb24gY3JlYXRlQ2xpY2tUaHJvdWdoQmxvY2tlciAocGxheWVyLCB0cmFja2VyLCByZXNwb25zZSkge1xuXHRcdGlmICh3aW5kb3cuX21vbFNldHRpbmdzLmRpc2FibGVDbGlja1RocnUpIHtcblx0XHQgICAgdmFyIGJsb2NrZXJEaXYgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0ICAgIGRvbS5hZGRDbGFzcyhibG9ja2VyRGl2LCAndmFzdC1ibG9ja2VyJyk7XG5cdFx0XHRyZXR1cm4gYmxvY2tlckRpdjtcblx0XHR9XG4gICAgdmFyIGJsb2NrZXIgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHZhciBjbGlja1Rocm91Z2hNYWNybyA9IHJlc3BvbnNlLmNsaWNrVGhyb3VnaDtcblxuICAgIGRvbS5hZGRDbGFzcyhibG9ja2VyLCAndmFzdC1ibG9ja2VyJyk7XG4gICAgLy8gJ2EnIHRhZyBpbiBpT1Mgc29tZXRpbWUgZG9lcyBub3QgbmF2aWdhdGUuIFdlIHdpbGwgdXNlIHdpbmRvdy5vcGVuIHRvIG5hdmlnYXRlIGZvciBpT1MuXG4gICAgaWYgKCF1dGlsaXRpZXMuaXNJRGV2aWNlKCkpIHtcbiAgICAgIGJsb2NrZXIuaHJlZiA9IGdlbmVyYXRlQ2xpY2tUaHJvdWdoVVJMKGNsaWNrVGhyb3VnaE1hY3JvLCBwbGF5ZXIpO1xuICAgIH1cblxuICAgIGlmICh1dGlsaXRpZXMuaXNTdHJpbmcoY2xpY2tUaHJvdWdoTWFjcm8pKSB7XG4gICAgICBibG9ja2VyLnRhcmdldCA9ICdfYmxhbmsnO1xuICAgIH1cblxuICAgIHZhciBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAocGxheWVyLnBhdXNlZCgpKSB7XG4gICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuXG4gICAgICAgICAgICAvLyBXZSBwcmV2ZW50IGV2ZW50IHByb3BhZ2F0aW9uIHRvIGF2b2lkIHByb2JsZW1zIHdpdGggdGhlIHBsYXllcidzIG5vcm1hbCBwYXVzZSBtZWNoYW5pc21cbiAgICAgICAgICAgIGlmICh3aW5kb3cuRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgdHJhY2tlci50cmFja0NsaWNrKCk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG4gICAgICAgICAgd2luZG93Lk1vYXRBcGlSZWZlcmVuY2UuZGlzcGF0Y2hFdmVudCh7dHlwZTogJ0FkQ2xpY2tUaHJ1JywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1dGlsaXRpZXMuaXNJRGV2aWNlKCkpIHtcbiAgICAgICAgICAvLyBXZSBhcmUgdXNpbmcgd2luZG93Lm9wZW4gdG8gbmF2aWdhdGUgZm9yIGlPUy5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGdlbmVyYXRlQ2xpY2tUaHJvdWdoVVJMKGNsaWNrVGhyb3VnaE1hY3JvLCBwbGF5ZXIpLCAnX2JsYW5rJyk7XG4gICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgaWYgKHdpbmRvdy5FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gcGxheWVyLnBhdXNlKCkgaW4gaU9TIHNvbWV0aW1lIGRvZXMgbm90IHdvcmsuIFRvIG1ha2Ugc3VyZSBwbGF5ZXIgcGF1c2VkIHdlIHdpbGwgdHJ5IHBhdXNlIHBsYXllciBpbiA1MDAgbXNlY3MuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXBsYXllci5wYXVzZWQoKSkge1xuICAgICAgICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyaWdodGNvdmUgaGFzIGEgYnVnIHdoZXJlIHRoZXkgc2VuZCBhbiBcImVuZGVkXCIgZXZlbnQgaWYgcGF1c2VkIHdpdGhpbiBhIGNvdXBsZSBzZWNvbmRzIG9mIHRoZSB2aWRlbyBlbmQuIEluIHRoaXMgY2FzZSwgdGhlIGxpc3RlbmVyXG4gICAgICAgIC8vIHRoYXQgc2hvd3MgdGhlIGJpZyBwbGF5IGJ1dHRvbiAoYW1vbmcgb3RoZXIgdGhpbmdzKSBnZXRzIHJlbW92ZWQgYmVmb3JlIHRoZSBoYW5kbGVyIGZpcmVzLiBUaGlzIGZpeCBtYWtlcyBzdXJlIHRoZSBiaWcgYnV0dG9uIHN0aWxsIGFwcGVhcnMuXG4gICAgICAgIHZhciByZW1haW5pbmcgPSBwbGF5ZXIuZHVyYXRpb24oKSAtIHBsYXllci5jdXJyZW50VGltZSgpO1xuICAgICAgICBpZiAocmVtYWluaW5nIDwgMyAmJiByZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwbGF5ZXJVdGlscy5zaG93QmlnUGxheUJ1dHRvbihwbGF5ZXIsIHRydWUpO1xuICAgICAgICAgICAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsncGxheWluZycsICd2YXN0LmFkRW5kJywgJ3Zhc3QuYWRzQ2FuY2VsJywgJ3Zhc3QuYWRTa2lwJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcGxheWVyVXRpbHMuc2hvd0JpZ1BsYXlCdXR0b24ocGxheWVyLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGlmICh1dGlsaXRpZXMuaXNJRGV2aWNlKCkpIHtcbiAgICAgIGJsb2NrZXIub250b3VjaGVuZCA9IGNsaWNrSGFuZGxlcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBibG9ja2VyLm9uY2xpY2sgPSBjbGlja0hhbmRsZXI7XG4gICAgfVxuXG4gICAgaWYgKHBsYXllci5pc0Z1bGxzY3JlZW4oKSAmJiBlbmFibGVGdWxsc2NyZWVuQ2xpY2tJRnJhbWUpIHtcbiAgICBcdGJsb2NrZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG5cbiAgICByZXR1cm4gYmxvY2tlcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUJsb2NrZXJVUkwgKGJsb2NrZXIsIHJlc3BvbnNlLCBwbGF5ZXIpIHtcbiAgICAvLyAnYScgdGFnIGluIGlPUyBzb21ldGltZSBkb2VzIG5vdCBuYXZpZ2F0ZS4gV2Ugd2lsbCB1c2Ugd2luZG93Lm9wZW4gdG8gbmF2aWdhdGUgZm9yIGlPUy5cbiAgICBpZiAoIXV0aWxpdGllcy5pc0lEZXZpY2UoKSkge1xuICAgICAgYmxvY2tlci5ocmVmID0gZ2VuZXJhdGVDbGlja1Rocm91Z2hVUkwocmVzcG9uc2UuY2xpY2tUaHJvdWdoLCBwbGF5ZXIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlQ2xpY2tUaHJvdWdoVVJMIChjbGlja1Rocm91Z2hNYWNybywgcGxheWVyKSB7XG4gICAgdmFyIHZhcmlhYmxlcyA9IHtcbiAgICAgIEFTU0VUVVJJOiBtZWRpYUZpbGUuc3JjLFxuICAgICAgQ09OVEVOVFBMQVlIRUFEOiB2YXN0VXRpbC5mb3JtYXRQcm9ncmVzcyhwbGF5ZXIuY3VycmVudFRpbWUoKSAqIDEwMDApXG4gICAgfTtcblxuICAgIHJldHVybiBjbGlja1Rocm91Z2hNYWNybyA/IHZhc3RVdGlsLnBhcnNlVVJMTWFjcm8oY2xpY2tUaHJvdWdoTWFjcm8sIHZhcmlhYmxlcykgOiAnIyc7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5U3R5bGUgKCkge1xuXHQgIGJsb2NrZXIuc3R5bGUuZGlzcGxheSA9IHBsYXllci5pc0Z1bGxzY3JlZW4oKSA/ICdub25lJyA6ICdibG9jayc7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVCbG9ja2VyICgpIHtcbiAgICBwbGF5ZXIub2ZmKCd0aW1ldXBkYXRlJywgdXBkYXRlQmxvY2tlcik7XG5cdHBsYXllci5vZmYoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB1cGRhdGVEaXNwbGF5U3R5bGUpO1xuICAgIGRvbS5yZW1vdmUoYmxvY2tlcik7XG4gIH1cbn07XG5cblZBU1RJbnRlZ3JhdG9yLnByb3RvdHlwZS5fYWRkQ2xpY2tUaHJvdWdoRGl2QmxvY2tlciA9IGZ1bmN0aW9uIGFkZENsaWNrVGhyb3VnaCAobWVkaWFGaWxlLCB0cmFja2VyLCByZXNwb25zZSwgY2FsbGJhY2spIHtcblx0aWYgKCF0aGlzLmVuYWJsZUZ1bGxzY3JlZW5DbGlja0lGcmFtZSkge1xuXHRcdHJldHVybiBjYWxsYmFjayhudWxsLCBtZWRpYUZpbGUsIHRyYWNrZXIsIHJlc3BvbnNlKTtcblx0fVxuXHR2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG5cdCAgdmFyIGJsb2NrZXIgPSBjcmVhdGVDbGlja1Rocm91Z2hEaXYocGxheWVyLCB0cmFja2VyLCByZXNwb25zZSk7XG5cdCAgdmFyIHVwZGF0ZUJsb2NrZXIgPSB1cGRhdGVCbG9ja2VyVVJMLmJpbmQodGhpcywgYmxvY2tlciwgcmVzcG9uc2UsIHBsYXllcik7XG5cdCAgdmFyIGJsb2NrZXJVcmw7XG5cdCAgdmFyIGlGcmFtZTtcblx0ICB2YXIgaUZyYW1lQmFja0J1dHRvbjtcblxuXHQgIHBsYXllci5lbCgpLmluc2VydEJlZm9yZShibG9ja2VyLCBwbGF5ZXIuY29udHJvbEJhci5lbCgpKTtcblx0ICBwbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB1cGRhdGVCbG9ja2VyKTtcblx0ICBwbGF5ZXJVdGlscy5vbmNlKHBsYXllciwgWyd2YXN0LmFkRW5kJywgJ3Zhc3QuYWRzQ2FuY2VsJ10sIHJlbW92ZUJsb2NrZXIpO1xuXG5cdCAgcGxheWVyLm9uKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlRGlzcGxheVN0eWxlKTtcblxuXHQgIHJldHVybiBjYWxsYmFjayhudWxsLCBtZWRpYUZpbGUsIHRyYWNrZXIsIHJlc3BvbnNlKTtcblxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUNsaWNrVGhyb3VnaERpdiAocGxheWVyLCB0cmFja2VyKSB7XG5cdCAgICB2YXIgYmxvY2tlciA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuXHQgICAgZG9tLmFkZENsYXNzKGJsb2NrZXIsICd2YXN0LWJsb2NrZXInKTtcblxuXHRcdGlmICghd2luZG93Ll9tb2xTZXR0aW5ncy5kaXNhYmxlQ2xpY2tUaHJ1KSB7XG5cdFx0ICAgIGJsb2NrZXIub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0ICAgICAgaWYgKHBsYXllci5wYXVzZWQoKSkge1xuXHRcdCAgICAgICAgcGxheWVyLnBsYXkoKTtcblxuXHRcdCAgICAgICAgLy8gV2UgcHJldmVudCBldmVudCBwcm9wYWdhdGlvbiB0byBhdm9pZCBwcm9ibGVtcyB3aXRoIHRoZSBwbGF5ZXIncyBub3JtYWwgcGF1c2UgbWVjaGFuaXNtXG5cdFx0ICAgICAgICBpZiAod2luZG93LkV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gIT09IHVuZGVmaW5lZCkge1xuXHRcdCAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgICAgIH1cblxuXHRcdCAgICAgIHBsYXllci5wYXVzZSgpO1xuXHRcdCAgICAgIHRyYWNrZXIudHJhY2tDbGljaygpO1xuXG5cdFx0ICAgICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG5cdFx0ICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRDbGlja1RocnUnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG5cdFx0ICAgICAgfVxuXG5cdFx0ICAgICAgLy8gY3JlYXRlIElGcmFtZSB3aXRoIGJhY2sgYnV0dG9uXG5cdFx0ICAgICAgaUZyYW1lID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXHRcdFx0ICBkb20uYWRkQ2xhc3MoaUZyYW1lLCAndmFzdC1ibG9ja2VyJyk7XG5cdFx0XHQgIGlGcmFtZS5zcmMgPSBibG9ja2VyVXJsO1xuXHRcdFx0ICBibG9ja2VyLmFwcGVuZENoaWxkKGlGcmFtZSk7XG5cblx0XHRcdCAgaUZyYW1lQmFja0J1dHRvbiA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdCAgZG9tLmFkZENsYXNzKGlGcmFtZUJhY2tCdXR0b24sICd2YXN0LWJhY2stYnV0dG9uJyk7XG5cdFx0ICAgICAgZG9tLmFkZENsYXNzKGlGcmFtZUJhY2tCdXR0b24sICdlbmFibGVkJyk7XG5cdFx0XHQgIGlGcmFtZUJhY2tCdXR0b24uaW5uZXJIVE1MID0gJ0JhY2snO1xuXHRcdFx0ICBpRnJhbWVCYWNrQnV0dG9uLmlkID0gJ2lmcmFtZUJhY2tCdXR0b24nO1xuXHRcdFx0ICBibG9ja2VyLmFwcGVuZENoaWxkKGlGcmFtZUJhY2tCdXR0b24pO1xuXHRcdFx0ICBpRnJhbWVCYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQgIGJsb2NrZXIucmVtb3ZlQ2hpbGQoaUZyYW1lKTtcblx0XHRcdFx0ICBpRnJhbWUgPSBudWxsO1xuXHRcdFx0XHQgIGJsb2NrZXIucmVtb3ZlQ2hpbGQoaUZyYW1lQmFja0J1dHRvbik7XG5cdFx0XHRcdCAgaUZyYW1lQmFja0J1dHRvbiA9IG51bGw7XG5cblx0XHRcdFx0ICAvLyBzaG93IGNvbnRyb2xzXG5cdFx0XHRcdCAgdmFyIHNraXBCdXR0b24gPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkU2tpcEJ1dHRvbicpO1xuXHRcdFx0XHQgIGlmIChza2lwQnV0dG9uKSB7XG5cdFx0XHRcdFx0ICBza2lwQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdFx0XHQgIH1cblx0XHRcdFx0ICBwbGF5ZXIuY29udHJvbHModHJ1ZSk7XG5cblx0XHRcdFx0ICBpZiAod2luZG93LkV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0ICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdCAgfVxuXHRcdFx0ICB9KTtcblxuXHRcdFx0ICAvLyBoaWRlIGNvbnRyb2xzXG5cdFx0XHQgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuXHRcdFx0ICB9LCAxKTtcblx0XHRcdCAgdmFyIHNraXBCdXR0b24gPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkU2tpcEJ1dHRvbicpO1xuXHRcdFx0ICBpZiAoc2tpcEJ1dHRvbikge1xuXHRcdFx0XHQgIHNraXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdCAgfVxuXHRcdFx0ICBwbGF5ZXIuY29udHJvbHMoZmFsc2UpO1xuXG5cdFx0ICAgIH07XG5cdFx0fVxuXG5cdCAgICBpZiAoIXBsYXllci5pc0Z1bGxzY3JlZW4oKSkge1xuXHQgICAgXHRibG9ja2VyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBibG9ja2VyO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIHVwZGF0ZUJsb2NrZXJVUkwgKGJsb2NrZXIsIHJlc3BvbnNlLCBwbGF5ZXIpIHtcblx0XHQgIGJsb2NrZXJVcmwgPSBnZW5lcmF0ZUNsaWNrVGhyb3VnaFVSTChyZXNwb25zZS5jbGlja1Rocm91Z2gsIHBsYXllcik7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gZ2VuZXJhdGVDbGlja1Rocm91Z2hVUkwgKGNsaWNrVGhyb3VnaE1hY3JvLCBwbGF5ZXIpIHtcblx0ICAgIHZhciB2YXJpYWJsZXMgPSB7XG5cdCAgICAgIEFTU0VUVVJJOiBtZWRpYUZpbGUuc3JjLFxuXHQgICAgICBDT05URU5UUExBWUhFQUQ6IHZhc3RVdGlsLmZvcm1hdFByb2dyZXNzKHBsYXllci5jdXJyZW50VGltZSgpICogMTAwMClcblx0ICAgIH07XG5cblx0ICAgIHJldHVybiBjbGlja1Rocm91Z2hNYWNybyA/IHZhc3RVdGlsLnBhcnNlVVJMTWFjcm8oY2xpY2tUaHJvdWdoTWFjcm8sIHZhcmlhYmxlcykgOiAnIyc7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheVN0eWxlICgpIHtcblx0XHQgIGJsb2NrZXIuc3R5bGUuZGlzcGxheSA9IHBsYXllci5pc0Z1bGxzY3JlZW4oKSA/ICdibG9jaycgOiAnbm9uZSc7XG5cdFx0ICBpZiAoIXBsYXllci5pc0Z1bGxzY3JlZW4oKSAmJiBpRnJhbWUpIHtcblx0XHRcdCAgYmxvY2tlci5yZW1vdmVDaGlsZChpRnJhbWUpO1xuXHRcdFx0ICBpRnJhbWUgPSBudWxsO1xuXHRcdFx0ICBibG9ja2VyLnJlbW92ZUNoaWxkKGlGcmFtZUJhY2tCdXR0b24pO1xuXHRcdFx0ICBpRnJhbWVCYWNrQnV0dG9uID0gbnVsbDtcblxuXHRcdFx0ICBwbGF5ZXJVdGlscy5zaG93QmlnUGxheUJ1dHRvbihwbGF5ZXIsIHRydWUpO1xuXHRcdFx0ICB2YXIgc2tpcEJ1dHRvbiA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRTa2lwQnV0dG9uJyk7XG5cdFx0XHQgIGlmIChza2lwQnV0dG9uKSB7XG5cdFx0XHRcdCAgc2tpcEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0ICB9XG5cdFx0XHQgIHBsYXllci5jb250cm9scyh0cnVlKTtcblx0XHQgIH1cblx0ICB9XG5cblx0ICBmdW5jdGlvbiByZW1vdmVCbG9ja2VyICgpIHtcblx0ICAgIHBsYXllci5vZmYoJ3RpbWV1cGRhdGUnLCB1cGRhdGVCbG9ja2VyKTtcblx0XHRwbGF5ZXIub2ZmKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlRGlzcGxheVN0eWxlKTtcblx0ICAgIGRvbS5yZW1vdmUoYmxvY2tlcik7XG5cdCAgfVxufTtcblxuVkFTVEludGVncmF0b3IucHJvdG90eXBlLl9wbGF5U2VsZWN0ZWRBZCA9IGZ1bmN0aW9uIHBsYXlTZWxlY3RlZEFkIChzb3VyY2UsIHJlc3BvbnNlLCBjYWxsYmFjaykge1xuICB2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG5cbiAgLy8gVGhpcyBjaGVjayBpcyBuZWNlc3NhcnkgdG8gcHJldmVudCBhIHJhY2UgY29uZGl0aW9uIHdoZXJlIHRoZSBhZCBsb2FkaW5nIHdhdGVyZmFsbCBtYXkgcmVhY2ggdGhpcyBwb2ludCBhZnRlciBhZHMgd2VyZSBjYW5jZWxsZWQgKG1pZC13YXRlcmZhbGwpLlxuICBpZiAocGxheWVyICYmIHBsYXllci52YXN0ICYmIHBsYXllci52YXN0LmFkc0NhbmNlbGxlZCA9PT0gdHJ1ZSkge1xuICAgIGNhbGxiYWNrKG51bGwpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlID0gbnVsbDtcblxuICB2YXIgbWFpbkR1cmF0aW9uID0gcGxheWVyLmR1cmF0aW9uKCk7XG4gIGxvZ2dlci5kZWJ1ZygnPFZBU1RJbnRlZ3JhdG9yLl9wbGF5U2VsZWN0ZWRBZD4gIE1haW4gY29udGVudCBkdXJhdGlvbjogJyArIG1haW5EdXJhdGlvbik7XG4gIHBsYXllci5wcmVsb2FkKCdhdXRvJyk7IC8vIHdpdGhvdXQgcHJlbG9hZD1hdXRvIHRoZSBkdXJhdGlvbmNoYW5nZSBldmVudCBpcyBuZXZlciBmaXJlZFxuICBwbGF5ZXIuc3JjKHNvdXJjZSk7XG5cbiAgbG9nZ2VyLmRlYnVnKCc8VkFTVEludGVncmF0b3IuX3BsYXlTZWxlY3RlZEFkPiB3YWl0aW5nIGZvciBkdXJhdGlvbmNoYW5nZSB0byBwbGF5IHRoZSBhZC4uLicpO1xuXG4gIHBsYXllclV0aWxzLm9uY2UocGxheWVyLCBbJ2R1cmF0aW9uY2hhbmdlJywgJ3NpbXVsYXRlRHVyYXRpb25jaGFuZ2UnLCAnZXJyb3InLCAndmFzdC5hZHNDYW5jZWwnXSwgZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmICh0ZW1wSW50KSB7XG4gICAgICBjbGVhckludGVydmFsKHRlbXBJbnQpO1xuICAgICAgdGVtcEludCA9IG51bGw7XG4gICAgfVxuICAgIGlmIChldnQudHlwZSA9PT0gJ2R1cmF0aW9uY2hhbmdlJyB8fCBldnQudHlwZSA9PT0gJ3NpbXVsYXRlRHVyYXRpb25jaGFuZ2UnKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJzxWQVNUSW50ZWdyYXRvci5fcGxheVNlbGVjdGVkQWQ+IGdvdCBkdXJhdGlvbmNoYW5nZTsgY2FsbGluZyBwbGF5QWQoKScpO1xuICAgICAgcGxheUFkKCk7XG4gICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgY2FsbGJhY2sobmV3IFZBU1RFcnJvcignb24gVkFTVEludGVncmF0b3IsIFBsYXllciBpcyB1bmFibGUgdG8gcGxheSB0aGUgQWQnLCA0MDApLCByZXNwb25zZSk7XG4gICAgfVxuICAgIC8vIE5PVEU6IElmIHRoZSBhZHMgZ2V0IGNhbmNlbGVkIHdlIGRvIG5vdGhpbmcvXG4gIH0pO1xuXG4gIC8vICEhISBTb21ldGltZXMgZHVyYXRpb25jaGFuZ2UgZXZlbnQgbm9yIGZpcmVkIHdoZW4gc291cmNlIG9mIHBsYXllciBjaGFuZ2VkLlxuICAvLyBJbiB0aGlzIGNhc2Ugd2UgdHJ5IHRvIGZpZ3VyZWQgb3V0IGlmIGR1cmF0aW9uIGNoYW5nZWQgYW5kIGZpcmUgZHVyYXRpb25jaGFuZ2UgZXZlbnQgYnkgb3Vyc2VsZi5cbiAgdmFyIGR1cmF0aW9uY2hhbmdlTm90RmlyZWQgPSBmYWxzZTtcbiAgdmFyIHRlbXBJbnQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCc8VkFTVEludGVncmF0b3IuX3BsYXlTZWxlY3RlZEFkPiBBZCB2aWRlbyBkdXJhdGlvbjogJyArIHBsYXllci5kdXJhdGlvbigpKTtcbiAgICB2YXIgY3VyRHVyID0gcGxheWVyLmR1cmF0aW9uKCk7XG4gICAgaWYgKCFpc05hTihjdXJEdXIpICYmICBtYWluRHVyYXRpb24gIT0gcGxheWVyLmR1cmF0aW9uKCkpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGVtcEludCk7XG4gICAgICB0ZW1wSW50ID0gbnVsbDtcbiAgICAgIGR1cmF0aW9uY2hhbmdlTm90RmlyZWQgPSB0cnVlO1xuICAgICAgbG9nZ2VyLmRlYnVnKCc8VkFTVEludGVncmF0b3IuX3BsYXlTZWxlY3RlZEFkPiBUcmlnZ2VyIHNpbXVsYXRlRHVyYXRpb25jaGFuZ2UgZXZlbnQnKTtcbiAgICAgIHBsYXllci50cmlnZ2VyKCdzaW11bGF0ZUR1cmF0aW9uY2hhbmdlJyk7IC8vIGZpcmUgc2ltdWxhdGVEdXJhdGlvbmNoYW5nZSBldmVudFxuICAgIH1cbiAgfSwgNTAwKTtcbiAgLy8gc3RvcCBjaGVja2luZyBkdXJhdGlvbiBpbiA1IHNlY29uc1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGVtcEludCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0ZW1wSW50KTtcbiAgICAgIHRlbXBJbnQgPSBudWxsO1xuICAgIH1cbiAgfSwgNTAwMCk7XG5cbiAgLy8gKioqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cbiAgZnVuY3Rpb24gcGxheUFkICgpIHtcblxuICAgIHBsYXllclV0aWxzLm9uY2UocGxheWVyLCBbJ3BsYXlpbmcnLCAnYWxyZWFkeVBsYXlpbmcnLCAndmFzdC5hZHNDYW5jZWwnXSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgaWYgKGV2dC50eXBlID09PSAndmFzdC5hZHNDYW5jZWwnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLyogQ29weXJpZ2h0IChjKSAyMDExLTIwMTYgTW9hdCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuICovXG4gICAgICAvKlxuICAgICAgZnVuY3Rpb24gaW5pdE1vYXRUcmFja2luZyhhLGMsZCxoLGspe3ZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYj1bXTtjPXthZERhdGE6e2lkczpjLGR1cmF0aW9uOmQsdXJsOmt9LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7dGhpcy5zZW5kRXZlbnQ/KGImJihiLnB1c2goYSksYT1iLGI9ITEpLHRoaXMuc2VuZEV2ZW50KGEpKTpiLnB1c2goYSl9fTtkPVwiX21vYXRBcGlcIitNYXRoLmZsb29yKDFFOCpNYXRoLnJhbmRvbSgpKTt2YXIgZSxnO3RyeXtlPWEub3duZXJEb2N1bWVudCxnPWUuZGVmYXVsdFZpZXd8fGUucGFyZW50V2luZG93fWNhdGNoKGwpe2U9ZG9jdW1lbnQsZz13aW5kb3d9Z1tkXT1jO2YudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO2EmJmEuaW5zZXJ0QmVmb3JlKGYsYS5jaGlsZE5vZGVzWzBdfHxudWxsKTtmLnNyYz1cImh0dHBzOi8vei5tb2F0YWRzLmNvbS9cIitoK1wiL21vYXR2aWRlby5qcyNcIitkO3JldHVybiBjfTtcbiAgICAgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlID0gbnVsbDtcbiAgICAgIGlmIChyZXNwb25zZS5hZHMgJiYgcmVzcG9uc2UuYWRzLmxlbmd0aCA+IDAgJiYgcmVzcG9uc2UuYWRzWzBdLmluTGluZSAmJiByZXNwb25zZS5hZHNbMF0uaW5MaW5lLm1vYXQpIHtcbiAgICBcdCAgdmFyIGlkcyA9IHtsZXZlbDE6IHJlc3BvbnNlLmFkc1swXS5pbkxpbmUubW9hdC5hZHZpZCxcbiAgICBcdFx0XHQgICAgIGxldmVsMjogcmVzcG9uc2UuYWRzWzBdLmluTGluZS5tb2F0LmNwZ2lkLFxuICAgIFx0XHRcdCAgICAgbGV2ZWwzOiByZXNwb25zZS5hZHNbMF0uaW5MaW5lLm1vYXQuY3BpZCxcbiAgICBcdFx0XHQgICAgIGxldmVsNDogcmVzcG9uc2UuYWRzWzBdLmluTGluZS5tb2F0LmNyaWR9O1xuICAgIFx0ICBpZiAocmVzcG9uc2UuYWRzWzBdLmluTGluZS5tb2F0LnNpdGVfaWQpIHtcbiAgICBcdFx0ICBpZHMuc2xpY2VyMSA9IHJlc3BvbnNlLmFkc1swXS5pbkxpbmUubW9hdC5zaXRlX2lkO1xuICAgIFx0ICB9XG4gICAgXHQgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlID0gaW5pdE1vYXRUcmFja2luZyhwbGF5ZXIuZWxfLCBpZHMsIHBsYXllci5kdXJhdGlvbigpLCByZXNwb25zZS5hZHNbMF0uaW5MaW5lLm1vYXQucGFydG5lcmNvZGUsIHBsYXllci5jdXJyZW50U291cmNlKCkuc3JjKTtcbiAgICBcdCAgLy93aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSA9IGluaXRNb2F0VHJhY2tpbmcocGxheWVyLmVsXywgaWRzLCBwbGF5ZXIuZHVyYXRpb24oKSwgJ25pbmVtZWRpYXZwYWlkNzg5NjExNjQnLCBwbGF5ZXIuY3VycmVudFNvdXJjZSgpLnNyYyk7XG4gICAgICB9XG4gICAgICBpZiAod2luZG93Ll9tb2xTZXR0aW5ncy52aWV3YWJpbGl0eVRyYWNraW5nKSB7XG4gICAgXHQgIHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHlUcmFja2luZy5pbml0KHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHkuY29udGV4dElkLFxuICAgIFx0XHRcdCAgcGxheWVyLmR1cmF0aW9uKCksIHBsYXllci5lbF8ub2Zmc2V0V2lkdGgsIHBsYXllci5lbF8ub2Zmc2V0SGVpZ2h0KTtcbiAgICAgIH1cbiAgICAgICovXG5cbiAgICAgIGxvZ2dlci5kZWJ1ZygnPFZBU1RJbnRlZ3JhdG9yLl9wbGF5U2VsZWN0ZWRBZC9wbGF5QWQ+IGdvdCBwbGF5aW5nIGV2ZW50OyB0cmlnZ2VyaW5nIHZhc3QuYWRTdGFydC4uLicpO1xuXG4gICAgICBwbGF5ZXIudHJpZ2dlcigndmFzdC5hZFN0YXJ0Jyk7XG5cbiAgICAgIGlmICh1dGlsaXRpZXMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgIC8vIFZJRExBLTIzMzYgKHNpbXVsYXRlIHVzZXIgYWN0aXZpdHkgdG8gbWFrZSBzdXJlIGNvbnRyb2wtYmFyIGlzIHZpc2libGUgb24gbW9iaWxlIGRldmljZXMpXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgICBcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIFx0XHRwbGF5ZXIudXNlckFjdGl2ZSh0cnVlKTtcbiAgICAgICAgICBcdH0sIGkgKiAyMDAwKTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRWaWRlb1N0YXJ0JywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuICAgICAgfVxuXG4gICAgICBwbGF5ZXIub24oJ2VuZGVkJywgcHJvY2VlZCk7XG4gICAgICBwbGF5ZXIub24oJ3Zhc3QuYWRzQ2FuY2VsJywgcHJvY2VlZCk7XG4gICAgICBwbGF5ZXIub24oJ3Zhc3QuYWRTa2lwJywgcHJvY2VlZCk7XG5cbiAgICAgIGZ1bmN0aW9uIHByb2NlZWQgKGV2dCkge1xuXG4gICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnZW5kZWQnKSB7XG4gICAgICAgICAgICAgIC8vIElnbm9yZSBlbmRlZCBldmVudCBpZiB0aGUgQWQgdGltZSB3YXMgbm90ICduZWFyJyB0aGUgZW5kXG4gICAgICAgICAgICAgIC8vIGF2b2lkcyBpc3N1ZXMgd2hlcmUgSU9TIGNvbnRyb2xzIGNvdWxkIHNraXAgdGhlIEFkXG4gICAgICAgICAgICBcdGlmICh3aW5kb3cuX21vbFNldHRpbmdzLmJyZWFrRHVyYXRpb24pIHtcbiAgICAgICAgICAgIFx0XHRpZiAod2luZG93Ll9tb2xTZXR0aW5ncy5yZWFsVmlkZW9EdXJhdGlvbikge1xuICAgICAgICAgICAgXHRcdCAgICBpZiAoKHdpbmRvdy5fbW9sU2V0dGluZ3MucmVhbFZpZGVvRHVyYXRpb24gLSBwbGF5ZXIuY3VycmVudFRpbWUoKSkgPiAzKSB7XG4gICAgICAgICAgICBcdFx0ICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBcdFx0ICAgIH1cbiAgICAgICAgICAgIFx0XHR9XG4gICAgICAgICAgICBcdH1cbiAgICAgICAgICAgIFx0ZWxzZSBpZiAoKHBsYXllci5kdXJhdGlvbigpIC0gcGxheWVyLmN1cnJlbnRUaW1lKCkpID4gMykge1xuICAgIFx0XHRcdFx0cmV0dXJuO1xuICAgIFx0XHRcdH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICBpZihldnQudHlwZSA9PT0gJ2VuZGVkJyAmJiAocGxheWVyLmR1cmF0aW9uKCkgLSBwbGF5ZXIuY3VycmVudFRpbWUoKSkgPiAzICkge1xuICAgICAgICAgIC8vIElnbm9yZSBlbmRlZCBldmVudCBpZiB0aGUgQWQgdGltZSB3YXMgbm90ICduZWFyJyB0aGUgZW5kXG4gICAgICAgICAgLy8gYXZvaWRzIGlzc3VlcyB3aGVyZSBJT1MgY29udHJvbHMgY291bGQgc2tpcCB0aGUgQWRcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgKi9cblxuICAgICAgICBwbGF5ZXIub2ZmKCdlbmRlZCcsIHByb2NlZWQpO1xuICAgICAgICBwbGF5ZXIub2ZmKCd2YXN0LmFkc0NhbmNlbCcsIHByb2NlZWQpO1xuICAgICAgICBwbGF5ZXIub2ZmKCd2YXN0LmFkU2tpcCcsIHByb2NlZWQpO1xuXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoZSBhZHMgZ2V0IGNhbmNlbCB3ZSBkbyBub3RoaW5nIGFwYXJ0IHJlbW92aW5nIHRoZSBsaXN0bmVyc1xuICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdlbmRlZCcgfHwgZXZ0LnR5cGUgPT09ICd2YXN0LmFkU2tpcCcpIHtcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxvZ2dlci5kZWJ1ZygnPFZBU1RJbnRlZ3JhdG9yLl9wbGF5U2VsZWN0ZWRBZC9wbGF5QWQ+IGNhbGxpbmcgcGxheWVyLnBsYXkoKS4uLicpO1xuXG4gICAgLy8gcGxheWVyLm11dGVkKHRydWUpO1xuICAgIGlmIChwbGF5ZXIuY3VycmVudFRpbWUoKSA+IDAgfHwgZHVyYXRpb25jaGFuZ2VOb3RGaXJlZCkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCc8VkFTVEludGVncmF0b3IuX3BsYXlTZWxlY3RlZEFkL3BsYXlBZD4gVHJpZ2dlciBhbHJlYWR5UGxheWluZyBldmVudCBpZiBhZCB2aWRlbyBhbHJlYWR5IHBsYXlpbmcgb3IgZHVyYXRpb25jaGFuZ2Ugbm90IGZpcmVkJyk7XG4gICAgICBwbGF5ZXIudHJpZ2dlcignYWxyZWFkeVBsYXlpbmcnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBwbGF5ZXIucGxheSgpO1xuICAgIH1cbiAgfVxufTtcblxuVkFTVEludGVncmF0b3IucHJvdG90eXBlLl90cmFja0Vycm9yID0gZnVuY3Rpb24gdHJhY2tFcnJvciAoZXJyb3IsIHJlc3BvbnNlKSB7XG4gIHZhc3RVdGlsLnRyYWNrKHJlc3BvbnNlLmVycm9yVVJMTWFjcm9zLCB7RVJST1JDT0RFOiBlcnJvci5jb2RlIHx8IDkwMH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWQVNUSW50ZWdyYXRvcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/VASTIntegrator.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/VASTResponse.js":
/*!**********************************************!*\
  !*** ./src/scripts/ads/vast/VASTResponse.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar Ad = __webpack_require__(/*! ./Ad */ \"./src/scripts/ads/vast/Ad.js\");\nvar VideoClicks = __webpack_require__(/*! ./VideoClicks */ \"./src/scripts/ads/vast/VideoClicks.js\");\nvar Linear = __webpack_require__(/*! ./Linear */ \"./src/scripts/ads/vast/Linear.js\");\nvar InLine = __webpack_require__(/*! ./InLine */ \"./src/scripts/ads/vast/InLine.js\");\nvar Wrapper = __webpack_require__(/*! ./Wrapper */ \"./src/scripts/ads/vast/Wrapper.js\");\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n// var xml = require('../../utils/xml');\n\nwindow.InLine__A = InLine;\nfunction VASTResponse () {\n  if (!(this instanceof VASTResponse)) {\n    return new VASTResponse();\n  }\n\n  this._linearAdded = false;\n  this.vastVersion = undefined;\n  this.ads = [];\n  this.errorURLMacros = [];\n  this.impressions = [];\n  this.clickTrackings = [];\n  this.customClicks = [];\n  this.trackingEvents = {};\n  this.mediaFiles = [];\n  this.clickThrough = undefined;\n  this.adTitle = '';\n  this.duration = undefined;\n  this.skipoffset = undefined;\n  this.icons = [];\n}\n\nVASTResponse.prototype.addAd = function (ad) {\n  var inLine, wrapper;\n  if (ad instanceof Ad) {\n    inLine = ad.inLine;\n    wrapper = ad.wrapper;\n\n    this.ads.push(ad);\n\n    if (inLine) {\n      this._addInLine(inLine);\n    }\n\n    if (wrapper) {\n      this._addWrapper(wrapper);\n    }\n  }\n};\n\n  /*\n  VASTResponse.prototype._addErrorTrackUrl = function (error) {\n\t  var errorURL = error instanceof xml.JXONTree ? xml.keyValue(error) : error;\n\t  if (errorURL) {\n\t    this.errorURLMacros.push(errorURL);\n\t  }\n\t};\n\t*/\nVASTResponse.prototype._addErrorTrackUrls = function (errors) {\n\t  utilities.isArray(errors) && appendToArray(this.errorURLMacros, errors);\n\t};\n\nVASTResponse.prototype._addImpressions = function (impressions) {\n  utilities.isArray(impressions) && appendToArray(this.impressions, impressions);\n};\n\nVASTResponse.prototype._addClickThrough = function (clickThrough) {\n  if (utilities.isNotEmptyString(clickThrough)) {\n    this.clickThrough = clickThrough;\n  }\n};\n\nVASTResponse.prototype._addClickTrackings = function (clickTrackings) {\n  utilities.isArray(clickTrackings) && appendToArray(this.clickTrackings, clickTrackings);\n};\n\nVASTResponse.prototype._addCustomClicks = function (customClicks) {\n  utilities.isArray(customClicks) && appendToArray(this.customClicks, customClicks);\n};\n\nVASTResponse.prototype._addTrackingEvents = function (trackingEvents) {\n  var eventsMap = this.trackingEvents;\n\n  if (trackingEvents) {\n    trackingEvents = utilities.isArray(trackingEvents) ? trackingEvents : [trackingEvents];\n    trackingEvents.forEach(function (trackingEvent) {\n      if (!eventsMap[trackingEvent.name]) {\n        eventsMap[trackingEvent.name] = [];\n      }\n      eventsMap[trackingEvent.name].push(trackingEvent);\n    });\n  }\n};\n\nVASTResponse.prototype._addTitle = function (title) {\n  if (utilities.isNotEmptyString(title)) {\n    this.adTitle = title;\n  }\n};\n\nVASTResponse.prototype._addDuration = function (duration) {\n  if (utilities.isNumber(duration)) {\n    this.duration = duration;\n  }\n};\n\nVASTResponse.prototype._addVideoClicks = function (videoClicks) {\n  if (videoClicks instanceof VideoClicks) {\n    this._addClickThrough(videoClicks.clickThrough);\n    this._addClickTrackings(videoClicks.clickTrackings);\n    this._addCustomClicks(videoClicks.customClicks);\n  }\n};\n\nVASTResponse.prototype._addMediaFiles = function (mediaFiles) {\n  utilities.isArray(mediaFiles) && appendToArray(this.mediaFiles, mediaFiles);\n};\n\nVASTResponse.prototype._addSkipoffset = function (offset) {\n\t  if (window._molSettings && window._molSettings.skippable) {\n\t\t  if (window._molSettings.skippable.enabled) {\n\t\t\t  if (!this.duration || !window._molSettings.skippable.videoThreshold || this.duration >= window._molSettings.skippable.videoThreshold) {\n\t\t\t\t  this.skipoffset = window._molSettings.skippable.videoOffset;\n\t\t\t  }\n\t\t  }\n\t  }\n\t  else if (offset) {\n\t    this.skipoffset = offset;\n\t  }\n};\n\nVASTResponse.prototype._addAdParameters = function (adParameters) {\n  if (adParameters) {\n    this.adParameters = adParameters;\n  }\n};\n\nVASTResponse.prototype._addIcons = function (icons) {\n  utilities.isArray(icons) && appendToArray(this.icons, icons);\n};\n\nVASTResponse.prototype._addLinear = function (linear) {\n  if (linear instanceof Linear) {\n    this._addDuration(linear.duration);\n    this._addTrackingEvents(linear.trackingEvents);\n    this._addVideoClicks(linear.videoClicks);\n    this._addMediaFiles(linear.mediaFiles);\n    this._addSkipoffset(linear.skipoffset);\n    this._addAdParameters(linear.adParameters);\n    this._addIcons(linear.icons);\n    this._linearAdded = true;\n  }\n};\n\nVASTResponse.prototype._addInLine = function (inLine) {\n  var that = this;\n\n  if (inLine instanceof InLine) {\n    this._addTitle(inLine.adTitle);\n    this._addErrorTrackUrls(inLine.errors);\n    this._addImpressions(inLine.impressions);\n\n    inLine.creatives.forEach(function (creative) {\n      if (creative.linear) {\n        that._addLinear(creative.linear);\n      }\n    });\n  }\n};\n\nVASTResponse.prototype._addWrapper = function (wrapper) {\n  var that = this;\n\n  if (wrapper instanceof Wrapper) {\n    this._addErrorTrackUrls(wrapper.errors);\n    this._addImpressions(wrapper.impressions);\n\n    wrapper.creatives.forEach(function (creative) {\n      var linear = creative.linear;\n      if (linear) {\n        that._addVideoClicks(linear.videoClicks);\n        that.clickThrough = undefined;// We ensure that no clickThrough has been added\n        that._addTrackingEvents(linear.trackingEvents);\n        that._addIcons(linear.icons);\n      }\n    });\n  }\n};\n\nVASTResponse.prototype.hasLinear = function () {\n  return this._linearAdded;\n};\n\nfunction appendToArray (array, items) {\n  items.forEach(function (item) {\n    if (item) {\n      array.push(item);\n    }\n  });\n}\n\nmodule.exports = VASTResponse;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WQVNUUmVzcG9uc2UuanM/ZjQ2OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixTQUFTLG1CQUFPLENBQUMsMENBQU07QUFDdkIsa0JBQWtCLG1CQUFPLENBQUMsNERBQWU7QUFDekMsYUFBYSxtQkFBTyxDQUFDLGtEQUFVO0FBQy9CLGFBQWEsbUJBQU8sQ0FBQyxrREFBVTtBQUMvQixjQUFjLG1CQUFPLENBQUMsb0RBQVc7O0FBRWpDLGdCQUFnQixtQkFBTyxDQUFDLDZFQUE4QjtBQUN0RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L1ZBU1RSZXNwb25zZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIEFkID0gcmVxdWlyZSgnLi9BZCcpO1xudmFyIFZpZGVvQ2xpY2tzID0gcmVxdWlyZSgnLi9WaWRlb0NsaWNrcycpO1xudmFyIExpbmVhciA9IHJlcXVpcmUoJy4vTGluZWFyJyk7XG52YXIgSW5MaW5lID0gcmVxdWlyZSgnLi9JbkxpbmUnKTtcbnZhciBXcmFwcGVyID0gcmVxdWlyZSgnLi9XcmFwcGVyJyk7XG5cbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91dGlsaXR5RnVuY3Rpb25zJyk7XG4vLyB2YXIgeG1sID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMveG1sJyk7XG5cbndpbmRvdy5JbkxpbmVfX0EgPSBJbkxpbmU7XG5mdW5jdGlvbiBWQVNUUmVzcG9uc2UgKCkge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVkFTVFJlc3BvbnNlKSkge1xuICAgIHJldHVybiBuZXcgVkFTVFJlc3BvbnNlKCk7XG4gIH1cblxuICB0aGlzLl9saW5lYXJBZGRlZCA9IGZhbHNlO1xuICB0aGlzLnZhc3RWZXJzaW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLmFkcyA9IFtdO1xuICB0aGlzLmVycm9yVVJMTWFjcm9zID0gW107XG4gIHRoaXMuaW1wcmVzc2lvbnMgPSBbXTtcbiAgdGhpcy5jbGlja1RyYWNraW5ncyA9IFtdO1xuICB0aGlzLmN1c3RvbUNsaWNrcyA9IFtdO1xuICB0aGlzLnRyYWNraW5nRXZlbnRzID0ge307XG4gIHRoaXMubWVkaWFGaWxlcyA9IFtdO1xuICB0aGlzLmNsaWNrVGhyb3VnaCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5hZFRpdGxlID0gJyc7XG4gIHRoaXMuZHVyYXRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuc2tpcG9mZnNldCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5pY29ucyA9IFtdO1xufVxuXG5WQVNUUmVzcG9uc2UucHJvdG90eXBlLmFkZEFkID0gZnVuY3Rpb24gKGFkKSB7XG4gIHZhciBpbkxpbmUsIHdyYXBwZXI7XG4gIGlmIChhZCBpbnN0YW5jZW9mIEFkKSB7XG4gICAgaW5MaW5lID0gYWQuaW5MaW5lO1xuICAgIHdyYXBwZXIgPSBhZC53cmFwcGVyO1xuXG4gICAgdGhpcy5hZHMucHVzaChhZCk7XG5cbiAgICBpZiAoaW5MaW5lKSB7XG4gICAgICB0aGlzLl9hZGRJbkxpbmUoaW5MaW5lKTtcbiAgICB9XG5cbiAgICBpZiAod3JhcHBlcikge1xuICAgICAgdGhpcy5fYWRkV3JhcHBlcih3cmFwcGVyKTtcbiAgICB9XG4gIH1cbn07XG5cbiAgLypcbiAgVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkRXJyb3JUcmFja1VybCA9IGZ1bmN0aW9uIChlcnJvcikge1xuXHQgIHZhciBlcnJvclVSTCA9IGVycm9yIGluc3RhbmNlb2YgeG1sLkpYT05UcmVlID8geG1sLmtleVZhbHVlKGVycm9yKSA6IGVycm9yO1xuXHQgIGlmIChlcnJvclVSTCkge1xuXHQgICAgdGhpcy5lcnJvclVSTE1hY3Jvcy5wdXNoKGVycm9yVVJMKTtcblx0ICB9XG5cdH07XG5cdCovXG5WQVNUUmVzcG9uc2UucHJvdG90eXBlLl9hZGRFcnJvclRyYWNrVXJscyA9IGZ1bmN0aW9uIChlcnJvcnMpIHtcblx0ICB1dGlsaXRpZXMuaXNBcnJheShlcnJvcnMpICYmIGFwcGVuZFRvQXJyYXkodGhpcy5lcnJvclVSTE1hY3JvcywgZXJyb3JzKTtcblx0fTtcblxuVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkSW1wcmVzc2lvbnMgPSBmdW5jdGlvbiAoaW1wcmVzc2lvbnMpIHtcbiAgdXRpbGl0aWVzLmlzQXJyYXkoaW1wcmVzc2lvbnMpICYmIGFwcGVuZFRvQXJyYXkodGhpcy5pbXByZXNzaW9ucywgaW1wcmVzc2lvbnMpO1xufTtcblxuVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkQ2xpY2tUaHJvdWdoID0gZnVuY3Rpb24gKGNsaWNrVGhyb3VnaCkge1xuICBpZiAodXRpbGl0aWVzLmlzTm90RW1wdHlTdHJpbmcoY2xpY2tUaHJvdWdoKSkge1xuICAgIHRoaXMuY2xpY2tUaHJvdWdoID0gY2xpY2tUaHJvdWdoO1xuICB9XG59O1xuXG5WQVNUUmVzcG9uc2UucHJvdG90eXBlLl9hZGRDbGlja1RyYWNraW5ncyA9IGZ1bmN0aW9uIChjbGlja1RyYWNraW5ncykge1xuICB1dGlsaXRpZXMuaXNBcnJheShjbGlja1RyYWNraW5ncykgJiYgYXBwZW5kVG9BcnJheSh0aGlzLmNsaWNrVHJhY2tpbmdzLCBjbGlja1RyYWNraW5ncyk7XG59O1xuXG5WQVNUUmVzcG9uc2UucHJvdG90eXBlLl9hZGRDdXN0b21DbGlja3MgPSBmdW5jdGlvbiAoY3VzdG9tQ2xpY2tzKSB7XG4gIHV0aWxpdGllcy5pc0FycmF5KGN1c3RvbUNsaWNrcykgJiYgYXBwZW5kVG9BcnJheSh0aGlzLmN1c3RvbUNsaWNrcywgY3VzdG9tQ2xpY2tzKTtcbn07XG5cblZBU1RSZXNwb25zZS5wcm90b3R5cGUuX2FkZFRyYWNraW5nRXZlbnRzID0gZnVuY3Rpb24gKHRyYWNraW5nRXZlbnRzKSB7XG4gIHZhciBldmVudHNNYXAgPSB0aGlzLnRyYWNraW5nRXZlbnRzO1xuXG4gIGlmICh0cmFja2luZ0V2ZW50cykge1xuICAgIHRyYWNraW5nRXZlbnRzID0gdXRpbGl0aWVzLmlzQXJyYXkodHJhY2tpbmdFdmVudHMpID8gdHJhY2tpbmdFdmVudHMgOiBbdHJhY2tpbmdFdmVudHNdO1xuICAgIHRyYWNraW5nRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKHRyYWNraW5nRXZlbnQpIHtcbiAgICAgIGlmICghZXZlbnRzTWFwW3RyYWNraW5nRXZlbnQubmFtZV0pIHtcbiAgICAgICAgZXZlbnRzTWFwW3RyYWNraW5nRXZlbnQubmFtZV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGV2ZW50c01hcFt0cmFja2luZ0V2ZW50Lm5hbWVdLnB1c2godHJhY2tpbmdFdmVudCk7XG4gICAgfSk7XG4gIH1cbn07XG5cblZBU1RSZXNwb25zZS5wcm90b3R5cGUuX2FkZFRpdGxlID0gZnVuY3Rpb24gKHRpdGxlKSB7XG4gIGlmICh1dGlsaXRpZXMuaXNOb3RFbXB0eVN0cmluZyh0aXRsZSkpIHtcbiAgICB0aGlzLmFkVGl0bGUgPSB0aXRsZTtcbiAgfVxufTtcblxuVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkRHVyYXRpb24gPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcbiAgaWYgKHV0aWxpdGllcy5pc051bWJlcihkdXJhdGlvbikpIHtcbiAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gIH1cbn07XG5cblZBU1RSZXNwb25zZS5wcm90b3R5cGUuX2FkZFZpZGVvQ2xpY2tzID0gZnVuY3Rpb24gKHZpZGVvQ2xpY2tzKSB7XG4gIGlmICh2aWRlb0NsaWNrcyBpbnN0YW5jZW9mIFZpZGVvQ2xpY2tzKSB7XG4gICAgdGhpcy5fYWRkQ2xpY2tUaHJvdWdoKHZpZGVvQ2xpY2tzLmNsaWNrVGhyb3VnaCk7XG4gICAgdGhpcy5fYWRkQ2xpY2tUcmFja2luZ3ModmlkZW9DbGlja3MuY2xpY2tUcmFja2luZ3MpO1xuICAgIHRoaXMuX2FkZEN1c3RvbUNsaWNrcyh2aWRlb0NsaWNrcy5jdXN0b21DbGlja3MpO1xuICB9XG59O1xuXG5WQVNUUmVzcG9uc2UucHJvdG90eXBlLl9hZGRNZWRpYUZpbGVzID0gZnVuY3Rpb24gKG1lZGlhRmlsZXMpIHtcbiAgdXRpbGl0aWVzLmlzQXJyYXkobWVkaWFGaWxlcykgJiYgYXBwZW5kVG9BcnJheSh0aGlzLm1lZGlhRmlsZXMsIG1lZGlhRmlsZXMpO1xufTtcblxuVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkU2tpcG9mZnNldCA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcblx0ICBpZiAod2luZG93Ll9tb2xTZXR0aW5ncyAmJiB3aW5kb3cuX21vbFNldHRpbmdzLnNraXBwYWJsZSkge1xuXHRcdCAgaWYgKHdpbmRvdy5fbW9sU2V0dGluZ3Muc2tpcHBhYmxlLmVuYWJsZWQpIHtcblx0XHRcdCAgaWYgKCF0aGlzLmR1cmF0aW9uIHx8ICF3aW5kb3cuX21vbFNldHRpbmdzLnNraXBwYWJsZS52aWRlb1RocmVzaG9sZCB8fCB0aGlzLmR1cmF0aW9uID49IHdpbmRvdy5fbW9sU2V0dGluZ3Muc2tpcHBhYmxlLnZpZGVvVGhyZXNob2xkKSB7XG5cdFx0XHRcdCAgdGhpcy5za2lwb2Zmc2V0ID0gd2luZG93Ll9tb2xTZXR0aW5ncy5za2lwcGFibGUudmlkZW9PZmZzZXQ7XG5cdFx0XHQgIH1cblx0XHQgIH1cblx0ICB9XG5cdCAgZWxzZSBpZiAob2Zmc2V0KSB7XG5cdCAgICB0aGlzLnNraXBvZmZzZXQgPSBvZmZzZXQ7XG5cdCAgfVxufTtcblxuVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkQWRQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKGFkUGFyYW1ldGVycykge1xuICBpZiAoYWRQYXJhbWV0ZXJzKSB7XG4gICAgdGhpcy5hZFBhcmFtZXRlcnMgPSBhZFBhcmFtZXRlcnM7XG4gIH1cbn07XG5cblZBU1RSZXNwb25zZS5wcm90b3R5cGUuX2FkZEljb25zID0gZnVuY3Rpb24gKGljb25zKSB7XG4gIHV0aWxpdGllcy5pc0FycmF5KGljb25zKSAmJiBhcHBlbmRUb0FycmF5KHRoaXMuaWNvbnMsIGljb25zKTtcbn07XG5cblZBU1RSZXNwb25zZS5wcm90b3R5cGUuX2FkZExpbmVhciA9IGZ1bmN0aW9uIChsaW5lYXIpIHtcbiAgaWYgKGxpbmVhciBpbnN0YW5jZW9mIExpbmVhcikge1xuICAgIHRoaXMuX2FkZER1cmF0aW9uKGxpbmVhci5kdXJhdGlvbik7XG4gICAgdGhpcy5fYWRkVHJhY2tpbmdFdmVudHMobGluZWFyLnRyYWNraW5nRXZlbnRzKTtcbiAgICB0aGlzLl9hZGRWaWRlb0NsaWNrcyhsaW5lYXIudmlkZW9DbGlja3MpO1xuICAgIHRoaXMuX2FkZE1lZGlhRmlsZXMobGluZWFyLm1lZGlhRmlsZXMpO1xuICAgIHRoaXMuX2FkZFNraXBvZmZzZXQobGluZWFyLnNraXBvZmZzZXQpO1xuICAgIHRoaXMuX2FkZEFkUGFyYW1ldGVycyhsaW5lYXIuYWRQYXJhbWV0ZXJzKTtcbiAgICB0aGlzLl9hZGRJY29ucyhsaW5lYXIuaWNvbnMpO1xuICAgIHRoaXMuX2xpbmVhckFkZGVkID0gdHJ1ZTtcbiAgfVxufTtcblxuVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkSW5MaW5lID0gZnVuY3Rpb24gKGluTGluZSkge1xuICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgaWYgKGluTGluZSBpbnN0YW5jZW9mIEluTGluZSkge1xuICAgIHRoaXMuX2FkZFRpdGxlKGluTGluZS5hZFRpdGxlKTtcbiAgICB0aGlzLl9hZGRFcnJvclRyYWNrVXJscyhpbkxpbmUuZXJyb3JzKTtcbiAgICB0aGlzLl9hZGRJbXByZXNzaW9ucyhpbkxpbmUuaW1wcmVzc2lvbnMpO1xuXG4gICAgaW5MaW5lLmNyZWF0aXZlcy5mb3JFYWNoKGZ1bmN0aW9uIChjcmVhdGl2ZSkge1xuICAgICAgaWYgKGNyZWF0aXZlLmxpbmVhcikge1xuICAgICAgICB0aGF0Ll9hZGRMaW5lYXIoY3JlYXRpdmUubGluZWFyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuVkFTVFJlc3BvbnNlLnByb3RvdHlwZS5fYWRkV3JhcHBlciA9IGZ1bmN0aW9uICh3cmFwcGVyKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcblxuICBpZiAod3JhcHBlciBpbnN0YW5jZW9mIFdyYXBwZXIpIHtcbiAgICB0aGlzLl9hZGRFcnJvclRyYWNrVXJscyh3cmFwcGVyLmVycm9ycyk7XG4gICAgdGhpcy5fYWRkSW1wcmVzc2lvbnMod3JhcHBlci5pbXByZXNzaW9ucyk7XG5cbiAgICB3cmFwcGVyLmNyZWF0aXZlcy5mb3JFYWNoKGZ1bmN0aW9uIChjcmVhdGl2ZSkge1xuICAgICAgdmFyIGxpbmVhciA9IGNyZWF0aXZlLmxpbmVhcjtcbiAgICAgIGlmIChsaW5lYXIpIHtcbiAgICAgICAgdGhhdC5fYWRkVmlkZW9DbGlja3MobGluZWFyLnZpZGVvQ2xpY2tzKTtcbiAgICAgICAgdGhhdC5jbGlja1Rocm91Z2ggPSB1bmRlZmluZWQ7Ly8gV2UgZW5zdXJlIHRoYXQgbm8gY2xpY2tUaHJvdWdoIGhhcyBiZWVuIGFkZGVkXG4gICAgICAgIHRoYXQuX2FkZFRyYWNraW5nRXZlbnRzKGxpbmVhci50cmFja2luZ0V2ZW50cyk7XG4gICAgICAgIHRoYXQuX2FkZEljb25zKGxpbmVhci5pY29ucyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cblZBU1RSZXNwb25zZS5wcm90b3R5cGUuaGFzTGluZWFyID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fbGluZWFyQWRkZWQ7XG59O1xuXG5mdW5jdGlvbiBhcHBlbmRUb0FycmF5IChhcnJheSwgaXRlbXMpIHtcbiAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBhcnJheS5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVkFTVFJlc3BvbnNlO1xuXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/VASTResponse.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/VASTTracker.js":
/*!*********************************************!*\
  !*** ./src/scripts/ads/vast/VASTTracker.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar VASTError = __webpack_require__(/*! ./VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\nvar VASTResponse = __webpack_require__(/*! ./VASTResponse */ \"./src/scripts/ads/vast/VASTResponse.js\");\nvar vastUtil = __webpack_require__(/*! ./vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nfunction VASTTracker (assetURI, vastResponse) {\n  if (!(this instanceof VASTTracker)) {\n    return new VASTTracker(assetURI, vastResponse);\n  }\n\n  this.sanityCheck(assetURI, vastResponse);\n  this.initialize(assetURI, vastResponse);\n\n}\n\nVASTTracker.prototype.initialize = function (assetURI, vastResponse) {\n  this.response = vastResponse;\n  this.assetURI = assetURI;\n  this.progress = 0;\n  this.quartiles = {\n    firstQuartile: {tracked: false, time: Math.round(25 * vastResponse.duration) / 100},\n    midpoint: {tracked: false, time: Math.round(50 * vastResponse.duration) / 100},\n    thirdQuartile: {tracked: false, time: Math.round(75 * vastResponse.duration) / 100}\n  };\n};\n\nVASTTracker.prototype.sanityCheck = function (assetURI, vastResponse) {\n  if (!utilities.isString(assetURI) || utilities.isEmptyString(assetURI)) {\n    throw new VASTError('on VASTTracker constructor, missing required the URI of the ad asset being played');\n  }\n\n  if (!(vastResponse instanceof VASTResponse)) {\n    throw new VASTError('on VASTTracker constructor, missing required VAST response');\n  }\n};\n\nVASTTracker.prototype.trackURLs = function trackURLs (urls, variables) {\n  if (utilities.isArray(urls) && urls.length > 0) {\n    variables = utilities.extend({\n      ASSETURI: this.assetURI,\n      CONTENTPLAYHEAD: vastUtil.formatProgress(this.progress)\n    }, variables || {});\n\n    vastUtil.track(urls, variables);\n  }\n};\n\nVASTTracker.prototype.trackEvent = function trackEvent (eventName, trackOnce) {\n    if (this.response.trackingEvents[eventName] && window._molSettings.viewabilityTracking) {\n    \t  window._molSettings.viewabilityTracking.invokeEvent(eventName);\n    }\n  this.trackURLs(getEventUris(this.response.trackingEvents[eventName]));\n  if (trackOnce) {\n    this.response.trackingEvents[eventName] = undefined;\n  }\n\n  // **** Local Function **** //\n  function getEventUris (trackingEvents) {\n    var uris;\n\n    if (trackingEvents) {\n      uris = [];\n      trackingEvents.forEach(function (event) {\n          if (!event.uri) {\n              return;\n          }\n\n          uris.push(event.uri);\n      });\n    }\n    return uris;\n  }\n};\n\nVASTTracker.prototype.trackProgress = function trackProgress (newProgressInMs) {\n  var that = this;\n  var events = [];\n  var ONCE = true;\n  var ALWAYS = false;\n  var trackingEvents = this.response.trackingEvents;\n\n  if (utilities.isNumber(newProgressInMs)) {\n    addTrackEvent('start', ONCE, newProgressInMs > 0);\n    addTrackEvent('rewind', ALWAYS, hasRewound(this.progress, newProgressInMs));\n    addQuartileEvents(newProgressInMs);\n    trackProgressEvents(newProgressInMs);\n    trackEvents();\n    this.progress = newProgressInMs;\n  }\n\n  // **** Local Function **** //\n  function hasRewound (currentProgress, newProgress) {\n    var REWIND_THRESHOLD = 3000; // IOS video clock is very unreliable and we need a 3 seconds threshold to ensure that there was a rewind an that it was on purpose.\n    return currentProgress > newProgressInMs && Math.abs(newProgress - currentProgress) > REWIND_THRESHOLD;\n  }\n\n  function addTrackEvent (eventName, trackOnce, canBeAdded) {\n    if (trackingEvents[eventName] && canBeAdded) {\n      events.push({\n        name: eventName,\n        trackOnce: !!trackOnce\n      });\n    }\n  }\n\n  function addQuartileEvents (progress) {\n    var quartiles = that.quartiles;\n    var firstQuartile = that.quartiles.firstQuartile;\n    var midpoint = that.quartiles.midpoint;\n    var thirdQuartile = that.quartiles.thirdQuartile;\n\n    if (!firstQuartile.tracked) {\n      trackQuartile('firstQuartile', progress);\n    } else if (!midpoint.tracked) {\n      trackQuartile('midpoint', progress);\n    } else if (!thirdQuartile.tracked) {\n      trackQuartile('thirdQuartile', progress);\n    }\n\n    // **** Local Function **** //\n    function trackQuartile (quartileName, progress) {\n      var quartile = quartiles[quartileName];\n      if (canBeTracked(quartile, progress)) {\n        quartile.tracked = true;\n        addTrackEvent(quartileName, ONCE, true);\n      }\n    }\n  }\n\n  function canBeTracked (quartile, progress) {\n    var quartileTime = quartile.time;\n    // We only fire the quartile event if the progress is bigger than the quartile time by 5 seconds at most.\n    return progress >= quartileTime && progress <= (quartileTime + 5000);\n  }\n\n  function trackProgressEvents (progress) {\n    if (!utilities.isArray(trackingEvents.progress)) {\n      return; // Nothing to track\n    }\n\n    var pendingProgressEvts = [];\n\n    trackingEvents.progress.forEach(function (evt) {\n      if (evt.offset <= progress) {\n        that.trackURLs([evt.uri]);\n      } else {\n        pendingProgressEvts.push(evt);\n      }\n    });\n    trackingEvents.progress = pendingProgressEvts;\n  }\n\n  function trackEvents () {\n    events.forEach(function (event) {\n      that.trackEvent(event.name, event.trackOnce);\n    });\n  }\n};\n\n[\n  'rewind',\n  'fullscreen',\n  'exitFullscreen',\n  'pause',\n  'resume',\n  'mute',\n  'unmute',\n  'acceptInvitation',\n  'acceptInvitationLinear',\n  'collapse',\n  'expand'\n].forEach(function (eventName) {\n    VASTTracker.prototype['track' + utilities.capitalize(eventName)] = function () {\n      this.trackEvent(eventName);\n    };\n  });\n\n[\n  'start',\n  'skip',\n  'close',\n  'closeLinear'\n].forEach(function (eventName) {\n    VASTTracker.prototype['track' + utilities.capitalize(eventName)] = function () {\n      this.trackEvent(eventName, true);\n    };\n  });\n\n[\n  'firstQuartile',\n  'midpoint',\n  'thirdQuartile'\n].forEach(function (quartile) {\n    VASTTracker.prototype['track' + utilities.capitalize(quartile)] = function () {\n      this.quartiles[quartile].tracked = true;\n      this.trackEvent(quartile, true);\n    };\n  });\n\nVASTTracker.prototype.trackComplete = function () {\n  if (this.quartiles.thirdQuartile.tracked) {\n    this.trackEvent('complete', true);\n  }\n};\n\nVASTTracker.prototype.trackErrorWithCode = function trackErrorWithCode (errorcode) {\n  if (utilities.isNumber(errorcode)) {\n    this.trackURLs(this.response.errorURLMacros, {ERRORCODE: errorcode});\n  }\n};\n\nVASTTracker.prototype.trackImpressions = function trackImpressions () {\n  this.trackURLs(this.response.impressions);\n};\n\nVASTTracker.prototype.trackCreativeView = function trackCreativeView () {\n  this.trackEvent('creativeView');\n};\n\nVASTTracker.prototype.trackClick = function trackClick () {\n    if (window._molSettings.viewabilityTracking) {\n  \t  window._molSettings.viewabilityTracking.invokeEvent('ad-click');\n    }\n  this.trackURLs(this.response.clickTrackings);\n};\n\nmodule.exports = VASTTracker;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WQVNUVHJhY2tlci5qcz84MmQ1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLGdCQUFnQixtQkFBTyxDQUFDLHdEQUFhO0FBQ3JDLG1CQUFtQixtQkFBTyxDQUFDLDhEQUFnQjtBQUMzQyxlQUFlLG1CQUFPLENBQUMsc0RBQVk7QUFDbkMsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUVBQW1FO0FBQ3ZGLGVBQWUsbUVBQW1FO0FBQ2xGLG9CQUFvQjtBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGlCQUFpQjs7QUFFdEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtEQUFrRCxxQkFBcUI7QUFDdkU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L1ZBU1RUcmFja2VyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVkFTVEVycm9yID0gcmVxdWlyZSgnLi9WQVNURXJyb3InKTtcbnZhciBWQVNUUmVzcG9uc2UgPSByZXF1aXJlKCcuL1ZBU1RSZXNwb25zZScpO1xudmFyIHZhc3RVdGlsID0gcmVxdWlyZSgnLi92YXN0VXRpbCcpO1xudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxuZnVuY3Rpb24gVkFTVFRyYWNrZXIgKGFzc2V0VVJJLCB2YXN0UmVzcG9uc2UpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFZBU1RUcmFja2VyKSkge1xuICAgIHJldHVybiBuZXcgVkFTVFRyYWNrZXIoYXNzZXRVUkksIHZhc3RSZXNwb25zZSk7XG4gIH1cblxuICB0aGlzLnNhbml0eUNoZWNrKGFzc2V0VVJJLCB2YXN0UmVzcG9uc2UpO1xuICB0aGlzLmluaXRpYWxpemUoYXNzZXRVUkksIHZhc3RSZXNwb25zZSk7XG5cbn1cblxuVkFTVFRyYWNrZXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoYXNzZXRVUkksIHZhc3RSZXNwb25zZSkge1xuICB0aGlzLnJlc3BvbnNlID0gdmFzdFJlc3BvbnNlO1xuICB0aGlzLmFzc2V0VVJJID0gYXNzZXRVUkk7XG4gIHRoaXMucHJvZ3Jlc3MgPSAwO1xuICB0aGlzLnF1YXJ0aWxlcyA9IHtcbiAgICBmaXJzdFF1YXJ0aWxlOiB7dHJhY2tlZDogZmFsc2UsIHRpbWU6IE1hdGgucm91bmQoMjUgKiB2YXN0UmVzcG9uc2UuZHVyYXRpb24pIC8gMTAwfSxcbiAgICBtaWRwb2ludDoge3RyYWNrZWQ6IGZhbHNlLCB0aW1lOiBNYXRoLnJvdW5kKDUwICogdmFzdFJlc3BvbnNlLmR1cmF0aW9uKSAvIDEwMH0sXG4gICAgdGhpcmRRdWFydGlsZToge3RyYWNrZWQ6IGZhbHNlLCB0aW1lOiBNYXRoLnJvdW5kKDc1ICogdmFzdFJlc3BvbnNlLmR1cmF0aW9uKSAvIDEwMH1cbiAgfTtcbn07XG5cblZBU1RUcmFja2VyLnByb3RvdHlwZS5zYW5pdHlDaGVjayA9IGZ1bmN0aW9uIChhc3NldFVSSSwgdmFzdFJlc3BvbnNlKSB7XG4gIGlmICghdXRpbGl0aWVzLmlzU3RyaW5nKGFzc2V0VVJJKSB8fCB1dGlsaXRpZXMuaXNFbXB0eVN0cmluZyhhc3NldFVSSSkpIHtcbiAgICB0aHJvdyBuZXcgVkFTVEVycm9yKCdvbiBWQVNUVHJhY2tlciBjb25zdHJ1Y3RvciwgbWlzc2luZyByZXF1aXJlZCB0aGUgVVJJIG9mIHRoZSBhZCBhc3NldCBiZWluZyBwbGF5ZWQnKTtcbiAgfVxuXG4gIGlmICghKHZhc3RSZXNwb25zZSBpbnN0YW5jZW9mIFZBU1RSZXNwb25zZSkpIHtcbiAgICB0aHJvdyBuZXcgVkFTVEVycm9yKCdvbiBWQVNUVHJhY2tlciBjb25zdHJ1Y3RvciwgbWlzc2luZyByZXF1aXJlZCBWQVNUIHJlc3BvbnNlJyk7XG4gIH1cbn07XG5cblZBU1RUcmFja2VyLnByb3RvdHlwZS50cmFja1VSTHMgPSBmdW5jdGlvbiB0cmFja1VSTHMgKHVybHMsIHZhcmlhYmxlcykge1xuICBpZiAodXRpbGl0aWVzLmlzQXJyYXkodXJscykgJiYgdXJscy5sZW5ndGggPiAwKSB7XG4gICAgdmFyaWFibGVzID0gdXRpbGl0aWVzLmV4dGVuZCh7XG4gICAgICBBU1NFVFVSSTogdGhpcy5hc3NldFVSSSxcbiAgICAgIENPTlRFTlRQTEFZSEVBRDogdmFzdFV0aWwuZm9ybWF0UHJvZ3Jlc3ModGhpcy5wcm9ncmVzcylcbiAgICB9LCB2YXJpYWJsZXMgfHwge30pO1xuXG4gICAgdmFzdFV0aWwudHJhY2sodXJscywgdmFyaWFibGVzKTtcbiAgfVxufTtcblxuVkFTVFRyYWNrZXIucHJvdG90eXBlLnRyYWNrRXZlbnQgPSBmdW5jdGlvbiB0cmFja0V2ZW50IChldmVudE5hbWUsIHRyYWNrT25jZSkge1xuICAgIGlmICh0aGlzLnJlc3BvbnNlLnRyYWNraW5nRXZlbnRzW2V2ZW50TmFtZV0gJiYgd2luZG93Ll9tb2xTZXR0aW5ncy52aWV3YWJpbGl0eVRyYWNraW5nKSB7XG4gICAgXHQgIHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHlUcmFja2luZy5pbnZva2VFdmVudChldmVudE5hbWUpO1xuICAgIH1cbiAgdGhpcy50cmFja1VSTHMoZ2V0RXZlbnRVcmlzKHRoaXMucmVzcG9uc2UudHJhY2tpbmdFdmVudHNbZXZlbnROYW1lXSkpO1xuICBpZiAodHJhY2tPbmNlKSB7XG4gICAgdGhpcy5yZXNwb25zZS50cmFja2luZ0V2ZW50c1tldmVudE5hbWVdID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbiAqKioqIC8vXG4gIGZ1bmN0aW9uIGdldEV2ZW50VXJpcyAodHJhY2tpbmdFdmVudHMpIHtcbiAgICB2YXIgdXJpcztcblxuICAgIGlmICh0cmFja2luZ0V2ZW50cykge1xuICAgICAgdXJpcyA9IFtdO1xuICAgICAgdHJhY2tpbmdFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoIWV2ZW50LnVyaSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXJpcy5wdXNoKGV2ZW50LnVyaSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHVyaXM7XG4gIH1cbn07XG5cblZBU1RUcmFja2VyLnByb3RvdHlwZS50cmFja1Byb2dyZXNzID0gZnVuY3Rpb24gdHJhY2tQcm9ncmVzcyAobmV3UHJvZ3Jlc3NJbk1zKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIGV2ZW50cyA9IFtdO1xuICB2YXIgT05DRSA9IHRydWU7XG4gIHZhciBBTFdBWVMgPSBmYWxzZTtcbiAgdmFyIHRyYWNraW5nRXZlbnRzID0gdGhpcy5yZXNwb25zZS50cmFja2luZ0V2ZW50cztcblxuICBpZiAodXRpbGl0aWVzLmlzTnVtYmVyKG5ld1Byb2dyZXNzSW5NcykpIHtcbiAgICBhZGRUcmFja0V2ZW50KCdzdGFydCcsIE9OQ0UsIG5ld1Byb2dyZXNzSW5NcyA+IDApO1xuICAgIGFkZFRyYWNrRXZlbnQoJ3Jld2luZCcsIEFMV0FZUywgaGFzUmV3b3VuZCh0aGlzLnByb2dyZXNzLCBuZXdQcm9ncmVzc0luTXMpKTtcbiAgICBhZGRRdWFydGlsZUV2ZW50cyhuZXdQcm9ncmVzc0luTXMpO1xuICAgIHRyYWNrUHJvZ3Jlc3NFdmVudHMobmV3UHJvZ3Jlc3NJbk1zKTtcbiAgICB0cmFja0V2ZW50cygpO1xuICAgIHRoaXMucHJvZ3Jlc3MgPSBuZXdQcm9ncmVzc0luTXM7XG4gIH1cblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9uICoqKiogLy9cbiAgZnVuY3Rpb24gaGFzUmV3b3VuZCAoY3VycmVudFByb2dyZXNzLCBuZXdQcm9ncmVzcykge1xuICAgIHZhciBSRVdJTkRfVEhSRVNIT0xEID0gMzAwMDsgLy8gSU9TIHZpZGVvIGNsb2NrIGlzIHZlcnkgdW5yZWxpYWJsZSBhbmQgd2UgbmVlZCBhIDMgc2Vjb25kcyB0aHJlc2hvbGQgdG8gZW5zdXJlIHRoYXQgdGhlcmUgd2FzIGEgcmV3aW5kIGFuIHRoYXQgaXQgd2FzIG9uIHB1cnBvc2UuXG4gICAgcmV0dXJuIGN1cnJlbnRQcm9ncmVzcyA+IG5ld1Byb2dyZXNzSW5NcyAmJiBNYXRoLmFicyhuZXdQcm9ncmVzcyAtIGN1cnJlbnRQcm9ncmVzcykgPiBSRVdJTkRfVEhSRVNIT0xEO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkVHJhY2tFdmVudCAoZXZlbnROYW1lLCB0cmFja09uY2UsIGNhbkJlQWRkZWQpIHtcbiAgICBpZiAodHJhY2tpbmdFdmVudHNbZXZlbnROYW1lXSAmJiBjYW5CZUFkZGVkKSB7XG4gICAgICBldmVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgdHJhY2tPbmNlOiAhIXRyYWNrT25jZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkUXVhcnRpbGVFdmVudHMgKHByb2dyZXNzKSB7XG4gICAgdmFyIHF1YXJ0aWxlcyA9IHRoYXQucXVhcnRpbGVzO1xuICAgIHZhciBmaXJzdFF1YXJ0aWxlID0gdGhhdC5xdWFydGlsZXMuZmlyc3RRdWFydGlsZTtcbiAgICB2YXIgbWlkcG9pbnQgPSB0aGF0LnF1YXJ0aWxlcy5taWRwb2ludDtcbiAgICB2YXIgdGhpcmRRdWFydGlsZSA9IHRoYXQucXVhcnRpbGVzLnRoaXJkUXVhcnRpbGU7XG5cbiAgICBpZiAoIWZpcnN0UXVhcnRpbGUudHJhY2tlZCkge1xuICAgICAgdHJhY2tRdWFydGlsZSgnZmlyc3RRdWFydGlsZScsIHByb2dyZXNzKTtcbiAgICB9IGVsc2UgaWYgKCFtaWRwb2ludC50cmFja2VkKSB7XG4gICAgICB0cmFja1F1YXJ0aWxlKCdtaWRwb2ludCcsIHByb2dyZXNzKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlyZFF1YXJ0aWxlLnRyYWNrZWQpIHtcbiAgICAgIHRyYWNrUXVhcnRpbGUoJ3RoaXJkUXVhcnRpbGUnLCBwcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbiAqKioqIC8vXG4gICAgZnVuY3Rpb24gdHJhY2tRdWFydGlsZSAocXVhcnRpbGVOYW1lLCBwcm9ncmVzcykge1xuICAgICAgdmFyIHF1YXJ0aWxlID0gcXVhcnRpbGVzW3F1YXJ0aWxlTmFtZV07XG4gICAgICBpZiAoY2FuQmVUcmFja2VkKHF1YXJ0aWxlLCBwcm9ncmVzcykpIHtcbiAgICAgICAgcXVhcnRpbGUudHJhY2tlZCA9IHRydWU7XG4gICAgICAgIGFkZFRyYWNrRXZlbnQocXVhcnRpbGVOYW1lLCBPTkNFLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYW5CZVRyYWNrZWQgKHF1YXJ0aWxlLCBwcm9ncmVzcykge1xuICAgIHZhciBxdWFydGlsZVRpbWUgPSBxdWFydGlsZS50aW1lO1xuICAgIC8vIFdlIG9ubHkgZmlyZSB0aGUgcXVhcnRpbGUgZXZlbnQgaWYgdGhlIHByb2dyZXNzIGlzIGJpZ2dlciB0aGFuIHRoZSBxdWFydGlsZSB0aW1lIGJ5IDUgc2Vjb25kcyBhdCBtb3N0LlxuICAgIHJldHVybiBwcm9ncmVzcyA+PSBxdWFydGlsZVRpbWUgJiYgcHJvZ3Jlc3MgPD0gKHF1YXJ0aWxlVGltZSArIDUwMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhY2tQcm9ncmVzc0V2ZW50cyAocHJvZ3Jlc3MpIHtcbiAgICBpZiAoIXV0aWxpdGllcy5pc0FycmF5KHRyYWNraW5nRXZlbnRzLnByb2dyZXNzKSkge1xuICAgICAgcmV0dXJuOyAvLyBOb3RoaW5nIHRvIHRyYWNrXG4gICAgfVxuXG4gICAgdmFyIHBlbmRpbmdQcm9ncmVzc0V2dHMgPSBbXTtcblxuICAgIHRyYWNraW5nRXZlbnRzLnByb2dyZXNzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuICAgICAgaWYgKGV2dC5vZmZzZXQgPD0gcHJvZ3Jlc3MpIHtcbiAgICAgICAgdGhhdC50cmFja1VSTHMoW2V2dC51cmldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBlbmRpbmdQcm9ncmVzc0V2dHMucHVzaChldnQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRyYWNraW5nRXZlbnRzLnByb2dyZXNzID0gcGVuZGluZ1Byb2dyZXNzRXZ0cztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWNrRXZlbnRzICgpIHtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRoYXQudHJhY2tFdmVudChldmVudC5uYW1lLCBldmVudC50cmFja09uY2UpO1xuICAgIH0pO1xuICB9XG59O1xuXG5bXG4gICdyZXdpbmQnLFxuICAnZnVsbHNjcmVlbicsXG4gICdleGl0RnVsbHNjcmVlbicsXG4gICdwYXVzZScsXG4gICdyZXN1bWUnLFxuICAnbXV0ZScsXG4gICd1bm11dGUnLFxuICAnYWNjZXB0SW52aXRhdGlvbicsXG4gICdhY2NlcHRJbnZpdGF0aW9uTGluZWFyJyxcbiAgJ2NvbGxhcHNlJyxcbiAgJ2V4cGFuZCdcbl0uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgVkFTVFRyYWNrZXIucHJvdG90eXBlWyd0cmFjaycgKyB1dGlsaXRpZXMuY2FwaXRhbGl6ZShldmVudE5hbWUpXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMudHJhY2tFdmVudChldmVudE5hbWUpO1xuICAgIH07XG4gIH0pO1xuXG5bXG4gICdzdGFydCcsXG4gICdza2lwJyxcbiAgJ2Nsb3NlJyxcbiAgJ2Nsb3NlTGluZWFyJ1xuXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICBWQVNUVHJhY2tlci5wcm90b3R5cGVbJ3RyYWNrJyArIHV0aWxpdGllcy5jYXBpdGFsaXplKGV2ZW50TmFtZSldID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy50cmFja0V2ZW50KGV2ZW50TmFtZSwgdHJ1ZSk7XG4gICAgfTtcbiAgfSk7XG5cbltcbiAgJ2ZpcnN0UXVhcnRpbGUnLFxuICAnbWlkcG9pbnQnLFxuICAndGhpcmRRdWFydGlsZSdcbl0uZm9yRWFjaChmdW5jdGlvbiAocXVhcnRpbGUpIHtcbiAgICBWQVNUVHJhY2tlci5wcm90b3R5cGVbJ3RyYWNrJyArIHV0aWxpdGllcy5jYXBpdGFsaXplKHF1YXJ0aWxlKV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnF1YXJ0aWxlc1txdWFydGlsZV0udHJhY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLnRyYWNrRXZlbnQocXVhcnRpbGUsIHRydWUpO1xuICAgIH07XG4gIH0pO1xuXG5WQVNUVHJhY2tlci5wcm90b3R5cGUudHJhY2tDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMucXVhcnRpbGVzLnRoaXJkUXVhcnRpbGUudHJhY2tlZCkge1xuICAgIHRoaXMudHJhY2tFdmVudCgnY29tcGxldGUnLCB0cnVlKTtcbiAgfVxufTtcblxuVkFTVFRyYWNrZXIucHJvdG90eXBlLnRyYWNrRXJyb3JXaXRoQ29kZSA9IGZ1bmN0aW9uIHRyYWNrRXJyb3JXaXRoQ29kZSAoZXJyb3Jjb2RlKSB7XG4gIGlmICh1dGlsaXRpZXMuaXNOdW1iZXIoZXJyb3Jjb2RlKSkge1xuICAgIHRoaXMudHJhY2tVUkxzKHRoaXMucmVzcG9uc2UuZXJyb3JVUkxNYWNyb3MsIHtFUlJPUkNPREU6IGVycm9yY29kZX0pO1xuICB9XG59O1xuXG5WQVNUVHJhY2tlci5wcm90b3R5cGUudHJhY2tJbXByZXNzaW9ucyA9IGZ1bmN0aW9uIHRyYWNrSW1wcmVzc2lvbnMgKCkge1xuICB0aGlzLnRyYWNrVVJMcyh0aGlzLnJlc3BvbnNlLmltcHJlc3Npb25zKTtcbn07XG5cblZBU1RUcmFja2VyLnByb3RvdHlwZS50cmFja0NyZWF0aXZlVmlldyA9IGZ1bmN0aW9uIHRyYWNrQ3JlYXRpdmVWaWV3ICgpIHtcbiAgdGhpcy50cmFja0V2ZW50KCdjcmVhdGl2ZVZpZXcnKTtcbn07XG5cblZBU1RUcmFja2VyLnByb3RvdHlwZS50cmFja0NsaWNrID0gZnVuY3Rpb24gdHJhY2tDbGljayAoKSB7XG4gICAgaWYgKHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHlUcmFja2luZykge1xuICBcdCAgd2luZG93Ll9tb2xTZXR0aW5ncy52aWV3YWJpbGl0eVRyYWNraW5nLmludm9rZUV2ZW50KCdhZC1jbGljaycpO1xuICAgIH1cbiAgdGhpcy50cmFja1VSTHModGhpcy5yZXNwb25zZS5jbGlja1RyYWNraW5ncyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZBU1RUcmFja2VyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/VASTTracker.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Verification.js":
/*!**********************************************!*\
  !*** ./src/scripts/ads/vast/Verification.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\nvar vastUtil = __webpack_require__(/*! ./vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nfunction Verification (verificationJTree) {\n  if (!(this instanceof Verification)) {\n    return new Verification(verificationJTree);\n  }\n\n  this.vendor = verificationJTree.attr('vendor');\n  if (verificationJTree.javaScriptResource) {\n\t  this.javaScriptResources = parseResources(verificationJTree.javaScriptResource);\n  }\n  if (vastUtil.isFlashSupported() && verificationJTree.flashResource) {\n\t  this.javaScriptResources = parseResources(verificationJTree.javaScriptResource);\n  }\n  if (verificationJTree.viewableImpression) {\n\t  this.viewableImpression = {id: verificationJTree.viewableImpression.attr('id'), uri: xml.keyValue(verificationJTree.viewableImpression)};\n  }\n\n  function parseResources (resources) {\n\t  var arr = [];\n\t  var arrData;\n\t  if (resources) {\n\t\t  arrData = utilities.isArray(resources) ? resources : [resources];\n\t\t  arrData.forEach(function (elem) {\n\t\t\t  arr.push({apiFramework: elem.attr('apiFramework'), uri: xml.keyValue(elem)});\n\t\t  });\n\t  }\n\t  return arr;\n  }\n}\n\nVerification.parseAdVerifications = function parseAdVerifications (verificationsJTree) {\n  var verifications = [];\n  var verificationsData;\n  if (utilities.isDefined(verificationsJTree) && utilities.isDefined(verificationsJTree.verification)) {\n\t  verificationsData = utilities.isArray(verificationsJTree.verification) ? verificationsJTree.verification : [verificationsJTree.verification];\n\t  verificationsData.forEach(function (verification) {\n    \tverifications.push(new Verification(verification));\n    });\n  }\n  return verifications;\n};\n\nmodule.exports = Verification;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WZXJpZmljYXRpb24uanM/MDMzNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixVQUFVLG1CQUFPLENBQUMsbURBQWlCO0FBQ25DLGVBQWUsbUJBQU8sQ0FBQyxzREFBWTtBQUNuQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7O0FBRXREO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpRUFBaUU7QUFDaEYsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L1ZlcmlmaWNhdGlvbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xudmFyIHZhc3RVdGlsID0gcmVxdWlyZSgnLi92YXN0VXRpbCcpO1xudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxuZnVuY3Rpb24gVmVyaWZpY2F0aW9uICh2ZXJpZmljYXRpb25KVHJlZSkge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVmVyaWZpY2F0aW9uKSkge1xuICAgIHJldHVybiBuZXcgVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbkpUcmVlKTtcbiAgfVxuXG4gIHRoaXMudmVuZG9yID0gdmVyaWZpY2F0aW9uSlRyZWUuYXR0cigndmVuZG9yJyk7XG4gIGlmICh2ZXJpZmljYXRpb25KVHJlZS5qYXZhU2NyaXB0UmVzb3VyY2UpIHtcblx0ICB0aGlzLmphdmFTY3JpcHRSZXNvdXJjZXMgPSBwYXJzZVJlc291cmNlcyh2ZXJpZmljYXRpb25KVHJlZS5qYXZhU2NyaXB0UmVzb3VyY2UpO1xuICB9XG4gIGlmICh2YXN0VXRpbC5pc0ZsYXNoU3VwcG9ydGVkKCkgJiYgdmVyaWZpY2F0aW9uSlRyZWUuZmxhc2hSZXNvdXJjZSkge1xuXHQgIHRoaXMuamF2YVNjcmlwdFJlc291cmNlcyA9IHBhcnNlUmVzb3VyY2VzKHZlcmlmaWNhdGlvbkpUcmVlLmphdmFTY3JpcHRSZXNvdXJjZSk7XG4gIH1cbiAgaWYgKHZlcmlmaWNhdGlvbkpUcmVlLnZpZXdhYmxlSW1wcmVzc2lvbikge1xuXHQgIHRoaXMudmlld2FibGVJbXByZXNzaW9uID0ge2lkOiB2ZXJpZmljYXRpb25KVHJlZS52aWV3YWJsZUltcHJlc3Npb24uYXR0cignaWQnKSwgdXJpOiB4bWwua2V5VmFsdWUodmVyaWZpY2F0aW9uSlRyZWUudmlld2FibGVJbXByZXNzaW9uKX07XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVJlc291cmNlcyAocmVzb3VyY2VzKSB7XG5cdCAgdmFyIGFyciA9IFtdO1xuXHQgIHZhciBhcnJEYXRhO1xuXHQgIGlmIChyZXNvdXJjZXMpIHtcblx0XHQgIGFyckRhdGEgPSB1dGlsaXRpZXMuaXNBcnJheShyZXNvdXJjZXMpID8gcmVzb3VyY2VzIDogW3Jlc291cmNlc107XG5cdFx0ICBhcnJEYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcblx0XHRcdCAgYXJyLnB1c2goe2FwaUZyYW1ld29yazogZWxlbS5hdHRyKCdhcGlGcmFtZXdvcmsnKSwgdXJpOiB4bWwua2V5VmFsdWUoZWxlbSl9KTtcblx0XHQgIH0pO1xuXHQgIH1cblx0ICByZXR1cm4gYXJyO1xuICB9XG59XG5cblZlcmlmaWNhdGlvbi5wYXJzZUFkVmVyaWZpY2F0aW9ucyA9IGZ1bmN0aW9uIHBhcnNlQWRWZXJpZmljYXRpb25zICh2ZXJpZmljYXRpb25zSlRyZWUpIHtcbiAgdmFyIHZlcmlmaWNhdGlvbnMgPSBbXTtcbiAgdmFyIHZlcmlmaWNhdGlvbnNEYXRhO1xuICBpZiAodXRpbGl0aWVzLmlzRGVmaW5lZCh2ZXJpZmljYXRpb25zSlRyZWUpICYmIHV0aWxpdGllcy5pc0RlZmluZWQodmVyaWZpY2F0aW9uc0pUcmVlLnZlcmlmaWNhdGlvbikpIHtcblx0ICB2ZXJpZmljYXRpb25zRGF0YSA9IHV0aWxpdGllcy5pc0FycmF5KHZlcmlmaWNhdGlvbnNKVHJlZS52ZXJpZmljYXRpb24pID8gdmVyaWZpY2F0aW9uc0pUcmVlLnZlcmlmaWNhdGlvbiA6IFt2ZXJpZmljYXRpb25zSlRyZWUudmVyaWZpY2F0aW9uXTtcblx0ICB2ZXJpZmljYXRpb25zRGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2ZXJpZmljYXRpb24pIHtcbiAgICBcdHZlcmlmaWNhdGlvbnMucHVzaChuZXcgVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbikpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB2ZXJpZmljYXRpb25zO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWZXJpZmljYXRpb247XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Verification.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/VideoClicks.js":
/*!*********************************************!*\
  !*** ./src/scripts/ads/vast/VideoClicks.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\n\nfunction VideoClicks (videoClickJTree) {\n  if (!(this instanceof VideoClicks)) {\n    return new VideoClicks(videoClickJTree);\n  }\n\n  this.clickThrough = xml.keyValue(videoClickJTree.clickThrough);\n  this.clickTrackings = parseClickTrackings(videoClickJTree.clickTracking);\n  this.customClicks = parseClickTrackings(videoClickJTree.customClick);\n\n  // **** Local Functions **** //\n  function parseClickTrackings (trackingData) {\n    var clickTrackings = [];\n    if (trackingData) {\n      trackingData = utilities.isArray(trackingData) ? trackingData : [trackingData];\n      trackingData.forEach(function (clickTrackingData) {\n        clickTrackings.push(xml.keyValue(clickTrackingData));\n      });\n    }\n    return clickTrackings;\n  }\n}\n\nmodule.exports = VideoClicks;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WaWRlb0NsaWNrcy5qcz9iNzdkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLGdCQUFnQixtQkFBTyxDQUFDLDZFQUE4QjtBQUN0RCxVQUFVLG1CQUFPLENBQUMsbURBQWlCOztBQUVuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WaWRlb0NsaWNrcy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcbnZhciB4bWwgPSByZXF1aXJlKCcuLi8uLi91dGlscy94bWwnKTtcblxuZnVuY3Rpb24gVmlkZW9DbGlja3MgKHZpZGVvQ2xpY2tKVHJlZSkge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVmlkZW9DbGlja3MpKSB7XG4gICAgcmV0dXJuIG5ldyBWaWRlb0NsaWNrcyh2aWRlb0NsaWNrSlRyZWUpO1xuICB9XG5cbiAgdGhpcy5jbGlja1Rocm91Z2ggPSB4bWwua2V5VmFsdWUodmlkZW9DbGlja0pUcmVlLmNsaWNrVGhyb3VnaCk7XG4gIHRoaXMuY2xpY2tUcmFja2luZ3MgPSBwYXJzZUNsaWNrVHJhY2tpbmdzKHZpZGVvQ2xpY2tKVHJlZS5jbGlja1RyYWNraW5nKTtcbiAgdGhpcy5jdXN0b21DbGlja3MgPSBwYXJzZUNsaWNrVHJhY2tpbmdzKHZpZGVvQ2xpY2tKVHJlZS5jdXN0b21DbGljayk7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiBwYXJzZUNsaWNrVHJhY2tpbmdzICh0cmFja2luZ0RhdGEpIHtcbiAgICB2YXIgY2xpY2tUcmFja2luZ3MgPSBbXTtcbiAgICBpZiAodHJhY2tpbmdEYXRhKSB7XG4gICAgICB0cmFja2luZ0RhdGEgPSB1dGlsaXRpZXMuaXNBcnJheSh0cmFja2luZ0RhdGEpID8gdHJhY2tpbmdEYXRhIDogW3RyYWNraW5nRGF0YV07XG4gICAgICB0cmFja2luZ0RhdGEuZm9yRWFjaChmdW5jdGlvbiAoY2xpY2tUcmFja2luZ0RhdGEpIHtcbiAgICAgICAgY2xpY2tUcmFja2luZ3MucHVzaCh4bWwua2V5VmFsdWUoY2xpY2tUcmFja2luZ0RhdGEpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2xpY2tUcmFja2luZ3M7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWaWRlb0NsaWNrcztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/VideoClicks.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/ViewableImpression.js":
/*!****************************************************!*\
  !*** ./src/scripts/ads/vast/ViewableImpression.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nfunction ViewableImpression (viewableImpressionJTree) {\n\t  if (!(this instanceof ViewableImpression)) {\n\t    return new ViewableImpression(viewableImpressionJTree);\n\t  }\n\n\t  // Optional Fields\n\t  this.id = viewableImpressionJTree.attr('id');\n\t  if (viewableImpressionJTree.viewable) {\n\t\t  this.viewables = parseUriArray(viewableImpressionJTree.viewable);\n\t  }\n\t  if (viewableImpressionJTree.notViewable) {\n\t\t  this.notViewables = parseUriArray(viewableImpressionJTree.notViewable);\n\t  }\n\t  if (viewableImpressionJTree.viewUndetermined) {\n\t\t  this.viewUndetermineds = parseUriArray(viewableImpressionJTree.viewUndetermined);\n\t  }\n\n\t  function parseUriArray (arrJTree) {\n\t\t  var arr = [];\n\t\t  var arrData;\n\t\t  if (arrJTree) {\n\t\t\t  arrData = utilities.isArray(arrJTree) ? arrJTree : [arrJTree];\n\t\t\t  arrData.forEach(function (elem) {\n\t\t\t\t  arr.push(xml.keyValue(elem));\n\t\t\t  });\n\t\t  }\n\t\t  return arr;\n\t }\n}\n\nmodule.exports = ViewableImpression;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9WaWV3YWJsZUltcHJlc3Npb24uanM/YjIyMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixVQUFVLG1CQUFPLENBQUMsbURBQWlCO0FBQ25DLGdCQUFnQixtQkFBTyxDQUFDLDZFQUE4Qjs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92YXN0L1ZpZXdhYmxlSW1wcmVzc2lvbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxuZnVuY3Rpb24gVmlld2FibGVJbXByZXNzaW9uICh2aWV3YWJsZUltcHJlc3Npb25KVHJlZSkge1xuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBWaWV3YWJsZUltcHJlc3Npb24pKSB7XG5cdCAgICByZXR1cm4gbmV3IFZpZXdhYmxlSW1wcmVzc2lvbih2aWV3YWJsZUltcHJlc3Npb25KVHJlZSk7XG5cdCAgfVxuXG5cdCAgLy8gT3B0aW9uYWwgRmllbGRzXG5cdCAgdGhpcy5pZCA9IHZpZXdhYmxlSW1wcmVzc2lvbkpUcmVlLmF0dHIoJ2lkJyk7XG5cdCAgaWYgKHZpZXdhYmxlSW1wcmVzc2lvbkpUcmVlLnZpZXdhYmxlKSB7XG5cdFx0ICB0aGlzLnZpZXdhYmxlcyA9IHBhcnNlVXJpQXJyYXkodmlld2FibGVJbXByZXNzaW9uSlRyZWUudmlld2FibGUpO1xuXHQgIH1cblx0ICBpZiAodmlld2FibGVJbXByZXNzaW9uSlRyZWUubm90Vmlld2FibGUpIHtcblx0XHQgIHRoaXMubm90Vmlld2FibGVzID0gcGFyc2VVcmlBcnJheSh2aWV3YWJsZUltcHJlc3Npb25KVHJlZS5ub3RWaWV3YWJsZSk7XG5cdCAgfVxuXHQgIGlmICh2aWV3YWJsZUltcHJlc3Npb25KVHJlZS52aWV3VW5kZXRlcm1pbmVkKSB7XG5cdFx0ICB0aGlzLnZpZXdVbmRldGVybWluZWRzID0gcGFyc2VVcmlBcnJheSh2aWV3YWJsZUltcHJlc3Npb25KVHJlZS52aWV3VW5kZXRlcm1pbmVkKTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBwYXJzZVVyaUFycmF5IChhcnJKVHJlZSkge1xuXHRcdCAgdmFyIGFyciA9IFtdO1xuXHRcdCAgdmFyIGFyckRhdGE7XG5cdFx0ICBpZiAoYXJySlRyZWUpIHtcblx0XHRcdCAgYXJyRGF0YSA9IHV0aWxpdGllcy5pc0FycmF5KGFyckpUcmVlKSA/IGFyckpUcmVlIDogW2FyckpUcmVlXTtcblx0XHRcdCAgYXJyRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG5cdFx0XHRcdCAgYXJyLnB1c2goeG1sLmtleVZhbHVlKGVsZW0pKTtcblx0XHRcdCAgfSk7XG5cdFx0ICB9XG5cdFx0ICByZXR1cm4gYXJyO1xuXHQgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXdhYmxlSW1wcmVzc2lvbjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/ViewableImpression.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/Wrapper.js":
/*!*****************************************!*\
  !*** ./src/scripts/ads/vast/Wrapper.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar vastUtil = __webpack_require__(/*! ./vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\nvar Creative = __webpack_require__(/*! ./Creative */ \"./src/scripts/ads/vast/Creative.js\");\nvar ViewableImpression = __webpack_require__(/*! ./ViewableImpression */ \"./src/scripts/ads/vast/ViewableImpression.js\");\nvar Verification = __webpack_require__(/*! ./Verification */ \"./src/scripts/ads/vast/Verification.js\");\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar xml = __webpack_require__(/*! ../../utils/xml */ \"./src/scripts/utils/xml.js\");\n\nfunction Wrapper (wrapperJTree) {\n  if (!(this instanceof Wrapper)) {\n    return new Wrapper(wrapperJTree);\n  }\n\n  // Required elements\n  this.adSystem = xml.keyValue(wrapperJTree.adSystem);\n  this.impressions = vastUtil.parseImpressions(wrapperJTree.impression);\n  this.VASTAdTagURI = xml.keyValue(wrapperJTree.vASTAdTagURI);\n\n  // Optional elements\n  this.creatives = Creative.parseCreatives(wrapperJTree.creatives);\n  // this.error = xml.keyValue(wrapperJTree.error);\n  this.errors = vastUtil.parseErrors(wrapperJTree.error);\n  this.extensions = wrapperJTree.extensions;\n\n  // Optional attrs\n  this.followAdditionalWrappers = utilities.isDefined(xml.attr(wrapperJTree, 'followAdditionalWrappers')) ? xml.attr(wrapperJTree, 'followAdditionalWrappers') : true;\n  this.allowMultipleAds = xml.attr(wrapperJTree, 'allowMultipleAds');\n  this.fallbackOnNoAd = xml.attr(wrapperJTree, 'fallbackOnNoAd');\n\n  if (window.mol_vastVersion === 4) {\n\t  if (wrapperJTree.viewableImpression) {\n\t\t  this.viewableImpression = new ViewableImpression(wrapperJTree.viewableImpression);\n\t  }\n\t  if (wrapperJTree.adVerifications) {\n\t\t  this.adVerifications = Verification.parseAdVerifications(wrapperJTree.adVerifications);\n\t  }\n  }\n}\n\nmodule.exports = Wrapper;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9XcmFwcGVyLmpzPzk0NTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZUFBZSxtQkFBTyxDQUFDLHNEQUFZO0FBQ25DLGVBQWUsbUJBQU8sQ0FBQyxzREFBWTtBQUNuQyx5QkFBeUIsbUJBQU8sQ0FBQywwRUFBc0I7QUFDdkQsbUJBQW1CLG1CQUFPLENBQUMsOERBQWdCOztBQUUzQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7QUFDdEQsVUFBVSxtQkFBTyxDQUFDLG1EQUFpQjs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9XcmFwcGVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdmFzdFV0aWwgPSByZXF1aXJlKCcuL3Zhc3RVdGlsJyk7XG52YXIgQ3JlYXRpdmUgPSByZXF1aXJlKCcuL0NyZWF0aXZlJyk7XG52YXIgVmlld2FibGVJbXByZXNzaW9uID0gcmVxdWlyZSgnLi9WaWV3YWJsZUltcHJlc3Npb24nKTtcbnZhciBWZXJpZmljYXRpb24gPSByZXF1aXJlKCcuL1ZlcmlmaWNhdGlvbicpO1xuXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xudmFyIHhtbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3htbCcpO1xuXG5mdW5jdGlvbiBXcmFwcGVyICh3cmFwcGVySlRyZWUpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdyYXBwZXIpKSB7XG4gICAgcmV0dXJuIG5ldyBXcmFwcGVyKHdyYXBwZXJKVHJlZSk7XG4gIH1cblxuICAvLyBSZXF1aXJlZCBlbGVtZW50c1xuICB0aGlzLmFkU3lzdGVtID0geG1sLmtleVZhbHVlKHdyYXBwZXJKVHJlZS5hZFN5c3RlbSk7XG4gIHRoaXMuaW1wcmVzc2lvbnMgPSB2YXN0VXRpbC5wYXJzZUltcHJlc3Npb25zKHdyYXBwZXJKVHJlZS5pbXByZXNzaW9uKTtcbiAgdGhpcy5WQVNUQWRUYWdVUkkgPSB4bWwua2V5VmFsdWUod3JhcHBlckpUcmVlLnZBU1RBZFRhZ1VSSSk7XG5cbiAgLy8gT3B0aW9uYWwgZWxlbWVudHNcbiAgdGhpcy5jcmVhdGl2ZXMgPSBDcmVhdGl2ZS5wYXJzZUNyZWF0aXZlcyh3cmFwcGVySlRyZWUuY3JlYXRpdmVzKTtcbiAgLy8gdGhpcy5lcnJvciA9IHhtbC5rZXlWYWx1ZSh3cmFwcGVySlRyZWUuZXJyb3IpO1xuICB0aGlzLmVycm9ycyA9IHZhc3RVdGlsLnBhcnNlRXJyb3JzKHdyYXBwZXJKVHJlZS5lcnJvcik7XG4gIHRoaXMuZXh0ZW5zaW9ucyA9IHdyYXBwZXJKVHJlZS5leHRlbnNpb25zO1xuXG4gIC8vIE9wdGlvbmFsIGF0dHJzXG4gIHRoaXMuZm9sbG93QWRkaXRpb25hbFdyYXBwZXJzID0gdXRpbGl0aWVzLmlzRGVmaW5lZCh4bWwuYXR0cih3cmFwcGVySlRyZWUsICdmb2xsb3dBZGRpdGlvbmFsV3JhcHBlcnMnKSkgPyB4bWwuYXR0cih3cmFwcGVySlRyZWUsICdmb2xsb3dBZGRpdGlvbmFsV3JhcHBlcnMnKSA6IHRydWU7XG4gIHRoaXMuYWxsb3dNdWx0aXBsZUFkcyA9IHhtbC5hdHRyKHdyYXBwZXJKVHJlZSwgJ2FsbG93TXVsdGlwbGVBZHMnKTtcbiAgdGhpcy5mYWxsYmFja09uTm9BZCA9IHhtbC5hdHRyKHdyYXBwZXJKVHJlZSwgJ2ZhbGxiYWNrT25Ob0FkJyk7XG5cbiAgaWYgKHdpbmRvdy5tb2xfdmFzdFZlcnNpb24gPT09IDQpIHtcblx0ICBpZiAod3JhcHBlckpUcmVlLnZpZXdhYmxlSW1wcmVzc2lvbikge1xuXHRcdCAgdGhpcy52aWV3YWJsZUltcHJlc3Npb24gPSBuZXcgVmlld2FibGVJbXByZXNzaW9uKHdyYXBwZXJKVHJlZS52aWV3YWJsZUltcHJlc3Npb24pO1xuXHQgIH1cblx0ICBpZiAod3JhcHBlckpUcmVlLmFkVmVyaWZpY2F0aW9ucykge1xuXHRcdCAgdGhpcy5hZFZlcmlmaWNhdGlvbnMgPSBWZXJpZmljYXRpb24ucGFyc2VBZFZlcmlmaWNhdGlvbnMod3JhcHBlckpUcmVlLmFkVmVyaWZpY2F0aW9ucyk7XG5cdCAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gV3JhcHBlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/Wrapper.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/parsers.js":
/*!*****************************************!*\
  !*** ./src/scripts/ads/vast/parsers.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nvar durationRegex = /(\\d\\d):(\\d\\d):(\\d\\d)(\\.(\\d\\d\\d))?/;\n\nvar parsers = {\n\n  duration: function parseDuration (durationStr) {\n\n    var match, durationInMs;\n\n    if (utilities.isString(durationStr)) {\n      match = durationStr.match(durationRegex);\n      if (match) {\n        durationInMs = parseHoursToMs(match[1]) + parseMinToMs(match[2]) + parseSecToMs(match[3]) + parseInt(match[5] || 0);\n      }\n    }\n\n    return isNaN(durationInMs) ? null : durationInMs;\n\n    // **** Local Functions **** //\n    function parseHoursToMs (hourStr) {\n      return parseInt(hourStr, 10) * 60 * 60 * 1000;\n    }\n\n    function parseMinToMs (minStr) {\n      return parseInt(minStr, 10) * 60 * 1000;\n    }\n\n    function parseSecToMs (secStr) {\n      return parseInt(secStr, 10) * 1000;\n    }\n  },\n\n  offset: function parseOffset (offset, duration) {\n    if (isPercentage(offset)) {\n      return calculatePercentage(offset, duration);\n    }\n    return parsers.duration(offset);\n\n    // **** Local Functions **** //\n    function isPercentage (offset) {\n      var percentageRegex = /^\\d+(\\.\\d+)?%$/g;\n      return percentageRegex.test(offset);\n    }\n\n    function calculatePercentage (percentStr, duration) {\n      if (duration) {\n        return calcPercent(duration, parseFloat(percentStr.replace('%', '')));\n      }\n      return null;\n    }\n\n    function calcPercent (quantity, percent) {\n      return quantity * percent / 100;\n    }\n  }\n\n};\n\n\nmodule.exports = parsers;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9wYXJzZXJzLmpzPzMzMDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQThCOztBQUV0RDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0EiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC9wYXJzZXJzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xuXG52YXIgZHVyYXRpb25SZWdleCA9IC8oXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKShcXC4oXFxkXFxkXFxkKSk/LztcblxudmFyIHBhcnNlcnMgPSB7XG5cbiAgZHVyYXRpb246IGZ1bmN0aW9uIHBhcnNlRHVyYXRpb24gKGR1cmF0aW9uU3RyKSB7XG5cbiAgICB2YXIgbWF0Y2gsIGR1cmF0aW9uSW5NcztcblxuICAgIGlmICh1dGlsaXRpZXMuaXNTdHJpbmcoZHVyYXRpb25TdHIpKSB7XG4gICAgICBtYXRjaCA9IGR1cmF0aW9uU3RyLm1hdGNoKGR1cmF0aW9uUmVnZXgpO1xuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGR1cmF0aW9uSW5NcyA9IHBhcnNlSG91cnNUb01zKG1hdGNoWzFdKSArIHBhcnNlTWluVG9NcyhtYXRjaFsyXSkgKyBwYXJzZVNlY1RvTXMobWF0Y2hbM10pICsgcGFyc2VJbnQobWF0Y2hbNV0gfHwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzTmFOKGR1cmF0aW9uSW5NcykgPyBudWxsIDogZHVyYXRpb25Jbk1zO1xuXG4gICAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICAgIGZ1bmN0aW9uIHBhcnNlSG91cnNUb01zIChob3VyU3RyKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoaG91clN0ciwgMTApICogNjAgKiA2MCAqIDEwMDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VNaW5Ub01zIChtaW5TdHIpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChtaW5TdHIsIDEwKSAqIDYwICogMTAwMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZVNlY1RvTXMgKHNlY1N0cikge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHNlY1N0ciwgMTApICogMTAwMDtcbiAgICB9XG4gIH0sXG5cbiAgb2Zmc2V0OiBmdW5jdGlvbiBwYXJzZU9mZnNldCAob2Zmc2V0LCBkdXJhdGlvbikge1xuICAgIGlmIChpc1BlcmNlbnRhZ2Uob2Zmc2V0KSkge1xuICAgICAgcmV0dXJuIGNhbGN1bGF0ZVBlcmNlbnRhZ2Uob2Zmc2V0LCBkdXJhdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZXJzLmR1cmF0aW9uKG9mZnNldCk7XG5cbiAgICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gICAgZnVuY3Rpb24gaXNQZXJjZW50YWdlIChvZmZzZXQpIHtcbiAgICAgIHZhciBwZXJjZW50YWdlUmVnZXggPSAvXlxcZCsoXFwuXFxkKyk/JSQvZztcbiAgICAgIHJldHVybiBwZXJjZW50YWdlUmVnZXgudGVzdChvZmZzZXQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVBlcmNlbnRhZ2UgKHBlcmNlbnRTdHIsIGR1cmF0aW9uKSB7XG4gICAgICBpZiAoZHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGNhbGNQZXJjZW50KGR1cmF0aW9uLCBwYXJzZUZsb2F0KHBlcmNlbnRTdHIucmVwbGFjZSgnJScsICcnKSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY1BlcmNlbnQgKHF1YW50aXR5LCBwZXJjZW50KSB7XG4gICAgICByZXR1cm4gcXVhbnRpdHkgKiBwZXJjZW50IC8gMTAwO1xuICAgIH1cbiAgfVxuXG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VycztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/parsers.js\n");

/***/ }),

/***/ "./src/scripts/ads/vast/vastUtil.js":
/*!******************************************!*\
  !*** ./src/scripts/ads/vast/vastUtil.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar VPAIDHTML5Tech = __webpack_require__(/*! ../vpaid/VPAIDHTML5Tech */ \"./src/scripts/ads/vpaid/VPAIDHTML5Tech.js\");\n\nvar vastUtil = {\n\n  track: function track (URLMacros, variables) {\n    var sources = vastUtil.parseURLMacros(URLMacros, variables);\n    var trackImgs = [];\n    sources.forEach(function (src) {\n      var img = new Image();\n      img.src = src;\n      trackImgs.push(img);\n    });\n    return trackImgs;\n  },\n\n  parseURLMacros: function parseMacros (URLMacros, variables) {\n    var parsedURLs = [];\n\n    variables = variables || {};\n\n    if (!(variables['CACHEBUSTING'])) {\n      variables['CACHEBUSTING'] = Math.round(Math.random() * 1.0e+10);\n    }\n\n    URLMacros.forEach(function (URLMacro) {\n      parsedURLs.push(vastUtil._parseURLMacro(URLMacro, variables));\n    });\n\n    return parsedURLs;\n  },\n\n  parseURLMacro: function parseMacro (URLMacro, variables) {\n    variables = variables || {};\n\n    if (!(variables['CACHEBUSTING'])) {\n      variables['CACHEBUSTING'] = Math.round(Math.random() * 1.0e+10);\n    }\n\n    return vastUtil._parseURLMacro(URLMacro, variables);\n  },\n\n  _parseURLMacro: function parseMacro (URLMacro, variables) {\n    variables = variables || {};\n\n    utilities.forEach(variables, function (value, key) {\n      URLMacro = URLMacro.replace(new RegExp('\\\\[' + key + '\\\\\\]', 'gm'), value);\n    });\n\n    return URLMacro;\n  },\n\n  parseDuration: function parseDuration (durationStr) {\n    var durationRegex = /(\\d\\d):(\\d\\d):(\\d\\d)(\\.(\\d\\d\\d))?/;\n    var match, durationInMs;\n\n    if (utilities.isString(durationStr)) {\n      match = durationStr.match(durationRegex);\n      if (match) {\n        durationInMs = parseHoursToMs(match[1]) + parseMinToMs(match[2]) + parseSecToMs(match[3]) + parseInt(match[5] || 0);\n      }\n    }\n\n    return isNaN(durationInMs) ? null : durationInMs;\n\n    // **** Local Functions **** //\n    function parseHoursToMs (hourStr) {\n      return parseInt(hourStr, 10) * 60 * 60 * 1000;\n    }\n\n    function parseMinToMs (minStr) {\n      return parseInt(minStr, 10) * 60 * 1000;\n    }\n\n    function parseSecToMs (secStr) {\n      return parseInt(secStr, 10) * 1000;\n    }\n  },\n\n  parseImpressions: function parseImpressions (impressions) {\n\t    if (impressions) {\n\t      impressions = utilities.isArray(impressions) ? impressions : [impressions];\n\t      return utilities.transformArray(impressions, function (impression) {\n\t        if (utilities.isNotEmptyString(impression.keyValue)) {\n\t          return impression.keyValue;\n\t        }\n\t        return undefined;\n\t      });\n\t    }\n\t    return [];\n\t  },\n\n\t  parseErrors: function parseErrors (errors) {\n\t    if (errors) {\n\t    \terrors = utilities.isArray(errors) ? errors : [errors];\n\t      return utilities.transformArray(errors, function (error) {\n\t        if (utilities.isNotEmptyString(error.keyValue)) {\n\t          return error.keyValue;\n\t        }\n\t        return undefined;\n\t      });\n\t    }\n\t    return [];\n\t  },\n\n  // We assume that the progress is going to arrive in milliseconds\n  formatProgress: function formatProgress (progress) {\n    var hours, minutes, seconds, milliseconds;\n    hours = progress / (60 * 60 * 1000);\n    hours = Math.floor(hours);\n    minutes = (progress / (60 * 1000)) % 60;\n    minutes = Math.floor(minutes);\n    seconds = (progress / 1000) % 60;\n    seconds = Math.floor(seconds);\n    milliseconds = progress % 1000;\n    return utilities.toFixedDigits(hours, 2) + ':' + utilities.toFixedDigits(minutes, 2) + ':' + utilities.toFixedDigits(seconds, 2) + '.' + utilities.toFixedDigits(milliseconds, 3);\n  },\n\n  parseOffset: function parseOffset (offset, duration) {\n    if (isPercentage(offset)) {\n      return calculatePercentage(offset, duration);\n    }\n    return vastUtil.parseDuration(offset);\n\n    // **** Local Function **** //\n    function isPercentage (offset) {\n      var percentageRegex = /^\\d+(\\.\\d+)?%$/g;\n      return percentageRegex.test(offset);\n    }\n\n    function calculatePercentage (percentStr, duration) {\n      if (duration) {\n        return calcPercent(duration, parseFloat(percentStr.replace('%', '')));\n      }\n      return null;\n    }\n\n    function calcPercent (quantity, percent) {\n      return quantity * percent / 100;\n    }\n  },\n\n\n  // List of supported VPAID technologies\n  VPAID_techs: [\n    VPAIDHTML5Tech\n  ],\n\n  isVPAID: function isVPAIDMediaFile (mediaFile) {\n    return !!mediaFile && mediaFile.apiFramework === 'VPAID';\n  },\n\n  findSupportedVPAIDTech: function findSupportedVPAIDTech (mimeType) {\n    var i, len, VPAIDTech;\n\n    for (i = 0, len = this.VPAID_techs.length; i < len; i += 1) {\n      VPAIDTech = this.VPAID_techs[i];\n      if (VPAIDTech.supports(mimeType)) {\n        return VPAIDTech;\n      }\n    }\n    return null;\n  },\n\n  isFlashSupported: function isFlashSupported () {\n\t  return false;\n  },\n\n};\n\nmodule.exports = vastUtil;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdmFzdC92YXN0VXRpbC5qcz9jNmRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLGdCQUFnQixtQkFBTyxDQUFDLDZFQUE4QjtBQUN0RCxxQkFBcUIsbUJBQU8sQ0FBQywwRUFBeUI7O0FBRXREOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7O0FBR0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQSw4Q0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3Zhc3QvdmFzdFV0aWwuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91dGlsaXR5RnVuY3Rpb25zJyk7XG52YXIgVlBBSURIVE1MNVRlY2ggPSByZXF1aXJlKCcuLi92cGFpZC9WUEFJREhUTUw1VGVjaCcpO1xuXG52YXIgdmFzdFV0aWwgPSB7XG5cbiAgdHJhY2s6IGZ1bmN0aW9uIHRyYWNrIChVUkxNYWNyb3MsIHZhcmlhYmxlcykge1xuICAgIHZhciBzb3VyY2VzID0gdmFzdFV0aWwucGFyc2VVUkxNYWNyb3MoVVJMTWFjcm9zLCB2YXJpYWJsZXMpO1xuICAgIHZhciB0cmFja0ltZ3MgPSBbXTtcbiAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNyYykge1xuICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1nLnNyYyA9IHNyYztcbiAgICAgIHRyYWNrSW1ncy5wdXNoKGltZyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRyYWNrSW1ncztcbiAgfSxcblxuICBwYXJzZVVSTE1hY3JvczogZnVuY3Rpb24gcGFyc2VNYWNyb3MgKFVSTE1hY3JvcywgdmFyaWFibGVzKSB7XG4gICAgdmFyIHBhcnNlZFVSTHMgPSBbXTtcblxuICAgIHZhcmlhYmxlcyA9IHZhcmlhYmxlcyB8fCB7fTtcblxuICAgIGlmICghKHZhcmlhYmxlc1snQ0FDSEVCVVNUSU5HJ10pKSB7XG4gICAgICB2YXJpYWJsZXNbJ0NBQ0hFQlVTVElORyddID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMS4wZSsxMCk7XG4gICAgfVxuXG4gICAgVVJMTWFjcm9zLmZvckVhY2goZnVuY3Rpb24gKFVSTE1hY3JvKSB7XG4gICAgICBwYXJzZWRVUkxzLnB1c2godmFzdFV0aWwuX3BhcnNlVVJMTWFjcm8oVVJMTWFjcm8sIHZhcmlhYmxlcykpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBhcnNlZFVSTHM7XG4gIH0sXG5cbiAgcGFyc2VVUkxNYWNybzogZnVuY3Rpb24gcGFyc2VNYWNybyAoVVJMTWFjcm8sIHZhcmlhYmxlcykge1xuICAgIHZhcmlhYmxlcyA9IHZhcmlhYmxlcyB8fCB7fTtcblxuICAgIGlmICghKHZhcmlhYmxlc1snQ0FDSEVCVVNUSU5HJ10pKSB7XG4gICAgICB2YXJpYWJsZXNbJ0NBQ0hFQlVTVElORyddID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMS4wZSsxMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhc3RVdGlsLl9wYXJzZVVSTE1hY3JvKFVSTE1hY3JvLCB2YXJpYWJsZXMpO1xuICB9LFxuXG4gIF9wYXJzZVVSTE1hY3JvOiBmdW5jdGlvbiBwYXJzZU1hY3JvIChVUkxNYWNybywgdmFyaWFibGVzKSB7XG4gICAgdmFyaWFibGVzID0gdmFyaWFibGVzIHx8IHt9O1xuXG4gICAgdXRpbGl0aWVzLmZvckVhY2godmFyaWFibGVzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgVVJMTWFjcm8gPSBVUkxNYWNyby5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxbJyArIGtleSArICdcXFxcXFxdJywgJ2dtJyksIHZhbHVlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBVUkxNYWNybztcbiAgfSxcblxuICBwYXJzZUR1cmF0aW9uOiBmdW5jdGlvbiBwYXJzZUR1cmF0aW9uIChkdXJhdGlvblN0cikge1xuICAgIHZhciBkdXJhdGlvblJlZ2V4ID0gLyhcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpKFxcLihcXGRcXGRcXGQpKT8vO1xuICAgIHZhciBtYXRjaCwgZHVyYXRpb25Jbk1zO1xuXG4gICAgaWYgKHV0aWxpdGllcy5pc1N0cmluZyhkdXJhdGlvblN0cikpIHtcbiAgICAgIG1hdGNoID0gZHVyYXRpb25TdHIubWF0Y2goZHVyYXRpb25SZWdleCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZHVyYXRpb25Jbk1zID0gcGFyc2VIb3Vyc1RvTXMobWF0Y2hbMV0pICsgcGFyc2VNaW5Ub01zKG1hdGNoWzJdKSArIHBhcnNlU2VjVG9NcyhtYXRjaFszXSkgKyBwYXJzZUludChtYXRjaFs1XSB8fCAwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXNOYU4oZHVyYXRpb25Jbk1zKSA/IG51bGwgOiBkdXJhdGlvbkluTXM7XG5cbiAgICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gICAgZnVuY3Rpb24gcGFyc2VIb3Vyc1RvTXMgKGhvdXJTdHIpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChob3VyU3RyLCAxMCkgKiA2MCAqIDYwICogMTAwMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZU1pblRvTXMgKG1pblN0cikge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KG1pblN0ciwgMTApICogNjAgKiAxMDAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlU2VjVG9NcyAoc2VjU3RyKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoc2VjU3RyLCAxMCkgKiAxMDAwO1xuICAgIH1cbiAgfSxcblxuICBwYXJzZUltcHJlc3Npb25zOiBmdW5jdGlvbiBwYXJzZUltcHJlc3Npb25zIChpbXByZXNzaW9ucykge1xuXHQgICAgaWYgKGltcHJlc3Npb25zKSB7XG5cdCAgICAgIGltcHJlc3Npb25zID0gdXRpbGl0aWVzLmlzQXJyYXkoaW1wcmVzc2lvbnMpID8gaW1wcmVzc2lvbnMgOiBbaW1wcmVzc2lvbnNdO1xuXHQgICAgICByZXR1cm4gdXRpbGl0aWVzLnRyYW5zZm9ybUFycmF5KGltcHJlc3Npb25zLCBmdW5jdGlvbiAoaW1wcmVzc2lvbikge1xuXHQgICAgICAgIGlmICh1dGlsaXRpZXMuaXNOb3RFbXB0eVN0cmluZyhpbXByZXNzaW9uLmtleVZhbHVlKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGltcHJlc3Npb24ua2V5VmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFtdO1xuXHQgIH0sXG5cblx0ICBwYXJzZUVycm9yczogZnVuY3Rpb24gcGFyc2VFcnJvcnMgKGVycm9ycykge1xuXHQgICAgaWYgKGVycm9ycykge1xuXHQgICAgXHRlcnJvcnMgPSB1dGlsaXRpZXMuaXNBcnJheShlcnJvcnMpID8gZXJyb3JzIDogW2Vycm9yc107XG5cdCAgICAgIHJldHVybiB1dGlsaXRpZXMudHJhbnNmb3JtQXJyYXkoZXJyb3JzLCBmdW5jdGlvbiAoZXJyb3IpIHtcblx0ICAgICAgICBpZiAodXRpbGl0aWVzLmlzTm90RW1wdHlTdHJpbmcoZXJyb3Iua2V5VmFsdWUpKSB7XG5cdCAgICAgICAgICByZXR1cm4gZXJyb3Iua2V5VmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFtdO1xuXHQgIH0sXG5cbiAgLy8gV2UgYXNzdW1lIHRoYXQgdGhlIHByb2dyZXNzIGlzIGdvaW5nIHRvIGFycml2ZSBpbiBtaWxsaXNlY29uZHNcbiAgZm9ybWF0UHJvZ3Jlc3M6IGZ1bmN0aW9uIGZvcm1hdFByb2dyZXNzIChwcm9ncmVzcykge1xuICAgIHZhciBob3VycywgbWludXRlcywgc2Vjb25kcywgbWlsbGlzZWNvbmRzO1xuICAgIGhvdXJzID0gcHJvZ3Jlc3MgLyAoNjAgKiA2MCAqIDEwMDApO1xuICAgIGhvdXJzID0gTWF0aC5mbG9vcihob3Vycyk7XG4gICAgbWludXRlcyA9IChwcm9ncmVzcyAvICg2MCAqIDEwMDApKSAlIDYwO1xuICAgIG1pbnV0ZXMgPSBNYXRoLmZsb29yKG1pbnV0ZXMpO1xuICAgIHNlY29uZHMgPSAocHJvZ3Jlc3MgLyAxMDAwKSAlIDYwO1xuICAgIHNlY29uZHMgPSBNYXRoLmZsb29yKHNlY29uZHMpO1xuICAgIG1pbGxpc2Vjb25kcyA9IHByb2dyZXNzICUgMTAwMDtcbiAgICByZXR1cm4gdXRpbGl0aWVzLnRvRml4ZWREaWdpdHMoaG91cnMsIDIpICsgJzonICsgdXRpbGl0aWVzLnRvRml4ZWREaWdpdHMobWludXRlcywgMikgKyAnOicgKyB1dGlsaXRpZXMudG9GaXhlZERpZ2l0cyhzZWNvbmRzLCAyKSArICcuJyArIHV0aWxpdGllcy50b0ZpeGVkRGlnaXRzKG1pbGxpc2Vjb25kcywgMyk7XG4gIH0sXG5cbiAgcGFyc2VPZmZzZXQ6IGZ1bmN0aW9uIHBhcnNlT2Zmc2V0IChvZmZzZXQsIGR1cmF0aW9uKSB7XG4gICAgaWYgKGlzUGVyY2VudGFnZShvZmZzZXQpKSB7XG4gICAgICByZXR1cm4gY2FsY3VsYXRlUGVyY2VudGFnZShvZmZzZXQsIGR1cmF0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhc3RVdGlsLnBhcnNlRHVyYXRpb24ob2Zmc2V0KTtcblxuICAgIC8vICoqKiogTG9jYWwgRnVuY3Rpb24gKioqKiAvL1xuICAgIGZ1bmN0aW9uIGlzUGVyY2VudGFnZSAob2Zmc2V0KSB7XG4gICAgICB2YXIgcGVyY2VudGFnZVJlZ2V4ID0gL15cXGQrKFxcLlxcZCspPyUkL2c7XG4gICAgICByZXR1cm4gcGVyY2VudGFnZVJlZ2V4LnRlc3Qob2Zmc2V0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQZXJjZW50YWdlIChwZXJjZW50U3RyLCBkdXJhdGlvbikge1xuICAgICAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICAgIHJldHVybiBjYWxjUGVyY2VudChkdXJhdGlvbiwgcGFyc2VGbG9hdChwZXJjZW50U3RyLnJlcGxhY2UoJyUnLCAnJykpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGNQZXJjZW50IChxdWFudGl0eSwgcGVyY2VudCkge1xuICAgICAgcmV0dXJuIHF1YW50aXR5ICogcGVyY2VudCAvIDEwMDtcbiAgICB9XG4gIH0sXG5cblxuICAvLyBMaXN0IG9mIHN1cHBvcnRlZCBWUEFJRCB0ZWNobm9sb2dpZXNcbiAgVlBBSURfdGVjaHM6IFtcbiAgICBWUEFJREhUTUw1VGVjaFxuICBdLFxuXG4gIGlzVlBBSUQ6IGZ1bmN0aW9uIGlzVlBBSURNZWRpYUZpbGUgKG1lZGlhRmlsZSkge1xuICAgIHJldHVybiAhIW1lZGlhRmlsZSAmJiBtZWRpYUZpbGUuYXBpRnJhbWV3b3JrID09PSAnVlBBSUQnO1xuICB9LFxuXG4gIGZpbmRTdXBwb3J0ZWRWUEFJRFRlY2g6IGZ1bmN0aW9uIGZpbmRTdXBwb3J0ZWRWUEFJRFRlY2ggKG1pbWVUeXBlKSB7XG4gICAgdmFyIGksIGxlbiwgVlBBSURUZWNoO1xuXG4gICAgZm9yIChpID0gMCwgbGVuID0gdGhpcy5WUEFJRF90ZWNocy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgVlBBSURUZWNoID0gdGhpcy5WUEFJRF90ZWNoc1tpXTtcbiAgICAgIGlmIChWUEFJRFRlY2guc3VwcG9ydHMobWltZVR5cGUpKSB7XG4gICAgICAgIHJldHVybiBWUEFJRFRlY2g7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIGlzRmxhc2hTdXBwb3J0ZWQ6IGZ1bmN0aW9uIGlzRmxhc2hTdXBwb3J0ZWQgKCkge1xuXHQgIHJldHVybiBmYWxzZTtcbiAgfSxcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB2YXN0VXRpbDtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vast/vastUtil.js\n");

/***/ }),

/***/ "./src/scripts/ads/vpaid/VPAIDAdUnitWrapper.js":
/*!*****************************************************!*\
  !*** ./src/scripts/ads/vpaid/VPAIDAdUnitWrapper.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar VASTError = __webpack_require__(/*! ../vast/VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar logger = __webpack_require__(/*! ../../utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nfunction VPAIDAdUnitWrapper (vpaidAdUnit, opts) {\n  if (!(this instanceof VPAIDAdUnitWrapper)) {\n    return new VPAIDAdUnitWrapper(vpaidAdUnit, opts);\n  }\n  sanityCheck(vpaidAdUnit, opts);\n\n  this.options = utilities.extend({}, opts);\n  this.adStarted = false;\n\n  this._adUnit = vpaidAdUnit;\n\n  // **** Local Functions **** //\n  function sanityCheck (adUnit, opts) {\n    if (!adUnit || !VPAIDAdUnitWrapper.checkVPAIDInterface(adUnit)) {\n      throw new VASTError('on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface');\n    }\n\n    if (!utilities.isObject(opts)) {\n      throw new VASTError('on VPAIDAdUnitWrapper, expected options hash  but got \"' + opts + '\"');\n    }\n\n    if (!('responseTimeout' in opts) || !utilities.isNumber(opts.responseTimeout)) {\n      throw new VASTError('on VPAIDAdUnitWrapper, expected responseTimeout in options');\n    }\n  }\n}\n\nVPAIDAdUnitWrapper.checkVPAIDInterface = function checkVPAIDInterface (VPAIDAdUnit) {\n  // NOTE: skipAd is not part of the method list because it only appears in VPAID 2.0 and we support VPAID 1.0\n  var VPAIDInterfaceMethods = [\n    'handshakeVersion', 'initAd', 'startAd', 'stopAd', 'resizeAd', 'pauseAd', 'expandAd', 'collapseAd'\n  ];\n\n  for (var i = 0, len = VPAIDInterfaceMethods.length; i < len; i++) {\n    if (!VPAIDAdUnit || !utilities.isFunction(VPAIDAdUnit[VPAIDInterfaceMethods[i]])) {\n      return false;\n    }\n  }\n\n\n  return canSubscribeToEvents(VPAIDAdUnit) && canUnsubscribeFromEvents(VPAIDAdUnit);\n\n  // **** Local Functions **** //\n\n  function canSubscribeToEvents (adUnit) {\n    return utilities.isFunction(adUnit.subscribe) || utilities.isFunction(adUnit.addEventListener) || utilities.isFunction(adUnit.on);\n  }\n\n  function canUnsubscribeFromEvents (adUnit) {\n    return utilities.isFunction(adUnit.unsubscribe) || utilities.isFunction(adUnit.removeEventListener) || utilities.isFunction(adUnit.off);\n\n  }\n};\n\nVPAIDAdUnitWrapper.prototype.adUnitAsyncCall = function () {\n  var args = utilities.arrayLikeObjToArray(arguments);\n  var method = args.shift();\n  var cb = args.pop();\n  var timeoutId;\n\n  sanityCheck(method, cb, this._adUnit);\n  args.push(wrapCallback());\n\n  this._adUnit[method].apply(this._adUnit, args);\n  timeoutId = setTimeout(function () {\n    timeoutId = null;\n    cb(new VASTError('on VPAIDAdUnitWrapper, timeout while waiting for a response on call \"' + method + '\"'));\n    cb = utilities.noop;\n  }, this.options.responseTimeout);\n\n  // **** Local Functions **** //\n  function sanityCheck (method, cb, adUnit) {\n    if (!utilities.isString(method) || !utilities.isFunction(adUnit[method])) {\n      throw new VASTError('on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name');\n    }\n\n    if (!utilities.isFunction(cb)) {\n      throw new VASTError('on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback');\n    }\n  }\n\n  function wrapCallback () {\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      cb.apply(this, arguments);\n    };\n  }\n};\n\nVPAIDAdUnitWrapper.prototype.on = function (evtName, handler) {\n  var addEventListener = this._adUnit.addEventListener || this._adUnit.subscribe || this._adUnit.on;\n  addEventListener.call(this._adUnit, evtName, handler);\n};\n\nVPAIDAdUnitWrapper.prototype.off = function (evtName, handler) {\n  var removeEventListener = this._adUnit.removeEventListener || this._adUnit.unsubscribe || this._adUnit.off;\n  removeEventListener.call(this._adUnit, evtName, handler);\n};\n\nVPAIDAdUnitWrapper.prototype.waitForEvent = function (evtName, cb, context) {\n\t  var that = this;\n  var timeoutId;\n  sanityCheck(evtName, cb);\n  context = context || null;\n\n  this.on(evtName, responseListener);\n\n  timeoutId = setTimeout(function () {\n\t  that.off(evtName, responseListener);\n\t\t// ignore events if ad is finished\n\t\tif (window._timeoutIds.indexOf(timeoutId) >= 0) {\n      if (that.options && that.options.player) {\n        that.options.player.trigger({type: 'trace.message', data: {message: 'Timeout while waiting for event ' + evtName}});\n      }\n\t\t\tcb(new VASTError('on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event \"' + evtName + '\". You may need to increase adStartTimeout.'));\n\t\t}\n    timeoutId = null;\n    cb = utilities.noop;\n  }, this.options.responseTimeout);\n\n  // EN\n  window._timeoutIds.push(timeoutId);\n\n  // **** Local Functions **** //\n  function sanityCheck (evtName, cb) {\n    if (!utilities.isString(evtName)) {\n      throw new VASTError('on VPAIDAdUnitWrapper.waitForEvent, missing evt name');\n    }\n\n    if (!utilities.isFunction(cb)) {\n      throw new VASTError('on VPAIDAdUnitWrapper.waitForEvent, missing callback');\n    }\n  }\n\n  function responseListener () {\n    if (that.options && that.options.player) {\n      that.options.player.trigger({type: 'trace.event', data: {event: evtName}});\n    }\n\t  that.off(evtName, responseListener);\n    var args = utilities.arrayLikeObjToArray(arguments);\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n\n    args.unshift(null);\n    cb.apply(context, args);\n  }\n};\n\n// VPAID METHODS\nVPAIDAdUnitWrapper.prototype.handshakeVersion = function (version, cb) {\n  this.adUnitAsyncCall('handshakeVersion', version, cb);\n};\n\n/* jshint maxparams:6 */\nVPAIDAdUnitWrapper.prototype.initAd = function (width, height, viewMode, desiredBitrate, adUnitData, cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling initAd on creative');\n\tthis.waitForEvent('AdLoaded', cb);\n  this._adUnit.initAd(width, height, viewMode, desiredBitrate, adUnitData);\n};\n\nVPAIDAdUnitWrapper.prototype.resizeAd = function (width, height, viewMode, cb) {\n  // NOTE: AdSizeChange event is only supported on VPAID 2.0 so for the moment we are not going to use it\n  // and will assume that everything is fine after the async call\n\tlogger.log('VPAIDAdUnitWrapper->Calling resizeAd on creative');\n  this.adUnitAsyncCall('resizeAd', width, height, viewMode, cb);\n  if (window.MoatApiReference) {\n  \twindow.MoatApiReference.dispatchEvent({type: 'AdSizeChange', adVolume: this.options.player.volume()});\n  }\n};\n\nVPAIDAdUnitWrapper.prototype.startAd = function (cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling startAd on creative');\n\tif (!this.adStarted) {\n\t\tthis.waitForEvent('AdStarted', cb);\n\t}\n  this._adUnit.startAd();\n  if (this.adStarted) {\n    cb(null);\n  }\n};\n\nVPAIDAdUnitWrapper.prototype.stopAd = function (cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling stopAd on creative');\n  this.waitForEvent('AdStopped', cb);\n  this._adUnit.stopAd();\n};\n\nVPAIDAdUnitWrapper.prototype.pauseAd = function (cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling pauseAd on creative');\n  this.waitForEvent('AdPaused', cb);\n  this._adUnit.pauseAd();\n};\n\nVPAIDAdUnitWrapper.prototype.resumeAd = function (cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling resumeAd on creative');\n  this.waitForEvent('AdPlaying', cb);\n  this._adUnit.resumeAd();\n};\n\nVPAIDAdUnitWrapper.prototype.expandAd = function (cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling expandAd on creative');\n  this.waitForEvent('AdExpandedChange', cb);\n  this._adUnit.expandAd();\n};\n\nVPAIDAdUnitWrapper.prototype.collapseAd = function (cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling collapseAd on creative');\n  this.waitForEvent('AdExpandedChange', cb);\n  this._adUnit.collapseAd();\n};\n\nVPAIDAdUnitWrapper.prototype.skipAd = function (cb) {\n\tlogger.log('VPAIDAdUnitWrapper->Calling skipAd on creative');\n  this.waitForEvent('AdSkipped', cb);\n  this._adUnit.skipAd();\n};\n\n// VPAID property getters\n[\n  'adLinear',\n  'adWidth',\n  'adHeight',\n  'adExpanded',\n  'adSkippableState',\n  'adRemainingTime',\n  'adDuration',\n  'adVolume',\n  'adCompanions',\n  'adIcons'\n].forEach(function (property) {\n  var getterName = 'get' + utilities.capitalize(property);\n\n  VPAIDAdUnitWrapper.prototype[getterName] = function (cb) {\n    this.adUnitAsyncCall(getterName, cb);\n  };\n});\n\n// VPAID property setters\nVPAIDAdUnitWrapper.prototype.setAdVolume = function (volume, cb) {\n  this.adUnitAsyncCall('setAdVolume', volume, cb);\n};\n\nmodule.exports = VPAIDAdUnitWrapper;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdnBhaWQvVlBBSURBZFVuaXRXcmFwcGVyLmpzPzIxOWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZ0JBQWdCLG1CQUFPLENBQUMsOERBQW1COztBQUUzQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7QUFDdEQsYUFBYSxtQkFBTyxDQUFDLHVFQUEyQjs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0M7QUFDcEM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFEQUFxRCxTQUFTO0FBQzlEO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsOEJBQThCLHVEQUF1RDtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQyw0QkFBNEIsZ0JBQWdCO0FBQy9FO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLDZEQUE2RDtBQUN2RztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2Fkcy92cGFpZC9WUEFJREFkVW5pdFdyYXBwZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBWQVNURXJyb3IgPSByZXF1aXJlKCcuLi92YXN0L1ZBU1RFcnJvcicpO1xuXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xudmFyIGxvZ2dlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2NvbnNvbGVMb2dnZXInKTtcblxuZnVuY3Rpb24gVlBBSURBZFVuaXRXcmFwcGVyICh2cGFpZEFkVW5pdCwgb3B0cykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVlBBSURBZFVuaXRXcmFwcGVyKSkge1xuICAgIHJldHVybiBuZXcgVlBBSURBZFVuaXRXcmFwcGVyKHZwYWlkQWRVbml0LCBvcHRzKTtcbiAgfVxuICBzYW5pdHlDaGVjayh2cGFpZEFkVW5pdCwgb3B0cyk7XG5cbiAgdGhpcy5vcHRpb25zID0gdXRpbGl0aWVzLmV4dGVuZCh7fSwgb3B0cyk7XG4gIHRoaXMuYWRTdGFydGVkID0gZmFsc2U7XG5cbiAgdGhpcy5fYWRVbml0ID0gdnBhaWRBZFVuaXQ7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiBzYW5pdHlDaGVjayAoYWRVbml0LCBvcHRzKSB7XG4gICAgaWYgKCFhZFVuaXQgfHwgIVZQQUlEQWRVbml0V3JhcHBlci5jaGVja1ZQQUlESW50ZXJmYWNlKGFkVW5pdCkpIHtcbiAgICAgIHRocm93IG5ldyBWQVNURXJyb3IoJ29uIFZQQUlEQWRVbml0V3JhcHBlciwgdGhlIHBhc3NlZCBWUEFJRCBhZFVuaXQgZG9lcyBub3QgZnVsbHkgaW1wbGVtZW50IHRoZSBWUEFJRCBpbnRlcmZhY2UnKTtcbiAgICB9XG5cbiAgICBpZiAoIXV0aWxpdGllcy5pc09iamVjdChvcHRzKSkge1xuICAgICAgdGhyb3cgbmV3IFZBU1RFcnJvcignb24gVlBBSURBZFVuaXRXcmFwcGVyLCBleHBlY3RlZCBvcHRpb25zIGhhc2ggIGJ1dCBnb3QgXCInICsgb3B0cyArICdcIicpO1xuICAgIH1cblxuICAgIGlmICghKCdyZXNwb25zZVRpbWVvdXQnIGluIG9wdHMpIHx8ICF1dGlsaXRpZXMuaXNOdW1iZXIob3B0cy5yZXNwb25zZVRpbWVvdXQpKSB7XG4gICAgICB0aHJvdyBuZXcgVkFTVEVycm9yKCdvbiBWUEFJREFkVW5pdFdyYXBwZXIsIGV4cGVjdGVkIHJlc3BvbnNlVGltZW91dCBpbiBvcHRpb25zJyk7XG4gICAgfVxuICB9XG59XG5cblZQQUlEQWRVbml0V3JhcHBlci5jaGVja1ZQQUlESW50ZXJmYWNlID0gZnVuY3Rpb24gY2hlY2tWUEFJREludGVyZmFjZSAoVlBBSURBZFVuaXQpIHtcbiAgLy8gTk9URTogc2tpcEFkIGlzIG5vdCBwYXJ0IG9mIHRoZSBtZXRob2QgbGlzdCBiZWNhdXNlIGl0IG9ubHkgYXBwZWFycyBpbiBWUEFJRCAyLjAgYW5kIHdlIHN1cHBvcnQgVlBBSUQgMS4wXG4gIHZhciBWUEFJREludGVyZmFjZU1ldGhvZHMgPSBbXG4gICAgJ2hhbmRzaGFrZVZlcnNpb24nLCAnaW5pdEFkJywgJ3N0YXJ0QWQnLCAnc3RvcEFkJywgJ3Jlc2l6ZUFkJywgJ3BhdXNlQWQnLCAnZXhwYW5kQWQnLCAnY29sbGFwc2VBZCdcbiAgXTtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gVlBBSURJbnRlcmZhY2VNZXRob2RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKCFWUEFJREFkVW5pdCB8fCAhdXRpbGl0aWVzLmlzRnVuY3Rpb24oVlBBSURBZFVuaXRbVlBBSURJbnRlcmZhY2VNZXRob2RzW2ldXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuXG4gIHJldHVybiBjYW5TdWJzY3JpYmVUb0V2ZW50cyhWUEFJREFkVW5pdCkgJiYgY2FuVW5zdWJzY3JpYmVGcm9tRXZlbnRzKFZQQUlEQWRVbml0KTtcblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG5cbiAgZnVuY3Rpb24gY2FuU3Vic2NyaWJlVG9FdmVudHMgKGFkVW5pdCkge1xuICAgIHJldHVybiB1dGlsaXRpZXMuaXNGdW5jdGlvbihhZFVuaXQuc3Vic2NyaWJlKSB8fCB1dGlsaXRpZXMuaXNGdW5jdGlvbihhZFVuaXQuYWRkRXZlbnRMaXN0ZW5lcikgfHwgdXRpbGl0aWVzLmlzRnVuY3Rpb24oYWRVbml0Lm9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblVuc3Vic2NyaWJlRnJvbUV2ZW50cyAoYWRVbml0KSB7XG4gICAgcmV0dXJuIHV0aWxpdGllcy5pc0Z1bmN0aW9uKGFkVW5pdC51bnN1YnNjcmliZSkgfHwgdXRpbGl0aWVzLmlzRnVuY3Rpb24oYWRVbml0LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHx8IHV0aWxpdGllcy5pc0Z1bmN0aW9uKGFkVW5pdC5vZmYpO1xuXG4gIH1cbn07XG5cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUuYWRVbml0QXN5bmNDYWxsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXJncyA9IHV0aWxpdGllcy5hcnJheUxpa2VPYmpUb0FycmF5KGFyZ3VtZW50cyk7XG4gIHZhciBtZXRob2QgPSBhcmdzLnNoaWZ0KCk7XG4gIHZhciBjYiA9IGFyZ3MucG9wKCk7XG4gIHZhciB0aW1lb3V0SWQ7XG5cbiAgc2FuaXR5Q2hlY2sobWV0aG9kLCBjYiwgdGhpcy5fYWRVbml0KTtcbiAgYXJncy5wdXNoKHdyYXBDYWxsYmFjaygpKTtcblxuICB0aGlzLl9hZFVuaXRbbWV0aG9kXS5hcHBseSh0aGlzLl9hZFVuaXQsIGFyZ3MpO1xuICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB0aW1lb3V0SWQgPSBudWxsO1xuICAgIGNiKG5ldyBWQVNURXJyb3IoJ29uIFZQQUlEQWRVbml0V3JhcHBlciwgdGltZW91dCB3aGlsZSB3YWl0aW5nIGZvciBhIHJlc3BvbnNlIG9uIGNhbGwgXCInICsgbWV0aG9kICsgJ1wiJykpO1xuICAgIGNiID0gdXRpbGl0aWVzLm5vb3A7XG4gIH0sIHRoaXMub3B0aW9ucy5yZXNwb25zZVRpbWVvdXQpO1xuXG4gIC8vICoqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cbiAgZnVuY3Rpb24gc2FuaXR5Q2hlY2sgKG1ldGhvZCwgY2IsIGFkVW5pdCkge1xuICAgIGlmICghdXRpbGl0aWVzLmlzU3RyaW5nKG1ldGhvZCkgfHwgIXV0aWxpdGllcy5pc0Z1bmN0aW9uKGFkVW5pdFttZXRob2RdKSkge1xuICAgICAgdGhyb3cgbmV3IFZBU1RFcnJvcignb24gVlBBSURBZFVuaXRXcmFwcGVyLmFkVW5pdEFzeW5jQ2FsbCwgaW52YWxpZCBtZXRob2QgbmFtZScpO1xuICAgIH1cblxuICAgIGlmICghdXRpbGl0aWVzLmlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICB0aHJvdyBuZXcgVkFTVEVycm9yKCdvbiBWUEFJREFkVW5pdFdyYXBwZXIuYWRVbml0QXN5bmNDYWxsLCBtaXNzaW5nIGNhbGxiYWNrJyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JhcENhbGxiYWNrICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIH1cbiAgICAgIGNiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxufTtcblxuVlBBSURBZFVuaXRXcmFwcGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldnROYW1lLCBoYW5kbGVyKSB7XG4gIHZhciBhZGRFdmVudExpc3RlbmVyID0gdGhpcy5fYWRVbml0LmFkZEV2ZW50TGlzdGVuZXIgfHwgdGhpcy5fYWRVbml0LnN1YnNjcmliZSB8fCB0aGlzLl9hZFVuaXQub247XG4gIGFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLl9hZFVuaXQsIGV2dE5hbWUsIGhhbmRsZXIpO1xufTtcblxuVlBBSURBZFVuaXRXcmFwcGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZ0TmFtZSwgaGFuZGxlcikge1xuICB2YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHRoaXMuX2FkVW5pdC5yZW1vdmVFdmVudExpc3RlbmVyIHx8IHRoaXMuX2FkVW5pdC51bnN1YnNjcmliZSB8fCB0aGlzLl9hZFVuaXQub2ZmO1xuICByZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcy5fYWRVbml0LCBldnROYW1lLCBoYW5kbGVyKTtcbn07XG5cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUud2FpdEZvckV2ZW50ID0gZnVuY3Rpb24gKGV2dE5hbWUsIGNiLCBjb250ZXh0KSB7XG5cdCAgdmFyIHRoYXQgPSB0aGlzO1xuICB2YXIgdGltZW91dElkO1xuICBzYW5pdHlDaGVjayhldnROYW1lLCBjYik7XG4gIGNvbnRleHQgPSBjb250ZXh0IHx8IG51bGw7XG5cbiAgdGhpcy5vbihldnROYW1lLCByZXNwb25zZUxpc3RlbmVyKTtcblxuICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICB0aGF0Lm9mZihldnROYW1lLCByZXNwb25zZUxpc3RlbmVyKTtcblx0XHQvLyBpZ25vcmUgZXZlbnRzIGlmIGFkIGlzIGZpbmlzaGVkXG5cdFx0aWYgKHdpbmRvdy5fdGltZW91dElkcy5pbmRleE9mKHRpbWVvdXRJZCkgPj0gMCkge1xuICAgICAgaWYgKHRoYXQub3B0aW9ucyAmJiB0aGF0Lm9wdGlvbnMucGxheWVyKSB7XG4gICAgICAgIHRoYXQub3B0aW9ucy5wbGF5ZXIudHJpZ2dlcih7dHlwZTogJ3RyYWNlLm1lc3NhZ2UnLCBkYXRhOiB7bWVzc2FnZTogJ1RpbWVvdXQgd2hpbGUgd2FpdGluZyBmb3IgZXZlbnQgJyArIGV2dE5hbWV9fSk7XG4gICAgICB9XG5cdFx0XHRjYihuZXcgVkFTVEVycm9yKCdvbiBWUEFJREFkVW5pdFdyYXBwZXIud2FpdEZvckV2ZW50LCB0aW1lb3V0IHdoaWxlIHdhaXRpbmcgZm9yIGV2ZW50IFwiJyArIGV2dE5hbWUgKyAnXCIuIFlvdSBtYXkgbmVlZCB0byBpbmNyZWFzZSBhZFN0YXJ0VGltZW91dC4nKSk7XG5cdFx0fVxuICAgIHRpbWVvdXRJZCA9IG51bGw7XG4gICAgY2IgPSB1dGlsaXRpZXMubm9vcDtcbiAgfSwgdGhpcy5vcHRpb25zLnJlc3BvbnNlVGltZW91dCk7XG5cbiAgLy8gRU5cbiAgd2luZG93Ll90aW1lb3V0SWRzLnB1c2godGltZW91dElkKTtcblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gIGZ1bmN0aW9uIHNhbml0eUNoZWNrIChldnROYW1lLCBjYikge1xuICAgIGlmICghdXRpbGl0aWVzLmlzU3RyaW5nKGV2dE5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVkFTVEVycm9yKCdvbiBWUEFJREFkVW5pdFdyYXBwZXIud2FpdEZvckV2ZW50LCBtaXNzaW5nIGV2dCBuYW1lJyk7XG4gICAgfVxuXG4gICAgaWYgKCF1dGlsaXRpZXMuaXNGdW5jdGlvbihjYikpIHtcbiAgICAgIHRocm93IG5ldyBWQVNURXJyb3IoJ29uIFZQQUlEQWRVbml0V3JhcHBlci53YWl0Rm9yRXZlbnQsIG1pc3NpbmcgY2FsbGJhY2snKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNwb25zZUxpc3RlbmVyICgpIHtcbiAgICBpZiAodGhhdC5vcHRpb25zICYmIHRoYXQub3B0aW9ucy5wbGF5ZXIpIHtcbiAgICAgIHRoYXQub3B0aW9ucy5wbGF5ZXIudHJpZ2dlcih7dHlwZTogJ3RyYWNlLmV2ZW50JywgZGF0YToge2V2ZW50OiBldnROYW1lfX0pO1xuICAgIH1cblx0ICB0aGF0Lm9mZihldnROYW1lLCByZXNwb25zZUxpc3RlbmVyKTtcbiAgICB2YXIgYXJncyA9IHV0aWxpdGllcy5hcnJheUxpa2VPYmpUb0FycmF5KGFyZ3VtZW50cyk7XG5cbiAgICBpZiAodGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIHRpbWVvdXRJZCA9IG51bGw7XG4gICAgfVxuXG4gICAgYXJncy51bnNoaWZ0KG51bGwpO1xuICAgIGNiLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICB9XG59O1xuXG4vLyBWUEFJRCBNRVRIT0RTXG5WUEFJREFkVW5pdFdyYXBwZXIucHJvdG90eXBlLmhhbmRzaGFrZVZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbiwgY2IpIHtcbiAgdGhpcy5hZFVuaXRBc3luY0NhbGwoJ2hhbmRzaGFrZVZlcnNpb24nLCB2ZXJzaW9uLCBjYik7XG59O1xuXG4vKiBqc2hpbnQgbWF4cGFyYW1zOjYgKi9cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUuaW5pdEFkID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIHZpZXdNb2RlLCBkZXNpcmVkQml0cmF0ZSwgYWRVbml0RGF0YSwgY2IpIHtcblx0bG9nZ2VyLmxvZygnVlBBSURBZFVuaXRXcmFwcGVyLT5DYWxsaW5nIGluaXRBZCBvbiBjcmVhdGl2ZScpO1xuXHR0aGlzLndhaXRGb3JFdmVudCgnQWRMb2FkZWQnLCBjYik7XG4gIHRoaXMuX2FkVW5pdC5pbml0QWQod2lkdGgsIGhlaWdodCwgdmlld01vZGUsIGRlc2lyZWRCaXRyYXRlLCBhZFVuaXREYXRhKTtcbn07XG5cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUucmVzaXplQWQgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCwgdmlld01vZGUsIGNiKSB7XG4gIC8vIE5PVEU6IEFkU2l6ZUNoYW5nZSBldmVudCBpcyBvbmx5IHN1cHBvcnRlZCBvbiBWUEFJRCAyLjAgc28gZm9yIHRoZSBtb21lbnQgd2UgYXJlIG5vdCBnb2luZyB0byB1c2UgaXRcbiAgLy8gYW5kIHdpbGwgYXNzdW1lIHRoYXQgZXZlcnl0aGluZyBpcyBmaW5lIGFmdGVyIHRoZSBhc3luYyBjYWxsXG5cdGxvZ2dlci5sb2coJ1ZQQUlEQWRVbml0V3JhcHBlci0+Q2FsbGluZyByZXNpemVBZCBvbiBjcmVhdGl2ZScpO1xuICB0aGlzLmFkVW5pdEFzeW5jQ2FsbCgncmVzaXplQWQnLCB3aWR0aCwgaGVpZ2h0LCB2aWV3TW9kZSwgY2IpO1xuICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcbiAgXHR3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRTaXplQ2hhbmdlJywgYWRWb2x1bWU6IHRoaXMub3B0aW9ucy5wbGF5ZXIudm9sdW1lKCl9KTtcbiAgfVxufTtcblxuVlBBSURBZFVuaXRXcmFwcGVyLnByb3RvdHlwZS5zdGFydEFkID0gZnVuY3Rpb24gKGNiKSB7XG5cdGxvZ2dlci5sb2coJ1ZQQUlEQWRVbml0V3JhcHBlci0+Q2FsbGluZyBzdGFydEFkIG9uIGNyZWF0aXZlJyk7XG5cdGlmICghdGhpcy5hZFN0YXJ0ZWQpIHtcblx0XHR0aGlzLndhaXRGb3JFdmVudCgnQWRTdGFydGVkJywgY2IpO1xuXHR9XG4gIHRoaXMuX2FkVW5pdC5zdGFydEFkKCk7XG4gIGlmICh0aGlzLmFkU3RhcnRlZCkge1xuICAgIGNiKG51bGwpO1xuICB9XG59O1xuXG5WUEFJREFkVW5pdFdyYXBwZXIucHJvdG90eXBlLnN0b3BBZCA9IGZ1bmN0aW9uIChjYikge1xuXHRsb2dnZXIubG9nKCdWUEFJREFkVW5pdFdyYXBwZXItPkNhbGxpbmcgc3RvcEFkIG9uIGNyZWF0aXZlJyk7XG4gIHRoaXMud2FpdEZvckV2ZW50KCdBZFN0b3BwZWQnLCBjYik7XG4gIHRoaXMuX2FkVW5pdC5zdG9wQWQoKTtcbn07XG5cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUucGF1c2VBZCA9IGZ1bmN0aW9uIChjYikge1xuXHRsb2dnZXIubG9nKCdWUEFJREFkVW5pdFdyYXBwZXItPkNhbGxpbmcgcGF1c2VBZCBvbiBjcmVhdGl2ZScpO1xuICB0aGlzLndhaXRGb3JFdmVudCgnQWRQYXVzZWQnLCBjYik7XG4gIHRoaXMuX2FkVW5pdC5wYXVzZUFkKCk7XG59O1xuXG5WUEFJREFkVW5pdFdyYXBwZXIucHJvdG90eXBlLnJlc3VtZUFkID0gZnVuY3Rpb24gKGNiKSB7XG5cdGxvZ2dlci5sb2coJ1ZQQUlEQWRVbml0V3JhcHBlci0+Q2FsbGluZyByZXN1bWVBZCBvbiBjcmVhdGl2ZScpO1xuICB0aGlzLndhaXRGb3JFdmVudCgnQWRQbGF5aW5nJywgY2IpO1xuICB0aGlzLl9hZFVuaXQucmVzdW1lQWQoKTtcbn07XG5cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUuZXhwYW5kQWQgPSBmdW5jdGlvbiAoY2IpIHtcblx0bG9nZ2VyLmxvZygnVlBBSURBZFVuaXRXcmFwcGVyLT5DYWxsaW5nIGV4cGFuZEFkIG9uIGNyZWF0aXZlJyk7XG4gIHRoaXMud2FpdEZvckV2ZW50KCdBZEV4cGFuZGVkQ2hhbmdlJywgY2IpO1xuICB0aGlzLl9hZFVuaXQuZXhwYW5kQWQoKTtcbn07XG5cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUuY29sbGFwc2VBZCA9IGZ1bmN0aW9uIChjYikge1xuXHRsb2dnZXIubG9nKCdWUEFJREFkVW5pdFdyYXBwZXItPkNhbGxpbmcgY29sbGFwc2VBZCBvbiBjcmVhdGl2ZScpO1xuICB0aGlzLndhaXRGb3JFdmVudCgnQWRFeHBhbmRlZENoYW5nZScsIGNiKTtcbiAgdGhpcy5fYWRVbml0LmNvbGxhcHNlQWQoKTtcbn07XG5cblZQQUlEQWRVbml0V3JhcHBlci5wcm90b3R5cGUuc2tpcEFkID0gZnVuY3Rpb24gKGNiKSB7XG5cdGxvZ2dlci5sb2coJ1ZQQUlEQWRVbml0V3JhcHBlci0+Q2FsbGluZyBza2lwQWQgb24gY3JlYXRpdmUnKTtcbiAgdGhpcy53YWl0Rm9yRXZlbnQoJ0FkU2tpcHBlZCcsIGNiKTtcbiAgdGhpcy5fYWRVbml0LnNraXBBZCgpO1xufTtcblxuLy8gVlBBSUQgcHJvcGVydHkgZ2V0dGVyc1xuW1xuICAnYWRMaW5lYXInLFxuICAnYWRXaWR0aCcsXG4gICdhZEhlaWdodCcsXG4gICdhZEV4cGFuZGVkJyxcbiAgJ2FkU2tpcHBhYmxlU3RhdGUnLFxuICAnYWRSZW1haW5pbmdUaW1lJyxcbiAgJ2FkRHVyYXRpb24nLFxuICAnYWRWb2x1bWUnLFxuICAnYWRDb21wYW5pb25zJyxcbiAgJ2FkSWNvbnMnXG5dLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gIHZhciBnZXR0ZXJOYW1lID0gJ2dldCcgKyB1dGlsaXRpZXMuY2FwaXRhbGl6ZShwcm9wZXJ0eSk7XG5cbiAgVlBBSURBZFVuaXRXcmFwcGVyLnByb3RvdHlwZVtnZXR0ZXJOYW1lXSA9IGZ1bmN0aW9uIChjYikge1xuICAgIHRoaXMuYWRVbml0QXN5bmNDYWxsKGdldHRlck5hbWUsIGNiKTtcbiAgfTtcbn0pO1xuXG4vLyBWUEFJRCBwcm9wZXJ0eSBzZXR0ZXJzXG5WUEFJREFkVW5pdFdyYXBwZXIucHJvdG90eXBlLnNldEFkVm9sdW1lID0gZnVuY3Rpb24gKHZvbHVtZSwgY2IpIHtcbiAgdGhpcy5hZFVuaXRBc3luY0NhbGwoJ3NldEFkVm9sdW1lJywgdm9sdW1lLCBjYik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZQQUlEQWRVbml0V3JhcHBlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vpaid/VPAIDAdUnitWrapper.js\n");

/***/ }),

/***/ "./src/scripts/ads/vpaid/VPAIDHTML5Tech.js":
/*!*************************************************!*\
  !*** ./src/scripts/ads/vpaid/VPAIDHTML5Tech.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar MimeTypes = __webpack_require__(/*! ../../utils/mimetypes */ \"./src/scripts/utils/mimetypes.js\");\n\nvar VASTError = __webpack_require__(/*! ../vast/VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\n\nvar VPAIDHTML5Client = __webpack_require__(/*! vpaid-html5-client */ \"./node_modules/vpaid-html5-client/js/VPAIDHTML5Client.js\");\n\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar dom = __webpack_require__(/*! ../../utils/dom */ \"./src/scripts/utils/dom.js\");\n\nvar logger = __webpack_require__(/*! ../../utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nfunction VPAIDHTML5Tech (mediaFile) {\n\n  if (!(this instanceof VPAIDHTML5Tech)) {\n    return new VPAIDHTML5Tech(mediaFile);\n  }\n\n  sanityCheck(mediaFile);\n\n  this.name = 'vpaid-html5';\n  this.containerEl = null;\n  this.videoEl = null;\n  this.vpaidHTMLClient = null;\n\n  this.mediaFile = mediaFile;\n\n  function sanityCheck (mediaFile) {\n      if (!mediaFile || !utilities.isString(mediaFile.src)) {\n        throw new VASTError(VPAIDHTML5Tech.INVALID_MEDIA_FILE);\n      }\n  }\n}\n\nVPAIDHTML5Tech.VPAIDHTML5Client = VPAIDHTML5Client;\n\nVPAIDHTML5Tech.supports = function (type) {\n  return !utilities.isOldIE() && MimeTypes.html5.indexOf(type) > -1;\n};\n\nVPAIDHTML5Tech.prototype.loadAdUnit = function loadAdUnit (containerEl, videoEl, callback) {\n  sanityCheck(containerEl, videoEl, callback);\n\n  this.containerEl = containerEl;\n  this.videoEl = videoEl;\n  this.vpaidHTMLClient = new VPAIDHTML5Tech.VPAIDHTML5Client(containerEl, videoEl, {});\n  // make unique client id for when multiple VPAIDs are running in the same html document at the same time.\n  this.vpaidHTMLClient._id = 'vpaidIframe_' + Date.now();\n  this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src, callback);\n\n  function sanityCheck (container, video, cb) {\n    if (!dom.isDomElement(container)) {\n      throw new VASTError(VPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL);\n    }\n\n    if (!dom.isDomElement(video) || video.tagName.toLowerCase() !== 'video') {\n      throw new VASTError(VPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL);\n    }\n\n    if (!utilities.isFunction(cb)) {\n      throw new VASTError(VPAIDHTML5Tech.MISSING_CALLBACK);\n    }\n  }\n};\n\nVPAIDHTML5Tech.prototype.unloadAdUnit = function unloadAdUnit () {\n  if (this.vpaidHTMLClient) {\n    try {\n      this.vpaidHTMLClient.destroy();\n    } catch (e) {\n      logger.error('VAST ERROR: trying to unload the VPAID adunit');\n    }\n\n    this.vpaidHTMLClient = null;\n  }\n\n  if (this.containerEl) {\n    dom.remove(this.containerEl);\n    this.containerEl = null;\n  }\n};\n\nvar PREFIX = 'on VPAIDHTML5Tech';\nVPAIDHTML5Tech.INVALID_MEDIA_FILE = PREFIX + ', invalid MediaFile';\nVPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL = PREFIX + ', invalid container HtmlElement';\nVPAIDHTML5Tech.INVALID_DOM_VIDEO_EL = PREFIX + ', invalid HTMLVideoElement';\nVPAIDHTML5Tech.MISSING_CALLBACK = PREFIX + ', missing valid callback';\n\nmodule.exports = VPAIDHTML5Tech;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdnBhaWQvVlBBSURIVE1MNVRlY2guanM/NzBkYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixnQkFBZ0IsbUJBQU8sQ0FBQywrREFBdUI7O0FBRS9DLGdCQUFnQixtQkFBTyxDQUFDLDhEQUFtQjs7QUFFM0MsdUJBQXVCLG1CQUFPLENBQUMsb0ZBQW9COztBQUVuRCxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7QUFDdEQsVUFBVSxtQkFBTyxDQUFDLG1EQUFpQjs7QUFFbkMsYUFBYSxtQkFBTyxDQUFDLHVFQUEyQjs7QUFFaEQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUZBQXFGO0FBQ3JGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3ZwYWlkL1ZQQUlESFRNTDVUZWNoLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgTWltZVR5cGVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvbWltZXR5cGVzJyk7XG5cbnZhciBWQVNURXJyb3IgPSByZXF1aXJlKCcuLi92YXN0L1ZBU1RFcnJvcicpO1xuXG52YXIgVlBBSURIVE1MNUNsaWVudCA9IHJlcXVpcmUoJ3ZwYWlkLWh0bWw1LWNsaWVudCcpO1xuXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xudmFyIGRvbSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2RvbScpO1xuXG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvY29uc29sZUxvZ2dlcicpO1xuXG5mdW5jdGlvbiBWUEFJREhUTUw1VGVjaCAobWVkaWFGaWxlKSB7XG5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFZQQUlESFRNTDVUZWNoKSkge1xuICAgIHJldHVybiBuZXcgVlBBSURIVE1MNVRlY2gobWVkaWFGaWxlKTtcbiAgfVxuXG4gIHNhbml0eUNoZWNrKG1lZGlhRmlsZSk7XG5cbiAgdGhpcy5uYW1lID0gJ3ZwYWlkLWh0bWw1JztcbiAgdGhpcy5jb250YWluZXJFbCA9IG51bGw7XG4gIHRoaXMudmlkZW9FbCA9IG51bGw7XG4gIHRoaXMudnBhaWRIVE1MQ2xpZW50ID0gbnVsbDtcblxuICB0aGlzLm1lZGlhRmlsZSA9IG1lZGlhRmlsZTtcblxuICBmdW5jdGlvbiBzYW5pdHlDaGVjayAobWVkaWFGaWxlKSB7XG4gICAgICBpZiAoIW1lZGlhRmlsZSB8fCAhdXRpbGl0aWVzLmlzU3RyaW5nKG1lZGlhRmlsZS5zcmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBWQVNURXJyb3IoVlBBSURIVE1MNVRlY2guSU5WQUxJRF9NRURJQV9GSUxFKTtcbiAgICAgIH1cbiAgfVxufVxuXG5WUEFJREhUTUw1VGVjaC5WUEFJREhUTUw1Q2xpZW50ID0gVlBBSURIVE1MNUNsaWVudDtcblxuVlBBSURIVE1MNVRlY2guc3VwcG9ydHMgPSBmdW5jdGlvbiAodHlwZSkge1xuICByZXR1cm4gIXV0aWxpdGllcy5pc09sZElFKCkgJiYgTWltZVR5cGVzLmh0bWw1LmluZGV4T2YodHlwZSkgPiAtMTtcbn07XG5cblZQQUlESFRNTDVUZWNoLnByb3RvdHlwZS5sb2FkQWRVbml0ID0gZnVuY3Rpb24gbG9hZEFkVW5pdCAoY29udGFpbmVyRWwsIHZpZGVvRWwsIGNhbGxiYWNrKSB7XG4gIHNhbml0eUNoZWNrKGNvbnRhaW5lckVsLCB2aWRlb0VsLCBjYWxsYmFjayk7XG5cbiAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuICB0aGlzLnZpZGVvRWwgPSB2aWRlb0VsO1xuICB0aGlzLnZwYWlkSFRNTENsaWVudCA9IG5ldyBWUEFJREhUTUw1VGVjaC5WUEFJREhUTUw1Q2xpZW50KGNvbnRhaW5lckVsLCB2aWRlb0VsLCB7fSk7XG4gIC8vIG1ha2UgdW5pcXVlIGNsaWVudCBpZCBmb3Igd2hlbiBtdWx0aXBsZSBWUEFJRHMgYXJlIHJ1bm5pbmcgaW4gdGhlIHNhbWUgaHRtbCBkb2N1bWVudCBhdCB0aGUgc2FtZSB0aW1lLlxuICB0aGlzLnZwYWlkSFRNTENsaWVudC5faWQgPSAndnBhaWRJZnJhbWVfJyArIERhdGUubm93KCk7XG4gIHRoaXMudnBhaWRIVE1MQ2xpZW50LmxvYWRBZFVuaXQodGhpcy5tZWRpYUZpbGUuc3JjLCBjYWxsYmFjayk7XG5cbiAgZnVuY3Rpb24gc2FuaXR5Q2hlY2sgKGNvbnRhaW5lciwgdmlkZW8sIGNiKSB7XG4gICAgaWYgKCFkb20uaXNEb21FbGVtZW50KGNvbnRhaW5lcikpIHtcbiAgICAgIHRocm93IG5ldyBWQVNURXJyb3IoVlBBSURIVE1MNVRlY2guSU5WQUxJRF9ET01fQ09OVEFJTkVSX0VMKTtcbiAgICB9XG5cbiAgICBpZiAoIWRvbS5pc0RvbUVsZW1lbnQodmlkZW8pIHx8IHZpZGVvLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3ZpZGVvJykge1xuICAgICAgdGhyb3cgbmV3IFZBU1RFcnJvcihWUEFJREhUTUw1VGVjaC5JTlZBTElEX0RPTV9DT05UQUlORVJfRUwpO1xuICAgIH1cblxuICAgIGlmICghdXRpbGl0aWVzLmlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICB0aHJvdyBuZXcgVkFTVEVycm9yKFZQQUlESFRNTDVUZWNoLk1JU1NJTkdfQ0FMTEJBQ0spO1xuICAgIH1cbiAgfVxufTtcblxuVlBBSURIVE1MNVRlY2gucHJvdG90eXBlLnVubG9hZEFkVW5pdCA9IGZ1bmN0aW9uIHVubG9hZEFkVW5pdCAoKSB7XG4gIGlmICh0aGlzLnZwYWlkSFRNTENsaWVudCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnZwYWlkSFRNTENsaWVudC5kZXN0cm95KCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdWQVNUIEVSUk9SOiB0cnlpbmcgdG8gdW5sb2FkIHRoZSBWUEFJRCBhZHVuaXQnKTtcbiAgICB9XG5cbiAgICB0aGlzLnZwYWlkSFRNTENsaWVudCA9IG51bGw7XG4gIH1cblxuICBpZiAodGhpcy5jb250YWluZXJFbCkge1xuICAgIGRvbS5yZW1vdmUodGhpcy5jb250YWluZXJFbCk7XG4gICAgdGhpcy5jb250YWluZXJFbCA9IG51bGw7XG4gIH1cbn07XG5cbnZhciBQUkVGSVggPSAnb24gVlBBSURIVE1MNVRlY2gnO1xuVlBBSURIVE1MNVRlY2guSU5WQUxJRF9NRURJQV9GSUxFID0gUFJFRklYICsgJywgaW52YWxpZCBNZWRpYUZpbGUnO1xuVlBBSURIVE1MNVRlY2guSU5WQUxJRF9ET01fQ09OVEFJTkVSX0VMID0gUFJFRklYICsgJywgaW52YWxpZCBjb250YWluZXIgSHRtbEVsZW1lbnQnO1xuVlBBSURIVE1MNVRlY2guSU5WQUxJRF9ET01fVklERU9fRUwgPSBQUkVGSVggKyAnLCBpbnZhbGlkIEhUTUxWaWRlb0VsZW1lbnQnO1xuVlBBSURIVE1MNVRlY2guTUlTU0lOR19DQUxMQkFDSyA9IFBSRUZJWCArICcsIG1pc3NpbmcgdmFsaWQgY2FsbGJhY2snO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZQQUlESFRNTDVUZWNoO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/ads/vpaid/VPAIDHTML5Tech.js\n");

/***/ }),

/***/ "./src/scripts/ads/vpaid/VPAIDIntegrator.js":
/*!**************************************************!*\
  !*** ./src/scripts/ads/vpaid/VPAIDIntegrator.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar MimeTypes = __webpack_require__(/*! ../../utils/mimetypes */ \"./src/scripts/utils/mimetypes.js\");\nvar VASTError = __webpack_require__(/*! ../vast/VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\nvar VASTResponse = __webpack_require__(/*! ../vast/VASTResponse */ \"./src/scripts/ads/vast/VASTResponse.js\");\nvar VASTTracker = __webpack_require__(/*! ../vast/VASTTracker */ \"./src/scripts/ads/vast/VASTTracker.js\");\nvar vastUtil = __webpack_require__(/*! ../vast/vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\n\nvar VPAIDAdUnitWrapper = __webpack_require__(/*! ./VPAIDAdUnitWrapper */ \"./src/scripts/ads/vpaid/VPAIDAdUnitWrapper.js\");\n\nvar async = __webpack_require__(/*! ../../utils/async */ \"./src/scripts/utils/async.js\");\nvar dom = __webpack_require__(/*! ../../utils/dom */ \"./src/scripts/utils/dom.js\");\nvar playerUtils = __webpack_require__(/*! ../../utils/playerUtils */ \"./src/scripts/utils/playerUtils.js\");\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nvar logger = __webpack_require__(/*! ../../utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nfunction VPAIDIntegrator (player, settings) {\n  if (!(this instanceof VPAIDIntegrator)) {\n    return new VPAIDIntegrator(player);\n  }\n\n  this.VIEW_MODE = {\n    NORMAL: 'normal',\n    FULLSCREEN: 'fullscreen',\n    THUMBNAIL: 'thumbnail'\n  };\n  this.player = player;\n  this.containerEl = createVPAIDContainerEl(player);\n  this.options = {\n    responseTimeout: 5000,\n    VPAID_VERSION: '2.0'\n  };\n  this.settings = settings;\n\n  this.contentSource = player.tech_.el_.src;\n  this.needsShowPlayer = false;\n\n  this.errorHasBeenTracked = false;\n  this.adFinished = false;\n\n  this.timeUpdateTimer = null;\n\n  this.addMouseMoveListener = function addMouseMoveListener () {\n    var frames = this.containerEl.getElementsByTagName('iframe');\n    if (frames.length) {\n      frames[0].contentWindow.addEventListener('mousemove', handleMouseMove);\n    }\n  };\n\n  this.removeMouseMoveListener = function removeMouseMoveListener () {\n    var frames = this.containerEl.getElementsByTagName('iframe');\n    if (frames.length) {\n      frames[0].contentWindow.removeEventListener('mousemove', handleMouseMove);\n    }\n  };\n\n  // **** Local Functions **** //\n\n  function handleMouseMove () {\n    player.userActive(true);\n  }\n\n  function createVPAIDContainerEl () {\n    var containerEl = document.createElement('div');\n    containerEl.id = 'BC-VPAID-container';\n    dom.addClass(containerEl, 'VPAID-container');\n    player.el().insertBefore(containerEl, player.controlBar.el());\n    return containerEl;\n  }\n}\n\nVPAIDIntegrator.prototype.playAd = function playVPaidAd (vastResponse, callback) {\n  if (!(vastResponse instanceof VASTResponse)) {\n    return callback(new VASTError('on VASTIntegrator.playAd, missing required VASTResponse'));\n  }\n\n  var that = this;\n  var player = this.player;\n  logger.debug('<VPAIDIntegrator.playAd> looking for supported tech...');\n  var tech = this._findSupportedTech(vastResponse, this.settings);\n\n  callback = callback || utilities.noop;\n\n  this._adUnit = null;\n\n  dom.addClass(player.el(), 'vjs-vpaid-ad');\n\n  player.on('vast.adsCancel', triggerVpaidAdEnd);\n  player.one('vpaid.adEnd', function () {\n    player.off('vast.adsCancel', triggerVpaidAdEnd);\n    removeAdUnit();\n  });\n\n  if (tech) {\n    logger.info('<VPAIDIntegrator.playAd> found tech: ', tech);\n\n    async.waterfall([\n      function (next) {\n        next(null, tech, vastResponse);\n      },\n      this._loadAdUnit.bind(this),\n      this._playAdUnit.bind(this),\n      this._finishPlaying.bind(this)\n\n    ], adComplete);\n\n    this._adUnit = {\n      _paused: true,\n      type: 'VPAID',\n      pauseAd: function () {\n        player.trigger('vpaid.pauseAd');\n        player.pause(true);   // we make sure that the video content gets stopped.\n      },\n      resumeAd: function () {\n          player.trigger('vpaid.resumeAd');\n      },\n      isPaused: function () {\n        return this._paused;\n      },\n      getSrc: function () {\n        return tech.mediaFile;\n      }\n    };\n\n  } else {\n    logger.debug('<VPAIDIntegrator.playAd> could not find suitable tech');\n    var error = new VASTError('on VPAIDIntegrator.playAd, could not find a supported mediaFile', 403);\n    adComplete(error, this._adUnit, vastResponse);\n  }\n\n  return this._adUnit;\n\n  // **** Local Functions **** //\n  function adComplete (error, adUnit, vastResponse) {\n    that.removeMouseMoveListener();\n    if (error && vastResponse) {\n      that._trackError(vastResponse, error.code);\n    }\n    player.trigger('vpaid.adEnd');\n    callback(error, vastResponse);\n  }\n\n  function triggerVpaidAdEnd () {\n\t    // player.trigger('stopAd');\n    player.trigger('vpaid.adEnd');\n  }\n\n  function removeAdUnit () {\n    if (tech) {\n      logger.log('VPAIDIntegrator->Calling unloadAdUnit (implicitly invokes stopAd and unsubscribes VPAID events)');\n      tech.unloadAdUnit();\n    }\n    dom.removeClass(player.el(), 'vjs-vpaid-ad');\n  }\n};\n\nVPAIDIntegrator.prototype._findSupportedTech = function (vastResponse, settings) {\n  if (!(vastResponse instanceof VASTResponse)) {\n    return null;\n  }\n\n  var vpaidMediaFiles = vastResponse.mediaFiles.filter(vastUtil.isVPAID);\n  var preferredTech = settings && settings.preferredTech;\n  var skippedSupportTechs = [];\n  var i, len, mediaFile, VPAIDTech, isPreferedTech;\n\n  for (i = 0, len = vpaidMediaFiles.length; i < len; i += 1) {\n    mediaFile = vpaidMediaFiles[i];\n    VPAIDTech = vastUtil.findSupportedVPAIDTech(mediaFile.type);\n\n    // no supported VPAID tech found, skip mediafile\n    if (!VPAIDTech) { continue; }\n\n    // do we have a prefered tech, does it play this media file ?\n    isPreferedTech = preferredTech ? (mediaFile.type === preferredTech || (MimeTypes[preferredTech] && MimeTypes[preferredTech].indexOf(mediaFile.type) > -1)) : false;\n\n    // our prefered tech can read this mediafile, defaulting to it.\n    if (isPreferedTech) {\n      return new VPAIDTech(mediaFile, settings);\n    }\n\n    skippedSupportTechs.push({ mediaFile: mediaFile, tech: VPAIDTech });\n  }\n\n  if (skippedSupportTechs.length) {\n    var firstTech = skippedSupportTechs[0];\n    return new firstTech.tech(firstTech.mediaFile, settings);\n  }\n\n  return null;\n};\n\nVPAIDIntegrator.prototype._createVPAIDAdUnitWrapper = function (adUnit, src, responseTimeout, player) {\n\treturn new VPAIDAdUnitWrapper(adUnit, {src: src, responseTimeout: responseTimeout, player: player});\n};\n\nVPAIDIntegrator.prototype._loadAdUnit = function (tech, vastResponse, next) {\n  var that = this;\n  var player = this.player;\n  var vjsTechEl = player.el().querySelector('.vjs-tech');\n  // var responseTimeout = this.settings.responseTimeout || this.options.responseTimeout;\n  var responseTimeout = this.settings.adCancelTimeout || this.options.responseTimeout;\n  tech.loadAdUnit(this.containerEl, vjsTechEl, function (error, adUnit) {\n    if (error) {\n      return next(error, adUnit, vastResponse);\n    }\n\n    try {\n      var frms = document.getElementsByTagName('IFRAME');\n      if (frms && frms.length > 0) {\n        frms[0].addEventListener('mouseover', function () {\n          // logger.log('****** user activity');\n            player.userActive(true);\n            if (!dom.hasClass(player.el(), 'vjs-has-started')) {\n                dom.addClass(player.el(), 'vjs-has-started');\n            }\n          });\n        }\n        player.trigger({type: 'trace.message', data: {message: 'Playing ' + tech.mediaFile.src + ' (type = ' + tech.mediaFile.type + ', apiFramework = ' + tech.mediaFile.apiFramework + ')'}});\n      var WrappedAdUnit = that._createVPAIDAdUnitWrapper(adUnit, tech.mediaFile.src, responseTimeout, player);\n      var techClass = 'vjs-' + tech.name + '-ad';\n      dom.addClass(player.el(), techClass);\n      player.one('vpaid.adEnd', function () {\n        dom.removeClass(player.el(), techClass);\n      });\n      next(null, WrappedAdUnit, vastResponse);\n    } catch (e) {\n      next(e, adUnit, vastResponse);\n    }\n  });\n\n  // we to have re-post the message about loaded creative to the current window,\n  // because VPAID client listen this message on current window (not on the parent).\n  var onLoaded = function (e) {\n    window.postMessage(e.data, window.location.origin);\n  };\n  window.parent.addEventListener('message', onLoaded);\n};\n\nVPAIDIntegrator.prototype._playAdUnit = function (adUnit, vastResponse, callback) {\n  async.waterfall([\n    function (next) {\n      next(null, adUnit, vastResponse);\n    },\n    this._handshake.bind(this),\n    this._setupEvents.bind(this),\n    this._initAd.bind(this),\n    // this._setupEvents.bind(this),\n    this._addSkipButton.bind(this),\n    this._linkPlayerControls.bind(this),\n    this._startAd.bind(this)\n  ], callback);\n};\n\nVPAIDIntegrator.prototype._handshake = function handshake (adUnit, vastResponse, next) {\n  adUnit.handshakeVersion(this.options.VPAID_VERSION, function (error, version) {\n    if (error) {\n      return next(error, adUnit, vastResponse);\n    }\n\n    if (version && isSupportedVersion(version)) {\n      return next(null, adUnit, vastResponse);\n    }\n\n    return next(new VASTError('on VPAIDIntegrator._handshake, unsupported version \"' + version + '\"'), adUnit, vastResponse);\n  });\n\n  function isSupportedVersion (version) {\n    var majorNum = major(version);\n    return majorNum >= 1 && majorNum <= 2;\n  }\n\n  function major (version) {\n    var parts = version.split('.');\n    return parseInt(parts[0], 10);\n  }\n};\n\nVPAIDIntegrator.prototype._initAd = function (adUnit, vastResponse, next) {\n  var tech = this.player.el().querySelector('.vjs-tech');\n  var dimension = dom.getDimension(tech);\n  adUnit.initAd(dimension.width, dimension.height, this.VIEW_MODE.NORMAL, -1, {AdParameters: vastResponse.adParameters || ''}, function (error) {\n    next(error, adUnit, vastResponse);\n  });\n};\n\nVPAIDIntegrator.prototype._createVASTTracker = function (adUnitSrc, vastResponse) {\n  return new VASTTracker(adUnitSrc, vastResponse);\n};\n\nVPAIDIntegrator.prototype._setupEvents = function (adUnit, vastResponse, next) {\n  var adUnitSrc = adUnit.options.src;\n  var tracker = this._createVASTTracker(adUnitSrc, vastResponse);\n  var player = this.player;\n  var contentSource = this.contentSource;\n  var that = this;\n\n  this.tracker = tracker;\n\n  this.impressionTriggered = false;\n\n  adUnit.on('AdSkipped', function () {\n      that.removeMouseMoveListener();\n\t  \tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdSkipped'}});\n\t      if (window.MoatApiReference) {\n\t    \t  window.MoatApiReference.dispatchEvent({type: 'AdSkipped', adVolume: player.volume()});\n\t      }\n    player.trigger('vpaid.AdSkipped');\n    tracker.trackSkip();\n    playerUtils.showBigPlayButton(player, false);\n\n    adUnit.stopAd(utilities.noop);\n    // VIDLA-2676 - force player to clean resources\n    setTimeout(function () {\n          player.trigger('vast.adsCancel');\n    }, 300);\n    // player.trigger('adStop');\n  });\n\n  function triggerImpression () {\n\t  if (!that.impressionTriggered) {\n\t\t  that.impressionTriggered = true;\n\t      if (window.MoatApiReference) {\n\t    \t  window.MoatApiReference.dispatchEvent({type: 'AdImpression', adVolume: player.volume()});\n\t      }\n\t\t  player.trigger({type: 'trace.event', data: {event: 'vpaid.AdImpression'}});\n\t\t  player.trigger('vpaid.AdImpression');\n\t\t  tracker.trackImpressions();\n\t  }\n  }\n  adUnit.on('AdImpression', function () {\n\t  triggerImpression();\n  });\n\n  adUnit.on('AdStarted', function () {\n\t  if (adUnit.adStarted) {\n\t\t  // ignore second AdStarted event\n\t\t  return;\n\t  }\n\n\t  that.addMouseMoveListener();\n\n    if (window._molSettings.viewabilityTracking) {\n      window._molSettings.viewabilityTracking.init(window._molSettings.viewability.contextId, player.duration(), player.el_.offsetWidth, player.el_.offsetHeight);\n    }\n    adUnit.adStarted = true;\n    if (!dom.hasClass(player.el(), 'vjs-has-started')) {\n      dom.addClass(player.el(), 'vjs-has-started');\n    }\n    player.trigger('vpaid.AdStarted');\n    tracker.trackCreativeView();\n    if (!window._molSettings.playsInBreak && adUnit.getAdDuration) {\n      adUnit.getAdDuration(function (that, dur) {\n        if (dur > 0) {\n          player.duration(dur);\n        }\n      });\n    }\n  \ttriggerImpression();\n    notifyPlayToPlayer();\n    player.one('adStop', function () {\n      if (adUnit.stopAd) {\n        adUnit.stopAd(utilities.noop);\n      }\n    });\n\n    if (utilities.isIDevice()) {\n    \t// VIDLA-2836 (Ad click thru does not landing click thru url)\n    \t// iPhone and iPad\n    \tvar elems = document.getElementsByClassName('vjs-resize-manager');\n    \tif (elems && elems.length > 0) {\n    \t\tvar parent = elems[0].parentElement;\n    \t\tif (parent) {\n    \t\t\tparent.removeChild(elems[0]);\n    \t\t}\n    \t}\n    }\n\n  });\n\n  function updateTimeControls () {\n\t  \tvar convertTimeToStr = function (time) {\n\t\t\tvar secs = parseInt(time + 0.5);\n\t\t\tvar mins = parseInt(secs / 60);\n\t\t\tsecs -= (mins * 60);\n\t\t\tvar str = mins.toString() + ':' + (secs > 9 ? ''  : '0') + secs.toString();\n\t\t\treturn str;\n\t\t};\n\n\t\tvar bcTimeDisplay = document.getElementById('bc_time_display');\n\t\tif (!bcTimeDisplay) {\n\t\t\tbcTimeDisplay = document.createElement('div');\n\t\t\tplayer.controlBar.getChild('currentTimeDisplay').el_.appendChild(bcTimeDisplay);\n\t\t\tbcTimeDisplay.id = 'bc_time_display';\n\t\t\tbcTimeDisplay.class = 'vjs-current-time-display';\n\t\t\tbcTimeDisplay['aria-live'] = 'off';\n\t\t\tbcTimeDisplay.innerHTML = '<span class=\"vjs-control-text\"></span>0:00';   // eslint-disable-line quotes\n      showOriginalTimeDisplay(player, false);\n\t\t}\n\t\telse {\n      showOriginalTimeDisplay(player, false);\n\t\t\tbcTimeDisplay.style.display = 'block';\n\t\t}\n\t\tadUnit.getAdRemainingTime(function (that, time) {\n\t\t\tif (time >= 0) {\n\t\t\t\tvar curTime = player.duration() - time;\n\t\t\t\tif (curTime >= 0) {\n\t\t\t\t\tbcTimeDisplay.childNodes[1].nodeValue = convertTimeToStr(curTime);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n  }\n\n  adUnit.on('AdVideoStart', function () {\n\t  player.trigger({type: 'trace.event', data: {event: 'AdVideoStart'}});\n      if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdVideoStart', adVolume: player.volume()});\n      }\n\n    player.trigger('vpaid.AdVideoStart');\n    tracker.trackStart();\n\tif (!window._molSettings.playsInBreak && adUnit.getAdDuration) {\n\t\tadUnit.getAdDuration(function (that, dur) {\n\t\t\tif (dur > 0) {\n\t\t\t\tplayer.duration(dur);\n\t\t\t}\n\t\t});\n\t}\n    notifyPlayToPlayer();\n    playerUtils.showBigPlayButton(player, false);\n    if (utilities.isMobile()) {\n        // VIDLA-2336 (simulate user activity to make sure control bar is visible on mobile devices)\n        for (var i = 0; i < 4; i++) {\n        \tsetTimeout(function () {\n            player.userActive(true);\n        \t}, i * 1000);\n        }\n    }\n    if (contentSource === player.tech_.el_.src) {\n      player.trigger({type: 'trace.message', data: {message: 'VPAID creative uses its own video tag'}});\n      that.needsShowPlayer = true;\n      if (!window._molSettings.playsInBreak) {\n        that.timeUpdateTimer = setInterval(updateTimeControls, 500);\n      }\n      else {\n        player.controlBar.hide();\n      }\n    }\n  });\n\n  adUnit.on('AdPlaying', function () {\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n      if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdPlaying', adVolume: player.volume()});\n      }\n    player.trigger('vpaid.AdPlaying');\n    tracker.trackResume();\n    notifyPlayToPlayer();\n    playerUtils.showBigPlayButton(player, false);\n  });\n\n  adUnit.on('AdPaused', function () {\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n      if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdPaused', adVolume: player.volume()});\n      }\n    player.trigger('vpaid.AdPaused');\n    tracker.trackPause();\n    notifyPauseToPlayer();\n\t  var iframeBackButton = window.document.getElementById('iframeBackButton');\n\t  if (iframeBackButton) {\n\t\t  playerUtils.showBigPlayButton(player, false);\n\t\t  return;\n\t  }\n    playerUtils.showBigPlayButton(player, true);\n  });\n\n  function notifyPlayToPlayer () {\n    if (that._adUnit && that._adUnit.isPaused()) {\n      that._adUnit._paused = false;\n    }\n    player.trigger('play');\n\n  }\n\n  function notifyPauseToPlayer () {\n    if (that._adUnit) {\n      that._adUnit._paused = true;\n    }\n    player.trigger('pause');\n  }\n\n  adUnit.on('AdVideoFirstQuartile', function () {\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdVideoFirstQuartile'}});\n    if (window.MoatApiReference) {\n    \twindow.MoatApiReference.dispatchEvent({type: 'AdVideoFirstQuartile', adVolume: player.volume()});\n    }\n    player.trigger('vpaid.AdVideoFirstQuartile');\n    tracker.trackFirstQuartile();\n  });\n\n  adUnit.on('AdVideoMidpoint', function () {\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdVideoMidpoint'}});\n    if (window.MoatApiReference) {\n    \twindow.MoatApiReference.dispatchEvent({type: 'AdVideoMidpoint', adVolume: player.volume()});\n    }\n    player.trigger('vpaid.AdVideoMidpoint');\n    tracker.trackMidpoint();\n  });\n\n  adUnit.on('AdVideoThirdQuartile', function () {\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdVideoThirdQuartile'}});\n    if (window.MoatApiReference) {\n    \twindow.MoatApiReference.dispatchEvent({type: 'AdVideoThirdQuartile', adVolume: player.volume()});\n    }\n    player.trigger('vpaid.AdVideoThirdQuartile');\n    tracker.trackThirdQuartile();\n  });\n\n  adUnit.on('AdVideoComplete', function () {\n    that.removeMouseMoveListener();\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdVideoComplete'}});\n    player.trigger('vpaid.AdVideoComplete');\n    tracker.trackComplete();\n    playerUtils.showBigPlayButton(player, false);\n    if (window.MoatApiReference) {\n  \t  window.MoatApiReference.dispatchEvent({type: 'AdVideoComplete', adVolume: player.volume()});\n    }\n    // VIDLA-2406 forse ad to stop\n    if (adUnit.stopAd) {\n      adUnit.stopAd(utilities.noop);\n    }\n  });\n\n  adUnit.on('AdClickThru', function (data) {\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n\t  var enableFullscreenClickIFrame = false;\n\t  player.trigger({type: 'trace.event', data: {event: 'vpaid.AdClickThru'}});\n    if (window.MoatApiReference) {\n      window.MoatApiReference.dispatchEvent({type: 'AdClickThru', adVolume: player.volume()});\n    }\n    player.trigger('vpaid.AdClickThru');\n    var url = data.url;\n    var playerHandles = data.playerHandles;\n    var clickThruUrl = utilities.isNotEmptyString(url) ? url : generateClickThroughURL(vastResponse.clickThrough);\n\n    if (playerHandles && window._molSettings.disableClickThru) {\n      return;\n    }\n\n    tracker.trackClick();\n    if (playerHandles && clickThruUrl) {\n    \tif (player.isFullscreen() && enableFullscreenClickIFrame) {\n    \t\taddClickThroughDivBlocker(clickThruUrl);\n    \t}\n    \telse {\n    \t\twindow.open(clickThruUrl, '_blank');\n    \t}\n    }\n\n    // VIDLA-2269 (Ad does not pause when browsing out to a click url from a vpaid ad)\n    adUnit.pauseAd(utilities.noop);\n\n    function generateClickThroughURL (clickThroughMacro) {\n      var variables = {\n        ASSETURI: adUnit.options.src,\n        CONTENTPLAYHEAD: 0 // In VPAID there is no method to know the current time from the adUnit\n      };\n\n      return clickThroughMacro ? vastUtil.parseURLMacro(clickThroughMacro, variables) : null;\n    }\n  });\n\n  adUnit.on('AdUserAcceptInvitation', function () {\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdUserAcceptInvitation'}});\n    player.trigger('vpaid.AdUserAcceptInvitation');\n    tracker.trackAcceptInvitation();\n    tracker.trackAcceptInvitationLinear();\n  });\n\n  adUnit.on('AdUserClose', function () {\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdUserClose'}});\n\t      if (window.MoatApiReference) {\n\t    \t  window.MoatApiReference.dispatchEvent({type: 'AdUserClose', adVolume: player.volume()});\n\t      }\n    player.trigger('vpaid.AdUserClose');\n    tracker.trackClose();\n    tracker.trackCloseLinear();\n  });\n\n  adUnit.on('AdUserMinimize', function () {\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdUserMinimize'}});\n    player.trigger('vpaid.AdUserMinimize');\n    tracker.trackCollapse();\n  });\n\n  adUnit.on('AdError', function () {\n    that.removeMouseMoveListener();\n\t  if (that.adFinished) {\n\t\t  return;\n\t  }\n\t  // VIDLA-2389 suppress eror tracking after ad impression has been reported\n\t  if (!that.impressionTriggered && !that.errorHasBeenTracked) {\n\t\t  player.trigger({type: 'trace.event', data: {event: 'vpaid.AdError'}});\n\t      if (window.MoatApiReference) {\n\t    \t  window.MoatApiReference.dispatchEvent({type: 'AdError', adVolume: player.volume()});\n\t      }\n\t      player.trigger('vpaid.AdError');\n\t    // NOTE: we track errors code 901, as noted in VAST 3.0\n\t    tracker.trackErrorWithCode(901);\n\t    that.errorHasBeenTracked = true;\n\t  }\n\t  playerUtils.showBigPlayButton(player, false);\n  });\n\n  adUnit.on('AdVolumeChange', function () {\n\t\tplayer.trigger({type: 'trace.event', data: {event: 'vpaid.AdVolumeChange'}});\n    player.trigger('vpaid.AdVolumeChange');\n    var lastVolume = player.volume();\n    adUnit.getAdVolume(function (error, currentVolume) {\n      if (lastVolume !== currentVolume) {\n        if (currentVolume === 0 && lastVolume > 0) {\n          tracker.trackMute();\n        }\n\n        if (currentVolume > 0 && lastVolume === 0) {\n          tracker.trackUnmute();\n        }\n\n        player.volume(currentVolume);\n      }\n    });\n  });\n\n  adUnit.on('AdSizeChange', function () {\n\t  if (player.vast && player.vast.needSyncPlay) {\n\t\t  if (player.paused() !== player.tech_.el_.paused) {\n        // ad uses main content tag\n        if (contentSource != player.tech_.el_.src) {\n          if (player.tech_.el_.paused) {\n            if (window.MoatApiReference) {\n                window.MoatApiReference.dispatchEvent({type: 'AdPaused', adVolume: player.volume()});\n            }\n            notifyPauseToPlayer();\n            playerUtils.showBigPlayButton(player, true);\n          }\n          else {\n            if (window.MoatApiReference) {\n                window.MoatApiReference.dispatchEvent({type: 'AdPlaying', adVolume: player.volume()});\n            }\n            notifyPlayToPlayer();\n            playerUtils.showBigPlayButton(player, false);\n          }\n        }\n\t\t  }\n\t\t  player.vast.needSyncPlay = false;\n\t  }\n  });\n\n  function addClickThroughDivBlocker (clickThruUrl) {\n\t  var blocker = createClickThroughDiv(player, clickThruUrl);\n\t  var iFrame;\n\t  var iFrameBackButton;\n\n\t  player.el().insertBefore(blocker, player.controlBar.el());\n\n\t  player.on('fullscreenchange', updateDisplayStyle);\n\n\t  function createClickThroughDiv (player, url) {\n\t    var blocker = window.document.createElement('div');\n\n\t    dom.addClass(blocker, 'vast-blocker');\n\n\t    if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdClickThru', adVolume: player.volume()});\n\t    }\n\n\t    // create IFrame with back button\n\t    iFrame = window.document.createElement('iframe');\n\t    dom.addClass(iFrame, 'vast-blocker');\n\t    iFrame.src = url;\n\t    blocker.appendChild(iFrame);\n\n\t    iFrameBackButton = window.document.createElement('div');\n\t    dom.addClass(iFrameBackButton, 'vast-back-button');\n\t    dom.addClass(iFrameBackButton, 'enabled');\n\t    iFrameBackButton.innerHTML = 'Back';\n\t    iFrameBackButton.id = 'iframeBackButton';\n\t    blocker.appendChild(iFrameBackButton);\n\t    iFrameBackButton.addEventListener('click', function (e) {\n\t\t  // show controls\n\t\t  var skipButton = window.document.getElementById('adSkipButton');\n\t\t  if (skipButton) {\n\t\t\t  skipButton.style.display = 'block';\n\t\t  }\n\t\t  player.controls(true);\n\n\t\t  player.el().removeChild(blocker);\n\t\t  resumeAdUnit();\n\n\t\t  if (window.Event.prototype.stopPropagation !== undefined) {\n\t          e.stopPropagation();\n\t\t  }\n\t    });\n\n\t    // hide controls\n\t    setTimeout(function () {\n\t\t  playerUtils.showBigPlayButton(player, false);\n\t    }, 1);\n\t    var skipButton = window.document.getElementById('adSkipButton');\n\t    if (skipButton) {\n\t\t    skipButton.style.display = 'none';\n\t    }\n\t    player.controls(false);\n\n\t    return blocker;\n\t  }\n\n\t  function updateDisplayStyle () {\n\t\t  if (!player.isFullscreen()) {\n\t\t\t  playerUtils.showBigPlayButton(player, true);\n\t\t\t  var skipButton = window.document.getElementById('adSkipButton');\n\t\t\t  if (skipButton) {\n\t\t\t\t  skipButton.style.display = 'none';\n\t\t\t  }\n\t\t\t  player.controls(true);\n\t\t\t  player.el().removeChild(blocker);\n\t\t\t  resumeAdUnit();\n\t\t  }\n\t  }\n  }\n\n  var updateViewSize = resizeAd.bind(this, player, adUnit, this.VIEW_MODE);\n  var updateViewSizeThrottled = utilities.throttle(updateViewSize, 100);\n  var autoResize = this.settings.autoResize;\n\n  if (autoResize) {\n    dom.addEventListener(window, 'resize', updateViewSizeThrottled);\n    dom.addEventListener(window, 'orientationchange', updateViewSizeThrottled);\n  }\n\n  player.on('vast.resize', updateViewSize);\n  player.on('vpaid.pauseAd', pauseAdUnit);\n  player.on('vpaid.resumeAd', resumeAdUnit);\n  player.on('stopAd', stopAdUnit);\n\n  player.one('vpaid.adEnd', function () {\n    player.off('vast.resize', updateViewSize);\n    player.off('vpaid.pauseAd', pauseAdUnit);\n    player.off('vpaid.resumeAd', resumeAdUnit);\n    player.off('stopAd', stopAdUnit);\n\n    if (autoResize) {\n      dom.removeEventListener(window, 'resize', updateViewSizeThrottled);\n      dom.removeEventListener(window, 'orientationchange', updateViewSizeThrottled);\n    }\n  });\n\n  next(null, adUnit, vastResponse);\n\n  // **** Local Functions **** //\n  function pauseAdUnit () {\n    adUnit.pauseAd(utilities.noop);\n  }\n\n  function resumeAdUnit () {\n    adUnit.resumeAd(utilities.noop);\n  }\n\n  function stopAdUnit () {\n    if (adUnit.stopAd) {\n      adUnit.stopAd(utilities.noop);\n    }\n  }\n};\n\nVPAIDIntegrator.prototype._addSkipButton = function (adUnit, vastResponse, next) {\n  var skipButton;\n  var player = this.player;\n  var tracker = this.tracker;\n\n  // VIDLA-2084 (publisher-specified SKIP behavior for VPAID creatives)\n  var that = this;\n  var skipOffsetInSec;\n  var duration;\n  var remainingTime;\n  var progressInterval;\n  if (!window._molSettings.disableSkippability) {\n\t  if (vastResponse.skipoffset && utilities.isNumber(vastResponse.skipoffset)) {\n\t\t  skipOffsetInSec = vastResponse.skipoffset / 1000;\n\t\t  pubAddSkipButtonToPlayer(player, skipOffsetInSec);\n\t  }\n\t  else {\n\t\t  // check if publisher had explicitly disable skippability\n\t\t  var disableSkippabilityByPublisher = false;\n\t\t  if (window._molSettings && window._molSettings.skippable) {\n\t\t\t  if (window._molSettings.skippable.enabled === false) {\n\t\t\t\t  disableSkippabilityByPublisher = true;\n\t\t\t  }\n\t\t\t  if (vastResponse.duration && window._molSettings.skippable.videoThreshold && vastResponse.duration < window._molSettings.skippable.videoThreshold) {\n\t\t\t\t  disableSkippabilityByPublisher = true;\n\t\t\t  }\n\t\t  }\n\t\t  if (!disableSkippabilityByPublisher) {\n\t\t\t  adUnit.on('AdSkippableStateChange', updateSkipButtonState);\n\t\t\t  playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], removeSkipButton);\n\t\t  }\n\t  }\n  }\n\n  next(null, adUnit, vastResponse);\n\n  // **** Local Function **** //\n  function updateSkipButtonState () {\n    player.trigger('vpaid.AdSkippableStateChange');\n    adUnit.getAdSkippableState(function (error, isSkippable) {\n      if (isSkippable) {\n        if (!skipButton) {\n          addSkipButton(player);\n        }\n      } else {\n        removeSkipButton(player);\n      }\n    });\n  }\n\n  function addSkipButton (player) {\n    skipButton = createSkipButton(player);\n    player.el().appendChild(skipButton);\n  }\n\n  function removeSkipButton () {\n    dom.remove(skipButton);\n    skipButton = null;\n  }\n\n  function createSkipButton () {\n    var skipButton = window.document.createElement('div');\n    dom.addClass(skipButton, 'vast-skip-button');\n    dom.addClass(skipButton, 'enabled');\n    // skipButton.innerHTML = 'Skip ad';\n    skipButton.innerHTML = window._molSettings.skipButtonText;\n    skipButton.id = 'adSkipButton';\n\n    skipButton.onclick = function (e) {\n        that.removeMouseMoveListener();\n        adUnit.getAdSkippableState(function (error, isSkippable) {\n            if (isSkippable) {\n                adUnit.skipAd(utilities.noop);  // We skip the adUnit\n            } else {\n            \ttracker.trackSkip();\n                adUnit.stopAd(utilities.noop);\n            }\n          });\n      // adUnit.skipAd(utilities.noop);//We skip the adUnit\n\n      // We prevent event propagation to avoid problems with the clickThrough and so on\n      if (window.Event.prototype.stopPropagation !== undefined) {\n        e.stopPropagation();\n      } else {\n        return false;\n      }\n    };\n\n    return skipButton;\n  }\n\n\t// VIDLA-2084 (publisher-specified SKIP behavior for VPAID creatives)\n\t// EN - support publisher SKIP settings\n\t// **** Local Function **** //\n\tfunction pubAddSkipButtonToPlayer (player, skipOffset) {\n\t  var skipButton = pubCreateSkipButton(player);\n\t  var updateSkipButton = pubUpdateSkipButtonState.bind(that, skipButton, skipOffset);\n\n\t  player.el().appendChild(skipButton);\n\t  // player.on('timeupdate', updateSkipButton);\n\t  progressInterval = setInterval(updateSkipButton, 500);\n\n\t  playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], pubRemoveSkipButton);\n\n\t  function removeSkipButton () {\n\t    // player.off('timeupdate', updateSkipButton);\n\t    dom.remove(skipButton);\n\t    skipButton = null;\n\t  }\n\n\t  function pubRemoveSkipButton () {\n\t\t  if (progressInterval) {\n\t\t\t  clearInterval(progressInterval);\n\t\t\t  progressInterval = null;\n\t\t  }\n\t\t  removeSkipButton();\n\t  }\n\t}\n\n\tfunction pubCreateSkipButton (player) {\n\t  var skipButton = window.document.createElement('div');\n\t  dom.addClass(skipButton, 'vast-skip-button');\n\t  skipButton.style.display = 'none';\n\t  skipButton.id = 'adSkipButton';\n\n\t  skipButton.onclick = function (e) {\n\t    if (dom.hasClass(skipButton, 'enabled')) {\n\t        that.removeMouseMoveListener();\n\t        adUnit.getAdSkippableState(function (error, isSkippable) {\n                adUnit.skipAd(utilities.noop);  // We skip the adUnit\n\t            if (!isSkippable) {\n\t            \ttracker.trackSkip();\n\t                adUnit.stopAd(utilities.noop);\n\t            \tsetTimeout(function () {\n\t\t                player.trigger('vast.adsCancel');\n\t            \t}, 1);\n\t            }\n\t          });\n\t        // adUnit.skipAd(utilities.noop);//We skip the adUnit\n\t    }\n\t    playerUtils.showBigPlayButton(player, false);\n\n\t    // We prevent event propagation to avoid problems with the clickThrough and so on\n\t    if (window.Event.prototype.stopPropagation !== undefined) {\n\t      e.stopPropagation();\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\n\t  return skipButton;\n\t}\n\n\tfunction pubUpdateSkipButtonState (skipButton, skipOffset) {\n\t\tadUnit.getAdDuration(function (that, dur) {\n\t\t\tif (dur > 0) {\n\t\t\t\tduration = dur;\n\t\t\t}\n\t\t});\n\t\tadUnit.getAdRemainingTime(function (that, time) {\n      remainingTime = time;\n      // for VPAID 1.0 use remaining time for duration calculation\n      if (!duration && remainingTime > 0) {\n        duration = remainingTime;\n      }\n    });\n    // return if duration or/and remaining time is not implemented or unknown\n\t\tif (!duration || !remainingTime || duration < 0 || remainingTime < 0) {\n\t\t\treturn;\n\t\t}\n\t\tvar timeLeft = Math.ceil(skipOffset - (duration - remainingTime));\n    // if skip button enabled never show before-button skip text\n\t  if (timeLeft > 0 && !dom.hasClass(skipButton, 'enabled')) {\n\t      skipButton.innerHTML = '<p class=\"vast-skip-button-text\">' + window._molSettings.skipText.replace('%%TIME%%', utilities.toFixedDigits(timeLeft, 2)) + '</p>';   // eslint-disable-line quotes\n\t  } else {\n\t    if (!dom.hasClass(skipButton, 'enabled')) {\n\t      dom.addClass(skipButton, 'enabled');\n\t      skipButton.innerHTML = window._molSettings.skipButtonText;\n\t    }\n\t  }\n\t  var iframeBackButton = window.document.getElementById('iframeBackButton');\n\t  if (!iframeBackButton) {\n\t\t  if (player.isFullscreen() && utilities.isAndroid()) {\n\t\t\t  skipButton.style.display = 'none';\n\t\t\t  return;\n\t\t  }\n\t\t  skipButton.style.display = 'block';\n\t  }\n\t}\n};\n\nVPAIDIntegrator.prototype._linkPlayerControls = function (adUnit, vastResponse, next) {\n  var that = this;\n  linkVolumeControl(this.player, adUnit);\n  linkFullScreenControl(this.player, adUnit, this.VIEW_MODE);\n\n  next(null, adUnit, vastResponse);\n\n  // **** Local Functions **** //\n  function linkVolumeControl (player, adUnit) {\n    player.on('volumechange', updateAdUnitVolume);\n    adUnit.on('AdVolumeChange', updatePlayerVolume);\n\n    player.one('vpaid.adEnd', function () {\n      player.off('volumechange', updateAdUnitVolume);\n    });\n\n\n    // **** Local Functions **** //\n    function updateAdUnitVolume () {\n      var vol = player.muted() ? 0 : player.volume();\n      adUnit.setAdVolume(vol, logError);\n    }\n\n    function updatePlayerVolume () {\n\t  if (window.MoatApiReference) {\n\t\t  \twindow.MoatApiReference.dispatchEvent({type: 'AdVolumeChange', adVolume: player.volume()});\n\t  }\n      player.trigger('vpaid.AdVolumeChange');\n      var lastVolume = player.volume();\n      adUnit.getAdVolume(function (error, vol) {\n        if (error) {\n          logError(error);\n        } else {\n          if (lastVolume !== vol) {\n            player.volume(vol);\n          }\n        }\n      });\n    }\n  }\n\n  function linkFullScreenControl (player, adUnit, VIEW_MODE) {\n    var updateViewSize = resizeAd.bind(that, player, adUnit, VIEW_MODE);\n\n    player.on('fullscreenchange', updateViewSize);\n\n    player.one('vpaid.adEnd', function () {\n      player.off('fullscreenchange', updateViewSize);\n    });\n  }\n};\n\nVPAIDIntegrator.prototype._startAd = function (adUnit, vastResponse, next) {\n  var player = this.player;\n  var alreadyGotAdStarted = adUnit.adStarted;\n\n  if (alreadyGotAdStarted) {\n\t  player.trigger('vast.adStart');\n\t  player.trigger({type: 'trace.event', data: {event: 'vpaid.AdStarted'}});\n  }\n  adUnit.startAd(function (error) {\n    if (!error && !alreadyGotAdStarted) {\n      player.trigger('vast.adStart');\n    }\n    next(error, adUnit, vastResponse);\n  });\n};\n\nVPAIDIntegrator.prototype._finishPlaying = function (adUnit, vastResponse, next) {\n  var player = this.player;\n  var that = this;\n  adUnit.on('AdStopped', function () {\n    if (window.MoatApiReference) {\n    \t  window.MoatApiReference.dispatchEvent({type: 'AdStopped', adVolume: player.volume()});\n     }\n   player.trigger('vpaid.AdStopped');\n   finishPlayingAd(null);\n  });\n\n  adUnit.on('AdError', function (error) {\n     if (that.impressionTriggered) {\n        finishPlayingAd(null);\n    }\n    else {\n    \tvar errMsg = error ? error.message : 'on VPAIDIntegrator, error while waiting for the adUnit to finish playing';\n        finishPlayingAd(new VASTError(errMsg));\n    }\n  });\n\n  // **** Local Functions **** //\n  var needsShowPlayer = this.needsShowPlayer;\n  function finishPlayingAd (error) {\n\t  that.adFinished = true;\n\t\tplayerUtils.showBigPlayButton(player, false);\n\t\tif (needsShowPlayer) {\n\t\t\tif (that.timeUpdateTimer) {\n\t\t\t\tclearInterval(that.timeUpdateTimer);\n\t\t\t\tthat.timeUpdateTimer = null;\n\t\t\t\tvar bcTimeDisplay = document.getElementById('bc_time_display');\n\t\t\t\tif (bcTimeDisplay) {\n\t\t\t\t\tplayer.controlBar.getChild('currentTimeDisplay').el_.removeChild(bcTimeDisplay);\n\t\t\t\t}\n        showOriginalTimeDisplay(player, true);\n      }\n\t    player.controlBar.show();\n\t\t\tplayer.tech_.el_.style.display = 'block';\n\t\t}\n    next(error, adUnit, vastResponse);\n  }\n};\n\nVPAIDIntegrator.prototype._trackError = function trackError (response, errorCode) {\n\tif (!this.errorHasBeenTracked) {\n\t\tthis.errorHasBeenTracked = true;\n\t\tvastUtil.track(response.errorURLMacros, {ERRORCODE: errorCode || 901});\n\t}\n};\n\nfunction showOriginalTimeDisplay (player, show) {\n  var children = player.controlBar.getChild('currentTimeDisplay').el_.children;\n  for (var i = 0; i < children.length; i++) {\n    if (children[i].id != 'bc_time_display') {\n      children[i].style.display = show ? '' : 'none';\n    }\n  }\n}\n\nfunction resizeAd (player, adUnit, VIEW_MODE) {\n\tvar skipButton = document.getElementById('adSkipButton');\n  var tech = player.el().querySelector('.vjs-tech');\n  var dimension = dom.getDimension(tech);\n  var MODE = player.isFullscreen() ? VIEW_MODE.FULLSCREEN : VIEW_MODE.NORMAL;\n  if (MODE === VIEW_MODE.NORMAL) {\n    if (player.vast) {\n      player.vast.needSyncPlay = true;\n    }\n\t  dimension.width = player.el_.offsetWidth;\n\t  dimension.height = player.el_.offsetHeight;\n\t  if (utilities.isAndroid() && skipButton) {\n\t\t  skipButton.style.display = 'block';\n\t  }\n  }\n  if (MODE === VIEW_MODE.FULLSCREEN) {\n\t  logger.log('****** to fullscreen dimension = ' + dimension.width + ',' + dimension.height);\n\t  if (utilities.isAndroid() && skipButton) {\n\t\t  skipButton.style.display = 'none';\n\t  }\n  }\n  adUnit.resizeAd(dimension.width, dimension.height, MODE, logError);\n}\n\nfunction logError (error) {\n  if (error) {\n    logger.error('ERROR: ' + error.message, error);\n  }\n}\n\nmodule.exports = VPAIDIntegrator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hZHMvdnBhaWQvVlBBSURJbnRlZ3JhdG9yLmpzPzlkYjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZ0JBQWdCLG1CQUFPLENBQUMsK0RBQXVCO0FBQy9DLGdCQUFnQixtQkFBTyxDQUFDLDhEQUFtQjtBQUMzQyxtQkFBbUIsbUJBQU8sQ0FBQyxvRUFBc0I7QUFDakQsa0JBQWtCLG1CQUFPLENBQUMsa0VBQXFCO0FBQy9DLGVBQWUsbUJBQU8sQ0FBQyw0REFBa0I7O0FBRXpDLHlCQUF5QixtQkFBTyxDQUFDLDJFQUFzQjs7QUFFdkQsWUFBWSxtQkFBTyxDQUFDLHVEQUFtQjtBQUN2QyxVQUFVLG1CQUFPLENBQUMsbURBQWlCO0FBQ25DLGtCQUFrQixtQkFBTyxDQUFDLG1FQUF5QjtBQUNuRCxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7O0FBRXRELGFBQWEsbUJBQU8sQ0FBQyx1RUFBMkI7O0FBRWhEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDLFNBQVM7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQixVQUFVOztBQUUvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4Qix3Q0FBd0M7QUFDdEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHdDQUF3QywyREFBMkQ7QUFDbkc7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0Esd0JBQXdCLDhCQUE4Qix3SUFBd0k7QUFDOUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLDhDQUE4QztBQUM3SDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IsNEJBQTRCLDBCQUEwQjtBQUMxRTtBQUNBLCtDQUErQyw2Q0FBNkM7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGdEQUFnRDtBQUMvRjtBQUNBLG9CQUFvQiw0QkFBNEIsNkJBQTZCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLG1CQUFtQiw0QkFBNEIsdUJBQXVCO0FBQ3RFO0FBQ0EsOENBQThDLGdEQUFnRDtBQUM5Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOEJBQThCLGtEQUFrRDtBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDZDQUE2QztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDRDQUE0QztBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNEJBQTRCLHFDQUFxQztBQUNuRjtBQUNBLDRDQUE0Qyx3REFBd0Q7QUFDcEc7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw0QkFBNEIsZ0NBQWdDO0FBQzlFO0FBQ0EsNENBQTRDLG1EQUFtRDtBQUMvRjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDRCQUE0QixxQ0FBcUM7QUFDbkY7QUFDQSw0Q0FBNEMsd0RBQXdEO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw0QkFBNEIsZ0NBQWdDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLG1EQUFtRDtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRCQUE0Qiw0QkFBNEI7QUFDM0U7QUFDQSw2Q0FBNkMsK0NBQStDO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxrQkFBa0IsNEJBQTRCLHVDQUF1QztBQUNyRjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0Esa0JBQWtCLDRCQUE0Qiw0QkFBNEI7QUFDMUU7QUFDQSwrQ0FBK0MsK0NBQStDO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGtCQUFrQiw0QkFBNEIsK0JBQStCO0FBQzdFO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDRCQUE0Qix3QkFBd0I7QUFDeEU7QUFDQSwrQ0FBK0MsMkNBQTJDO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGtCQUFrQiw0QkFBNEIsK0JBQStCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsNENBQTRDO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCw2Q0FBNkM7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDhDQUE4QywrQ0FBK0M7QUFDN0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCx1Q0FBdUM7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxZQUFZO0FBQ1osMENBQTBDO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0tBQW9LO0FBQ3BLLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7OztBQUdMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0QyxrREFBa0Q7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsNEJBQTRCLDBCQUEwQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyw2Q0FBNkM7QUFDM0Y7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDRCQUE0QjtBQUN2RTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIscUJBQXFCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvYWRzL3ZwYWlkL1ZQQUlESW50ZWdyYXRvci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIE1pbWVUeXBlcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL21pbWV0eXBlcycpO1xudmFyIFZBU1RFcnJvciA9IHJlcXVpcmUoJy4uL3Zhc3QvVkFTVEVycm9yJyk7XG52YXIgVkFTVFJlc3BvbnNlID0gcmVxdWlyZSgnLi4vdmFzdC9WQVNUUmVzcG9uc2UnKTtcbnZhciBWQVNUVHJhY2tlciA9IHJlcXVpcmUoJy4uL3Zhc3QvVkFTVFRyYWNrZXInKTtcbnZhciB2YXN0VXRpbCA9IHJlcXVpcmUoJy4uL3Zhc3QvdmFzdFV0aWwnKTtcblxudmFyIFZQQUlEQWRVbml0V3JhcHBlciA9IHJlcXVpcmUoJy4vVlBBSURBZFVuaXRXcmFwcGVyJyk7XG5cbnZhciBhc3luYyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2FzeW5jJyk7XG52YXIgZG9tID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZG9tJyk7XG52YXIgcGxheWVyVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy9wbGF5ZXJVdGlscycpO1xudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxudmFyIGxvZ2dlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2NvbnNvbGVMb2dnZXInKTtcblxuZnVuY3Rpb24gVlBBSURJbnRlZ3JhdG9yIChwbGF5ZXIsIHNldHRpbmdzKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBWUEFJREludGVncmF0b3IpKSB7XG4gICAgcmV0dXJuIG5ldyBWUEFJREludGVncmF0b3IocGxheWVyKTtcbiAgfVxuXG4gIHRoaXMuVklFV19NT0RFID0ge1xuICAgIE5PUk1BTDogJ25vcm1hbCcsXG4gICAgRlVMTFNDUkVFTjogJ2Z1bGxzY3JlZW4nLFxuICAgIFRIVU1CTkFJTDogJ3RodW1ibmFpbCdcbiAgfTtcbiAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gIHRoaXMuY29udGFpbmVyRWwgPSBjcmVhdGVWUEFJRENvbnRhaW5lckVsKHBsYXllcik7XG4gIHRoaXMub3B0aW9ucyA9IHtcbiAgICByZXNwb25zZVRpbWVvdXQ6IDUwMDAsXG4gICAgVlBBSURfVkVSU0lPTjogJzIuMCdcbiAgfTtcbiAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXG4gIHRoaXMuY29udGVudFNvdXJjZSA9IHBsYXllci50ZWNoXy5lbF8uc3JjO1xuICB0aGlzLm5lZWRzU2hvd1BsYXllciA9IGZhbHNlO1xuXG4gIHRoaXMuZXJyb3JIYXNCZWVuVHJhY2tlZCA9IGZhbHNlO1xuICB0aGlzLmFkRmluaXNoZWQgPSBmYWxzZTtcblxuICB0aGlzLnRpbWVVcGRhdGVUaW1lciA9IG51bGw7XG5cbiAgdGhpcy5hZGRNb3VzZU1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZE1vdXNlTW92ZUxpc3RlbmVyICgpIHtcbiAgICB2YXIgZnJhbWVzID0gdGhpcy5jb250YWluZXJFbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaWZyYW1lJyk7XG4gICAgaWYgKGZyYW1lcy5sZW5ndGgpIHtcbiAgICAgIGZyYW1lc1swXS5jb250ZW50V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMucmVtb3ZlTW91c2VNb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVNb3VzZU1vdmVMaXN0ZW5lciAoKSB7XG4gICAgdmFyIGZyYW1lcyA9IHRoaXMuY29udGFpbmVyRWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lmcmFtZScpO1xuICAgIGlmIChmcmFtZXMubGVuZ3RoKSB7XG4gICAgICBmcmFtZXNbMF0uY29udGVudFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgIH1cbiAgfTtcblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlICgpIHtcbiAgICBwbGF5ZXIudXNlckFjdGl2ZSh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVZQQUlEQ29udGFpbmVyRWwgKCkge1xuICAgIHZhciBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lckVsLmlkID0gJ0JDLVZQQUlELWNvbnRhaW5lcic7XG4gICAgZG9tLmFkZENsYXNzKGNvbnRhaW5lckVsLCAnVlBBSUQtY29udGFpbmVyJyk7XG4gICAgcGxheWVyLmVsKCkuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lckVsLCBwbGF5ZXIuY29udHJvbEJhci5lbCgpKTtcbiAgICByZXR1cm4gY29udGFpbmVyRWw7XG4gIH1cbn1cblxuVlBBSURJbnRlZ3JhdG9yLnByb3RvdHlwZS5wbGF5QWQgPSBmdW5jdGlvbiBwbGF5VlBhaWRBZCAodmFzdFJlc3BvbnNlLCBjYWxsYmFjaykge1xuICBpZiAoISh2YXN0UmVzcG9uc2UgaW5zdGFuY2VvZiBWQVNUUmVzcG9uc2UpKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBWQVNURXJyb3IoJ29uIFZBU1RJbnRlZ3JhdG9yLnBsYXlBZCwgbWlzc2luZyByZXF1aXJlZCBWQVNUUmVzcG9uc2UnKSk7XG4gIH1cblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgbG9nZ2VyLmRlYnVnKCc8VlBBSURJbnRlZ3JhdG9yLnBsYXlBZD4gbG9va2luZyBmb3Igc3VwcG9ydGVkIHRlY2guLi4nKTtcbiAgdmFyIHRlY2ggPSB0aGlzLl9maW5kU3VwcG9ydGVkVGVjaCh2YXN0UmVzcG9uc2UsIHRoaXMuc2V0dGluZ3MpO1xuXG4gIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgdXRpbGl0aWVzLm5vb3A7XG5cbiAgdGhpcy5fYWRVbml0ID0gbnVsbDtcblxuICBkb20uYWRkQ2xhc3MocGxheWVyLmVsKCksICd2anMtdnBhaWQtYWQnKTtcblxuICBwbGF5ZXIub24oJ3Zhc3QuYWRzQ2FuY2VsJywgdHJpZ2dlclZwYWlkQWRFbmQpO1xuICBwbGF5ZXIub25lKCd2cGFpZC5hZEVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBwbGF5ZXIub2ZmKCd2YXN0LmFkc0NhbmNlbCcsIHRyaWdnZXJWcGFpZEFkRW5kKTtcbiAgICByZW1vdmVBZFVuaXQoKTtcbiAgfSk7XG5cbiAgaWYgKHRlY2gpIHtcbiAgICBsb2dnZXIuaW5mbygnPFZQQUlESW50ZWdyYXRvci5wbGF5QWQ+IGZvdW5kIHRlY2g6ICcsIHRlY2gpO1xuXG4gICAgYXN5bmMud2F0ZXJmYWxsKFtcbiAgICAgIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIG5leHQobnVsbCwgdGVjaCwgdmFzdFJlc3BvbnNlKTtcbiAgICAgIH0sXG4gICAgICB0aGlzLl9sb2FkQWRVbml0LmJpbmQodGhpcyksXG4gICAgICB0aGlzLl9wbGF5QWRVbml0LmJpbmQodGhpcyksXG4gICAgICB0aGlzLl9maW5pc2hQbGF5aW5nLmJpbmQodGhpcylcblxuICAgIF0sIGFkQ29tcGxldGUpO1xuXG4gICAgdGhpcy5fYWRVbml0ID0ge1xuICAgICAgX3BhdXNlZDogdHJ1ZSxcbiAgICAgIHR5cGU6ICdWUEFJRCcsXG4gICAgICBwYXVzZUFkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBsYXllci50cmlnZ2VyKCd2cGFpZC5wYXVzZUFkJyk7XG4gICAgICAgIHBsYXllci5wYXVzZSh0cnVlKTsgICAvLyB3ZSBtYWtlIHN1cmUgdGhhdCB0aGUgdmlkZW8gY29udGVudCBnZXRzIHN0b3BwZWQuXG4gICAgICB9LFxuICAgICAgcmVzdW1lQWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQucmVzdW1lQWQnKTtcbiAgICAgIH0sXG4gICAgICBpc1BhdXNlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGF1c2VkO1xuICAgICAgfSxcbiAgICAgIGdldFNyYzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGVjaC5tZWRpYUZpbGU7XG4gICAgICB9XG4gICAgfTtcblxuICB9IGVsc2Uge1xuICAgIGxvZ2dlci5kZWJ1ZygnPFZQQUlESW50ZWdyYXRvci5wbGF5QWQ+IGNvdWxkIG5vdCBmaW5kIHN1aXRhYmxlIHRlY2gnKTtcbiAgICB2YXIgZXJyb3IgPSBuZXcgVkFTVEVycm9yKCdvbiBWUEFJREludGVncmF0b3IucGxheUFkLCBjb3VsZCBub3QgZmluZCBhIHN1cHBvcnRlZCBtZWRpYUZpbGUnLCA0MDMpO1xuICAgIGFkQ29tcGxldGUoZXJyb3IsIHRoaXMuX2FkVW5pdCwgdmFzdFJlc3BvbnNlKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9hZFVuaXQ7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiBhZENvbXBsZXRlIChlcnJvciwgYWRVbml0LCB2YXN0UmVzcG9uc2UpIHtcbiAgICB0aGF0LnJlbW92ZU1vdXNlTW92ZUxpc3RlbmVyKCk7XG4gICAgaWYgKGVycm9yICYmIHZhc3RSZXNwb25zZSkge1xuICAgICAgdGhhdC5fdHJhY2tFcnJvcih2YXN0UmVzcG9uc2UsIGVycm9yLmNvZGUpO1xuICAgIH1cbiAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuYWRFbmQnKTtcbiAgICBjYWxsYmFjayhlcnJvciwgdmFzdFJlc3BvbnNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJWcGFpZEFkRW5kICgpIHtcblx0ICAgIC8vIHBsYXllci50cmlnZ2VyKCdzdG9wQWQnKTtcbiAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuYWRFbmQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFkVW5pdCAoKSB7XG4gICAgaWYgKHRlY2gpIHtcbiAgICAgIGxvZ2dlci5sb2coJ1ZQQUlESW50ZWdyYXRvci0+Q2FsbGluZyB1bmxvYWRBZFVuaXQgKGltcGxpY2l0bHkgaW52b2tlcyBzdG9wQWQgYW5kIHVuc3Vic2NyaWJlcyBWUEFJRCBldmVudHMpJyk7XG4gICAgICB0ZWNoLnVubG9hZEFkVW5pdCgpO1xuICAgIH1cbiAgICBkb20ucmVtb3ZlQ2xhc3MocGxheWVyLmVsKCksICd2anMtdnBhaWQtYWQnKTtcbiAgfVxufTtcblxuVlBBSURJbnRlZ3JhdG9yLnByb3RvdHlwZS5fZmluZFN1cHBvcnRlZFRlY2ggPSBmdW5jdGlvbiAodmFzdFJlc3BvbnNlLCBzZXR0aW5ncykge1xuICBpZiAoISh2YXN0UmVzcG9uc2UgaW5zdGFuY2VvZiBWQVNUUmVzcG9uc2UpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgdnBhaWRNZWRpYUZpbGVzID0gdmFzdFJlc3BvbnNlLm1lZGlhRmlsZXMuZmlsdGVyKHZhc3RVdGlsLmlzVlBBSUQpO1xuICB2YXIgcHJlZmVycmVkVGVjaCA9IHNldHRpbmdzICYmIHNldHRpbmdzLnByZWZlcnJlZFRlY2g7XG4gIHZhciBza2lwcGVkU3VwcG9ydFRlY2hzID0gW107XG4gIHZhciBpLCBsZW4sIG1lZGlhRmlsZSwgVlBBSURUZWNoLCBpc1ByZWZlcmVkVGVjaDtcblxuICBmb3IgKGkgPSAwLCBsZW4gPSB2cGFpZE1lZGlhRmlsZXMubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICBtZWRpYUZpbGUgPSB2cGFpZE1lZGlhRmlsZXNbaV07XG4gICAgVlBBSURUZWNoID0gdmFzdFV0aWwuZmluZFN1cHBvcnRlZFZQQUlEVGVjaChtZWRpYUZpbGUudHlwZSk7XG5cbiAgICAvLyBubyBzdXBwb3J0ZWQgVlBBSUQgdGVjaCBmb3VuZCwgc2tpcCBtZWRpYWZpbGVcbiAgICBpZiAoIVZQQUlEVGVjaCkgeyBjb250aW51ZTsgfVxuXG4gICAgLy8gZG8gd2UgaGF2ZSBhIHByZWZlcmVkIHRlY2gsIGRvZXMgaXQgcGxheSB0aGlzIG1lZGlhIGZpbGUgP1xuICAgIGlzUHJlZmVyZWRUZWNoID0gcHJlZmVycmVkVGVjaCA/IChtZWRpYUZpbGUudHlwZSA9PT0gcHJlZmVycmVkVGVjaCB8fCAoTWltZVR5cGVzW3ByZWZlcnJlZFRlY2hdICYmIE1pbWVUeXBlc1twcmVmZXJyZWRUZWNoXS5pbmRleE9mKG1lZGlhRmlsZS50eXBlKSA+IC0xKSkgOiBmYWxzZTtcblxuICAgIC8vIG91ciBwcmVmZXJlZCB0ZWNoIGNhbiByZWFkIHRoaXMgbWVkaWFmaWxlLCBkZWZhdWx0aW5nIHRvIGl0LlxuICAgIGlmIChpc1ByZWZlcmVkVGVjaCkge1xuICAgICAgcmV0dXJuIG5ldyBWUEFJRFRlY2gobWVkaWFGaWxlLCBzZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgc2tpcHBlZFN1cHBvcnRUZWNocy5wdXNoKHsgbWVkaWFGaWxlOiBtZWRpYUZpbGUsIHRlY2g6IFZQQUlEVGVjaCB9KTtcbiAgfVxuXG4gIGlmIChza2lwcGVkU3VwcG9ydFRlY2hzLmxlbmd0aCkge1xuICAgIHZhciBmaXJzdFRlY2ggPSBza2lwcGVkU3VwcG9ydFRlY2hzWzBdO1xuICAgIHJldHVybiBuZXcgZmlyc3RUZWNoLnRlY2goZmlyc3RUZWNoLm1lZGlhRmlsZSwgc2V0dGluZ3MpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5WUEFJREludGVncmF0b3IucHJvdG90eXBlLl9jcmVhdGVWUEFJREFkVW5pdFdyYXBwZXIgPSBmdW5jdGlvbiAoYWRVbml0LCBzcmMsIHJlc3BvbnNlVGltZW91dCwgcGxheWVyKSB7XG5cdHJldHVybiBuZXcgVlBBSURBZFVuaXRXcmFwcGVyKGFkVW5pdCwge3NyYzogc3JjLCByZXNwb25zZVRpbWVvdXQ6IHJlc3BvbnNlVGltZW91dCwgcGxheWVyOiBwbGF5ZXJ9KTtcbn07XG5cblZQQUlESW50ZWdyYXRvci5wcm90b3R5cGUuX2xvYWRBZFVuaXQgPSBmdW5jdGlvbiAodGVjaCwgdmFzdFJlc3BvbnNlLCBuZXh0KSB7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyO1xuICB2YXIgdmpzVGVjaEVsID0gcGxheWVyLmVsKCkucXVlcnlTZWxlY3RvcignLnZqcy10ZWNoJyk7XG4gIC8vIHZhciByZXNwb25zZVRpbWVvdXQgPSB0aGlzLnNldHRpbmdzLnJlc3BvbnNlVGltZW91dCB8fCB0aGlzLm9wdGlvbnMucmVzcG9uc2VUaW1lb3V0O1xuICB2YXIgcmVzcG9uc2VUaW1lb3V0ID0gdGhpcy5zZXR0aW5ncy5hZENhbmNlbFRpbWVvdXQgfHwgdGhpcy5vcHRpb25zLnJlc3BvbnNlVGltZW91dDtcbiAgdGVjaC5sb2FkQWRVbml0KHRoaXMuY29udGFpbmVyRWwsIHZqc1RlY2hFbCwgZnVuY3Rpb24gKGVycm9yLCBhZFVuaXQpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBuZXh0KGVycm9yLCBhZFVuaXQsIHZhc3RSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBmcm1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0lGUkFNRScpO1xuICAgICAgaWYgKGZybXMgJiYgZnJtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZybXNbMF0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGxvZ2dlci5sb2coJyoqKioqKiB1c2VyIGFjdGl2aXR5Jyk7XG4gICAgICAgICAgICBwbGF5ZXIudXNlckFjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgIGlmICghZG9tLmhhc0NsYXNzKHBsYXllci5lbCgpLCAndmpzLWhhcy1zdGFydGVkJykpIHtcbiAgICAgICAgICAgICAgICBkb20uYWRkQ2xhc3MocGxheWVyLmVsKCksICd2anMtaGFzLXN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBwbGF5ZXIudHJpZ2dlcih7dHlwZTogJ3RyYWNlLm1lc3NhZ2UnLCBkYXRhOiB7bWVzc2FnZTogJ1BsYXlpbmcgJyArIHRlY2gubWVkaWFGaWxlLnNyYyArICcgKHR5cGUgPSAnICsgdGVjaC5tZWRpYUZpbGUudHlwZSArICcsIGFwaUZyYW1ld29yayA9ICcgKyB0ZWNoLm1lZGlhRmlsZS5hcGlGcmFtZXdvcmsgKyAnKSd9fSk7XG4gICAgICB2YXIgV3JhcHBlZEFkVW5pdCA9IHRoYXQuX2NyZWF0ZVZQQUlEQWRVbml0V3JhcHBlcihhZFVuaXQsIHRlY2gubWVkaWFGaWxlLnNyYywgcmVzcG9uc2VUaW1lb3V0LCBwbGF5ZXIpO1xuICAgICAgdmFyIHRlY2hDbGFzcyA9ICd2anMtJyArIHRlY2gubmFtZSArICctYWQnO1xuICAgICAgZG9tLmFkZENsYXNzKHBsYXllci5lbCgpLCB0ZWNoQ2xhc3MpO1xuICAgICAgcGxheWVyLm9uZSgndnBhaWQuYWRFbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbS5yZW1vdmVDbGFzcyhwbGF5ZXIuZWwoKSwgdGVjaENsYXNzKTtcbiAgICAgIH0pO1xuICAgICAgbmV4dChudWxsLCBXcmFwcGVkQWRVbml0LCB2YXN0UmVzcG9uc2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG5leHQoZSwgYWRVbml0LCB2YXN0UmVzcG9uc2UpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gd2UgdG8gaGF2ZSByZS1wb3N0IHRoZSBtZXNzYWdlIGFib3V0IGxvYWRlZCBjcmVhdGl2ZSB0byB0aGUgY3VycmVudCB3aW5kb3csXG4gIC8vIGJlY2F1c2UgVlBBSUQgY2xpZW50IGxpc3RlbiB0aGlzIG1lc3NhZ2Ugb24gY3VycmVudCB3aW5kb3cgKG5vdCBvbiB0aGUgcGFyZW50KS5cbiAgdmFyIG9uTG9hZGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICB3aW5kb3cucG9zdE1lc3NhZ2UoZS5kYXRhLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcbiAgfTtcbiAgd2luZG93LnBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25Mb2FkZWQpO1xufTtcblxuVlBBSURJbnRlZ3JhdG9yLnByb3RvdHlwZS5fcGxheUFkVW5pdCA9IGZ1bmN0aW9uIChhZFVuaXQsIHZhc3RSZXNwb25zZSwgY2FsbGJhY2spIHtcbiAgYXN5bmMud2F0ZXJmYWxsKFtcbiAgICBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgbmV4dChudWxsLCBhZFVuaXQsIHZhc3RSZXNwb25zZSk7XG4gICAgfSxcbiAgICB0aGlzLl9oYW5kc2hha2UuYmluZCh0aGlzKSxcbiAgICB0aGlzLl9zZXR1cEV2ZW50cy5iaW5kKHRoaXMpLFxuICAgIHRoaXMuX2luaXRBZC5iaW5kKHRoaXMpLFxuICAgIC8vIHRoaXMuX3NldHVwRXZlbnRzLmJpbmQodGhpcyksXG4gICAgdGhpcy5fYWRkU2tpcEJ1dHRvbi5iaW5kKHRoaXMpLFxuICAgIHRoaXMuX2xpbmtQbGF5ZXJDb250cm9scy5iaW5kKHRoaXMpLFxuICAgIHRoaXMuX3N0YXJ0QWQuYmluZCh0aGlzKVxuICBdLCBjYWxsYmFjayk7XG59O1xuXG5WUEFJREludGVncmF0b3IucHJvdG90eXBlLl9oYW5kc2hha2UgPSBmdW5jdGlvbiBoYW5kc2hha2UgKGFkVW5pdCwgdmFzdFJlc3BvbnNlLCBuZXh0KSB7XG4gIGFkVW5pdC5oYW5kc2hha2VWZXJzaW9uKHRoaXMub3B0aW9ucy5WUEFJRF9WRVJTSU9OLCBmdW5jdGlvbiAoZXJyb3IsIHZlcnNpb24pIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBuZXh0KGVycm9yLCBhZFVuaXQsIHZhc3RSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgaWYgKHZlcnNpb24gJiYgaXNTdXBwb3J0ZWRWZXJzaW9uKHZlcnNpb24pKSB7XG4gICAgICByZXR1cm4gbmV4dChudWxsLCBhZFVuaXQsIHZhc3RSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHQobmV3IFZBU1RFcnJvcignb24gVlBBSURJbnRlZ3JhdG9yLl9oYW5kc2hha2UsIHVuc3VwcG9ydGVkIHZlcnNpb24gXCInICsgdmVyc2lvbiArICdcIicpLCBhZFVuaXQsIHZhc3RSZXNwb25zZSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGlzU3VwcG9ydGVkVmVyc2lvbiAodmVyc2lvbikge1xuICAgIHZhciBtYWpvck51bSA9IG1ham9yKHZlcnNpb24pO1xuICAgIHJldHVybiBtYWpvck51bSA+PSAxICYmIG1ham9yTnVtIDw9IDI7XG4gIH1cblxuICBmdW5jdGlvbiBtYWpvciAodmVyc2lvbikge1xuICAgIHZhciBwYXJ0cyA9IHZlcnNpb24uc3BsaXQoJy4nKTtcbiAgICByZXR1cm4gcGFyc2VJbnQocGFydHNbMF0sIDEwKTtcbiAgfVxufTtcblxuVlBBSURJbnRlZ3JhdG9yLnByb3RvdHlwZS5faW5pdEFkID0gZnVuY3Rpb24gKGFkVW5pdCwgdmFzdFJlc3BvbnNlLCBuZXh0KSB7XG4gIHZhciB0ZWNoID0gdGhpcy5wbGF5ZXIuZWwoKS5xdWVyeVNlbGVjdG9yKCcudmpzLXRlY2gnKTtcbiAgdmFyIGRpbWVuc2lvbiA9IGRvbS5nZXREaW1lbnNpb24odGVjaCk7XG4gIGFkVW5pdC5pbml0QWQoZGltZW5zaW9uLndpZHRoLCBkaW1lbnNpb24uaGVpZ2h0LCB0aGlzLlZJRVdfTU9ERS5OT1JNQUwsIC0xLCB7QWRQYXJhbWV0ZXJzOiB2YXN0UmVzcG9uc2UuYWRQYXJhbWV0ZXJzIHx8ICcnfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgbmV4dChlcnJvciwgYWRVbml0LCB2YXN0UmVzcG9uc2UpO1xuICB9KTtcbn07XG5cblZQQUlESW50ZWdyYXRvci5wcm90b3R5cGUuX2NyZWF0ZVZBU1RUcmFja2VyID0gZnVuY3Rpb24gKGFkVW5pdFNyYywgdmFzdFJlc3BvbnNlKSB7XG4gIHJldHVybiBuZXcgVkFTVFRyYWNrZXIoYWRVbml0U3JjLCB2YXN0UmVzcG9uc2UpO1xufTtcblxuVlBBSURJbnRlZ3JhdG9yLnByb3RvdHlwZS5fc2V0dXBFdmVudHMgPSBmdW5jdGlvbiAoYWRVbml0LCB2YXN0UmVzcG9uc2UsIG5leHQpIHtcbiAgdmFyIGFkVW5pdFNyYyA9IGFkVW5pdC5vcHRpb25zLnNyYztcbiAgdmFyIHRyYWNrZXIgPSB0aGlzLl9jcmVhdGVWQVNUVHJhY2tlcihhZFVuaXRTcmMsIHZhc3RSZXNwb25zZSk7XG4gIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgdmFyIGNvbnRlbnRTb3VyY2UgPSB0aGlzLmNvbnRlbnRTb3VyY2U7XG4gIHZhciB0aGF0ID0gdGhpcztcblxuICB0aGlzLnRyYWNrZXIgPSB0cmFja2VyO1xuXG4gIHRoaXMuaW1wcmVzc2lvblRyaWdnZXJlZCA9IGZhbHNlO1xuXG4gIGFkVW5pdC5vbignQWRTa2lwcGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC5yZW1vdmVNb3VzZU1vdmVMaXN0ZW5lcigpO1xuXHQgIFx0cGxheWVyLnRyaWdnZXIoe3R5cGU6ICd0cmFjZS5ldmVudCcsIGRhdGE6IHtldmVudDogJ3ZwYWlkLkFkU2tpcHBlZCd9fSk7XG5cdCAgICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuXHQgICAgXHQgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFNraXBwZWQnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG5cdCAgICAgIH1cbiAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRTa2lwcGVkJyk7XG4gICAgdHJhY2tlci50cmFja1NraXAoKTtcbiAgICBwbGF5ZXJVdGlscy5zaG93QmlnUGxheUJ1dHRvbihwbGF5ZXIsIGZhbHNlKTtcblxuICAgIGFkVW5pdC5zdG9wQWQodXRpbGl0aWVzLm5vb3ApO1xuICAgIC8vIFZJRExBLTI2NzYgLSBmb3JjZSBwbGF5ZXIgdG8gY2xlYW4gcmVzb3VyY2VzXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcGxheWVyLnRyaWdnZXIoJ3Zhc3QuYWRzQ2FuY2VsJyk7XG4gICAgfSwgMzAwKTtcbiAgICAvLyBwbGF5ZXIudHJpZ2dlcignYWRTdG9wJyk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHRyaWdnZXJJbXByZXNzaW9uICgpIHtcblx0ICBpZiAoIXRoYXQuaW1wcmVzc2lvblRyaWdnZXJlZCkge1xuXHRcdCAgdGhhdC5pbXByZXNzaW9uVHJpZ2dlcmVkID0gdHJ1ZTtcblx0ICAgICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG5cdCAgICBcdCAgd2luZG93Lk1vYXRBcGlSZWZlcmVuY2UuZGlzcGF0Y2hFdmVudCh7dHlwZTogJ0FkSW1wcmVzc2lvbicsIGFkVm9sdW1lOiBwbGF5ZXIudm9sdW1lKCl9KTtcblx0ICAgICAgfVxuXHRcdCAgcGxheWVyLnRyaWdnZXIoe3R5cGU6ICd0cmFjZS5ldmVudCcsIGRhdGE6IHtldmVudDogJ3ZwYWlkLkFkSW1wcmVzc2lvbid9fSk7XG5cdFx0ICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRJbXByZXNzaW9uJyk7XG5cdFx0ICB0cmFja2VyLnRyYWNrSW1wcmVzc2lvbnMoKTtcblx0ICB9XG4gIH1cbiAgYWRVbml0Lm9uKCdBZEltcHJlc3Npb24nLCBmdW5jdGlvbiAoKSB7XG5cdCAgdHJpZ2dlckltcHJlc3Npb24oKTtcbiAgfSk7XG5cbiAgYWRVbml0Lm9uKCdBZFN0YXJ0ZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKGFkVW5pdC5hZFN0YXJ0ZWQpIHtcblx0XHQgIC8vIGlnbm9yZSBzZWNvbmQgQWRTdGFydGVkIGV2ZW50XG5cdFx0ICByZXR1cm47XG5cdCAgfVxuXG5cdCAgdGhhdC5hZGRNb3VzZU1vdmVMaXN0ZW5lcigpO1xuXG4gICAgaWYgKHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHlUcmFja2luZykge1xuICAgICAgd2luZG93Ll9tb2xTZXR0aW5ncy52aWV3YWJpbGl0eVRyYWNraW5nLmluaXQod2luZG93Ll9tb2xTZXR0aW5ncy52aWV3YWJpbGl0eS5jb250ZXh0SWQsIHBsYXllci5kdXJhdGlvbigpLCBwbGF5ZXIuZWxfLm9mZnNldFdpZHRoLCBwbGF5ZXIuZWxfLm9mZnNldEhlaWdodCk7XG4gICAgfVxuICAgIGFkVW5pdC5hZFN0YXJ0ZWQgPSB0cnVlO1xuICAgIGlmICghZG9tLmhhc0NsYXNzKHBsYXllci5lbCgpLCAndmpzLWhhcy1zdGFydGVkJykpIHtcbiAgICAgIGRvbS5hZGRDbGFzcyhwbGF5ZXIuZWwoKSwgJ3Zqcy1oYXMtc3RhcnRlZCcpO1xuICAgIH1cbiAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRTdGFydGVkJyk7XG4gICAgdHJhY2tlci50cmFja0NyZWF0aXZlVmlldygpO1xuICAgIGlmICghd2luZG93Ll9tb2xTZXR0aW5ncy5wbGF5c0luQnJlYWsgJiYgYWRVbml0LmdldEFkRHVyYXRpb24pIHtcbiAgICAgIGFkVW5pdC5nZXRBZER1cmF0aW9uKGZ1bmN0aW9uICh0aGF0LCBkdXIpIHtcbiAgICAgICAgaWYgKGR1ciA+IDApIHtcbiAgICAgICAgICBwbGF5ZXIuZHVyYXRpb24oZHVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICBcdHRyaWdnZXJJbXByZXNzaW9uKCk7XG4gICAgbm90aWZ5UGxheVRvUGxheWVyKCk7XG4gICAgcGxheWVyLm9uZSgnYWRTdG9wJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGFkVW5pdC5zdG9wQWQpIHtcbiAgICAgICAgYWRVbml0LnN0b3BBZCh1dGlsaXRpZXMubm9vcCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodXRpbGl0aWVzLmlzSURldmljZSgpKSB7XG4gICAgXHQvLyBWSURMQS0yODM2IChBZCBjbGljayB0aHJ1IGRvZXMgbm90IGxhbmRpbmcgY2xpY2sgdGhydSB1cmwpXG4gICAgXHQvLyBpUGhvbmUgYW5kIGlQYWRcbiAgICBcdHZhciBlbGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Zqcy1yZXNpemUtbWFuYWdlcicpO1xuICAgIFx0aWYgKGVsZW1zICYmIGVsZW1zLmxlbmd0aCA+IDApIHtcbiAgICBcdFx0dmFyIHBhcmVudCA9IGVsZW1zWzBdLnBhcmVudEVsZW1lbnQ7XG4gICAgXHRcdGlmIChwYXJlbnQpIHtcbiAgICBcdFx0XHRwYXJlbnQucmVtb3ZlQ2hpbGQoZWxlbXNbMF0pO1xuICAgIFx0XHR9XG4gICAgXHR9XG4gICAgfVxuXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZVRpbWVDb250cm9scyAoKSB7XG5cdCAgXHR2YXIgY29udmVydFRpbWVUb1N0ciA9IGZ1bmN0aW9uICh0aW1lKSB7XG5cdFx0XHR2YXIgc2VjcyA9IHBhcnNlSW50KHRpbWUgKyAwLjUpO1xuXHRcdFx0dmFyIG1pbnMgPSBwYXJzZUludChzZWNzIC8gNjApO1xuXHRcdFx0c2VjcyAtPSAobWlucyAqIDYwKTtcblx0XHRcdHZhciBzdHIgPSBtaW5zLnRvU3RyaW5nKCkgKyAnOicgKyAoc2VjcyA+IDkgPyAnJyAgOiAnMCcpICsgc2Vjcy50b1N0cmluZygpO1xuXHRcdFx0cmV0dXJuIHN0cjtcblx0XHR9O1xuXG5cdFx0dmFyIGJjVGltZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmNfdGltZV9kaXNwbGF5Jyk7XG5cdFx0aWYgKCFiY1RpbWVEaXNwbGF5KSB7XG5cdFx0XHRiY1RpbWVEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRwbGF5ZXIuY29udHJvbEJhci5nZXRDaGlsZCgnY3VycmVudFRpbWVEaXNwbGF5JykuZWxfLmFwcGVuZENoaWxkKGJjVGltZURpc3BsYXkpO1xuXHRcdFx0YmNUaW1lRGlzcGxheS5pZCA9ICdiY190aW1lX2Rpc3BsYXknO1xuXHRcdFx0YmNUaW1lRGlzcGxheS5jbGFzcyA9ICd2anMtY3VycmVudC10aW1lLWRpc3BsYXknO1xuXHRcdFx0YmNUaW1lRGlzcGxheVsnYXJpYS1saXZlJ10gPSAnb2ZmJztcblx0XHRcdGJjVGltZURpc3BsYXkuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPjwvc3Bhbj4wOjAwJzsgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHF1b3Rlc1xuICAgICAgc2hvd09yaWdpbmFsVGltZURpc3BsYXkocGxheWVyLCBmYWxzZSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuICAgICAgc2hvd09yaWdpbmFsVGltZURpc3BsYXkocGxheWVyLCBmYWxzZSk7XG5cdFx0XHRiY1RpbWVEaXNwbGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdH1cblx0XHRhZFVuaXQuZ2V0QWRSZW1haW5pbmdUaW1lKGZ1bmN0aW9uICh0aGF0LCB0aW1lKSB7XG5cdFx0XHRpZiAodGltZSA+PSAwKSB7XG5cdFx0XHRcdHZhciBjdXJUaW1lID0gcGxheWVyLmR1cmF0aW9uKCkgLSB0aW1lO1xuXHRcdFx0XHRpZiAoY3VyVGltZSA+PSAwKSB7XG5cdFx0XHRcdFx0YmNUaW1lRGlzcGxheS5jaGlsZE5vZGVzWzFdLm5vZGVWYWx1ZSA9IGNvbnZlcnRUaW1lVG9TdHIoY3VyVGltZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcbiAgfVxuXG4gIGFkVW5pdC5vbignQWRWaWRlb1N0YXJ0JywgZnVuY3Rpb24gKCkge1xuXHQgIHBsYXllci50cmlnZ2VyKHt0eXBlOiAndHJhY2UuZXZlbnQnLCBkYXRhOiB7ZXZlbnQ6ICdBZFZpZGVvU3RhcnQnfX0pO1xuICAgICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG4gICAgXHQgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFZpZGVvU3RhcnQnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgICB9XG5cbiAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRWaWRlb1N0YXJ0Jyk7XG4gICAgdHJhY2tlci50cmFja1N0YXJ0KCk7XG5cdGlmICghd2luZG93Ll9tb2xTZXR0aW5ncy5wbGF5c0luQnJlYWsgJiYgYWRVbml0LmdldEFkRHVyYXRpb24pIHtcblx0XHRhZFVuaXQuZ2V0QWREdXJhdGlvbihmdW5jdGlvbiAodGhhdCwgZHVyKSB7XG5cdFx0XHRpZiAoZHVyID4gMCkge1xuXHRcdFx0XHRwbGF5ZXIuZHVyYXRpb24oZHVyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuICAgIG5vdGlmeVBsYXlUb1BsYXllcigpO1xuICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuICAgIGlmICh1dGlsaXRpZXMuaXNNb2JpbGUoKSkge1xuICAgICAgICAvLyBWSURMQS0yMzM2IChzaW11bGF0ZSB1c2VyIGFjdGl2aXR5IHRvIG1ha2Ugc3VyZSBjb250cm9sIGJhciBpcyB2aXNpYmxlIG9uIG1vYmlsZSBkZXZpY2VzKVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICBcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcGxheWVyLnVzZXJBY3RpdmUodHJ1ZSk7XG4gICAgICAgIFx0fSwgaSAqIDEwMDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjb250ZW50U291cmNlID09PSBwbGF5ZXIudGVjaF8uZWxfLnNyYykge1xuICAgICAgcGxheWVyLnRyaWdnZXIoe3R5cGU6ICd0cmFjZS5tZXNzYWdlJywgZGF0YToge21lc3NhZ2U6ICdWUEFJRCBjcmVhdGl2ZSB1c2VzIGl0cyBvd24gdmlkZW8gdGFnJ319KTtcbiAgICAgIHRoYXQubmVlZHNTaG93UGxheWVyID0gdHJ1ZTtcbiAgICAgIGlmICghd2luZG93Ll9tb2xTZXR0aW5ncy5wbGF5c0luQnJlYWspIHtcbiAgICAgICAgdGhhdC50aW1lVXBkYXRlVGltZXIgPSBzZXRJbnRlcnZhbCh1cGRhdGVUaW1lQ29udHJvbHMsIDUwMCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcGxheWVyLmNvbnRyb2xCYXIuaGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgYWRVbml0Lm9uKCdBZFBsYXlpbmcnLCBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoYXQuYWRGaW5pc2hlZCkge1xuXHRcdCAgcmV0dXJuO1xuXHQgIH1cbiAgICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRQbGF5aW5nJywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuICAgICAgfVxuICAgIHBsYXllci50cmlnZ2VyKCd2cGFpZC5BZFBsYXlpbmcnKTtcbiAgICB0cmFja2VyLnRyYWNrUmVzdW1lKCk7XG4gICAgbm90aWZ5UGxheVRvUGxheWVyKCk7XG4gICAgcGxheWVyVXRpbHMuc2hvd0JpZ1BsYXlCdXR0b24ocGxheWVyLCBmYWxzZSk7XG4gIH0pO1xuXG4gIGFkVW5pdC5vbignQWRQYXVzZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoYXQuYWRGaW5pc2hlZCkge1xuXHRcdCAgcmV0dXJuO1xuXHQgIH1cbiAgICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRQYXVzZWQnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgICB9XG4gICAgcGxheWVyLnRyaWdnZXIoJ3ZwYWlkLkFkUGF1c2VkJyk7XG4gICAgdHJhY2tlci50cmFja1BhdXNlKCk7XG4gICAgbm90aWZ5UGF1c2VUb1BsYXllcigpO1xuXHQgIHZhciBpZnJhbWVCYWNrQnV0dG9uID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZnJhbWVCYWNrQnV0dG9uJyk7XG5cdCAgaWYgKGlmcmFtZUJhY2tCdXR0b24pIHtcblx0XHQgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuXHRcdCAgcmV0dXJuO1xuXHQgIH1cbiAgICBwbGF5ZXJVdGlscy5zaG93QmlnUGxheUJ1dHRvbihwbGF5ZXIsIHRydWUpO1xuICB9KTtcblxuICBmdW5jdGlvbiBub3RpZnlQbGF5VG9QbGF5ZXIgKCkge1xuICAgIGlmICh0aGF0Ll9hZFVuaXQgJiYgdGhhdC5fYWRVbml0LmlzUGF1c2VkKCkpIHtcbiAgICAgIHRoYXQuX2FkVW5pdC5fcGF1c2VkID0gZmFsc2U7XG4gICAgfVxuICAgIHBsYXllci50cmlnZ2VyKCdwbGF5Jyk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeVBhdXNlVG9QbGF5ZXIgKCkge1xuICAgIGlmICh0aGF0Ll9hZFVuaXQpIHtcbiAgICAgIHRoYXQuX2FkVW5pdC5fcGF1c2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgcGxheWVyLnRyaWdnZXIoJ3BhdXNlJyk7XG4gIH1cblxuICBhZFVuaXQub24oJ0FkVmlkZW9GaXJzdFF1YXJ0aWxlJywgZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGF0LmFkRmluaXNoZWQpIHtcblx0XHQgIHJldHVybjtcblx0ICB9XG5cdFx0cGxheWVyLnRyaWdnZXIoe3R5cGU6ICd0cmFjZS5ldmVudCcsIGRhdGE6IHtldmVudDogJ3ZwYWlkLkFkVmlkZW9GaXJzdFF1YXJ0aWxlJ319KTtcbiAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcbiAgICBcdHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFZpZGVvRmlyc3RRdWFydGlsZScsIGFkVm9sdW1lOiBwbGF5ZXIudm9sdW1lKCl9KTtcbiAgICB9XG4gICAgcGxheWVyLnRyaWdnZXIoJ3ZwYWlkLkFkVmlkZW9GaXJzdFF1YXJ0aWxlJyk7XG4gICAgdHJhY2tlci50cmFja0ZpcnN0UXVhcnRpbGUoKTtcbiAgfSk7XG5cbiAgYWRVbml0Lm9uKCdBZFZpZGVvTWlkcG9pbnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoYXQuYWRGaW5pc2hlZCkge1xuXHRcdCAgcmV0dXJuO1xuXHQgIH1cblx0XHRwbGF5ZXIudHJpZ2dlcih7dHlwZTogJ3RyYWNlLmV2ZW50JywgZGF0YToge2V2ZW50OiAndnBhaWQuQWRWaWRlb01pZHBvaW50J319KTtcbiAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcbiAgICBcdHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFZpZGVvTWlkcG9pbnQnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgfVxuICAgIHBsYXllci50cmlnZ2VyKCd2cGFpZC5BZFZpZGVvTWlkcG9pbnQnKTtcbiAgICB0cmFja2VyLnRyYWNrTWlkcG9pbnQoKTtcbiAgfSk7XG5cbiAgYWRVbml0Lm9uKCdBZFZpZGVvVGhpcmRRdWFydGlsZScsIGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhhdC5hZEZpbmlzaGVkKSB7XG5cdFx0ICByZXR1cm47XG5cdCAgfVxuXHRcdHBsYXllci50cmlnZ2VyKHt0eXBlOiAndHJhY2UuZXZlbnQnLCBkYXRhOiB7ZXZlbnQ6ICd2cGFpZC5BZFZpZGVvVGhpcmRRdWFydGlsZSd9fSk7XG4gICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG4gICAgXHR3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRWaWRlb1RoaXJkUXVhcnRpbGUnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgfVxuICAgIHBsYXllci50cmlnZ2VyKCd2cGFpZC5BZFZpZGVvVGhpcmRRdWFydGlsZScpO1xuICAgIHRyYWNrZXIudHJhY2tUaGlyZFF1YXJ0aWxlKCk7XG4gIH0pO1xuXG4gIGFkVW5pdC5vbignQWRWaWRlb0NvbXBsZXRlJywgZnVuY3Rpb24gKCkge1xuICAgIHRoYXQucmVtb3ZlTW91c2VNb3ZlTGlzdGVuZXIoKTtcblx0ICBpZiAodGhhdC5hZEZpbmlzaGVkKSB7XG5cdFx0ICByZXR1cm47XG5cdCAgfVxuXHRcdHBsYXllci50cmlnZ2VyKHt0eXBlOiAndHJhY2UuZXZlbnQnLCBkYXRhOiB7ZXZlbnQ6ICd2cGFpZC5BZFZpZGVvQ29tcGxldGUnfX0pO1xuICAgIHBsYXllci50cmlnZ2VyKCd2cGFpZC5BZFZpZGVvQ29tcGxldGUnKTtcbiAgICB0cmFja2VyLnRyYWNrQ29tcGxldGUoKTtcbiAgICBwbGF5ZXJVdGlscy5zaG93QmlnUGxheUJ1dHRvbihwbGF5ZXIsIGZhbHNlKTtcbiAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcbiAgXHQgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFZpZGVvQ29tcGxldGUnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgfVxuICAgIC8vIFZJRExBLTI0MDYgZm9yc2UgYWQgdG8gc3RvcFxuICAgIGlmIChhZFVuaXQuc3RvcEFkKSB7XG4gICAgICBhZFVuaXQuc3RvcEFkKHV0aWxpdGllcy5ub29wKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFkVW5pdC5vbignQWRDbGlja1RocnUnLCBmdW5jdGlvbiAoZGF0YSkge1xuXHQgIGlmICh0aGF0LmFkRmluaXNoZWQpIHtcblx0XHQgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGVuYWJsZUZ1bGxzY3JlZW5DbGlja0lGcmFtZSA9IGZhbHNlO1xuXHQgIHBsYXllci50cmlnZ2VyKHt0eXBlOiAndHJhY2UuZXZlbnQnLCBkYXRhOiB7ZXZlbnQ6ICd2cGFpZC5BZENsaWNrVGhydSd9fSk7XG4gICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG4gICAgICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRDbGlja1RocnUnLCBhZFZvbHVtZTogcGxheWVyLnZvbHVtZSgpfSk7XG4gICAgfVxuICAgIHBsYXllci50cmlnZ2VyKCd2cGFpZC5BZENsaWNrVGhydScpO1xuICAgIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgICB2YXIgcGxheWVySGFuZGxlcyA9IGRhdGEucGxheWVySGFuZGxlcztcbiAgICB2YXIgY2xpY2tUaHJ1VXJsID0gdXRpbGl0aWVzLmlzTm90RW1wdHlTdHJpbmcodXJsKSA/IHVybCA6IGdlbmVyYXRlQ2xpY2tUaHJvdWdoVVJMKHZhc3RSZXNwb25zZS5jbGlja1Rocm91Z2gpO1xuXG4gICAgaWYgKHBsYXllckhhbmRsZXMgJiYgd2luZG93Ll9tb2xTZXR0aW5ncy5kaXNhYmxlQ2xpY2tUaHJ1KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJhY2tlci50cmFja0NsaWNrKCk7XG4gICAgaWYgKHBsYXllckhhbmRsZXMgJiYgY2xpY2tUaHJ1VXJsKSB7XG4gICAgXHRpZiAocGxheWVyLmlzRnVsbHNjcmVlbigpICYmIGVuYWJsZUZ1bGxzY3JlZW5DbGlja0lGcmFtZSkge1xuICAgIFx0XHRhZGRDbGlja1Rocm91Z2hEaXZCbG9ja2VyKGNsaWNrVGhydVVybCk7XG4gICAgXHR9XG4gICAgXHRlbHNlIHtcbiAgICBcdFx0d2luZG93Lm9wZW4oY2xpY2tUaHJ1VXJsLCAnX2JsYW5rJyk7XG4gICAgXHR9XG4gICAgfVxuXG4gICAgLy8gVklETEEtMjI2OSAoQWQgZG9lcyBub3QgcGF1c2Ugd2hlbiBicm93c2luZyBvdXQgdG8gYSBjbGljayB1cmwgZnJvbSBhIHZwYWlkIGFkKVxuICAgIGFkVW5pdC5wYXVzZUFkKHV0aWxpdGllcy5ub29wKTtcblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQ2xpY2tUaHJvdWdoVVJMIChjbGlja1Rocm91Z2hNYWNybykge1xuICAgICAgdmFyIHZhcmlhYmxlcyA9IHtcbiAgICAgICAgQVNTRVRVUkk6IGFkVW5pdC5vcHRpb25zLnNyYyxcbiAgICAgICAgQ09OVEVOVFBMQVlIRUFEOiAwIC8vIEluIFZQQUlEIHRoZXJlIGlzIG5vIG1ldGhvZCB0byBrbm93IHRoZSBjdXJyZW50IHRpbWUgZnJvbSB0aGUgYWRVbml0XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gY2xpY2tUaHJvdWdoTWFjcm8gPyB2YXN0VXRpbC5wYXJzZVVSTE1hY3JvKGNsaWNrVGhyb3VnaE1hY3JvLCB2YXJpYWJsZXMpIDogbnVsbDtcbiAgICB9XG4gIH0pO1xuXG4gIGFkVW5pdC5vbignQWRVc2VyQWNjZXB0SW52aXRhdGlvbicsIGZ1bmN0aW9uICgpIHtcblx0XHRwbGF5ZXIudHJpZ2dlcih7dHlwZTogJ3RyYWNlLmV2ZW50JywgZGF0YToge2V2ZW50OiAndnBhaWQuQWRVc2VyQWNjZXB0SW52aXRhdGlvbid9fSk7XG4gICAgcGxheWVyLnRyaWdnZXIoJ3ZwYWlkLkFkVXNlckFjY2VwdEludml0YXRpb24nKTtcbiAgICB0cmFja2VyLnRyYWNrQWNjZXB0SW52aXRhdGlvbigpO1xuICAgIHRyYWNrZXIudHJhY2tBY2NlcHRJbnZpdGF0aW9uTGluZWFyKCk7XG4gIH0pO1xuXG4gIGFkVW5pdC5vbignQWRVc2VyQ2xvc2UnLCBmdW5jdGlvbiAoKSB7XG5cdFx0cGxheWVyLnRyaWdnZXIoe3R5cGU6ICd0cmFjZS5ldmVudCcsIGRhdGE6IHtldmVudDogJ3ZwYWlkLkFkVXNlckNsb3NlJ319KTtcblx0ICAgICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG5cdCAgICBcdCAgd2luZG93Lk1vYXRBcGlSZWZlcmVuY2UuZGlzcGF0Y2hFdmVudCh7dHlwZTogJ0FkVXNlckNsb3NlJywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuXHQgICAgICB9XG4gICAgcGxheWVyLnRyaWdnZXIoJ3ZwYWlkLkFkVXNlckNsb3NlJyk7XG4gICAgdHJhY2tlci50cmFja0Nsb3NlKCk7XG4gICAgdHJhY2tlci50cmFja0Nsb3NlTGluZWFyKCk7XG4gIH0pO1xuXG4gIGFkVW5pdC5vbignQWRVc2VyTWluaW1pemUnLCBmdW5jdGlvbiAoKSB7XG5cdFx0cGxheWVyLnRyaWdnZXIoe3R5cGU6ICd0cmFjZS5ldmVudCcsIGRhdGE6IHtldmVudDogJ3ZwYWlkLkFkVXNlck1pbmltaXplJ319KTtcbiAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRVc2VyTWluaW1pemUnKTtcbiAgICB0cmFja2VyLnRyYWNrQ29sbGFwc2UoKTtcbiAgfSk7XG5cbiAgYWRVbml0Lm9uKCdBZEVycm9yJywgZnVuY3Rpb24gKCkge1xuICAgIHRoYXQucmVtb3ZlTW91c2VNb3ZlTGlzdGVuZXIoKTtcblx0ICBpZiAodGhhdC5hZEZpbmlzaGVkKSB7XG5cdFx0ICByZXR1cm47XG5cdCAgfVxuXHQgIC8vIFZJRExBLTIzODkgc3VwcHJlc3MgZXJvciB0cmFja2luZyBhZnRlciBhZCBpbXByZXNzaW9uIGhhcyBiZWVuIHJlcG9ydGVkXG5cdCAgaWYgKCF0aGF0LmltcHJlc3Npb25UcmlnZ2VyZWQgJiYgIXRoYXQuZXJyb3JIYXNCZWVuVHJhY2tlZCkge1xuXHRcdCAgcGxheWVyLnRyaWdnZXIoe3R5cGU6ICd0cmFjZS5ldmVudCcsIGRhdGE6IHtldmVudDogJ3ZwYWlkLkFkRXJyb3InfX0pO1xuXHQgICAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcblx0ICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRFcnJvcicsIGFkVm9sdW1lOiBwbGF5ZXIudm9sdW1lKCl9KTtcblx0ICAgICAgfVxuXHQgICAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRFcnJvcicpO1xuXHQgICAgLy8gTk9URTogd2UgdHJhY2sgZXJyb3JzIGNvZGUgOTAxLCBhcyBub3RlZCBpbiBWQVNUIDMuMFxuXHQgICAgdHJhY2tlci50cmFja0Vycm9yV2l0aENvZGUoOTAxKTtcblx0ICAgIHRoYXQuZXJyb3JIYXNCZWVuVHJhY2tlZCA9IHRydWU7XG5cdCAgfVxuXHQgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuICB9KTtcblxuICBhZFVuaXQub24oJ0FkVm9sdW1lQ2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXHRcdHBsYXllci50cmlnZ2VyKHt0eXBlOiAndHJhY2UuZXZlbnQnLCBkYXRhOiB7ZXZlbnQ6ICd2cGFpZC5BZFZvbHVtZUNoYW5nZSd9fSk7XG4gICAgcGxheWVyLnRyaWdnZXIoJ3ZwYWlkLkFkVm9sdW1lQ2hhbmdlJyk7XG4gICAgdmFyIGxhc3RWb2x1bWUgPSBwbGF5ZXIudm9sdW1lKCk7XG4gICAgYWRVbml0LmdldEFkVm9sdW1lKGZ1bmN0aW9uIChlcnJvciwgY3VycmVudFZvbHVtZSkge1xuICAgICAgaWYgKGxhc3RWb2x1bWUgIT09IGN1cnJlbnRWb2x1bWUpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRWb2x1bWUgPT09IDAgJiYgbGFzdFZvbHVtZSA+IDApIHtcbiAgICAgICAgICB0cmFja2VyLnRyYWNrTXV0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRWb2x1bWUgPiAwICYmIGxhc3RWb2x1bWUgPT09IDApIHtcbiAgICAgICAgICB0cmFja2VyLnRyYWNrVW5tdXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5ZXIudm9sdW1lKGN1cnJlbnRWb2x1bWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBhZFVuaXQub24oJ0FkU2l6ZUNoYW5nZScsIGZ1bmN0aW9uICgpIHtcblx0ICBpZiAocGxheWVyLnZhc3QgJiYgcGxheWVyLnZhc3QubmVlZFN5bmNQbGF5KSB7XG5cdFx0ICBpZiAocGxheWVyLnBhdXNlZCgpICE9PSBwbGF5ZXIudGVjaF8uZWxfLnBhdXNlZCkge1xuICAgICAgICAvLyBhZCB1c2VzIG1haW4gY29udGVudCB0YWdcbiAgICAgICAgaWYgKGNvbnRlbnRTb3VyY2UgIT0gcGxheWVyLnRlY2hfLmVsXy5zcmMpIHtcbiAgICAgICAgICBpZiAocGxheWVyLnRlY2hfLmVsXy5wYXVzZWQpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFBhdXNlZCcsIGFkVm9sdW1lOiBwbGF5ZXIudm9sdW1lKCl9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vdGlmeVBhdXNlVG9QbGF5ZXIoKTtcbiAgICAgICAgICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lk1vYXRBcGlSZWZlcmVuY2UuZGlzcGF0Y2hFdmVudCh7dHlwZTogJ0FkUGxheWluZycsIGFkVm9sdW1lOiBwbGF5ZXIudm9sdW1lKCl9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vdGlmeVBsYXlUb1BsYXllcigpO1xuICAgICAgICAgICAgcGxheWVyVXRpbHMuc2hvd0JpZ1BsYXlCdXR0b24ocGxheWVyLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cdFx0ICB9XG5cdFx0ICBwbGF5ZXIudmFzdC5uZWVkU3luY1BsYXkgPSBmYWxzZTtcblx0ICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGFkZENsaWNrVGhyb3VnaERpdkJsb2NrZXIgKGNsaWNrVGhydVVybCkge1xuXHQgIHZhciBibG9ja2VyID0gY3JlYXRlQ2xpY2tUaHJvdWdoRGl2KHBsYXllciwgY2xpY2tUaHJ1VXJsKTtcblx0ICB2YXIgaUZyYW1lO1xuXHQgIHZhciBpRnJhbWVCYWNrQnV0dG9uO1xuXG5cdCAgcGxheWVyLmVsKCkuaW5zZXJ0QmVmb3JlKGJsb2NrZXIsIHBsYXllci5jb250cm9sQmFyLmVsKCkpO1xuXG5cdCAgcGxheWVyLm9uKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlRGlzcGxheVN0eWxlKTtcblxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUNsaWNrVGhyb3VnaERpdiAocGxheWVyLCB1cmwpIHtcblx0ICAgIHZhciBibG9ja2VyID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdCAgICBkb20uYWRkQ2xhc3MoYmxvY2tlciwgJ3Zhc3QtYmxvY2tlcicpO1xuXG5cdCAgICBpZiAod2luZG93Lk1vYXRBcGlSZWZlcmVuY2UpIHtcbiAgICBcdCAgd2luZG93Lk1vYXRBcGlSZWZlcmVuY2UuZGlzcGF0Y2hFdmVudCh7dHlwZTogJ0FkQ2xpY2tUaHJ1JywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuXHQgICAgfVxuXG5cdCAgICAvLyBjcmVhdGUgSUZyYW1lIHdpdGggYmFjayBidXR0b25cblx0ICAgIGlGcmFtZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcblx0ICAgIGRvbS5hZGRDbGFzcyhpRnJhbWUsICd2YXN0LWJsb2NrZXInKTtcblx0ICAgIGlGcmFtZS5zcmMgPSB1cmw7XG5cdCAgICBibG9ja2VyLmFwcGVuZENoaWxkKGlGcmFtZSk7XG5cblx0ICAgIGlGcmFtZUJhY2tCdXR0b24gPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBkb20uYWRkQ2xhc3MoaUZyYW1lQmFja0J1dHRvbiwgJ3Zhc3QtYmFjay1idXR0b24nKTtcblx0ICAgIGRvbS5hZGRDbGFzcyhpRnJhbWVCYWNrQnV0dG9uLCAnZW5hYmxlZCcpO1xuXHQgICAgaUZyYW1lQmFja0J1dHRvbi5pbm5lckhUTUwgPSAnQmFjayc7XG5cdCAgICBpRnJhbWVCYWNrQnV0dG9uLmlkID0gJ2lmcmFtZUJhY2tCdXR0b24nO1xuXHQgICAgYmxvY2tlci5hcHBlbmRDaGlsZChpRnJhbWVCYWNrQnV0dG9uKTtcblx0ICAgIGlGcmFtZUJhY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdCAgLy8gc2hvdyBjb250cm9sc1xuXHRcdCAgdmFyIHNraXBCdXR0b24gPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkU2tpcEJ1dHRvbicpO1xuXHRcdCAgaWYgKHNraXBCdXR0b24pIHtcblx0XHRcdCAgc2tpcEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHQgIH1cblx0XHQgIHBsYXllci5jb250cm9scyh0cnVlKTtcblxuXHRcdCAgcGxheWVyLmVsKCkucmVtb3ZlQ2hpbGQoYmxvY2tlcik7XG5cdFx0ICByZXN1bWVBZFVuaXQoKTtcblxuXHRcdCAgaWYgKHdpbmRvdy5FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0ICB9XG5cdCAgICB9KTtcblxuXHQgICAgLy8gaGlkZSBjb250cm9sc1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0ICBwbGF5ZXJVdGlscy5zaG93QmlnUGxheUJ1dHRvbihwbGF5ZXIsIGZhbHNlKTtcblx0ICAgIH0sIDEpO1xuXHQgICAgdmFyIHNraXBCdXR0b24gPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkU2tpcEJ1dHRvbicpO1xuXHQgICAgaWYgKHNraXBCdXR0b24pIHtcblx0XHQgICAgc2tpcEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgICAgfVxuXHQgICAgcGxheWVyLmNvbnRyb2xzKGZhbHNlKTtcblxuXHQgICAgcmV0dXJuIGJsb2NrZXI7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheVN0eWxlICgpIHtcblx0XHQgIGlmICghcGxheWVyLmlzRnVsbHNjcmVlbigpKSB7XG5cdFx0XHQgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgdHJ1ZSk7XG5cdFx0XHQgIHZhciBza2lwQnV0dG9uID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZFNraXBCdXR0b24nKTtcblx0XHRcdCAgaWYgKHNraXBCdXR0b24pIHtcblx0XHRcdFx0ICBza2lwQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHQgIH1cblx0XHRcdCAgcGxheWVyLmNvbnRyb2xzKHRydWUpO1xuXHRcdFx0ICBwbGF5ZXIuZWwoKS5yZW1vdmVDaGlsZChibG9ja2VyKTtcblx0XHRcdCAgcmVzdW1lQWRVbml0KCk7XG5cdFx0ICB9XG5cdCAgfVxuICB9XG5cbiAgdmFyIHVwZGF0ZVZpZXdTaXplID0gcmVzaXplQWQuYmluZCh0aGlzLCBwbGF5ZXIsIGFkVW5pdCwgdGhpcy5WSUVXX01PREUpO1xuICB2YXIgdXBkYXRlVmlld1NpemVUaHJvdHRsZWQgPSB1dGlsaXRpZXMudGhyb3R0bGUodXBkYXRlVmlld1NpemUsIDEwMCk7XG4gIHZhciBhdXRvUmVzaXplID0gdGhpcy5zZXR0aW5ncy5hdXRvUmVzaXplO1xuXG4gIGlmIChhdXRvUmVzaXplKSB7XG4gICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAncmVzaXplJywgdXBkYXRlVmlld1NpemVUaHJvdHRsZWQpO1xuICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgdXBkYXRlVmlld1NpemVUaHJvdHRsZWQpO1xuICB9XG5cbiAgcGxheWVyLm9uKCd2YXN0LnJlc2l6ZScsIHVwZGF0ZVZpZXdTaXplKTtcbiAgcGxheWVyLm9uKCd2cGFpZC5wYXVzZUFkJywgcGF1c2VBZFVuaXQpO1xuICBwbGF5ZXIub24oJ3ZwYWlkLnJlc3VtZUFkJywgcmVzdW1lQWRVbml0KTtcbiAgcGxheWVyLm9uKCdzdG9wQWQnLCBzdG9wQWRVbml0KTtcblxuICBwbGF5ZXIub25lKCd2cGFpZC5hZEVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBwbGF5ZXIub2ZmKCd2YXN0LnJlc2l6ZScsIHVwZGF0ZVZpZXdTaXplKTtcbiAgICBwbGF5ZXIub2ZmKCd2cGFpZC5wYXVzZUFkJywgcGF1c2VBZFVuaXQpO1xuICAgIHBsYXllci5vZmYoJ3ZwYWlkLnJlc3VtZUFkJywgcmVzdW1lQWRVbml0KTtcbiAgICBwbGF5ZXIub2ZmKCdzdG9wQWQnLCBzdG9wQWRVbml0KTtcblxuICAgIGlmIChhdXRvUmVzaXplKSB7XG4gICAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csICdyZXNpemUnLCB1cGRhdGVWaWV3U2l6ZVRocm90dGxlZCk7XG4gICAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csICdvcmllbnRhdGlvbmNoYW5nZScsIHVwZGF0ZVZpZXdTaXplVGhyb3R0bGVkKTtcbiAgICB9XG4gIH0pO1xuXG4gIG5leHQobnVsbCwgYWRVbml0LCB2YXN0UmVzcG9uc2UpO1xuXG4gIC8vICoqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cbiAgZnVuY3Rpb24gcGF1c2VBZFVuaXQgKCkge1xuICAgIGFkVW5pdC5wYXVzZUFkKHV0aWxpdGllcy5ub29wKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc3VtZUFkVW5pdCAoKSB7XG4gICAgYWRVbml0LnJlc3VtZUFkKHV0aWxpdGllcy5ub29wKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3BBZFVuaXQgKCkge1xuICAgIGlmIChhZFVuaXQuc3RvcEFkKSB7XG4gICAgICBhZFVuaXQuc3RvcEFkKHV0aWxpdGllcy5ub29wKTtcbiAgICB9XG4gIH1cbn07XG5cblZQQUlESW50ZWdyYXRvci5wcm90b3R5cGUuX2FkZFNraXBCdXR0b24gPSBmdW5jdGlvbiAoYWRVbml0LCB2YXN0UmVzcG9uc2UsIG5leHQpIHtcbiAgdmFyIHNraXBCdXR0b247XG4gIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgdmFyIHRyYWNrZXIgPSB0aGlzLnRyYWNrZXI7XG5cbiAgLy8gVklETEEtMjA4NCAocHVibGlzaGVyLXNwZWNpZmllZCBTS0lQIGJlaGF2aW9yIGZvciBWUEFJRCBjcmVhdGl2ZXMpXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIHNraXBPZmZzZXRJblNlYztcbiAgdmFyIGR1cmF0aW9uO1xuICB2YXIgcmVtYWluaW5nVGltZTtcbiAgdmFyIHByb2dyZXNzSW50ZXJ2YWw7XG4gIGlmICghd2luZG93Ll9tb2xTZXR0aW5ncy5kaXNhYmxlU2tpcHBhYmlsaXR5KSB7XG5cdCAgaWYgKHZhc3RSZXNwb25zZS5za2lwb2Zmc2V0ICYmIHV0aWxpdGllcy5pc051bWJlcih2YXN0UmVzcG9uc2Uuc2tpcG9mZnNldCkpIHtcblx0XHQgIHNraXBPZmZzZXRJblNlYyA9IHZhc3RSZXNwb25zZS5za2lwb2Zmc2V0IC8gMTAwMDtcblx0XHQgIHB1YkFkZFNraXBCdXR0b25Ub1BsYXllcihwbGF5ZXIsIHNraXBPZmZzZXRJblNlYyk7XG5cdCAgfVxuXHQgIGVsc2Uge1xuXHRcdCAgLy8gY2hlY2sgaWYgcHVibGlzaGVyIGhhZCBleHBsaWNpdGx5IGRpc2FibGUgc2tpcHBhYmlsaXR5XG5cdFx0ICB2YXIgZGlzYWJsZVNraXBwYWJpbGl0eUJ5UHVibGlzaGVyID0gZmFsc2U7XG5cdFx0ICBpZiAod2luZG93Ll9tb2xTZXR0aW5ncyAmJiB3aW5kb3cuX21vbFNldHRpbmdzLnNraXBwYWJsZSkge1xuXHRcdFx0ICBpZiAod2luZG93Ll9tb2xTZXR0aW5ncy5za2lwcGFibGUuZW5hYmxlZCA9PT0gZmFsc2UpIHtcblx0XHRcdFx0ICBkaXNhYmxlU2tpcHBhYmlsaXR5QnlQdWJsaXNoZXIgPSB0cnVlO1xuXHRcdFx0ICB9XG5cdFx0XHQgIGlmICh2YXN0UmVzcG9uc2UuZHVyYXRpb24gJiYgd2luZG93Ll9tb2xTZXR0aW5ncy5za2lwcGFibGUudmlkZW9UaHJlc2hvbGQgJiYgdmFzdFJlc3BvbnNlLmR1cmF0aW9uIDwgd2luZG93Ll9tb2xTZXR0aW5ncy5za2lwcGFibGUudmlkZW9UaHJlc2hvbGQpIHtcblx0XHRcdFx0ICBkaXNhYmxlU2tpcHBhYmlsaXR5QnlQdWJsaXNoZXIgPSB0cnVlO1xuXHRcdFx0ICB9XG5cdFx0ICB9XG5cdFx0ICBpZiAoIWRpc2FibGVTa2lwcGFiaWxpdHlCeVB1Ymxpc2hlcikge1xuXHRcdFx0ICBhZFVuaXQub24oJ0FkU2tpcHBhYmxlU3RhdGVDaGFuZ2UnLCB1cGRhdGVTa2lwQnV0dG9uU3RhdGUpO1xuXHRcdFx0ICBwbGF5ZXJVdGlscy5vbmNlKHBsYXllciwgWyd2YXN0LmFkRW5kJywgJ3Zhc3QuYWRzQ2FuY2VsJ10sIHJlbW92ZVNraXBCdXR0b24pO1xuXHRcdCAgfVxuXHQgIH1cbiAgfVxuXG4gIG5leHQobnVsbCwgYWRVbml0LCB2YXN0UmVzcG9uc2UpO1xuXG4gIC8vICoqKiogTG9jYWwgRnVuY3Rpb24gKioqKiAvL1xuICBmdW5jdGlvbiB1cGRhdGVTa2lwQnV0dG9uU3RhdGUgKCkge1xuICAgIHBsYXllci50cmlnZ2VyKCd2cGFpZC5BZFNraXBwYWJsZVN0YXRlQ2hhbmdlJyk7XG4gICAgYWRVbml0LmdldEFkU2tpcHBhYmxlU3RhdGUoZnVuY3Rpb24gKGVycm9yLCBpc1NraXBwYWJsZSkge1xuICAgICAgaWYgKGlzU2tpcHBhYmxlKSB7XG4gICAgICAgIGlmICghc2tpcEJ1dHRvbikge1xuICAgICAgICAgIGFkZFNraXBCdXR0b24ocGxheWVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVtb3ZlU2tpcEJ1dHRvbihwbGF5ZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkU2tpcEJ1dHRvbiAocGxheWVyKSB7XG4gICAgc2tpcEJ1dHRvbiA9IGNyZWF0ZVNraXBCdXR0b24ocGxheWVyKTtcbiAgICBwbGF5ZXIuZWwoKS5hcHBlbmRDaGlsZChza2lwQnV0dG9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVNraXBCdXR0b24gKCkge1xuICAgIGRvbS5yZW1vdmUoc2tpcEJ1dHRvbik7XG4gICAgc2tpcEJ1dHRvbiA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVTa2lwQnV0dG9uICgpIHtcbiAgICB2YXIgc2tpcEJ1dHRvbiA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkb20uYWRkQ2xhc3Moc2tpcEJ1dHRvbiwgJ3Zhc3Qtc2tpcC1idXR0b24nKTtcbiAgICBkb20uYWRkQ2xhc3Moc2tpcEJ1dHRvbiwgJ2VuYWJsZWQnKTtcbiAgICAvLyBza2lwQnV0dG9uLmlubmVySFRNTCA9ICdTa2lwIGFkJztcbiAgICBza2lwQnV0dG9uLmlubmVySFRNTCA9IHdpbmRvdy5fbW9sU2V0dGluZ3Muc2tpcEJ1dHRvblRleHQ7XG4gICAgc2tpcEJ1dHRvbi5pZCA9ICdhZFNraXBCdXR0b24nO1xuXG4gICAgc2tpcEJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhhdC5yZW1vdmVNb3VzZU1vdmVMaXN0ZW5lcigpO1xuICAgICAgICBhZFVuaXQuZ2V0QWRTa2lwcGFibGVTdGF0ZShmdW5jdGlvbiAoZXJyb3IsIGlzU2tpcHBhYmxlKSB7XG4gICAgICAgICAgICBpZiAoaXNTa2lwcGFibGUpIHtcbiAgICAgICAgICAgICAgICBhZFVuaXQuc2tpcEFkKHV0aWxpdGllcy5ub29wKTsgIC8vIFdlIHNraXAgdGhlIGFkVW5pdFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFx0dHJhY2tlci50cmFja1NraXAoKTtcbiAgICAgICAgICAgICAgICBhZFVuaXQuc3RvcEFkKHV0aWxpdGllcy5ub29wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIC8vIGFkVW5pdC5za2lwQWQodXRpbGl0aWVzLm5vb3ApOy8vV2Ugc2tpcCB0aGUgYWRVbml0XG5cbiAgICAgIC8vIFdlIHByZXZlbnQgZXZlbnQgcHJvcGFnYXRpb24gdG8gYXZvaWQgcHJvYmxlbXMgd2l0aCB0aGUgY2xpY2tUaHJvdWdoIGFuZCBzbyBvblxuICAgICAgaWYgKHdpbmRvdy5FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHNraXBCdXR0b247XG4gIH1cblxuXHQvLyBWSURMQS0yMDg0IChwdWJsaXNoZXItc3BlY2lmaWVkIFNLSVAgYmVoYXZpb3IgZm9yIFZQQUlEIGNyZWF0aXZlcylcblx0Ly8gRU4gLSBzdXBwb3J0IHB1Ymxpc2hlciBTS0lQIHNldHRpbmdzXG5cdC8vICoqKiogTG9jYWwgRnVuY3Rpb24gKioqKiAvL1xuXHRmdW5jdGlvbiBwdWJBZGRTa2lwQnV0dG9uVG9QbGF5ZXIgKHBsYXllciwgc2tpcE9mZnNldCkge1xuXHQgIHZhciBza2lwQnV0dG9uID0gcHViQ3JlYXRlU2tpcEJ1dHRvbihwbGF5ZXIpO1xuXHQgIHZhciB1cGRhdGVTa2lwQnV0dG9uID0gcHViVXBkYXRlU2tpcEJ1dHRvblN0YXRlLmJpbmQodGhhdCwgc2tpcEJ1dHRvbiwgc2tpcE9mZnNldCk7XG5cblx0ICBwbGF5ZXIuZWwoKS5hcHBlbmRDaGlsZChza2lwQnV0dG9uKTtcblx0ICAvLyBwbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB1cGRhdGVTa2lwQnV0dG9uKTtcblx0ICBwcm9ncmVzc0ludGVydmFsID0gc2V0SW50ZXJ2YWwodXBkYXRlU2tpcEJ1dHRvbiwgNTAwKTtcblxuXHQgIHBsYXllclV0aWxzLm9uY2UocGxheWVyLCBbJ3Zhc3QuYWRFbmQnLCAndmFzdC5hZHNDYW5jZWwnXSwgcHViUmVtb3ZlU2tpcEJ1dHRvbik7XG5cblx0ICBmdW5jdGlvbiByZW1vdmVTa2lwQnV0dG9uICgpIHtcblx0ICAgIC8vIHBsYXllci5vZmYoJ3RpbWV1cGRhdGUnLCB1cGRhdGVTa2lwQnV0dG9uKTtcblx0ICAgIGRvbS5yZW1vdmUoc2tpcEJ1dHRvbik7XG5cdCAgICBza2lwQnV0dG9uID0gbnVsbDtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBwdWJSZW1vdmVTa2lwQnV0dG9uICgpIHtcblx0XHQgIGlmIChwcm9ncmVzc0ludGVydmFsKSB7XG5cdFx0XHQgIGNsZWFySW50ZXJ2YWwocHJvZ3Jlc3NJbnRlcnZhbCk7XG5cdFx0XHQgIHByb2dyZXNzSW50ZXJ2YWwgPSBudWxsO1xuXHRcdCAgfVxuXHRcdCAgcmVtb3ZlU2tpcEJ1dHRvbigpO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHB1YkNyZWF0ZVNraXBCdXR0b24gKHBsYXllcikge1xuXHQgIHZhciBza2lwQnV0dG9uID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIGRvbS5hZGRDbGFzcyhza2lwQnV0dG9uLCAndmFzdC1za2lwLWJ1dHRvbicpO1xuXHQgIHNraXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ICBza2lwQnV0dG9uLmlkID0gJ2FkU2tpcEJ1dHRvbic7XG5cblx0ICBza2lwQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgaWYgKGRvbS5oYXNDbGFzcyhza2lwQnV0dG9uLCAnZW5hYmxlZCcpKSB7XG5cdCAgICAgICAgdGhhdC5yZW1vdmVNb3VzZU1vdmVMaXN0ZW5lcigpO1xuXHQgICAgICAgIGFkVW5pdC5nZXRBZFNraXBwYWJsZVN0YXRlKGZ1bmN0aW9uIChlcnJvciwgaXNTa2lwcGFibGUpIHtcbiAgICAgICAgICAgICAgICBhZFVuaXQuc2tpcEFkKHV0aWxpdGllcy5ub29wKTsgIC8vIFdlIHNraXAgdGhlIGFkVW5pdFxuXHQgICAgICAgICAgICBpZiAoIWlzU2tpcHBhYmxlKSB7XG5cdCAgICAgICAgICAgIFx0dHJhY2tlci50cmFja1NraXAoKTtcblx0ICAgICAgICAgICAgICAgIGFkVW5pdC5zdG9wQWQodXRpbGl0aWVzLm5vb3ApO1xuXHQgICAgICAgICAgICBcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgICAgICBwbGF5ZXIudHJpZ2dlcigndmFzdC5hZHNDYW5jZWwnKTtcblx0ICAgICAgICAgICAgXHR9LCAxKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgLy8gYWRVbml0LnNraXBBZCh1dGlsaXRpZXMubm9vcCk7Ly9XZSBza2lwIHRoZSBhZFVuaXRcblx0ICAgIH1cblx0ICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuXG5cdCAgICAvLyBXZSBwcmV2ZW50IGV2ZW50IHByb3BhZ2F0aW9uIHRvIGF2b2lkIHByb2JsZW1zIHdpdGggdGhlIGNsaWNrVGhyb3VnaCBhbmQgc28gb25cblx0ICAgIGlmICh3aW5kb3cuRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfTtcblxuXHQgIHJldHVybiBza2lwQnV0dG9uO1xuXHR9XG5cblx0ZnVuY3Rpb24gcHViVXBkYXRlU2tpcEJ1dHRvblN0YXRlIChza2lwQnV0dG9uLCBza2lwT2Zmc2V0KSB7XG5cdFx0YWRVbml0LmdldEFkRHVyYXRpb24oZnVuY3Rpb24gKHRoYXQsIGR1cikge1xuXHRcdFx0aWYgKGR1ciA+IDApIHtcblx0XHRcdFx0ZHVyYXRpb24gPSBkdXI7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0YWRVbml0LmdldEFkUmVtYWluaW5nVGltZShmdW5jdGlvbiAodGhhdCwgdGltZSkge1xuICAgICAgcmVtYWluaW5nVGltZSA9IHRpbWU7XG4gICAgICAvLyBmb3IgVlBBSUQgMS4wIHVzZSByZW1haW5pbmcgdGltZSBmb3IgZHVyYXRpb24gY2FsY3VsYXRpb25cbiAgICAgIGlmICghZHVyYXRpb24gJiYgcmVtYWluaW5nVGltZSA+IDApIHtcbiAgICAgICAgZHVyYXRpb24gPSByZW1haW5pbmdUaW1lO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIHJldHVybiBpZiBkdXJhdGlvbiBvci9hbmQgcmVtYWluaW5nIHRpbWUgaXMgbm90IGltcGxlbWVudGVkIG9yIHVua25vd25cblx0XHRpZiAoIWR1cmF0aW9uIHx8ICFyZW1haW5pbmdUaW1lIHx8IGR1cmF0aW9uIDwgMCB8fCByZW1haW5pbmdUaW1lIDwgMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgdGltZUxlZnQgPSBNYXRoLmNlaWwoc2tpcE9mZnNldCAtIChkdXJhdGlvbiAtIHJlbWFpbmluZ1RpbWUpKTtcbiAgICAvLyBpZiBza2lwIGJ1dHRvbiBlbmFibGVkIG5ldmVyIHNob3cgYmVmb3JlLWJ1dHRvbiBza2lwIHRleHRcblx0ICBpZiAodGltZUxlZnQgPiAwICYmICFkb20uaGFzQ2xhc3Moc2tpcEJ1dHRvbiwgJ2VuYWJsZWQnKSkge1xuXHQgICAgICBza2lwQnV0dG9uLmlubmVySFRNTCA9ICc8cCBjbGFzcz1cInZhc3Qtc2tpcC1idXR0b24tdGV4dFwiPicgKyB3aW5kb3cuX21vbFNldHRpbmdzLnNraXBUZXh0LnJlcGxhY2UoJyUlVElNRSUlJywgdXRpbGl0aWVzLnRvRml4ZWREaWdpdHModGltZUxlZnQsIDIpKSArICc8L3A+JzsgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHF1b3Rlc1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoIWRvbS5oYXNDbGFzcyhza2lwQnV0dG9uLCAnZW5hYmxlZCcpKSB7XG5cdCAgICAgIGRvbS5hZGRDbGFzcyhza2lwQnV0dG9uLCAnZW5hYmxlZCcpO1xuXHQgICAgICBza2lwQnV0dG9uLmlubmVySFRNTCA9IHdpbmRvdy5fbW9sU2V0dGluZ3Muc2tpcEJ1dHRvblRleHQ7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBpZnJhbWVCYWNrQnV0dG9uID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZnJhbWVCYWNrQnV0dG9uJyk7XG5cdCAgaWYgKCFpZnJhbWVCYWNrQnV0dG9uKSB7XG5cdFx0ICBpZiAocGxheWVyLmlzRnVsbHNjcmVlbigpICYmIHV0aWxpdGllcy5pc0FuZHJvaWQoKSkge1xuXHRcdFx0ICBza2lwQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHQgIHJldHVybjtcblx0XHQgIH1cblx0XHQgIHNraXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdCAgfVxuXHR9XG59O1xuXG5WUEFJREludGVncmF0b3IucHJvdG90eXBlLl9saW5rUGxheWVyQ29udHJvbHMgPSBmdW5jdGlvbiAoYWRVbml0LCB2YXN0UmVzcG9uc2UsIG5leHQpIHtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBsaW5rVm9sdW1lQ29udHJvbCh0aGlzLnBsYXllciwgYWRVbml0KTtcbiAgbGlua0Z1bGxTY3JlZW5Db250cm9sKHRoaXMucGxheWVyLCBhZFVuaXQsIHRoaXMuVklFV19NT0RFKTtcblxuICBuZXh0KG51bGwsIGFkVW5pdCwgdmFzdFJlc3BvbnNlKTtcblxuICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gIGZ1bmN0aW9uIGxpbmtWb2x1bWVDb250cm9sIChwbGF5ZXIsIGFkVW5pdCkge1xuICAgIHBsYXllci5vbigndm9sdW1lY2hhbmdlJywgdXBkYXRlQWRVbml0Vm9sdW1lKTtcbiAgICBhZFVuaXQub24oJ0FkVm9sdW1lQ2hhbmdlJywgdXBkYXRlUGxheWVyVm9sdW1lKTtcblxuICAgIHBsYXllci5vbmUoJ3ZwYWlkLmFkRW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgcGxheWVyLm9mZigndm9sdW1lY2hhbmdlJywgdXBkYXRlQWRVbml0Vm9sdW1lKTtcbiAgICB9KTtcblxuXG4gICAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZUFkVW5pdFZvbHVtZSAoKSB7XG4gICAgICB2YXIgdm9sID0gcGxheWVyLm11dGVkKCkgPyAwIDogcGxheWVyLnZvbHVtZSgpO1xuICAgICAgYWRVbml0LnNldEFkVm9sdW1lKHZvbCwgbG9nRXJyb3IpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVBsYXllclZvbHVtZSAoKSB7XG5cdCAgaWYgKHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlKSB7XG5cdFx0ICBcdHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdBZFZvbHVtZUNoYW5nZScsIGFkVm9sdW1lOiBwbGF5ZXIudm9sdW1lKCl9KTtcblx0ICB9XG4gICAgICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRWb2x1bWVDaGFuZ2UnKTtcbiAgICAgIHZhciBsYXN0Vm9sdW1lID0gcGxheWVyLnZvbHVtZSgpO1xuICAgICAgYWRVbml0LmdldEFkVm9sdW1lKGZ1bmN0aW9uIChlcnJvciwgdm9sKSB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobGFzdFZvbHVtZSAhPT0gdm9sKSB7XG4gICAgICAgICAgICBwbGF5ZXIudm9sdW1lKHZvbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaW5rRnVsbFNjcmVlbkNvbnRyb2wgKHBsYXllciwgYWRVbml0LCBWSUVXX01PREUpIHtcbiAgICB2YXIgdXBkYXRlVmlld1NpemUgPSByZXNpemVBZC5iaW5kKHRoYXQsIHBsYXllciwgYWRVbml0LCBWSUVXX01PREUpO1xuXG4gICAgcGxheWVyLm9uKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlVmlld1NpemUpO1xuXG4gICAgcGxheWVyLm9uZSgndnBhaWQuYWRFbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBwbGF5ZXIub2ZmKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlVmlld1NpemUpO1xuICAgIH0pO1xuICB9XG59O1xuXG5WUEFJREludGVncmF0b3IucHJvdG90eXBlLl9zdGFydEFkID0gZnVuY3Rpb24gKGFkVW5pdCwgdmFzdFJlc3BvbnNlLCBuZXh0KSB7XG4gIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgdmFyIGFscmVhZHlHb3RBZFN0YXJ0ZWQgPSBhZFVuaXQuYWRTdGFydGVkO1xuXG4gIGlmIChhbHJlYWR5R290QWRTdGFydGVkKSB7XG5cdCAgcGxheWVyLnRyaWdnZXIoJ3Zhc3QuYWRTdGFydCcpO1xuXHQgIHBsYXllci50cmlnZ2VyKHt0eXBlOiAndHJhY2UuZXZlbnQnLCBkYXRhOiB7ZXZlbnQ6ICd2cGFpZC5BZFN0YXJ0ZWQnfX0pO1xuICB9XG4gIGFkVW5pdC5zdGFydEFkKGZ1bmN0aW9uIChlcnJvcikge1xuICAgIGlmICghZXJyb3IgJiYgIWFscmVhZHlHb3RBZFN0YXJ0ZWQpIHtcbiAgICAgIHBsYXllci50cmlnZ2VyKCd2YXN0LmFkU3RhcnQnKTtcbiAgICB9XG4gICAgbmV4dChlcnJvciwgYWRVbml0LCB2YXN0UmVzcG9uc2UpO1xuICB9KTtcbn07XG5cblZQQUlESW50ZWdyYXRvci5wcm90b3R5cGUuX2ZpbmlzaFBsYXlpbmcgPSBmdW5jdGlvbiAoYWRVbml0LCB2YXN0UmVzcG9uc2UsIG5leHQpIHtcbiAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyO1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGFkVW5pdC5vbignQWRTdG9wcGVkJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICh3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSkge1xuICAgIFx0ICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZS5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnQWRTdG9wcGVkJywgYWRWb2x1bWU6IHBsYXllci52b2x1bWUoKX0pO1xuICAgICB9XG4gICBwbGF5ZXIudHJpZ2dlcigndnBhaWQuQWRTdG9wcGVkJyk7XG4gICBmaW5pc2hQbGF5aW5nQWQobnVsbCk7XG4gIH0pO1xuXG4gIGFkVW5pdC5vbignQWRFcnJvcicsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICBpZiAodGhhdC5pbXByZXNzaW9uVHJpZ2dlcmVkKSB7XG4gICAgICAgIGZpbmlzaFBsYXlpbmdBZChudWxsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgXHR2YXIgZXJyTXNnID0gZXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ29uIFZQQUlESW50ZWdyYXRvciwgZXJyb3Igd2hpbGUgd2FpdGluZyBmb3IgdGhlIGFkVW5pdCB0byBmaW5pc2ggcGxheWluZyc7XG4gICAgICAgIGZpbmlzaFBsYXlpbmdBZChuZXcgVkFTVEVycm9yKGVyck1zZykpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICB2YXIgbmVlZHNTaG93UGxheWVyID0gdGhpcy5uZWVkc1Nob3dQbGF5ZXI7XG4gIGZ1bmN0aW9uIGZpbmlzaFBsYXlpbmdBZCAoZXJyb3IpIHtcblx0ICB0aGF0LmFkRmluaXNoZWQgPSB0cnVlO1xuXHRcdHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuXHRcdGlmIChuZWVkc1Nob3dQbGF5ZXIpIHtcblx0XHRcdGlmICh0aGF0LnRpbWVVcGRhdGVUaW1lcikge1xuXHRcdFx0XHRjbGVhckludGVydmFsKHRoYXQudGltZVVwZGF0ZVRpbWVyKTtcblx0XHRcdFx0dGhhdC50aW1lVXBkYXRlVGltZXIgPSBudWxsO1xuXHRcdFx0XHR2YXIgYmNUaW1lRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiY190aW1lX2Rpc3BsYXknKTtcblx0XHRcdFx0aWYgKGJjVGltZURpc3BsYXkpIHtcblx0XHRcdFx0XHRwbGF5ZXIuY29udHJvbEJhci5nZXRDaGlsZCgnY3VycmVudFRpbWVEaXNwbGF5JykuZWxfLnJlbW92ZUNoaWxkKGJjVGltZURpc3BsYXkpO1xuXHRcdFx0XHR9XG4gICAgICAgIHNob3dPcmlnaW5hbFRpbWVEaXNwbGF5KHBsYXllciwgdHJ1ZSk7XG4gICAgICB9XG5cdCAgICBwbGF5ZXIuY29udHJvbEJhci5zaG93KCk7XG5cdFx0XHRwbGF5ZXIudGVjaF8uZWxfLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdH1cbiAgICBuZXh0KGVycm9yLCBhZFVuaXQsIHZhc3RSZXNwb25zZSk7XG4gIH1cbn07XG5cblZQQUlESW50ZWdyYXRvci5wcm90b3R5cGUuX3RyYWNrRXJyb3IgPSBmdW5jdGlvbiB0cmFja0Vycm9yIChyZXNwb25zZSwgZXJyb3JDb2RlKSB7XG5cdGlmICghdGhpcy5lcnJvckhhc0JlZW5UcmFja2VkKSB7XG5cdFx0dGhpcy5lcnJvckhhc0JlZW5UcmFja2VkID0gdHJ1ZTtcblx0XHR2YXN0VXRpbC50cmFjayhyZXNwb25zZS5lcnJvclVSTE1hY3Jvcywge0VSUk9SQ09ERTogZXJyb3JDb2RlIHx8IDkwMX0pO1xuXHR9XG59O1xuXG5mdW5jdGlvbiBzaG93T3JpZ2luYWxUaW1lRGlzcGxheSAocGxheWVyLCBzaG93KSB7XG4gIHZhciBjaGlsZHJlbiA9IHBsYXllci5jb250cm9sQmFyLmdldENoaWxkKCdjdXJyZW50VGltZURpc3BsYXknKS5lbF8uY2hpbGRyZW47XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY2hpbGRyZW5baV0uaWQgIT0gJ2JjX3RpbWVfZGlzcGxheScpIHtcbiAgICAgIGNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSBzaG93ID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc2l6ZUFkIChwbGF5ZXIsIGFkVW5pdCwgVklFV19NT0RFKSB7XG5cdHZhciBza2lwQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkU2tpcEJ1dHRvbicpO1xuICB2YXIgdGVjaCA9IHBsYXllci5lbCgpLnF1ZXJ5U2VsZWN0b3IoJy52anMtdGVjaCcpO1xuICB2YXIgZGltZW5zaW9uID0gZG9tLmdldERpbWVuc2lvbih0ZWNoKTtcbiAgdmFyIE1PREUgPSBwbGF5ZXIuaXNGdWxsc2NyZWVuKCkgPyBWSUVXX01PREUuRlVMTFNDUkVFTiA6IFZJRVdfTU9ERS5OT1JNQUw7XG4gIGlmIChNT0RFID09PSBWSUVXX01PREUuTk9STUFMKSB7XG4gICAgaWYgKHBsYXllci52YXN0KSB7XG4gICAgICBwbGF5ZXIudmFzdC5uZWVkU3luY1BsYXkgPSB0cnVlO1xuICAgIH1cblx0ICBkaW1lbnNpb24ud2lkdGggPSBwbGF5ZXIuZWxfLm9mZnNldFdpZHRoO1xuXHQgIGRpbWVuc2lvbi5oZWlnaHQgPSBwbGF5ZXIuZWxfLm9mZnNldEhlaWdodDtcblx0ICBpZiAodXRpbGl0aWVzLmlzQW5kcm9pZCgpICYmIHNraXBCdXR0b24pIHtcblx0XHQgIHNraXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdCAgfVxuICB9XG4gIGlmIChNT0RFID09PSBWSUVXX01PREUuRlVMTFNDUkVFTikge1xuXHQgIGxvZ2dlci5sb2coJyoqKioqKiB0byBmdWxsc2NyZWVuIGRpbWVuc2lvbiA9ICcgKyBkaW1lbnNpb24ud2lkdGggKyAnLCcgKyBkaW1lbnNpb24uaGVpZ2h0KTtcblx0ICBpZiAodXRpbGl0aWVzLmlzQW5kcm9pZCgpICYmIHNraXBCdXR0b24pIHtcblx0XHQgIHNraXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ICB9XG4gIH1cbiAgYWRVbml0LnJlc2l6ZUFkKGRpbWVuc2lvbi53aWR0aCwgZGltZW5zaW9uLmhlaWdodCwgTU9ERSwgbG9nRXJyb3IpO1xufVxuXG5mdW5jdGlvbiBsb2dFcnJvciAoZXJyb3IpIHtcbiAgaWYgKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFUlJPUjogJyArIGVycm9yLm1lc3NhZ2UsIGVycm9yKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZQQUlESW50ZWdyYXRvcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/ads/vpaid/VPAIDIntegrator.js\n");

/***/ }),

/***/ "./src/scripts/plugin/components/black-poster.js":
/*!*******************************************************!*\
  !*** ./src/scripts/plugin/components/black-poster.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/**\n * The component that shows a black screen until the ads plugin has decided if it can or it can not play the ad.\n *\n * Note: In case you wonder why instead of this black poster we don't just show the spinner loader.\n *       IOS devices do not work well with animations and the browser chrashes from time to time That is why we chose to\n *       have a secondary black poster.\n *\n *       It also makes it much more easier for the users of the plugin since it does not change the default behaviour of the\n *       spinner and the player works the same way with and without the plugin.\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvar element = document.createElement('div');\n\nvar BlackPosterFactory = function (baseComponent) {\n  return {\n    /** @constructor */\n    init: function init (player, options) {\n      options.el = element;\n      element.className = 'vjs-black-poster';\n      baseComponent.call(this, player, options);\n\n      var posterImg = player.getChild('posterImage');\n\n      // We need to do it asynchronously to be sure that the black poster el is on the dom.\n      setTimeout(function () {\n        if (posterImg && player && player.el()) {\n          player.el().insertBefore(element, posterImg.el());\n        }\n      }, 0);\n    },\n    el: function getElement () {\n      return element;\n    }\n  };\n};\n\nmodule.exports = BlackPosterFactory;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9wbHVnaW4vY29tcG9uZW50cy9ibGFjay1wb3N0ZXIuanM/ZjZjOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3BsdWdpbi9jb21wb25lbnRzL2JsYWNrLXBvc3Rlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBUaGUgY29tcG9uZW50IHRoYXQgc2hvd3MgYSBibGFjayBzY3JlZW4gdW50aWwgdGhlIGFkcyBwbHVnaW4gaGFzIGRlY2lkZWQgaWYgaXQgY2FuIG9yIGl0IGNhbiBub3QgcGxheSB0aGUgYWQuXG4gKlxuICogTm90ZTogSW4gY2FzZSB5b3Ugd29uZGVyIHdoeSBpbnN0ZWFkIG9mIHRoaXMgYmxhY2sgcG9zdGVyIHdlIGRvbid0IGp1c3Qgc2hvdyB0aGUgc3Bpbm5lciBsb2FkZXIuXG4gKiAgICAgICBJT1MgZGV2aWNlcyBkbyBub3Qgd29yayB3ZWxsIHdpdGggYW5pbWF0aW9ucyBhbmQgdGhlIGJyb3dzZXIgY2hyYXNoZXMgZnJvbSB0aW1lIHRvIHRpbWUgVGhhdCBpcyB3aHkgd2UgY2hvc2UgdG9cbiAqICAgICAgIGhhdmUgYSBzZWNvbmRhcnkgYmxhY2sgcG9zdGVyLlxuICpcbiAqICAgICAgIEl0IGFsc28gbWFrZXMgaXQgbXVjaCBtb3JlIGVhc2llciBmb3IgdGhlIHVzZXJzIG9mIHRoZSBwbHVnaW4gc2luY2UgaXQgZG9lcyBub3QgY2hhbmdlIHRoZSBkZWZhdWx0IGJlaGF2aW91ciBvZiB0aGVcbiAqICAgICAgIHNwaW5uZXIgYW5kIHRoZSBwbGF5ZXIgd29ya3MgdGhlIHNhbWUgd2F5IHdpdGggYW5kIHdpdGhvdXQgdGhlIHBsdWdpbi5cbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbnZhciBCbGFja1Bvc3RlckZhY3RvcnkgPSBmdW5jdGlvbiAoYmFzZUNvbXBvbmVudCkge1xuICByZXR1cm4ge1xuICAgIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgICBpbml0OiBmdW5jdGlvbiBpbml0IChwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMuZWwgPSBlbGVtZW50O1xuICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSAndmpzLWJsYWNrLXBvc3Rlcic7XG4gICAgICBiYXNlQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgICAgdmFyIHBvc3RlckltZyA9IHBsYXllci5nZXRDaGlsZCgncG9zdGVySW1hZ2UnKTtcblxuICAgICAgLy8gV2UgbmVlZCB0byBkbyBpdCBhc3luY2hyb25vdXNseSB0byBiZSBzdXJlIHRoYXQgdGhlIGJsYWNrIHBvc3RlciBlbCBpcyBvbiB0aGUgZG9tLlxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChwb3N0ZXJJbWcgJiYgcGxheWVyICYmIHBsYXllci5lbCgpKSB7XG4gICAgICAgICAgcGxheWVyLmVsKCkuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIHBvc3RlckltZy5lbCgpKTtcbiAgICAgICAgfVxuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBlbDogZnVuY3Rpb24gZ2V0RWxlbWVudCAoKSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJsYWNrUG9zdGVyRmFjdG9yeTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/plugin/components/black-poster.js\n");

/***/ }),

/***/ "./src/scripts/plugin/components/black-poster_5.js":
/*!*********************************************************!*\
  !*** ./src/scripts/plugin/components/black-poster_5.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar baseVideoJsComponent = videojs.getComponent('Component');\n\nvar BlackPoster = __webpack_require__(/*! ./black-poster */ \"./src/scripts/plugin/components/black-poster.js\")(baseVideoJsComponent);\nvar utilities = __webpack_require__(/*! ../../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\n// VIDLA-4391: Hack to prevent uncaught exception when loading Mail Online plugin into child iframe of video.js window\n// VIDLA-4563: Hack for Edge when Brightcove player embed in not friendly iframe\nif (parent && window !== parent && utilities.scriptLoadedInIframe()) {\n  BlackPoster.constructor = parent.Object.prototype.constructor;\n}\n\nvideojs.registerComponent('BlackPoster', videojs.extend(baseVideoJsComponent, BlackPoster));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9wbHVnaW4vY29tcG9uZW50cy9ibGFjay1wb3N0ZXJfNS5qcz9iYTRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBLGtCQUFrQixtQkFBTyxDQUFDLHVFQUFnQjtBQUMxQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBOEI7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9wbHVnaW4vY29tcG9uZW50cy9ibGFjay1wb3N0ZXJfNS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGJhc2VWaWRlb0pzQ29tcG9uZW50ID0gdmlkZW9qcy5nZXRDb21wb25lbnQoJ0NvbXBvbmVudCcpO1xuXG52YXIgQmxhY2tQb3N0ZXIgPSByZXF1aXJlKCcuL2JsYWNrLXBvc3RlcicpKGJhc2VWaWRlb0pzQ29tcG9uZW50KTtcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91dGlsaXR5RnVuY3Rpb25zJyk7XG5cbi8vIFZJRExBLTQzOTE6IEhhY2sgdG8gcHJldmVudCB1bmNhdWdodCBleGNlcHRpb24gd2hlbiBsb2FkaW5nIE1haWwgT25saW5lIHBsdWdpbiBpbnRvIGNoaWxkIGlmcmFtZSBvZiB2aWRlby5qcyB3aW5kb3dcbi8vIFZJRExBLTQ1NjM6IEhhY2sgZm9yIEVkZ2Ugd2hlbiBCcmlnaHRjb3ZlIHBsYXllciBlbWJlZCBpbiBub3QgZnJpZW5kbHkgaWZyYW1lXG5pZiAocGFyZW50ICYmIHdpbmRvdyAhPT0gcGFyZW50ICYmIHV0aWxpdGllcy5zY3JpcHRMb2FkZWRJbklmcmFtZSgpKSB7XG4gIEJsYWNrUG9zdGVyLmNvbnN0cnVjdG9yID0gcGFyZW50Lk9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3I7XG59XG5cbnZpZGVvanMucmVnaXN0ZXJDb21wb25lbnQoJ0JsYWNrUG9zdGVyJywgdmlkZW9qcy5leHRlbmQoYmFzZVZpZGVvSnNDb21wb25lbnQsIEJsYWNrUG9zdGVyKSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/plugin/components/black-poster_5.js\n");

/***/ }),

/***/ "./src/scripts/plugin/videojs.vast.vpaid.js":
/*!**************************************************!*\
  !*** ./src/scripts/plugin/videojs.vast.vpaid.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar VASTClient = __webpack_require__(/*! ../ads/vast/VASTClient */ \"./src/scripts/ads/vast/VASTClient.js\");\nvar VASTError = __webpack_require__(/*! ../ads/vast/VASTError */ \"./src/scripts/ads/vast/VASTError.js\");\nvar vastUtil = __webpack_require__(/*! ../ads/vast/vastUtil */ \"./src/scripts/ads/vast/vastUtil.js\");\n\nvar VASTIntegrator = __webpack_require__(/*! ../ads/vast/VASTIntegrator */ \"./src/scripts/ads/vast/VASTIntegrator.js\");\nvar VPAIDIntegrator = __webpack_require__(/*! ../ads/vpaid/VPAIDIntegrator */ \"./src/scripts/ads/vpaid/VPAIDIntegrator.js\");\nvar IconIntegrator = __webpack_require__(/*! ../ads/icon/IconIntegrator */ \"./src/scripts/ads/icon/IconIntegrator.js\");\n\nvar async = __webpack_require__(/*! ../utils/async */ \"./src/scripts/utils/async.js\");\nvar dom = __webpack_require__(/*! ../utils/dom */ \"./src/scripts/utils/dom.js\");\nvar playerUtils = __webpack_require__(/*! ../utils/playerUtils */ \"./src/scripts/utils/playerUtils.js\");\nvar utilities = __webpack_require__(/*! ../utils/utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar ViewabilityTracking = __webpack_require__(/*! ../utils/anVideoViewability */ \"./src/scripts/utils/anVideoViewability.js\");\n\nvar logger = __webpack_require__(/*! ../utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nmodule.exports = function VASTPlugin (options) {\n  var snapshot;\n  var player = this;\n  var vast = new VASTClient({wrapperLimit: options.wrapperLimit});\n  var adsCanceled = false;\n  var playlistNextButton;\n  var defaultOpts = {\n    // maximum amount of time in ms to wait to receive `adsready` from the ad\n    // implementation after play has been requested. Ad implementations are\n    // expected to load any dynamic libraries and make any requests to determine\n    // ad policies for a video during this time.\n    timeout: 500,\n\n    // TODO:finish this IOS FIX\n    // Whenever you play an add on IOS, the native player kicks in and we loose control of it. On very heavy pages the 'play' event\n    // May occur after the video content has already started. This is wrong if you want to play a preroll ad that needs to happen before the user\n    // starts watching the content. To prevent this usec\n    iosPrerollCancelTimeout: 2000,\n\n    // maximun amount of time for the ad to actually start playing. If this timeout gets\n    // triggered the ads will be cancelled\n    adCancelTimeout: 3000,\n\n    // Boolean flag that configures the player to play a new ad before the user sees the video again\n    // the current video\n    playAdAlways: false,\n\n    // Flag to enable or disable the ads by default.\n    adsEnabled: true,\n\n    // Boolean flag to enable or disable the resize with window.resize or orientationchange\n    autoResize: true,\n\n    // verbosity of console logging:\n    // 0 - error\n    // 1 - error, warn\n    // 2 - error, warn, info\n    // 3 - error, warn, info, log\n    // 4 - error, warn, info, log, debug\n    verbosity: 0,\n\n    // plugin options\n    playsInBreak: false,\n    skipText: 'Skip in %%TIME%% seconds',\n    skipButtonText: 'Skip ad',\n    initialPlayback: 'auto',\n    initialAudio: 'on',\n    disableClickThru: false,\n\n    firstPlay: true\n  };\n\n  var settings = utilities.extend({}, defaultOpts, options || {});\n\n  // get Brightcove Player Id\n  var playerId = '';\n  if (player.bcinfo) {\n    playerId = player.bcinfo.playerId;\n  }\n  else if (player.options_ && player.options_['data-player']) {\n    playerId = player.options_['data-player'];\n  }\n  logger.setPlayerId(playerId + '-' + player.el_.id);\n\n  if (utilities.isUndefined(settings.adTagUrl) && utilities.isDefined(settings.url)) {\n    settings.adTagUrl = settings.url;\n  }\n\n  if (utilities.isString(settings.adTagUrl)) {\n    settings.adTagUrl = utilities.echoFn(settings.adTagUrl);\n  }\n\n  if (settings.viewability && settings.viewability.config) {\n\t  settings.viewabilityTracking = new ViewabilityTracking(player);\n  }\n\n  window._molSettings = settings;\n  window._timeoutIds = [];\n\n  window.MoatApiReference = null;\n\n  if (utilities.isDefined(settings.adTagXML) && !utilities.isFunction(settings.adTagXML)) {\n    return trackAdError(new VASTError('on VideoJS VAST plugin, the passed adTagXML option does not contain a function'));\n  }\n\n  if (!utilities.isDefined(settings.adTagUrl) && !utilities.isFunction(settings.adTagXML)) {\n    return trackAdError(new VASTError('on VideoJS VAST plugin, missing adTagUrl on options object'));\n  }\n\n  logger.setVerbosity(settings.verbosity);\n\n  if (!settings.playsInBreak) {\n\t  snapshot = playerUtils.getPlayerSnapshot(player);\n\t  snapshot.playing = true;\t// force to play content after ad ended\n  }\n\n  if (settings.initialPlayback === 'click') {\n\t  playerUtils.showBigPlayButton(player, true);\n  }\n\n  playerUtils.prepareForAds(player);\n\n  if (settings.playAdAlways) {\n    // No matter what happens we play a new ad before the user sees the video again.\n    player.on('vast.contentEnd', function () {\n      setTimeout(function () {\n        player.trigger('vast.reset');\n      }, 0);\n    });\n  }\n\n  player.on('vast.firstPlay', tryToPlayPrerollAd);\n\n  player.on('vast.reset', function () {\n    // If we are reseting the plugin, we don't want to restore the content\n    snapshot = null;\n    cancelAds();\n  });\n\n  player.vast = {\n    isEnabled: function () {\n      return settings.adsEnabled;\n    },\n\n    enable: function () {\n      settings.adsEnabled = true;\n    },\n\n    disable: function () {\n      settings.adsEnabled = false;\n    }\n  };\n\n  return player.vast;\n\n  // **** Local Functions **** //\n  function tryToPlayPrerollAd () {\n    // make sure we are going to use same plugin instance twice\n    player.off('vast.firstPlay', tryToPlayPrerollAd);\n\n    if (player.vast.adsCancelled) {\n      delete player.vast.adsCancelled;\n    }\n    playerUtils.showBigPlayButton(player, false);\n\n    if (settings.initialAudio === 'off') {\n      settings.contentVolume = {muted: player.muted(), volume: player.volume()};\n      player.muted(true);\n    }\n\n    // We remove the poster to prevent flickering whenever the content starts playing\n    playerUtils.removeNativePoster(player);\n\n    playerUtils.once(player, ['vast.adsCancel', 'vast.adEnd'], function () {\n    \tplayerUtils.showBigPlayButton(player, false);\n      removeAdUnit();\n      restoreVideoContent();\n      setTimeout(function () {\n          player.trigger('adFinished');\n      }, 0);\n    });\n\n    async.waterfall([\n      checkAdsEnabled,\n      preparePlayerForAd,\n      startAdCancelTimeout,\n      playPrerollAd\n    ], function (error, response) {\n      if (error) {\n        trackAdError(error, response);\n      } else {\n        player.trigger('vast.adEnd');\n      }\n    });\n\n    // **** Local Functions **** //\n\n    function removeAdUnit () {\n      if (player.vast && player.vast.adUnit) {\n        player.vast.adUnit = null; // We remove the adUnit\n        player.vast.VPAID = null;\n      }\n      window._molSettings.firstPlay = false;\n    }\n\n    function restoreVideoContent () {\n      setupContentEvents();\n      if (snapshot) {\n        playerUtils.restorePlayerSnapshot(player, snapshot);\n        snapshot = null;\n      }\n    }\n\n    function setupContentEvents () {\n      playerUtils.once(player, ['playing', 'vast.reset', 'vast.firstPlay'], function (evt) {\n        if (evt.type !== 'playing') {\n          return;\n        }\n\n        player.trigger('vast.contentStart');\n\n        playerUtils.once(player, ['ended', 'vast.reset', 'vast.firstPlay'], function (evt) {\n          if (evt.type === 'ended') {\n            player.trigger('vast.contentEnd');\n          }\n        });\n      });\n    }\n\n    function checkAdsEnabled (next) {\n      if (settings.adsEnabled) {\n        return next(null);\n      }\n      next(new VASTError('Ads are not enabled'));\n    }\n\n    function preparePlayerForAd (next) {\n      if (canPlayPrerollAd()) {\n        // snapshot = playerUtils.getPlayerSnapshot(player);\n        player.pause();\n        addSpinnerIcon();\n\n        if (player.paused()) {\n          next(null);\n        } else {\n          playerUtils.once(player, ['playing'], function () {\n            player.pause();\n            next(null);\n          });\n        }\n      } else {\n        next(new VASTError('video content has been playing before preroll ad'));\n      }\n    }\n\n    function canPlayPrerollAd () {\n      return !utilities.isIPhone() || player.currentTime() <= settings.iosPrerollCancelTimeout;\n    }\n\n    function startAdCancelTimeout (next) {\n      var adCancelTimeoutId;\n      adsCanceled = false;\n\n      adCancelTimeoutId = setTimeout(function () {\n       \t  adCancelTimeoutId = null;\n        trackAdError(new VASTError('timeout while waiting for the video to start playing. You may need to increase adStartTimeout.', 402));\n        playerUtils.showBigPlayButton(player, false);\n        if (player.vast.VPAID) {\n        \tplayer.trigger('vpaid.adEnd');\n        }\n      }, settings.adCancelTimeout);\n\n      playerUtils.once(player, ['vast.adStart', 'vast.adsCancel', 'clearAdCancelTimeout'], clearAdCancelTimeout);\n      playerUtils.once(player, ['vast.adError', 'vpaid.adEnd', 'vpaid.adError'], function () {\n    \t  clearAdCancelTimeout();\n      });\n\n      // **** Local Functions **** //\n      function clearAdCancelTimeout () {\n        if (adCancelTimeoutId) {\n          clearTimeout(adCancelTimeoutId);\n          adCancelTimeoutId = null;\n        }\n      }\n\n      next(null);\n    }\n\n    function addSpinnerIcon () {\n      dom.addClass(player.el(), 'vjs-vast-ad-loading');\n      playerUtils.once(player, ['vast.adStart', 'vast.adsCancel'], removeSpinnerIcon);\n    }\n\n    function removeSpinnerIcon () {\n      // IMPORTANT NOTE: We remove the spinnerIcon asynchronously to give time to the browser to start the video.\n      // If we remove it synchronously we see a flash of the content video before the ad starts playing.\n      setTimeout(function () {\n        dom.removeClass(player.el(), 'vjs-vast-ad-loading');\n        // VIDLA-2268 (Safari 11 on Mac - Spinner keeps going on first frame of ad)\n\t\tplayer.loadingSpinner.el_.style.display = 'none';\n      }, 100);\n    }\n\n  }\n\n  function cancelAds () {\n    player.trigger('vast.adsCancel');\n    adsCanceled = true;\n    if (player.vast) {\n      player.vast.adsCancelled = true;    // Set a flag to interrupt the ad loading waterfall - needed to avoid a race condition where the ad could still play after being cancelled.\n    }\n  }\n\n  function playPrerollAd (callback) {\n    async.waterfall([\n      getVastResponse,\n      playAd\n    ], callback);\n  }\n\n  function getVastResponse (callback) {\n    vast.getVASTResponse(settings.adTagUrl ? settings.adTagUrl() : settings.adTagXML, callback);\n  }\n\n  function playAd (vastResponse, callback) {\n    // TODO: Find a better way to stop the play. The 'playPrerollWaterfall' ends in an inconsistent situation\n    // If the state is not 'preroll?' it means the ads were canceled therefore, we break the waterfall\n    if (adsCanceled) {\n      return;\n    }\n\n    /* Copyright (c) 2011-2016 Moat Inc. All Rights Reserved. */\n    // eslint-disable-next-line\n    function initMoatTracking (a,c,d,h,k){var f=document.createElement(\"script\"),b=[];c={adData:{ids:c,duration:d,url:k},dispatchEvent:function(a){this.sendEvent?(b&&(b.push(a),a=b,b=!1),this.sendEvent(a)):b.push(a);}};d=\"_moatApi\"+Math.floor(1E8*Math.random());var e,g;try{e=a.ownerDocument,g=e.defaultView||e.parentWindow;}catch(l){e=document,g=window;}g[d]=c;f.type=\"text/javascript\";a&&a.insertBefore(f,a.childNodes[0]||null);f.src=\"https://z.moatads.com/\"+h+\"/moatvideo.js#\"+d;return c;}\n    window.MoatApiReference = null;\n    if (vastResponse.ads && vastResponse.ads.length > 0 && vastResponse.ads[0].inLine && vastResponse.ads[0].inLine.moat) {\n  \t  var ids = {level1: vastResponse.ads[0].inLine.moat.advid,\n  \t\t\t     level2: vastResponse.ads[0].inLine.moat.cpgid,\n  \t\t\t     level3: vastResponse.ads[0].inLine.moat.cpid,\n  \t\t\t     level4: vastResponse.ads[0].inLine.moat.crid};\n  \t  if (vastResponse.ads[0].inLine.moat.site_id) {\n  \t\t  ids.slicer1 = vastResponse.ads[0].inLine.moat.site_id;\n  \t  }\n  \t  window.MoatApiReference = initMoatTracking(player.el_, ids, player.duration(), vastResponse.ads[0].inLine.moat.partnercode, player.currentSource().src);\n    }\n    if (window._molSettings.viewabilityTracking) {\n  \t  window._molSettings.viewabilityTracking.init(window._molSettings.viewability.contextId,\n  \t\t\t  player.duration(), player.el_.offsetWidth, player.el_.offsetHeight);\n    }\n\n    var isAdVPAID  = isVPAID(vastResponse);\n    var adIntegrator = isAdVPAID ? new VPAIDIntegrator(player, settings) : new VASTIntegrator(player);\n    var adFinished = false;\n    if (isAdVPAID) {\n    \tplayer.trigger('clearAdCancelTimeout');\n    }\n    else {\n      // VIDLA-4626 - need this entry-point to track ad start timeout error for media (not VPAID) ad\n      player.vast.trackError = adIntegrator._trackError;\n    }\n\n    playerUtils.once(player, ['vast.adStart', 'vast.adsCancel'], function (evt) {\n      if (evt.type === 'vast.adStart') {\n        addAdsLabel();\n      }\n    });\n\n    playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], removeAdsLabel);\n\n    if (utilities.isIDevice()) {\n      preventManualProgress();\n    }\n\n    player.vast.vastResponse = vastResponse;\n    logger.debug('calling adIntegrator.playAd() with vastResponse:', vastResponse);\n    player.vast.adUnit = adIntegrator.playAd(vastResponse, callback);\n    player.vast.VPAID = isAdVPAID;\n\n    var adIconIntegrator;\n\n    // **** Local Functions **** //\n    function addAdsLabel () {\n    \tif (window._molSettings.playsInBreak) {\n    \t\tplayer.on('timeupdate', updateTimeControls);\n    \t}\n      if (adFinished) {\n        return;\n      }\n\n      if (vastResponse.icons && vastResponse.icons.length > 0) {\n        adIconIntegrator = new IconIntegrator(player);\n        adIconIntegrator.renderIcons(vastResponse.icons, callback);\n      }\n\n      var elems = document.getElementsByClassName('vjs-next-button');\n      if (elems && elems.length > 0) {\n        playlistNextButton = elems[0];\n        playlistNextButton.style.display = 'none';\n      }\n    }\n\n    function removeAdsLabel () {\n    \tif (window._molSettings.playsInBreak) {\n    \t\tplayer.off('timeupdate', updateTimeControls);\n    \t\tif (window._molSettings.timeOffset) {\n          showOriginalTimeDisplay(true);\n          var bcTimeDisplay = document.getElementById('bc_time_display');\n          if (bcTimeDisplay) {\n            bcTimeDisplay.style.display = 'none';\n          }\n    \t\t}\n    \t}\n      if (playlistNextButton) {\n        playlistNextButton.style.display = '';\n        playlistNextButton = null;\n      }\n      adFinished = true;\n    }\n\n    function showOriginalTimeDisplay (show) {\n      var children = player.controlBar.getChild('currentTimeDisplay').el_.children;\n      for (var i = 0; i < children.length; i++) {\n        if (children[i].id != 'bc_time_display') {\n          children[i].style.display = show ? '' : 'none';\n        }\n      }\n    }\n\n    function updateTimeControls () {\n    \tvar convertTimeToStr = function (time) {\n    \t\tvar secs = parseInt(time + 0.5);\n    \t\tvar mins = parseInt(secs / 60);\n    \t\tsecs -= (mins * 60);\n    \t\tvar str = mins.toString() + ':' + (secs > 9 ? ''  : '0') + secs.toString();\n    \t\treturn str;\n    \t};\n\n      if (window._molSettings.breakDuration) {\n        if (player.duration() != window._molSettings.breakDuration) {\n          if (player.duration()) {\n            window._molSettings.realVideoDuration = player.duration();\n          }\n          player.duration(window._molSettings.breakDuration);\n        }\n      }\n      if (window._molSettings.timeOffset) {\n        var bcTimeDisplay = document.getElementById('bc_time_display');\n        if (!bcTimeDisplay) {\n          bcTimeDisplay = document.createElement('div');\n          player.controlBar.getChild('currentTimeDisplay').el_.appendChild(bcTimeDisplay);\n          bcTimeDisplay.id = 'bc_time_display';\n          bcTimeDisplay.class = 'vjs-current-time-display';\n          bcTimeDisplay['aria-live'] = 'off';\n          bcTimeDisplay.innerHTML = '<span class=\"vjs-control-text\"></span>0:00';\n          showOriginalTimeDisplay(false);\n        }\n        else {\n          showOriginalTimeDisplay(false);\n          bcTimeDisplay.style.display = 'block';\n        }\n        var time = player.currentTime() + window._molSettings.timeOffset;\n        bcTimeDisplay.childNodes[1].nodeValue = convertTimeToStr(time);\n      }\n    }\n\n    function preventManualProgress () {\n      // IOS video clock is very unreliable and we need a 3 seconds threshold to ensure that the user forwarded/rewound the ad\n      var PROGRESS_THRESHOLD = 3;\n      var previousTime = 0;\n      var skipad_attempts = 0;\n\n      player.on('timeupdate', preventAdSeek);\n      player.on('ended', preventAdSkip);\n\n      playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel', 'vast.adError'], stopPreventManualProgress);\n\n      // **** Local Functions **** //\n      function preventAdSkip () {\n        // Ignore ended event if the Ad time was not 'near' the end\n        // and revert time to the previous 'valid' time\n        if ((player.duration() - previousTime) > PROGRESS_THRESHOLD) {\n          player.pause(true); // this reduce the video jitter if the IOS skip button is pressed\n          player.play(true); // we need to trigger the play to put the video element back in a valid state\n          player.currentTime(previousTime);\n        }\n      }\n\n      function preventAdSeek () {\n        var currentTime = player.currentTime();\n        var progressDelta = Math.abs(currentTime - previousTime);\n        if (progressDelta > PROGRESS_THRESHOLD) {\n          skipad_attempts += 1;\n          if (skipad_attempts >= 2) {\n            player.pause(true);\n          }\n          player.currentTime(previousTime);\n        } else {\n          previousTime = currentTime;\n        }\n      }\n\n      function stopPreventManualProgress () {\n        player.off('timeupdate', preventAdSeek);\n        player.off('ended', preventAdSkip);\n      }\n    }\n  }\n\n  function trackAdError (error, vastResponse) {\n    player.trigger({type: 'vast.adError', error: error});\n    logger.error('AD ERROR:', error.message, error, vastResponse);\n    if (error && error.code === 402) {\n      // we care only ad start timeout error, all other errors will track in VAST integrator\n      if (player.vast && player.vast.trackError) {\n        player.vast.trackError(error, player.vast.vastResponse);\n      }\n      else {\n        logger.warn('WARNING: Cannot track ad start timeout error because VAST XML is not parsed yet');\n      }\n    }\n    cancelAds();\n  }\n\n  function isVPAID (vastResponse) {\n    var i, len;\n    var mediaFiles = vastResponse.mediaFiles;\n    for (i = 0, len = mediaFiles.length; i < len; i++) {\n      if (vastUtil.isVPAID(mediaFiles[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9wbHVnaW4vdmlkZW9qcy52YXN0LnZwYWlkLmpzP2Y3M2YiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsaUJBQWlCLG1CQUFPLENBQUMsb0VBQXdCO0FBQ2pELGdCQUFnQixtQkFBTyxDQUFDLGtFQUF1QjtBQUMvQyxlQUFlLG1CQUFPLENBQUMsZ0VBQXNCOztBQUU3QyxxQkFBcUIsbUJBQU8sQ0FBQyw0RUFBNEI7QUFDekQsc0JBQXNCLG1CQUFPLENBQUMsZ0ZBQThCO0FBQzVELHFCQUFxQixtQkFBTyxDQUFDLDRFQUE0Qjs7QUFFekQsWUFBWSxtQkFBTyxDQUFDLG9EQUFnQjtBQUNwQyxVQUFVLG1CQUFPLENBQUMsZ0RBQWM7QUFDaEMsa0JBQWtCLG1CQUFPLENBQUMsZ0VBQXNCO0FBQ2hELGdCQUFnQixtQkFBTyxDQUFDLDBFQUEyQjtBQUNuRCwwQkFBMEIsbUJBQU8sQ0FBQyw4RUFBNkI7O0FBRS9ELGFBQWEsbUJBQU8sQ0FBQyxvRUFBd0I7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtQ0FBbUM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsb0NBQW9DLDRCQUE0Qjs7QUFFaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMENBQTBDLDRDQUE0QyxHQUFHLFFBQVEsdUJBQXVCLDJCQUEyQix3RUFBd0UsMkNBQTJDLFFBQVEsSUFBSSxtREFBbUQsU0FBUyxxQkFBcUIsT0FBTyx5QkFBeUIsMkNBQTJDLG9EQUFvRDtBQUNsZTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQixxQkFBcUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLG1DQUFtQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFNBQVM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9wbHVnaW4vdmlkZW9qcy52YXN0LnZwYWlkLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVkFTVENsaWVudCA9IHJlcXVpcmUoJy4uL2Fkcy92YXN0L1ZBU1RDbGllbnQnKTtcbnZhciBWQVNURXJyb3IgPSByZXF1aXJlKCcuLi9hZHMvdmFzdC9WQVNURXJyb3InKTtcbnZhciB2YXN0VXRpbCA9IHJlcXVpcmUoJy4uL2Fkcy92YXN0L3Zhc3RVdGlsJyk7XG5cbnZhciBWQVNUSW50ZWdyYXRvciA9IHJlcXVpcmUoJy4uL2Fkcy92YXN0L1ZBU1RJbnRlZ3JhdG9yJyk7XG52YXIgVlBBSURJbnRlZ3JhdG9yID0gcmVxdWlyZSgnLi4vYWRzL3ZwYWlkL1ZQQUlESW50ZWdyYXRvcicpO1xudmFyIEljb25JbnRlZ3JhdG9yID0gcmVxdWlyZSgnLi4vYWRzL2ljb24vSWNvbkludGVncmF0b3InKTtcblxudmFyIGFzeW5jID0gcmVxdWlyZSgnLi4vdXRpbHMvYXN5bmMnKTtcbnZhciBkb20gPSByZXF1aXJlKCcuLi91dGlscy9kb20nKTtcbnZhciBwbGF5ZXJVdGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3BsYXllclV0aWxzJyk7XG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucycpO1xudmFyIFZpZXdhYmlsaXR5VHJhY2tpbmcgPSByZXF1aXJlKCcuLi91dGlscy9hblZpZGVvVmlld2FiaWxpdHknKTtcblxudmFyIGxvZ2dlciA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbnNvbGVMb2dnZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBWQVNUUGx1Z2luIChvcHRpb25zKSB7XG4gIHZhciBzbmFwc2hvdDtcbiAgdmFyIHBsYXllciA9IHRoaXM7XG4gIHZhciB2YXN0ID0gbmV3IFZBU1RDbGllbnQoe3dyYXBwZXJMaW1pdDogb3B0aW9ucy53cmFwcGVyTGltaXR9KTtcbiAgdmFyIGFkc0NhbmNlbGVkID0gZmFsc2U7XG4gIHZhciBwbGF5bGlzdE5leHRCdXR0b247XG4gIHZhciBkZWZhdWx0T3B0cyA9IHtcbiAgICAvLyBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIGluIG1zIHRvIHdhaXQgdG8gcmVjZWl2ZSBgYWRzcmVhZHlgIGZyb20gdGhlIGFkXG4gICAgLy8gaW1wbGVtZW50YXRpb24gYWZ0ZXIgcGxheSBoYXMgYmVlbiByZXF1ZXN0ZWQuIEFkIGltcGxlbWVudGF0aW9ucyBhcmVcbiAgICAvLyBleHBlY3RlZCB0byBsb2FkIGFueSBkeW5hbWljIGxpYnJhcmllcyBhbmQgbWFrZSBhbnkgcmVxdWVzdHMgdG8gZGV0ZXJtaW5lXG4gICAgLy8gYWQgcG9saWNpZXMgZm9yIGEgdmlkZW8gZHVyaW5nIHRoaXMgdGltZS5cbiAgICB0aW1lb3V0OiA1MDAsXG5cbiAgICAvLyBUT0RPOmZpbmlzaCB0aGlzIElPUyBGSVhcbiAgICAvLyBXaGVuZXZlciB5b3UgcGxheSBhbiBhZGQgb24gSU9TLCB0aGUgbmF0aXZlIHBsYXllciBraWNrcyBpbiBhbmQgd2UgbG9vc2UgY29udHJvbCBvZiBpdC4gT24gdmVyeSBoZWF2eSBwYWdlcyB0aGUgJ3BsYXknIGV2ZW50XG4gICAgLy8gTWF5IG9jY3VyIGFmdGVyIHRoZSB2aWRlbyBjb250ZW50IGhhcyBhbHJlYWR5IHN0YXJ0ZWQuIFRoaXMgaXMgd3JvbmcgaWYgeW91IHdhbnQgdG8gcGxheSBhIHByZXJvbGwgYWQgdGhhdCBuZWVkcyB0byBoYXBwZW4gYmVmb3JlIHRoZSB1c2VyXG4gICAgLy8gc3RhcnRzIHdhdGNoaW5nIHRoZSBjb250ZW50LiBUbyBwcmV2ZW50IHRoaXMgdXNlY1xuICAgIGlvc1ByZXJvbGxDYW5jZWxUaW1lb3V0OiAyMDAwLFxuXG4gICAgLy8gbWF4aW11biBhbW91bnQgb2YgdGltZSBmb3IgdGhlIGFkIHRvIGFjdHVhbGx5IHN0YXJ0IHBsYXlpbmcuIElmIHRoaXMgdGltZW91dCBnZXRzXG4gICAgLy8gdHJpZ2dlcmVkIHRoZSBhZHMgd2lsbCBiZSBjYW5jZWxsZWRcbiAgICBhZENhbmNlbFRpbWVvdXQ6IDMwMDAsXG5cbiAgICAvLyBCb29sZWFuIGZsYWcgdGhhdCBjb25maWd1cmVzIHRoZSBwbGF5ZXIgdG8gcGxheSBhIG5ldyBhZCBiZWZvcmUgdGhlIHVzZXIgc2VlcyB0aGUgdmlkZW8gYWdhaW5cbiAgICAvLyB0aGUgY3VycmVudCB2aWRlb1xuICAgIHBsYXlBZEFsd2F5czogZmFsc2UsXG5cbiAgICAvLyBGbGFnIHRvIGVuYWJsZSBvciBkaXNhYmxlIHRoZSBhZHMgYnkgZGVmYXVsdC5cbiAgICBhZHNFbmFibGVkOiB0cnVlLFxuXG4gICAgLy8gQm9vbGVhbiBmbGFnIHRvIGVuYWJsZSBvciBkaXNhYmxlIHRoZSByZXNpemUgd2l0aCB3aW5kb3cucmVzaXplIG9yIG9yaWVudGF0aW9uY2hhbmdlXG4gICAgYXV0b1Jlc2l6ZTogdHJ1ZSxcblxuICAgIC8vIHZlcmJvc2l0eSBvZiBjb25zb2xlIGxvZ2dpbmc6XG4gICAgLy8gMCAtIGVycm9yXG4gICAgLy8gMSAtIGVycm9yLCB3YXJuXG4gICAgLy8gMiAtIGVycm9yLCB3YXJuLCBpbmZvXG4gICAgLy8gMyAtIGVycm9yLCB3YXJuLCBpbmZvLCBsb2dcbiAgICAvLyA0IC0gZXJyb3IsIHdhcm4sIGluZm8sIGxvZywgZGVidWdcbiAgICB2ZXJib3NpdHk6IDAsXG5cbiAgICAvLyBwbHVnaW4gb3B0aW9uc1xuICAgIHBsYXlzSW5CcmVhazogZmFsc2UsXG4gICAgc2tpcFRleHQ6ICdTa2lwIGluICUlVElNRSUlIHNlY29uZHMnLFxuICAgIHNraXBCdXR0b25UZXh0OiAnU2tpcCBhZCcsXG4gICAgaW5pdGlhbFBsYXliYWNrOiAnYXV0bycsXG4gICAgaW5pdGlhbEF1ZGlvOiAnb24nLFxuICAgIGRpc2FibGVDbGlja1RocnU6IGZhbHNlLFxuXG4gICAgZmlyc3RQbGF5OiB0cnVlXG4gIH07XG5cbiAgdmFyIHNldHRpbmdzID0gdXRpbGl0aWVzLmV4dGVuZCh7fSwgZGVmYXVsdE9wdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gIC8vIGdldCBCcmlnaHRjb3ZlIFBsYXllciBJZFxuICB2YXIgcGxheWVySWQgPSAnJztcbiAgaWYgKHBsYXllci5iY2luZm8pIHtcbiAgICBwbGF5ZXJJZCA9IHBsYXllci5iY2luZm8ucGxheWVySWQ7XG4gIH1cbiAgZWxzZSBpZiAocGxheWVyLm9wdGlvbnNfICYmIHBsYXllci5vcHRpb25zX1snZGF0YS1wbGF5ZXInXSkge1xuICAgIHBsYXllcklkID0gcGxheWVyLm9wdGlvbnNfWydkYXRhLXBsYXllciddO1xuICB9XG4gIGxvZ2dlci5zZXRQbGF5ZXJJZChwbGF5ZXJJZCArICctJyArIHBsYXllci5lbF8uaWQpO1xuXG4gIGlmICh1dGlsaXRpZXMuaXNVbmRlZmluZWQoc2V0dGluZ3MuYWRUYWdVcmwpICYmIHV0aWxpdGllcy5pc0RlZmluZWQoc2V0dGluZ3MudXJsKSkge1xuICAgIHNldHRpbmdzLmFkVGFnVXJsID0gc2V0dGluZ3MudXJsO1xuICB9XG5cbiAgaWYgKHV0aWxpdGllcy5pc1N0cmluZyhzZXR0aW5ncy5hZFRhZ1VybCkpIHtcbiAgICBzZXR0aW5ncy5hZFRhZ1VybCA9IHV0aWxpdGllcy5lY2hvRm4oc2V0dGluZ3MuYWRUYWdVcmwpO1xuICB9XG5cbiAgaWYgKHNldHRpbmdzLnZpZXdhYmlsaXR5ICYmIHNldHRpbmdzLnZpZXdhYmlsaXR5LmNvbmZpZykge1xuXHQgIHNldHRpbmdzLnZpZXdhYmlsaXR5VHJhY2tpbmcgPSBuZXcgVmlld2FiaWxpdHlUcmFja2luZyhwbGF5ZXIpO1xuICB9XG5cbiAgd2luZG93Ll9tb2xTZXR0aW5ncyA9IHNldHRpbmdzO1xuICB3aW5kb3cuX3RpbWVvdXRJZHMgPSBbXTtcblxuICB3aW5kb3cuTW9hdEFwaVJlZmVyZW5jZSA9IG51bGw7XG5cbiAgaWYgKHV0aWxpdGllcy5pc0RlZmluZWQoc2V0dGluZ3MuYWRUYWdYTUwpICYmICF1dGlsaXRpZXMuaXNGdW5jdGlvbihzZXR0aW5ncy5hZFRhZ1hNTCkpIHtcbiAgICByZXR1cm4gdHJhY2tBZEVycm9yKG5ldyBWQVNURXJyb3IoJ29uIFZpZGVvSlMgVkFTVCBwbHVnaW4sIHRoZSBwYXNzZWQgYWRUYWdYTUwgb3B0aW9uIGRvZXMgbm90IGNvbnRhaW4gYSBmdW5jdGlvbicpKTtcbiAgfVxuXG4gIGlmICghdXRpbGl0aWVzLmlzRGVmaW5lZChzZXR0aW5ncy5hZFRhZ1VybCkgJiYgIXV0aWxpdGllcy5pc0Z1bmN0aW9uKHNldHRpbmdzLmFkVGFnWE1MKSkge1xuICAgIHJldHVybiB0cmFja0FkRXJyb3IobmV3IFZBU1RFcnJvcignb24gVmlkZW9KUyBWQVNUIHBsdWdpbiwgbWlzc2luZyBhZFRhZ1VybCBvbiBvcHRpb25zIG9iamVjdCcpKTtcbiAgfVxuXG4gIGxvZ2dlci5zZXRWZXJib3NpdHkoc2V0dGluZ3MudmVyYm9zaXR5KTtcblxuICBpZiAoIXNldHRpbmdzLnBsYXlzSW5CcmVhaykge1xuXHQgIHNuYXBzaG90ID0gcGxheWVyVXRpbHMuZ2V0UGxheWVyU25hcHNob3QocGxheWVyKTtcblx0ICBzbmFwc2hvdC5wbGF5aW5nID0gdHJ1ZTtcdC8vIGZvcmNlIHRvIHBsYXkgY29udGVudCBhZnRlciBhZCBlbmRlZFxuICB9XG5cbiAgaWYgKHNldHRpbmdzLmluaXRpYWxQbGF5YmFjayA9PT0gJ2NsaWNrJykge1xuXHQgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgdHJ1ZSk7XG4gIH1cblxuICBwbGF5ZXJVdGlscy5wcmVwYXJlRm9yQWRzKHBsYXllcik7XG5cbiAgaWYgKHNldHRpbmdzLnBsYXlBZEFsd2F5cykge1xuICAgIC8vIE5vIG1hdHRlciB3aGF0IGhhcHBlbnMgd2UgcGxheSBhIG5ldyBhZCBiZWZvcmUgdGhlIHVzZXIgc2VlcyB0aGUgdmlkZW8gYWdhaW4uXG4gICAgcGxheWVyLm9uKCd2YXN0LmNvbnRlbnRFbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGxheWVyLnRyaWdnZXIoJ3Zhc3QucmVzZXQnKTtcbiAgICAgIH0sIDApO1xuICAgIH0pO1xuICB9XG5cbiAgcGxheWVyLm9uKCd2YXN0LmZpcnN0UGxheScsIHRyeVRvUGxheVByZXJvbGxBZCk7XG5cbiAgcGxheWVyLm9uKCd2YXN0LnJlc2V0JywgZnVuY3Rpb24gKCkge1xuICAgIC8vIElmIHdlIGFyZSByZXNldGluZyB0aGUgcGx1Z2luLCB3ZSBkb24ndCB3YW50IHRvIHJlc3RvcmUgdGhlIGNvbnRlbnRcbiAgICBzbmFwc2hvdCA9IG51bGw7XG4gICAgY2FuY2VsQWRzKCk7XG4gIH0pO1xuXG4gIHBsYXllci52YXN0ID0ge1xuICAgIGlzRW5hYmxlZDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHNldHRpbmdzLmFkc0VuYWJsZWQ7XG4gICAgfSxcblxuICAgIGVuYWJsZTogZnVuY3Rpb24gKCkge1xuICAgICAgc2V0dGluZ3MuYWRzRW5hYmxlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIGRpc2FibGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldHRpbmdzLmFkc0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHBsYXllci52YXN0O1xuXG4gIC8vICoqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cbiAgZnVuY3Rpb24gdHJ5VG9QbGF5UHJlcm9sbEFkICgpIHtcbiAgICAvLyBtYWtlIHN1cmUgd2UgYXJlIGdvaW5nIHRvIHVzZSBzYW1lIHBsdWdpbiBpbnN0YW5jZSB0d2ljZVxuICAgIHBsYXllci5vZmYoJ3Zhc3QuZmlyc3RQbGF5JywgdHJ5VG9QbGF5UHJlcm9sbEFkKTtcblxuICAgIGlmIChwbGF5ZXIudmFzdC5hZHNDYW5jZWxsZWQpIHtcbiAgICAgIGRlbGV0ZSBwbGF5ZXIudmFzdC5hZHNDYW5jZWxsZWQ7XG4gICAgfVxuICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuXG4gICAgaWYgKHNldHRpbmdzLmluaXRpYWxBdWRpbyA9PT0gJ29mZicpIHtcbiAgICAgIHNldHRpbmdzLmNvbnRlbnRWb2x1bWUgPSB7bXV0ZWQ6IHBsYXllci5tdXRlZCgpLCB2b2x1bWU6IHBsYXllci52b2x1bWUoKX07XG4gICAgICBwbGF5ZXIubXV0ZWQodHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gV2UgcmVtb3ZlIHRoZSBwb3N0ZXIgdG8gcHJldmVudCBmbGlja2VyaW5nIHdoZW5ldmVyIHRoZSBjb250ZW50IHN0YXJ0cyBwbGF5aW5nXG4gICAgcGxheWVyVXRpbHMucmVtb3ZlTmF0aXZlUG9zdGVyKHBsYXllcik7XG5cbiAgICBwbGF5ZXJVdGlscy5vbmNlKHBsYXllciwgWyd2YXN0LmFkc0NhbmNlbCcsICd2YXN0LmFkRW5kJ10sIGZ1bmN0aW9uICgpIHtcbiAgICBcdHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuICAgICAgcmVtb3ZlQWRVbml0KCk7XG4gICAgICByZXN0b3JlVmlkZW9Db250ZW50KCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwbGF5ZXIudHJpZ2dlcignYWRGaW5pc2hlZCcpO1xuICAgICAgfSwgMCk7XG4gICAgfSk7XG5cbiAgICBhc3luYy53YXRlcmZhbGwoW1xuICAgICAgY2hlY2tBZHNFbmFibGVkLFxuICAgICAgcHJlcGFyZVBsYXllckZvckFkLFxuICAgICAgc3RhcnRBZENhbmNlbFRpbWVvdXQsXG4gICAgICBwbGF5UHJlcm9sbEFkXG4gICAgXSwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSkge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRyYWNrQWRFcnJvcihlcnJvciwgcmVzcG9uc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGxheWVyLnRyaWdnZXIoJ3Zhc3QuYWRFbmQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vICoqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUFkVW5pdCAoKSB7XG4gICAgICBpZiAocGxheWVyLnZhc3QgJiYgcGxheWVyLnZhc3QuYWRVbml0KSB7XG4gICAgICAgIHBsYXllci52YXN0LmFkVW5pdCA9IG51bGw7IC8vIFdlIHJlbW92ZSB0aGUgYWRVbml0XG4gICAgICAgIHBsYXllci52YXN0LlZQQUlEID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5fbW9sU2V0dGluZ3MuZmlyc3RQbGF5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzdG9yZVZpZGVvQ29udGVudCAoKSB7XG4gICAgICBzZXR1cENvbnRlbnRFdmVudHMoKTtcbiAgICAgIGlmIChzbmFwc2hvdCkge1xuICAgICAgICBwbGF5ZXJVdGlscy5yZXN0b3JlUGxheWVyU25hcHNob3QocGxheWVyLCBzbmFwc2hvdCk7XG4gICAgICAgIHNuYXBzaG90ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXR1cENvbnRlbnRFdmVudHMgKCkge1xuICAgICAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsncGxheWluZycsICd2YXN0LnJlc2V0JywgJ3Zhc3QuZmlyc3RQbGF5J10sIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgaWYgKGV2dC50eXBlICE9PSAncGxheWluZycpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5ZXIudHJpZ2dlcigndmFzdC5jb250ZW50U3RhcnQnKTtcblxuICAgICAgICBwbGF5ZXJVdGlscy5vbmNlKHBsYXllciwgWydlbmRlZCcsICd2YXN0LnJlc2V0JywgJ3Zhc3QuZmlyc3RQbGF5J10sIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdlbmRlZCcpIHtcbiAgICAgICAgICAgIHBsYXllci50cmlnZ2VyKCd2YXN0LmNvbnRlbnRFbmQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tBZHNFbmFibGVkIChuZXh0KSB7XG4gICAgICBpZiAoc2V0dGluZ3MuYWRzRW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gbmV4dChudWxsKTtcbiAgICAgIH1cbiAgICAgIG5leHQobmV3IFZBU1RFcnJvcignQWRzIGFyZSBub3QgZW5hYmxlZCcpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmVwYXJlUGxheWVyRm9yQWQgKG5leHQpIHtcbiAgICAgIGlmIChjYW5QbGF5UHJlcm9sbEFkKCkpIHtcbiAgICAgICAgLy8gc25hcHNob3QgPSBwbGF5ZXJVdGlscy5nZXRQbGF5ZXJTbmFwc2hvdChwbGF5ZXIpO1xuICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgYWRkU3Bpbm5lckljb24oKTtcblxuICAgICAgICBpZiAocGxheWVyLnBhdXNlZCgpKSB7XG4gICAgICAgICAgbmV4dChudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwbGF5ZXJVdGlscy5vbmNlKHBsYXllciwgWydwbGF5aW5nJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHBsYXllci5wYXVzZSgpO1xuICAgICAgICAgICAgbmV4dChudWxsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dChuZXcgVkFTVEVycm9yKCd2aWRlbyBjb250ZW50IGhhcyBiZWVuIHBsYXlpbmcgYmVmb3JlIHByZXJvbGwgYWQnKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuUGxheVByZXJvbGxBZCAoKSB7XG4gICAgICByZXR1cm4gIXV0aWxpdGllcy5pc0lQaG9uZSgpIHx8IHBsYXllci5jdXJyZW50VGltZSgpIDw9IHNldHRpbmdzLmlvc1ByZXJvbGxDYW5jZWxUaW1lb3V0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0YXJ0QWRDYW5jZWxUaW1lb3V0IChuZXh0KSB7XG4gICAgICB2YXIgYWRDYW5jZWxUaW1lb3V0SWQ7XG4gICAgICBhZHNDYW5jZWxlZCA9IGZhbHNlO1xuXG4gICAgICBhZENhbmNlbFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgIFx0ICBhZENhbmNlbFRpbWVvdXRJZCA9IG51bGw7XG4gICAgICAgIHRyYWNrQWRFcnJvcihuZXcgVkFTVEVycm9yKCd0aW1lb3V0IHdoaWxlIHdhaXRpbmcgZm9yIHRoZSB2aWRlbyB0byBzdGFydCBwbGF5aW5nLiBZb3UgbWF5IG5lZWQgdG8gaW5jcmVhc2UgYWRTdGFydFRpbWVvdXQuJywgNDAyKSk7XG4gICAgICAgIHBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uKHBsYXllciwgZmFsc2UpO1xuICAgICAgICBpZiAocGxheWVyLnZhc3QuVlBBSUQpIHtcbiAgICAgICAgXHRwbGF5ZXIudHJpZ2dlcigndnBhaWQuYWRFbmQnKTtcbiAgICAgICAgfVxuICAgICAgfSwgc2V0dGluZ3MuYWRDYW5jZWxUaW1lb3V0KTtcblxuICAgICAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsndmFzdC5hZFN0YXJ0JywgJ3Zhc3QuYWRzQ2FuY2VsJywgJ2NsZWFyQWRDYW5jZWxUaW1lb3V0J10sIGNsZWFyQWRDYW5jZWxUaW1lb3V0KTtcbiAgICAgIHBsYXllclV0aWxzLm9uY2UocGxheWVyLCBbJ3Zhc3QuYWRFcnJvcicsICd2cGFpZC5hZEVuZCcsICd2cGFpZC5hZEVycm9yJ10sIGZ1bmN0aW9uICgpIHtcbiAgICBcdCAgY2xlYXJBZENhbmNlbFRpbWVvdXQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gICAgICBmdW5jdGlvbiBjbGVhckFkQ2FuY2VsVGltZW91dCAoKSB7XG4gICAgICAgIGlmIChhZENhbmNlbFRpbWVvdXRJZCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChhZENhbmNlbFRpbWVvdXRJZCk7XG4gICAgICAgICAgYWRDYW5jZWxUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5leHQobnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkU3Bpbm5lckljb24gKCkge1xuICAgICAgZG9tLmFkZENsYXNzKHBsYXllci5lbCgpLCAndmpzLXZhc3QtYWQtbG9hZGluZycpO1xuICAgICAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsndmFzdC5hZFN0YXJ0JywgJ3Zhc3QuYWRzQ2FuY2VsJ10sIHJlbW92ZVNwaW5uZXJJY29uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVTcGlubmVySWNvbiAoKSB7XG4gICAgICAvLyBJTVBPUlRBTlQgTk9URTogV2UgcmVtb3ZlIHRoZSBzcGlubmVySWNvbiBhc3luY2hyb25vdXNseSB0byBnaXZlIHRpbWUgdG8gdGhlIGJyb3dzZXIgdG8gc3RhcnQgdGhlIHZpZGVvLlxuICAgICAgLy8gSWYgd2UgcmVtb3ZlIGl0IHN5bmNocm9ub3VzbHkgd2Ugc2VlIGEgZmxhc2ggb2YgdGhlIGNvbnRlbnQgdmlkZW8gYmVmb3JlIHRoZSBhZCBzdGFydHMgcGxheWluZy5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBkb20ucmVtb3ZlQ2xhc3MocGxheWVyLmVsKCksICd2anMtdmFzdC1hZC1sb2FkaW5nJyk7XG4gICAgICAgIC8vIFZJRExBLTIyNjggKFNhZmFyaSAxMSBvbiBNYWMgLSBTcGlubmVyIGtlZXBzIGdvaW5nIG9uIGZpcnN0IGZyYW1lIG9mIGFkKVxuXHRcdHBsYXllci5sb2FkaW5nU3Bpbm5lci5lbF8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH0sIDEwMCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWxBZHMgKCkge1xuICAgIHBsYXllci50cmlnZ2VyKCd2YXN0LmFkc0NhbmNlbCcpO1xuICAgIGFkc0NhbmNlbGVkID0gdHJ1ZTtcbiAgICBpZiAocGxheWVyLnZhc3QpIHtcbiAgICAgIHBsYXllci52YXN0LmFkc0NhbmNlbGxlZCA9IHRydWU7ICAgIC8vIFNldCBhIGZsYWcgdG8gaW50ZXJydXB0IHRoZSBhZCBsb2FkaW5nIHdhdGVyZmFsbCAtIG5lZWRlZCB0byBhdm9pZCBhIHJhY2UgY29uZGl0aW9uIHdoZXJlIHRoZSBhZCBjb3VsZCBzdGlsbCBwbGF5IGFmdGVyIGJlaW5nIGNhbmNlbGxlZC5cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5UHJlcm9sbEFkIChjYWxsYmFjaykge1xuICAgIGFzeW5jLndhdGVyZmFsbChbXG4gICAgICBnZXRWYXN0UmVzcG9uc2UsXG4gICAgICBwbGF5QWRcbiAgICBdLCBjYWxsYmFjayk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYXN0UmVzcG9uc2UgKGNhbGxiYWNrKSB7XG4gICAgdmFzdC5nZXRWQVNUUmVzcG9uc2Uoc2V0dGluZ3MuYWRUYWdVcmwgPyBzZXR0aW5ncy5hZFRhZ1VybCgpIDogc2V0dGluZ3MuYWRUYWdYTUwsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXlBZCAodmFzdFJlc3BvbnNlLCBjYWxsYmFjaykge1xuICAgIC8vIFRPRE86IEZpbmQgYSBiZXR0ZXIgd2F5IHRvIHN0b3AgdGhlIHBsYXkuIFRoZSAncGxheVByZXJvbGxXYXRlcmZhbGwnIGVuZHMgaW4gYW4gaW5jb25zaXN0ZW50IHNpdHVhdGlvblxuICAgIC8vIElmIHRoZSBzdGF0ZSBpcyBub3QgJ3ByZXJvbGw/JyBpdCBtZWFucyB0aGUgYWRzIHdlcmUgY2FuY2VsZWQgdGhlcmVmb3JlLCB3ZSBicmVhayB0aGUgd2F0ZXJmYWxsXG4gICAgaWYgKGFkc0NhbmNlbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyogQ29weXJpZ2h0IChjKSAyMDExLTIwMTYgTW9hdCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgZnVuY3Rpb24gaW5pdE1vYXRUcmFja2luZyAoYSxjLGQsaCxrKXt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGI9W107Yz17YWREYXRhOntpZHM6YyxkdXJhdGlvbjpkLHVybDprfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3RoaXMuc2VuZEV2ZW50PyhiJiYoYi5wdXNoKGEpLGE9YixiPSExKSx0aGlzLnNlbmRFdmVudChhKSk6Yi5wdXNoKGEpO319O2Q9XCJfbW9hdEFwaVwiK01hdGguZmxvb3IoMUU4Kk1hdGgucmFuZG9tKCkpO3ZhciBlLGc7dHJ5e2U9YS5vd25lckRvY3VtZW50LGc9ZS5kZWZhdWx0Vmlld3x8ZS5wYXJlbnRXaW5kb3c7fWNhdGNoKGwpe2U9ZG9jdW1lbnQsZz13aW5kb3c7fWdbZF09YztmLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjthJiZhLmluc2VydEJlZm9yZShmLGEuY2hpbGROb2Rlc1swXXx8bnVsbCk7Zi5zcmM9XCJodHRwczovL3oubW9hdGFkcy5jb20vXCIraCtcIi9tb2F0dmlkZW8uanMjXCIrZDtyZXR1cm4gYzt9XG4gICAgd2luZG93Lk1vYXRBcGlSZWZlcmVuY2UgPSBudWxsO1xuICAgIGlmICh2YXN0UmVzcG9uc2UuYWRzICYmIHZhc3RSZXNwb25zZS5hZHMubGVuZ3RoID4gMCAmJiB2YXN0UmVzcG9uc2UuYWRzWzBdLmluTGluZSAmJiB2YXN0UmVzcG9uc2UuYWRzWzBdLmluTGluZS5tb2F0KSB7XG4gIFx0ICB2YXIgaWRzID0ge2xldmVsMTogdmFzdFJlc3BvbnNlLmFkc1swXS5pbkxpbmUubW9hdC5hZHZpZCxcbiAgXHRcdFx0ICAgICBsZXZlbDI6IHZhc3RSZXNwb25zZS5hZHNbMF0uaW5MaW5lLm1vYXQuY3BnaWQsXG4gIFx0XHRcdCAgICAgbGV2ZWwzOiB2YXN0UmVzcG9uc2UuYWRzWzBdLmluTGluZS5tb2F0LmNwaWQsXG4gIFx0XHRcdCAgICAgbGV2ZWw0OiB2YXN0UmVzcG9uc2UuYWRzWzBdLmluTGluZS5tb2F0LmNyaWR9O1xuICBcdCAgaWYgKHZhc3RSZXNwb25zZS5hZHNbMF0uaW5MaW5lLm1vYXQuc2l0ZV9pZCkge1xuICBcdFx0ICBpZHMuc2xpY2VyMSA9IHZhc3RSZXNwb25zZS5hZHNbMF0uaW5MaW5lLm1vYXQuc2l0ZV9pZDtcbiAgXHQgIH1cbiAgXHQgIHdpbmRvdy5Nb2F0QXBpUmVmZXJlbmNlID0gaW5pdE1vYXRUcmFja2luZyhwbGF5ZXIuZWxfLCBpZHMsIHBsYXllci5kdXJhdGlvbigpLCB2YXN0UmVzcG9uc2UuYWRzWzBdLmluTGluZS5tb2F0LnBhcnRuZXJjb2RlLCBwbGF5ZXIuY3VycmVudFNvdXJjZSgpLnNyYyk7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuX21vbFNldHRpbmdzLnZpZXdhYmlsaXR5VHJhY2tpbmcpIHtcbiAgXHQgIHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHlUcmFja2luZy5pbml0KHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHkuY29udGV4dElkLFxuICBcdFx0XHQgIHBsYXllci5kdXJhdGlvbigpLCBwbGF5ZXIuZWxfLm9mZnNldFdpZHRoLCBwbGF5ZXIuZWxfLm9mZnNldEhlaWdodCk7XG4gICAgfVxuXG4gICAgdmFyIGlzQWRWUEFJRCAgPSBpc1ZQQUlEKHZhc3RSZXNwb25zZSk7XG4gICAgdmFyIGFkSW50ZWdyYXRvciA9IGlzQWRWUEFJRCA/IG5ldyBWUEFJREludGVncmF0b3IocGxheWVyLCBzZXR0aW5ncykgOiBuZXcgVkFTVEludGVncmF0b3IocGxheWVyKTtcbiAgICB2YXIgYWRGaW5pc2hlZCA9IGZhbHNlO1xuICAgIGlmIChpc0FkVlBBSUQpIHtcbiAgICBcdHBsYXllci50cmlnZ2VyKCdjbGVhckFkQ2FuY2VsVGltZW91dCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIFZJRExBLTQ2MjYgLSBuZWVkIHRoaXMgZW50cnktcG9pbnQgdG8gdHJhY2sgYWQgc3RhcnQgdGltZW91dCBlcnJvciBmb3IgbWVkaWEgKG5vdCBWUEFJRCkgYWRcbiAgICAgIHBsYXllci52YXN0LnRyYWNrRXJyb3IgPSBhZEludGVncmF0b3IuX3RyYWNrRXJyb3I7XG4gICAgfVxuXG4gICAgcGxheWVyVXRpbHMub25jZShwbGF5ZXIsIFsndmFzdC5hZFN0YXJ0JywgJ3Zhc3QuYWRzQ2FuY2VsJ10sIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGlmIChldnQudHlwZSA9PT0gJ3Zhc3QuYWRTdGFydCcpIHtcbiAgICAgICAgYWRkQWRzTGFiZWwoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHBsYXllclV0aWxzLm9uY2UocGxheWVyLCBbJ3Zhc3QuYWRFbmQnLCAndmFzdC5hZHNDYW5jZWwnXSwgcmVtb3ZlQWRzTGFiZWwpO1xuXG4gICAgaWYgKHV0aWxpdGllcy5pc0lEZXZpY2UoKSkge1xuICAgICAgcHJldmVudE1hbnVhbFByb2dyZXNzKCk7XG4gICAgfVxuXG4gICAgcGxheWVyLnZhc3QudmFzdFJlc3BvbnNlID0gdmFzdFJlc3BvbnNlO1xuICAgIGxvZ2dlci5kZWJ1ZygnY2FsbGluZyBhZEludGVncmF0b3IucGxheUFkKCkgd2l0aCB2YXN0UmVzcG9uc2U6JywgdmFzdFJlc3BvbnNlKTtcbiAgICBwbGF5ZXIudmFzdC5hZFVuaXQgPSBhZEludGVncmF0b3IucGxheUFkKHZhc3RSZXNwb25zZSwgY2FsbGJhY2spO1xuICAgIHBsYXllci52YXN0LlZQQUlEID0gaXNBZFZQQUlEO1xuXG4gICAgdmFyIGFkSWNvbkludGVncmF0b3I7XG5cbiAgICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gICAgZnVuY3Rpb24gYWRkQWRzTGFiZWwgKCkge1xuICAgIFx0aWYgKHdpbmRvdy5fbW9sU2V0dGluZ3MucGxheXNJbkJyZWFrKSB7XG4gICAgXHRcdHBsYXllci5vbigndGltZXVwZGF0ZScsIHVwZGF0ZVRpbWVDb250cm9scyk7XG4gICAgXHR9XG4gICAgICBpZiAoYWRGaW5pc2hlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh2YXN0UmVzcG9uc2UuaWNvbnMgJiYgdmFzdFJlc3BvbnNlLmljb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWRJY29uSW50ZWdyYXRvciA9IG5ldyBJY29uSW50ZWdyYXRvcihwbGF5ZXIpO1xuICAgICAgICBhZEljb25JbnRlZ3JhdG9yLnJlbmRlckljb25zKHZhc3RSZXNwb25zZS5pY29ucywgY2FsbGJhY2spO1xuICAgICAgfVxuXG4gICAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd2anMtbmV4dC1idXR0b24nKTtcbiAgICAgIGlmIChlbGVtcyAmJiBlbGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBsYXlsaXN0TmV4dEJ1dHRvbiA9IGVsZW1zWzBdO1xuICAgICAgICBwbGF5bGlzdE5leHRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVBZHNMYWJlbCAoKSB7XG4gICAgXHRpZiAod2luZG93Ll9tb2xTZXR0aW5ncy5wbGF5c0luQnJlYWspIHtcbiAgICBcdFx0cGxheWVyLm9mZigndGltZXVwZGF0ZScsIHVwZGF0ZVRpbWVDb250cm9scyk7XG4gICAgXHRcdGlmICh3aW5kb3cuX21vbFNldHRpbmdzLnRpbWVPZmZzZXQpIHtcbiAgICAgICAgICBzaG93T3JpZ2luYWxUaW1lRGlzcGxheSh0cnVlKTtcbiAgICAgICAgICB2YXIgYmNUaW1lRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiY190aW1lX2Rpc3BsYXknKTtcbiAgICAgICAgICBpZiAoYmNUaW1lRGlzcGxheSkge1xuICAgICAgICAgICAgYmNUaW1lRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIH1cbiAgICBcdFx0fVxuICAgIFx0fVxuICAgICAgaWYgKHBsYXlsaXN0TmV4dEJ1dHRvbikge1xuICAgICAgICBwbGF5bGlzdE5leHRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICBwbGF5bGlzdE5leHRCdXR0b24gPSBudWxsO1xuICAgICAgfVxuICAgICAgYWRGaW5pc2hlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd09yaWdpbmFsVGltZURpc3BsYXkgKHNob3cpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHBsYXllci5jb250cm9sQmFyLmdldENoaWxkKCdjdXJyZW50VGltZURpc3BsYXknKS5lbF8uY2hpbGRyZW47XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbltpXS5pZCAhPSAnYmNfdGltZV9kaXNwbGF5Jykge1xuICAgICAgICAgIGNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSBzaG93ID8gJycgOiAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lQ29udHJvbHMgKCkge1xuICAgIFx0dmFyIGNvbnZlcnRUaW1lVG9TdHIgPSBmdW5jdGlvbiAodGltZSkge1xuICAgIFx0XHR2YXIgc2VjcyA9IHBhcnNlSW50KHRpbWUgKyAwLjUpO1xuICAgIFx0XHR2YXIgbWlucyA9IHBhcnNlSW50KHNlY3MgLyA2MCk7XG4gICAgXHRcdHNlY3MgLT0gKG1pbnMgKiA2MCk7XG4gICAgXHRcdHZhciBzdHIgPSBtaW5zLnRvU3RyaW5nKCkgKyAnOicgKyAoc2VjcyA+IDkgPyAnJyAgOiAnMCcpICsgc2Vjcy50b1N0cmluZygpO1xuICAgIFx0XHRyZXR1cm4gc3RyO1xuICAgIFx0fTtcblxuICAgICAgaWYgKHdpbmRvdy5fbW9sU2V0dGluZ3MuYnJlYWtEdXJhdGlvbikge1xuICAgICAgICBpZiAocGxheWVyLmR1cmF0aW9uKCkgIT0gd2luZG93Ll9tb2xTZXR0aW5ncy5icmVha0R1cmF0aW9uKSB7XG4gICAgICAgICAgaWYgKHBsYXllci5kdXJhdGlvbigpKSB7XG4gICAgICAgICAgICB3aW5kb3cuX21vbFNldHRpbmdzLnJlYWxWaWRlb0R1cmF0aW9uID0gcGxheWVyLmR1cmF0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBsYXllci5kdXJhdGlvbih3aW5kb3cuX21vbFNldHRpbmdzLmJyZWFrRHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAod2luZG93Ll9tb2xTZXR0aW5ncy50aW1lT2Zmc2V0KSB7XG4gICAgICAgIHZhciBiY1RpbWVEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JjX3RpbWVfZGlzcGxheScpO1xuICAgICAgICBpZiAoIWJjVGltZURpc3BsYXkpIHtcbiAgICAgICAgICBiY1RpbWVEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgcGxheWVyLmNvbnRyb2xCYXIuZ2V0Q2hpbGQoJ2N1cnJlbnRUaW1lRGlzcGxheScpLmVsXy5hcHBlbmRDaGlsZChiY1RpbWVEaXNwbGF5KTtcbiAgICAgICAgICBiY1RpbWVEaXNwbGF5LmlkID0gJ2JjX3RpbWVfZGlzcGxheSc7XG4gICAgICAgICAgYmNUaW1lRGlzcGxheS5jbGFzcyA9ICd2anMtY3VycmVudC10aW1lLWRpc3BsYXknO1xuICAgICAgICAgIGJjVGltZURpc3BsYXlbJ2FyaWEtbGl2ZSddID0gJ29mZic7XG4gICAgICAgICAgYmNUaW1lRGlzcGxheS5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+PC9zcGFuPjA6MDAnO1xuICAgICAgICAgIHNob3dPcmlnaW5hbFRpbWVEaXNwbGF5KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBzaG93T3JpZ2luYWxUaW1lRGlzcGxheShmYWxzZSk7XG4gICAgICAgICAgYmNUaW1lRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGltZSA9IHBsYXllci5jdXJyZW50VGltZSgpICsgd2luZG93Ll9tb2xTZXR0aW5ncy50aW1lT2Zmc2V0O1xuICAgICAgICBiY1RpbWVEaXNwbGF5LmNoaWxkTm9kZXNbMV0ubm9kZVZhbHVlID0gY29udmVydFRpbWVUb1N0cih0aW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmV2ZW50TWFudWFsUHJvZ3Jlc3MgKCkge1xuICAgICAgLy8gSU9TIHZpZGVvIGNsb2NrIGlzIHZlcnkgdW5yZWxpYWJsZSBhbmQgd2UgbmVlZCBhIDMgc2Vjb25kcyB0aHJlc2hvbGQgdG8gZW5zdXJlIHRoYXQgdGhlIHVzZXIgZm9yd2FyZGVkL3Jld291bmQgdGhlIGFkXG4gICAgICB2YXIgUFJPR1JFU1NfVEhSRVNIT0xEID0gMztcbiAgICAgIHZhciBwcmV2aW91c1RpbWUgPSAwO1xuICAgICAgdmFyIHNraXBhZF9hdHRlbXB0cyA9IDA7XG5cbiAgICAgIHBsYXllci5vbigndGltZXVwZGF0ZScsIHByZXZlbnRBZFNlZWspO1xuICAgICAgcGxheWVyLm9uKCdlbmRlZCcsIHByZXZlbnRBZFNraXApO1xuXG4gICAgICBwbGF5ZXJVdGlscy5vbmNlKHBsYXllciwgWyd2YXN0LmFkRW5kJywgJ3Zhc3QuYWRzQ2FuY2VsJywgJ3Zhc3QuYWRFcnJvciddLCBzdG9wUHJldmVudE1hbnVhbFByb2dyZXNzKTtcblxuICAgICAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICAgICAgZnVuY3Rpb24gcHJldmVudEFkU2tpcCAoKSB7XG4gICAgICAgIC8vIElnbm9yZSBlbmRlZCBldmVudCBpZiB0aGUgQWQgdGltZSB3YXMgbm90ICduZWFyJyB0aGUgZW5kXG4gICAgICAgIC8vIGFuZCByZXZlcnQgdGltZSB0byB0aGUgcHJldmlvdXMgJ3ZhbGlkJyB0aW1lXG4gICAgICAgIGlmICgocGxheWVyLmR1cmF0aW9uKCkgLSBwcmV2aW91c1RpbWUpID4gUFJPR1JFU1NfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgcGxheWVyLnBhdXNlKHRydWUpOyAvLyB0aGlzIHJlZHVjZSB0aGUgdmlkZW8gaml0dGVyIGlmIHRoZSBJT1Mgc2tpcCBidXR0b24gaXMgcHJlc3NlZFxuICAgICAgICAgIHBsYXllci5wbGF5KHRydWUpOyAvLyB3ZSBuZWVkIHRvIHRyaWdnZXIgdGhlIHBsYXkgdG8gcHV0IHRoZSB2aWRlbyBlbGVtZW50IGJhY2sgaW4gYSB2YWxpZCBzdGF0ZVxuICAgICAgICAgIHBsYXllci5jdXJyZW50VGltZShwcmV2aW91c1RpbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHByZXZlbnRBZFNlZWsgKCkge1xuICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBwbGF5ZXIuY3VycmVudFRpbWUoKTtcbiAgICAgICAgdmFyIHByb2dyZXNzRGVsdGEgPSBNYXRoLmFicyhjdXJyZW50VGltZSAtIHByZXZpb3VzVGltZSk7XG4gICAgICAgIGlmIChwcm9ncmVzc0RlbHRhID4gUFJPR1JFU1NfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgc2tpcGFkX2F0dGVtcHRzICs9IDE7XG4gICAgICAgICAgaWYgKHNraXBhZF9hdHRlbXB0cyA+PSAyKSB7XG4gICAgICAgICAgICBwbGF5ZXIucGF1c2UodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBsYXllci5jdXJyZW50VGltZShwcmV2aW91c1RpbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByZXZpb3VzVGltZSA9IGN1cnJlbnRUaW1lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHN0b3BQcmV2ZW50TWFudWFsUHJvZ3Jlc3MgKCkge1xuICAgICAgICBwbGF5ZXIub2ZmKCd0aW1ldXBkYXRlJywgcHJldmVudEFkU2Vlayk7XG4gICAgICAgIHBsYXllci5vZmYoJ2VuZGVkJywgcHJldmVudEFkU2tpcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJhY2tBZEVycm9yIChlcnJvciwgdmFzdFJlc3BvbnNlKSB7XG4gICAgcGxheWVyLnRyaWdnZXIoe3R5cGU6ICd2YXN0LmFkRXJyb3InLCBlcnJvcjogZXJyb3J9KTtcbiAgICBsb2dnZXIuZXJyb3IoJ0FEIEVSUk9SOicsIGVycm9yLm1lc3NhZ2UsIGVycm9yLCB2YXN0UmVzcG9uc2UpO1xuICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlID09PSA0MDIpIHtcbiAgICAgIC8vIHdlIGNhcmUgb25seSBhZCBzdGFydCB0aW1lb3V0IGVycm9yLCBhbGwgb3RoZXIgZXJyb3JzIHdpbGwgdHJhY2sgaW4gVkFTVCBpbnRlZ3JhdG9yXG4gICAgICBpZiAocGxheWVyLnZhc3QgJiYgcGxheWVyLnZhc3QudHJhY2tFcnJvcikge1xuICAgICAgICBwbGF5ZXIudmFzdC50cmFja0Vycm9yKGVycm9yLCBwbGF5ZXIudmFzdC52YXN0UmVzcG9uc2UpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdXQVJOSU5HOiBDYW5ub3QgdHJhY2sgYWQgc3RhcnQgdGltZW91dCBlcnJvciBiZWNhdXNlIFZBU1QgWE1MIGlzIG5vdCBwYXJzZWQgeWV0Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhbmNlbEFkcygpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNWUEFJRCAodmFzdFJlc3BvbnNlKSB7XG4gICAgdmFyIGksIGxlbjtcbiAgICB2YXIgbWVkaWFGaWxlcyA9IHZhc3RSZXNwb25zZS5tZWRpYUZpbGVzO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IG1lZGlhRmlsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmICh2YXN0VXRpbC5pc1ZQQUlEKG1lZGlhRmlsZXNbaV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/plugin/videojs.vast.vpaid.js\n");

/***/ }),

/***/ "./src/scripts/utils/anVideoViewability.js":
/*!*************************************************!*\
  !*** ./src/scripts/utils/anVideoViewability.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Viewability Wrapper\n */\n\n// var ANVideoViewabilityTracker = require('an-video-viewability');//viewability library\nvar ANVideoViewabilityTracker = null;\nvar logger = __webpack_require__(/*! ./consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\nvar debug = function (message) {\n    logger.debug(message);\n};\nvar info = function (message) {\n    logger.info(message);\n};\n\nvar html5VideoViewability = function (player_) {\n\n\tvar player = player_;\n    var tracker = null;\n    var mappedActions = {\n        'start': 'start',\n        'expand': 'expand',\n        'collapse': 'collapse',\n        'unmute': 'sound_on',\n        'mute': 'sound_off',\n        'pause': 'pause',\n        'resume': 'resume',\n        'ad-click': 'click',\n        'skip': 'stop',\n        'complete': 'stop',\n        'fullscreen': 'fullscreen',\n        'exitFullscreen': 'exitFullscreen'\n    };\n\n    var fireOnceEvents = {\n        'start': false,\n        'skip': false,\n        'complete': false\n    };\n\n    var getConfig = function () {\n        return window._molSettings.viewability && window._molSettings.viewability.config;\n    };\n\n    var getPlayerDOMElement = function () {\n        return player.el_;\n    };\n\n    var getVideoInfo = function (duration, width, height) {\n        return {duration: duration, w: width, h: height};\n    };\n\n\t// Using callback for logs helps getting a right logger in each app\n\tvar loggerCallback = function (_level, _message) {\n\t\tif (_level && _level === 'debug') {\n\t\t\tdebug(_message);\n\t\t} else {\n\t\t\tinfo(_message);\n\t\t}\n    };\n\n    this.init = function (contextId, duration, width, height) {\n        if (!ANVideoViewabilityTracker) {\n            return;\n        }\n        info('initialize with duration: ' + duration + ', width: ' + width + ', height: ' + height);\n        try {\n            tracker = new ANVideoViewabilityTracker(\n\t\t\t\tgetConfig(),\n                getPlayerDOMElement(),\n                getVideoInfo(duration, width, height), // The duration of the video ad\n                contextId,\n\t\t\t\tloggerCallback\n            );\n            this.isReady = true;\n        } catch (ex) {\n            debug('error on viewability library: ');\n            debug(ex);\n        }\n\n    };\n\n    this.invokeEvent = function (event_) {\n        if (!ANVideoViewabilityTracker) {\n            return;\n        }\n        if (this.isReady && event_ && mappedActions[event_]) {\n            try {\n                if (fireOnceEvents.hasOwnProperty(event_)) {\n                    if (fireOnceEvents[event_]) {\n                        info('supressing fireOnceEvents event as it is already fired once by viewability library: ' + mappedActions[event_]);\n                        return;\n                    } else {\n                        fireOnceEvents[event_] = true; // mark that the event has been fired.\n                    }\n                }\n                info('event invoked by viewability library: ' + mappedActions[event_]);\n                tracker.notifyEvent(mappedActions[event_]);\n            } catch (ex) {\n                debug('error on viewability library: ');\n                debug(ex);\n            }\n        }\n    };\n\n    this.isReady = false;\n\n\n};\n\n\nmodule.exports = html5VideoViewability;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9hblZpZGVvVmlld2FiaWxpdHkuanM/MGY2NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUEsbUVBQW1FO0FBQ25FO0FBQ0EsYUFBYSxtQkFBTyxDQUFDLDZEQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7OztBQUdBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvdXRpbHMvYW5WaWRlb1ZpZXdhYmlsaXR5LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBWaWV3YWJpbGl0eSBXcmFwcGVyXG4gKi9cblxuLy8gdmFyIEFOVmlkZW9WaWV3YWJpbGl0eVRyYWNrZXIgPSByZXF1aXJlKCdhbi12aWRlby12aWV3YWJpbGl0eScpOy8vdmlld2FiaWxpdHkgbGlicmFyeVxudmFyIEFOVmlkZW9WaWV3YWJpbGl0eVRyYWNrZXIgPSBudWxsO1xudmFyIGxvZ2dlciA9IHJlcXVpcmUoJy4vY29uc29sZUxvZ2dlcicpO1xudmFyIGRlYnVnID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBsb2dnZXIuZGVidWcobWVzc2FnZSk7XG59O1xudmFyIGluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGxvZ2dlci5pbmZvKG1lc3NhZ2UpO1xufTtcblxudmFyIGh0bWw1VmlkZW9WaWV3YWJpbGl0eSA9IGZ1bmN0aW9uIChwbGF5ZXJfKSB7XG5cblx0dmFyIHBsYXllciA9IHBsYXllcl87XG4gICAgdmFyIHRyYWNrZXIgPSBudWxsO1xuICAgIHZhciBtYXBwZWRBY3Rpb25zID0ge1xuICAgICAgICAnc3RhcnQnOiAnc3RhcnQnLFxuICAgICAgICAnZXhwYW5kJzogJ2V4cGFuZCcsXG4gICAgICAgICdjb2xsYXBzZSc6ICdjb2xsYXBzZScsXG4gICAgICAgICd1bm11dGUnOiAnc291bmRfb24nLFxuICAgICAgICAnbXV0ZSc6ICdzb3VuZF9vZmYnLFxuICAgICAgICAncGF1c2UnOiAncGF1c2UnLFxuICAgICAgICAncmVzdW1lJzogJ3Jlc3VtZScsXG4gICAgICAgICdhZC1jbGljayc6ICdjbGljaycsXG4gICAgICAgICdza2lwJzogJ3N0b3AnLFxuICAgICAgICAnY29tcGxldGUnOiAnc3RvcCcsXG4gICAgICAgICdmdWxsc2NyZWVuJzogJ2Z1bGxzY3JlZW4nLFxuICAgICAgICAnZXhpdEZ1bGxzY3JlZW4nOiAnZXhpdEZ1bGxzY3JlZW4nXG4gICAgfTtcblxuICAgIHZhciBmaXJlT25jZUV2ZW50cyA9IHtcbiAgICAgICAgJ3N0YXJ0JzogZmFsc2UsXG4gICAgICAgICdza2lwJzogZmFsc2UsXG4gICAgICAgICdjb21wbGV0ZSc6IGZhbHNlXG4gICAgfTtcblxuICAgIHZhciBnZXRDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuX21vbFNldHRpbmdzLnZpZXdhYmlsaXR5ICYmIHdpbmRvdy5fbW9sU2V0dGluZ3Mudmlld2FiaWxpdHkuY29uZmlnO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0UGxheWVyRE9NRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHBsYXllci5lbF87XG4gICAgfTtcblxuICAgIHZhciBnZXRWaWRlb0luZm8gPSBmdW5jdGlvbiAoZHVyYXRpb24sIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHtkdXJhdGlvbjogZHVyYXRpb24sIHc6IHdpZHRoLCBoOiBoZWlnaHR9O1xuICAgIH07XG5cblx0Ly8gVXNpbmcgY2FsbGJhY2sgZm9yIGxvZ3MgaGVscHMgZ2V0dGluZyBhIHJpZ2h0IGxvZ2dlciBpbiBlYWNoIGFwcFxuXHR2YXIgbG9nZ2VyQ2FsbGJhY2sgPSBmdW5jdGlvbiAoX2xldmVsLCBfbWVzc2FnZSkge1xuXHRcdGlmIChfbGV2ZWwgJiYgX2xldmVsID09PSAnZGVidWcnKSB7XG5cdFx0XHRkZWJ1ZyhfbWVzc2FnZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGluZm8oX21lc3NhZ2UpO1xuXHRcdH1cbiAgICB9O1xuXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKGNvbnRleHRJZCwgZHVyYXRpb24sIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgaWYgKCFBTlZpZGVvVmlld2FiaWxpdHlUcmFja2VyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaW5mbygnaW5pdGlhbGl6ZSB3aXRoIGR1cmF0aW9uOiAnICsgZHVyYXRpb24gKyAnLCB3aWR0aDogJyArIHdpZHRoICsgJywgaGVpZ2h0OiAnICsgaGVpZ2h0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRyYWNrZXIgPSBuZXcgQU5WaWRlb1ZpZXdhYmlsaXR5VHJhY2tlcihcblx0XHRcdFx0Z2V0Q29uZmlnKCksXG4gICAgICAgICAgICAgICAgZ2V0UGxheWVyRE9NRWxlbWVudCgpLFxuICAgICAgICAgICAgICAgIGdldFZpZGVvSW5mbyhkdXJhdGlvbiwgd2lkdGgsIGhlaWdodCksIC8vIFRoZSBkdXJhdGlvbiBvZiB0aGUgdmlkZW8gYWRcbiAgICAgICAgICAgICAgICBjb250ZXh0SWQsXG5cdFx0XHRcdGxvZ2dlckNhbGxiYWNrXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIGRlYnVnKCdlcnJvciBvbiB2aWV3YWJpbGl0eSBsaWJyYXJ5OiAnKTtcbiAgICAgICAgICAgIGRlYnVnKGV4KTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHRoaXMuaW52b2tlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnRfKSB7XG4gICAgICAgIGlmICghQU5WaWRlb1ZpZXdhYmlsaXR5VHJhY2tlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzUmVhZHkgJiYgZXZlbnRfICYmIG1hcHBlZEFjdGlvbnNbZXZlbnRfXSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyZU9uY2VFdmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnRfKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyZU9uY2VFdmVudHNbZXZlbnRfXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mbygnc3VwcmVzc2luZyBmaXJlT25jZUV2ZW50cyBldmVudCBhcyBpdCBpcyBhbHJlYWR5IGZpcmVkIG9uY2UgYnkgdmlld2FiaWxpdHkgbGlicmFyeTogJyArIG1hcHBlZEFjdGlvbnNbZXZlbnRfXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJlT25jZUV2ZW50c1tldmVudF9dID0gdHJ1ZTsgLy8gbWFyayB0aGF0IHRoZSBldmVudCBoYXMgYmVlbiBmaXJlZC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmZvKCdldmVudCBpbnZva2VkIGJ5IHZpZXdhYmlsaXR5IGxpYnJhcnk6ICcgKyBtYXBwZWRBY3Rpb25zW2V2ZW50X10pO1xuICAgICAgICAgICAgICAgIHRyYWNrZXIubm90aWZ5RXZlbnQobWFwcGVkQWN0aW9uc1tldmVudF9dKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgZGVidWcoJ2Vycm9yIG9uIHZpZXdhYmlsaXR5IGxpYnJhcnk6ICcpO1xuICAgICAgICAgICAgICAgIGRlYnVnKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblxuXG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gaHRtbDVWaWRlb1ZpZXdhYmlsaXR5O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/utils/anVideoViewability.js\n");

/***/ }),

/***/ "./src/scripts/utils/async.js":
/*!************************************!*\
  !*** ./src/scripts/utils/async.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Small subset of async\n\nvar utilities = __webpack_require__(/*! ./utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nvar async = {};\n\nasync.setImmediate = function (fn) {\n  setTimeout(fn, 0);\n};\n\nasync.iterator = function (tasks) {\n  var makeCallback = function (index) {\n    var fn = function () {\n      if (tasks.length) {\n        tasks[index].apply(null, arguments);\n      }\n      return fn.next();\n    };\n    fn.next = function () {\n      return (index < tasks.length - 1) ? makeCallback(index + 1) : null;\n    };\n    return fn;\n  };\n  return makeCallback(0);\n};\n\n\nasync.waterfall = function (tasks, callback) {\n  callback = callback || function () { };\n  if (!utilities.isArray(tasks)) {\n    var err = new Error('First argument to waterfall must be an array of functions');\n    return callback(err);\n  }\n  if (!tasks.length) {\n    return callback();\n  }\n  var wrapIterator = function (iterator) {\n    return function (err) {\n      if (err) {\n        callback.apply(null, arguments);\n        callback = function () {\n        };\n      }\n      else {\n        var args = Array.prototype.slice.call(arguments, 1);\n        var next = iterator.next();\n        if (next) {\n          args.push(wrapIterator(next));\n        }\n        else {\n          args.push(callback);\n        }\n        async.setImmediate(function () {\n          iterator.apply(null, args);\n        });\n      }\n    };\n  };\n  wrapIterator(async.iterator(tasks))();\n};\n\nasync.when = function (condition, callback) {\n  if (!utilities.isFunction(callback)) {\n    throw new Error('async.when error: missing callback argument');\n  }\n\n  var isAllowed = utilities.isFunction(condition) ? condition : function () {\n    return !!condition;\n  };\n\n  return function () {\n    var args = utilities.arrayLikeObjToArray(arguments);\n    var next = args.pop();\n\n    if (isAllowed.apply(null, args)) {\n      return callback.apply(this, arguments);\n    }\n\n    args.unshift(null);\n    return next.apply(null, args);\n  };\n};\n\nmodule.exports = async;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9hc3luYy5qcz9lMzdlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLGdCQUFnQixtQkFBTyxDQUFDLG1FQUFvQjs7QUFFNUM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3V0aWxzL2FzeW5jLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU21hbGwgc3Vic2V0IG9mIGFzeW5jXG5cbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxudmFyIGFzeW5jID0ge307XG5cbmFzeW5jLnNldEltbWVkaWF0ZSA9IGZ1bmN0aW9uIChmbikge1xuICBzZXRUaW1lb3V0KGZuLCAwKTtcbn07XG5cbmFzeW5jLml0ZXJhdG9yID0gZnVuY3Rpb24gKHRhc2tzKSB7XG4gIHZhciBtYWtlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGFza3MubGVuZ3RoKSB7XG4gICAgICAgIHRhc2tzW2luZGV4XS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZuLm5leHQoKTtcbiAgICB9O1xuICAgIGZuLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKGluZGV4IDwgdGFza3MubGVuZ3RoIC0gMSkgPyBtYWtlQ2FsbGJhY2soaW5kZXggKyAxKSA6IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gZm47XG4gIH07XG4gIHJldHVybiBtYWtlQ2FsbGJhY2soMCk7XG59O1xuXG5cbmFzeW5jLndhdGVyZmFsbCA9IGZ1bmN0aW9uICh0YXNrcywgY2FsbGJhY2spIHtcbiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7IH07XG4gIGlmICghdXRpbGl0aWVzLmlzQXJyYXkodGFza3MpKSB7XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignRmlyc3QgYXJndW1lbnQgdG8gd2F0ZXJmYWxsIG11c3QgYmUgYW4gYXJyYXkgb2YgZnVuY3Rpb25zJyk7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gIH1cbiAgaWYgKCF0YXNrcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgfVxuICB2YXIgd3JhcEl0ZXJhdG9yID0gZnVuY3Rpb24gKGl0ZXJhdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICB2YXIgbmV4dCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICBhcmdzLnB1c2god3JhcEl0ZXJhdG9yKG5leHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBhcmdzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGFzeW5jLnNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaXRlcmF0b3IuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH07XG4gIHdyYXBJdGVyYXRvcihhc3luYy5pdGVyYXRvcih0YXNrcykpKCk7XG59O1xuXG5hc3luYy53aGVuID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgY2FsbGJhY2spIHtcbiAgaWYgKCF1dGlsaXRpZXMuaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2FzeW5jLndoZW4gZXJyb3I6IG1pc3NpbmcgY2FsbGJhY2sgYXJndW1lbnQnKTtcbiAgfVxuXG4gIHZhciBpc0FsbG93ZWQgPSB1dGlsaXRpZXMuaXNGdW5jdGlvbihjb25kaXRpb24pID8gY29uZGl0aW9uIDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIWNvbmRpdGlvbjtcbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gdXRpbGl0aWVzLmFycmF5TGlrZU9ialRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICB2YXIgbmV4dCA9IGFyZ3MucG9wKCk7XG5cbiAgICBpZiAoaXNBbGxvd2VkLmFwcGx5KG51bGwsIGFyZ3MpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBhcmdzLnVuc2hpZnQobnVsbCk7XG4gICAgcmV0dXJuIG5leHQuYXBwbHkobnVsbCwgYXJncyk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jO1xuXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/utils/async.js\n");

/***/ }),

/***/ "./src/scripts/utils/consoleLogger.js":
/*!********************************************!*\
  !*** ./src/scripts/utils/consoleLogger.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _verbosity = 0;\nvar _prefix = '[Prebid-Vast-Plugin';\nvar _playerId = '';\nvar _astDebug;\n\nfunction setPlayerId (id)\n{\n  _playerId = id;\n}\n\n// determine the maximum debug level from the page URL\nfunction setDebugLevelFromPage () {\n  try {\n    // keep track of the new level\n    _astDebug = (getParameterByName('ast_debug').toLowerCase() == 'true') ? 4 : 0;\n\n    // the highest (least restrictive debug level) always wins\n    _verbosity = Math.max(_verbosity, _astDebug);\n  } catch (e) {}\n}\n\n// get a named parameter from the querystring\nfunction getParameterByName (name) {\n  // accesing window might fail at the browser level, we can't really test for it,\n  // so there are a few nested try/catch blocks here\n  try {\n    var urlToSearch = '';\n    // try checking the topmost window, and if not, use current window\n    try {\n      urlToSearch = window.top.location.search;\n    } catch (e) {\n      try {\n        urlToSearch = window.location.search;\n      } catch (e) {}\n    }\n\n    var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n    var regex = new RegExp(regexS);\n    var results = regex.exec(urlToSearch);\n    if (results === null) {\n      return '';\n    }\n    return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n  } catch (e) {\n    return '';\n  }\n}\n\nfunction setVerbosity (v)\n{\n  // the highest (least restrictive debug level) always wins\n    _verbosity = Math.max(v, _verbosity);\n}\n\nfunction getCurrentTimeString () {\n  var dateToReturn = '';\n  try {\n    var curDate = new Date();\n    dateToReturn = curDate.getHours() + ':' + curDate.getMinutes() + ':' + curDate.getSeconds() + '.' + curDate.getMilliseconds();\n  } catch (e) {}\n  return dateToReturn;\n}\n\nfunction handleMsg (method, args)\n{\n    var messagePrefix = _prefix;\n    if ((args.length) > 0 && (typeof args[0] === 'string'))\n    {\n      if (_playerId && _playerId.length > 0) {\n        messagePrefix += ('-' + _playerId);\n      }\n      messagePrefix += ']';\n      messagePrefix += '[' + getCurrentTimeString() + ']';\n\n      args[0] = messagePrefix + args[0];\n    }\n\n    if (method.apply)\n    {\n        method.apply(console, Array.prototype.slice.call(args));\n    }\n    else\n    {\n        method(Array.prototype.slice.call(args));\n    }\n}\n\nfunction debug ()\n{\n    if (_verbosity < 4)\n    {\n        return;\n    }\n\n    if (typeof console.debug === 'undefined')\n    {\n        // IE 10 doesn't have a console.debug() function\n        handleMsg(console.log, arguments);\n    }\n    else\n    {\n        handleMsg(console.debug, arguments);\n    }\n}\n\nfunction log ()\n{\n    if (_verbosity < 3)\n    {\n        return;\n    }\n\n    handleMsg(console.log, arguments);\n}\n\nfunction info ()\n{\n    if (_verbosity < 2)\n    {\n        return;\n    }\n\n    handleMsg(console.info, arguments);\n}\n\n\nfunction warn ()\n{\n    if (_verbosity < 1)\n    {\n        return;\n    }\n\n    handleMsg(console.warn, arguments);\n}\n\nfunction error ()\n{\n    handleMsg(console.error, arguments);\n}\n\nvar consoleLogger = {\n    setPlayerId: setPlayerId,\n    setVerbosity: setVerbosity,\n    debug: debug,\n    log: log,\n    info: info,\n    warn: warn,\n    error: error\n};\n\nif ((typeof (console) === 'undefined') || !console.log)\n{\n    // no console available; make functions no-op\n    consoleLogger.debug = function () {};\n    consoleLogger.log = function () {};\n    consoleLogger.info = function () {};\n    consoleLogger.warn = function () {};\n    consoleLogger.error = function () {};\n}\n\nmodule.exports = consoleLogger;\n\n// look in the query string for debug level\nsetDebugLevelFromPage();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zb2xlTG9nZ2VyLmpzPzMzZTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc29sZUxvZ2dlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF92ZXJib3NpdHkgPSAwO1xudmFyIF9wcmVmaXggPSAnW1ByZWJpZC1WYXN0LVBsdWdpbic7XG52YXIgX3BsYXllcklkID0gJyc7XG52YXIgX2FzdERlYnVnO1xuXG5mdW5jdGlvbiBzZXRQbGF5ZXJJZCAoaWQpXG57XG4gIF9wbGF5ZXJJZCA9IGlkO1xufVxuXG4vLyBkZXRlcm1pbmUgdGhlIG1heGltdW0gZGVidWcgbGV2ZWwgZnJvbSB0aGUgcGFnZSBVUkxcbmZ1bmN0aW9uIHNldERlYnVnTGV2ZWxGcm9tUGFnZSAoKSB7XG4gIHRyeSB7XG4gICAgLy8ga2VlcCB0cmFjayBvZiB0aGUgbmV3IGxldmVsXG4gICAgX2FzdERlYnVnID0gKGdldFBhcmFtZXRlckJ5TmFtZSgnYXN0X2RlYnVnJykudG9Mb3dlckNhc2UoKSA9PSAndHJ1ZScpID8gNCA6IDA7XG5cbiAgICAvLyB0aGUgaGlnaGVzdCAobGVhc3QgcmVzdHJpY3RpdmUgZGVidWcgbGV2ZWwpIGFsd2F5cyB3aW5zXG4gICAgX3ZlcmJvc2l0eSA9IE1hdGgubWF4KF92ZXJib3NpdHksIF9hc3REZWJ1Zyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59XG5cbi8vIGdldCBhIG5hbWVkIHBhcmFtZXRlciBmcm9tIHRoZSBxdWVyeXN0cmluZ1xuZnVuY3Rpb24gZ2V0UGFyYW1ldGVyQnlOYW1lIChuYW1lKSB7XG4gIC8vIGFjY2VzaW5nIHdpbmRvdyBtaWdodCBmYWlsIGF0IHRoZSBicm93c2VyIGxldmVsLCB3ZSBjYW4ndCByZWFsbHkgdGVzdCBmb3IgaXQsXG4gIC8vIHNvIHRoZXJlIGFyZSBhIGZldyBuZXN0ZWQgdHJ5L2NhdGNoIGJsb2NrcyBoZXJlXG4gIHRyeSB7XG4gICAgdmFyIHVybFRvU2VhcmNoID0gJyc7XG4gICAgLy8gdHJ5IGNoZWNraW5nIHRoZSB0b3Btb3N0IHdpbmRvdywgYW5kIGlmIG5vdCwgdXNlIGN1cnJlbnQgd2luZG93XG4gICAgdHJ5IHtcbiAgICAgIHVybFRvU2VhcmNoID0gd2luZG93LnRvcC5sb2NhdGlvbi5zZWFyY2g7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsVG9TZWFyY2ggPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG5cbiAgICB2YXIgcmVnZXhTID0gJ1tcXFxcPyZdJyArIG5hbWUgKyAnPShbXiYjXSopJztcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4Uyk7XG4gICAgdmFyIHJlc3VsdHMgPSByZWdleC5leGVjKHVybFRvU2VhcmNoKTtcbiAgICBpZiAocmVzdWx0cyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldFZlcmJvc2l0eSAodilcbntcbiAgLy8gdGhlIGhpZ2hlc3QgKGxlYXN0IHJlc3RyaWN0aXZlIGRlYnVnIGxldmVsKSBhbHdheXMgd2luc1xuICAgIF92ZXJib3NpdHkgPSBNYXRoLm1heCh2LCBfdmVyYm9zaXR5KTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWVTdHJpbmcgKCkge1xuICB2YXIgZGF0ZVRvUmV0dXJuID0gJyc7XG4gIHRyeSB7XG4gICAgdmFyIGN1ckRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGRhdGVUb1JldHVybiA9IGN1ckRhdGUuZ2V0SG91cnMoKSArICc6JyArIGN1ckRhdGUuZ2V0TWludXRlcygpICsgJzonICsgY3VyRGF0ZS5nZXRTZWNvbmRzKCkgKyAnLicgKyBjdXJEYXRlLmdldE1pbGxpc2Vjb25kcygpO1xuICB9IGNhdGNoIChlKSB7fVxuICByZXR1cm4gZGF0ZVRvUmV0dXJuO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVNc2cgKG1ldGhvZCwgYXJncylcbntcbiAgICB2YXIgbWVzc2FnZVByZWZpeCA9IF9wcmVmaXg7XG4gICAgaWYgKChhcmdzLmxlbmd0aCkgPiAwICYmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpKVxuICAgIHtcbiAgICAgIGlmIChfcGxheWVySWQgJiYgX3BsYXllcklkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbWVzc2FnZVByZWZpeCArPSAoJy0nICsgX3BsYXllcklkKTtcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2VQcmVmaXggKz0gJ10nO1xuICAgICAgbWVzc2FnZVByZWZpeCArPSAnWycgKyBnZXRDdXJyZW50VGltZVN0cmluZygpICsgJ10nO1xuXG4gICAgICBhcmdzWzBdID0gbWVzc2FnZVByZWZpeCArIGFyZ3NbMF07XG4gICAgfVxuXG4gICAgaWYgKG1ldGhvZC5hcHBseSlcbiAgICB7XG4gICAgICAgIG1ldGhvZC5hcHBseShjb25zb2xlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzKSk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIG1ldGhvZChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZWJ1ZyAoKVxue1xuICAgIGlmIChfdmVyYm9zaXR5IDwgNClcbiAgICB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUuZGVidWcgPT09ICd1bmRlZmluZWQnKVxuICAgIHtcbiAgICAgICAgLy8gSUUgMTAgZG9lc24ndCBoYXZlIGEgY29uc29sZS5kZWJ1ZygpIGZ1bmN0aW9uXG4gICAgICAgIGhhbmRsZU1zZyhjb25zb2xlLmxvZywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgaGFuZGxlTXNnKGNvbnNvbGUuZGVidWcsIGFyZ3VtZW50cyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsb2cgKClcbntcbiAgICBpZiAoX3ZlcmJvc2l0eSA8IDMpXG4gICAge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaGFuZGxlTXNnKGNvbnNvbGUubG9nLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBpbmZvICgpXG57XG4gICAgaWYgKF92ZXJib3NpdHkgPCAyKVxuICAgIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGhhbmRsZU1zZyhjb25zb2xlLmluZm8sIGFyZ3VtZW50cyk7XG59XG5cblxuZnVuY3Rpb24gd2FybiAoKVxue1xuICAgIGlmIChfdmVyYm9zaXR5IDwgMSlcbiAgICB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBoYW5kbGVNc2coY29uc29sZS53YXJuLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBlcnJvciAoKVxue1xuICAgIGhhbmRsZU1zZyhjb25zb2xlLmVycm9yLCBhcmd1bWVudHMpO1xufVxuXG52YXIgY29uc29sZUxvZ2dlciA9IHtcbiAgICBzZXRQbGF5ZXJJZDogc2V0UGxheWVySWQsXG4gICAgc2V0VmVyYm9zaXR5OiBzZXRWZXJib3NpdHksXG4gICAgZGVidWc6IGRlYnVnLFxuICAgIGxvZzogbG9nLFxuICAgIGluZm86IGluZm8sXG4gICAgd2Fybjogd2FybixcbiAgICBlcnJvcjogZXJyb3Jcbn07XG5cbmlmICgodHlwZW9mIChjb25zb2xlKSA9PT0gJ3VuZGVmaW5lZCcpIHx8ICFjb25zb2xlLmxvZylcbntcbiAgICAvLyBubyBjb25zb2xlIGF2YWlsYWJsZTsgbWFrZSBmdW5jdGlvbnMgbm8tb3BcbiAgICBjb25zb2xlTG9nZ2VyLmRlYnVnID0gZnVuY3Rpb24gKCkge307XG4gICAgY29uc29sZUxvZ2dlci5sb2cgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICBjb25zb2xlTG9nZ2VyLmluZm8gPSBmdW5jdGlvbiAoKSB7fTtcbiAgICBjb25zb2xlTG9nZ2VyLndhcm4gPSBmdW5jdGlvbiAoKSB7fTtcbiAgICBjb25zb2xlTG9nZ2VyLmVycm9yID0gZnVuY3Rpb24gKCkge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29uc29sZUxvZ2dlcjtcblxuLy8gbG9vayBpbiB0aGUgcXVlcnkgc3RyaW5nIGZvciBkZWJ1ZyBsZXZlbFxuc2V0RGVidWdMZXZlbEZyb21QYWdlKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/utils/consoleLogger.js\n");

/***/ }),

/***/ "./src/scripts/utils/dom.js":
/*!**********************************!*\
  !*** ./src/scripts/utils/dom.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utilities = __webpack_require__(/*! ./utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nvar dom = {};\n\ndom.isVisible = function isVisible (el) {\n  var style = window.getComputedStyle(el);\n  return style.visibility !== 'hidden';\n};\n\ndom.isHidden = function isHidden (el) {\n  var style = window.getComputedStyle(el);\n  return style.display === 'none';\n};\n\ndom.isShown = function isShown (el) {\n  return !dom.isHidden(el);\n};\n\ndom.hide = function hide (el) {\n  el.__prev_style_display_ = el.style.display;\n  el.style.display = 'none';\n};\n\ndom.show = function show (el) {\n  if (dom.isHidden(el)) {\n    el.style.display = el.__prev_style_display_;\n  }\n  el.__prev_style_display_ = undefined;\n};\n\ndom.hasClass = function hasClass (el, cssClass) {\n  var classes, i, len;\n\n  if (utilities.isNotEmptyString(cssClass)) {\n    if (el.classList) {\n      return el.classList.contains(cssClass);\n    }\n\n    classes = utilities.isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n    cssClass = (cssClass || '');\n\n    for (i = 0, len = classes.length; i < len; i += 1) {\n      if (classes[i] === cssClass) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\ndom.addClass = function (el, cssClass) {\n  var classes;\n\n  if (utilities.isNotEmptyString(cssClass)) {\n    if (el.classList) {\n      return el.classList.add(cssClass);\n    }\n\n    classes = utilities.isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n    if (utilities.isString(cssClass) && utilities.isNotEmptyString(cssClass.replace(/\\s+/, ''))) {\n      classes.push(cssClass);\n      el.setAttribute('class', classes.join(' '));\n    }\n  }\n};\n\ndom.removeClass = function (el, cssClass) {\n  var classes;\n\n  if (utilities.isNotEmptyString(cssClass)) {\n    if (el.classList) {\n      return el.classList.remove(cssClass);\n    }\n\n    classes = utilities.isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n    var newClasses = [];\n    var i, len;\n    if (utilities.isString(cssClass) && utilities.isNotEmptyString(cssClass.replace(/\\s+/, ''))) {\n\n      for (i = 0, len = classes.length; i < len; i += 1) {\n        if (cssClass !== classes[i]) {\n          newClasses.push(classes[i]);\n        }\n      }\n      el.setAttribute('class', newClasses.join(' '));\n    }\n  }\n};\n\ndom.addEventListener = function addEventListener (el, type, handler) {\n  if (utilities.isArray(el)) {\n    utilities.forEach(el, function (e) {\n      dom.addEventListener(e, type, handler);\n    });\n    return;\n  }\n\n  if (utilities.isArray(type)) {\n    utilities.forEach(type, function (t) {\n      dom.addEventListener(el, t, handler);\n    });\n    return;\n  }\n\n  if (el.addEventListener) {\n    el.addEventListener(type, handler, false);\n  } else if (el.attachEvent) {\n    // WARNING!!! this is a very naive implementation !\n    // the event object that should be passed to the handler\n    // would not be there for IE8\n    // we should use \"window.event\" and then \"event.srcElement\"\n    // instead of \"event.target\"\n    el.attachEvent('on' + type, handler);\n  }\n};\n\ndom.removeEventListener = function removeEventListener (el, type, handler) {\n  if (utilities.isArray(el)) {\n    utilities.forEach(el, function (e) {\n      dom.removeEventListener(e, type, handler);\n    });\n    return;\n  }\n\n  if (utilities.isArray(type)) {\n    utilities.forEach(type, function (t) {\n      dom.removeEventListener(el, t, handler);\n    });\n    return;\n  }\n\n  if (el.removeEventListener) {\n    el.removeEventListener(type, handler, false);\n  } else if (el.detachEvent) {\n    el.detachEvent('on' + type, handler);\n  } else {\n    el['on' + type] = null;\n  }\n};\n\ndom.dispatchEvent = function dispatchEvent (el, event) {\n  if (el.dispatchEvent) {\n    el.dispatchEvent(event);\n  } else {\n    el.fireEvent('on' + event.eventType, event);\n  }\n};\n\ndom.isDescendant = function isDescendant (parent, child) {\n  var node = child.parentNode;\n  while (node !== null) {\n    if (node === parent) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n  return false;\n};\n\ndom.getTextContent = function getTextContent (el) {\n  return el.textContent || el.text;\n};\n\ndom.prependChild = function prependChild (parent, child) {\n  if (child.parentNode) {\n    child.parentNode.removeChild(child);\n  }\n  return parent.insertBefore(child, parent.firstChild);\n};\n\ndom.remove = function removeNode (node) {\n  if (node && node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n};\n\ndom.isDomElement = function isDomElement (o) {\n  return o instanceof Element || (parent && parent.Element && o instanceof parent.Element);     // If MOL is loaded in an iFrame, a DOM Element may be passed in from the parent document - check for that, too\n};\n\ndom.click = function (el, handler) {\n  dom.addEventListener(el, 'click', handler);\n};\n\ndom.once = function (el, type, handler) {\n  function handlerWrap () {\n    handler.apply(null, arguments);\n    dom.removeEventListener(el, type, handlerWrap);\n  }\n\n  dom.addEventListener(el, type, handlerWrap);\n};\n\n// Note: there is no getBoundingClientRect on iPad so we need a fallback\ndom.getDimension = function getDimension (element) {\n  var rect;\n\n  // On IE9 and below getBoundingClientRect does not work consistently\n  if (!utilities.isOldIE() && element.getBoundingClientRect) {\n    rect = element.getBoundingClientRect();\n    return {\n      width: rect.width,\n      height: rect.height\n    };\n  }\n\n  return {\n    width: element.offsetWidth,\n    height: element.offsetHeight\n  };\n};\n\nmodule.exports = dom;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9kb20uanM/OTcxZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixnQkFBZ0IsbUJBQU8sQ0FBQyxtRUFBb0I7O0FBRTVDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQyxTQUFTO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1Q0FBdUMsU0FBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyRkFBMkY7QUFDM0Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvdXRpbHMvZG9tLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi91dGlsaXR5RnVuY3Rpb25zJyk7XG5cbnZhciBkb20gPSB7fTtcblxuZG9tLmlzVmlzaWJsZSA9IGZ1bmN0aW9uIGlzVmlzaWJsZSAoZWwpIHtcbiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICByZXR1cm4gc3R5bGUudmlzaWJpbGl0eSAhPT0gJ2hpZGRlbic7XG59O1xuXG5kb20uaXNIaWRkZW4gPSBmdW5jdGlvbiBpc0hpZGRlbiAoZWwpIHtcbiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICByZXR1cm4gc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnO1xufTtcblxuZG9tLmlzU2hvd24gPSBmdW5jdGlvbiBpc1Nob3duIChlbCkge1xuICByZXR1cm4gIWRvbS5pc0hpZGRlbihlbCk7XG59O1xuXG5kb20uaGlkZSA9IGZ1bmN0aW9uIGhpZGUgKGVsKSB7XG4gIGVsLl9fcHJldl9zdHlsZV9kaXNwbGF5XyA9IGVsLnN0eWxlLmRpc3BsYXk7XG4gIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59O1xuXG5kb20uc2hvdyA9IGZ1bmN0aW9uIHNob3cgKGVsKSB7XG4gIGlmIChkb20uaXNIaWRkZW4oZWwpKSB7XG4gICAgZWwuc3R5bGUuZGlzcGxheSA9IGVsLl9fcHJldl9zdHlsZV9kaXNwbGF5XztcbiAgfVxuICBlbC5fX3ByZXZfc3R5bGVfZGlzcGxheV8gPSB1bmRlZmluZWQ7XG59O1xuXG5kb20uaGFzQ2xhc3MgPSBmdW5jdGlvbiBoYXNDbGFzcyAoZWwsIGNzc0NsYXNzKSB7XG4gIHZhciBjbGFzc2VzLCBpLCBsZW47XG5cbiAgaWYgKHV0aWxpdGllcy5pc05vdEVtcHR5U3RyaW5nKGNzc0NsYXNzKSkge1xuICAgIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY3NzQ2xhc3MpO1xuICAgIH1cblxuICAgIGNsYXNzZXMgPSB1dGlsaXRpZXMuaXNTdHJpbmcoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpKSA/IGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5zcGxpdCgvXFxzKy8pIDogW107XG4gICAgY3NzQ2xhc3MgPSAoY3NzQ2xhc3MgfHwgJycpO1xuXG4gICAgZm9yIChpID0gMCwgbGVuID0gY2xhc3Nlcy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgaWYgKGNsYXNzZXNbaV0gPT09IGNzc0NsYXNzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5kb20uYWRkQ2xhc3MgPSBmdW5jdGlvbiAoZWwsIGNzc0NsYXNzKSB7XG4gIHZhciBjbGFzc2VzO1xuXG4gIGlmICh1dGlsaXRpZXMuaXNOb3RFbXB0eVN0cmluZyhjc3NDbGFzcykpIHtcbiAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XG4gICAgfVxuXG4gICAgY2xhc3NlcyA9IHV0aWxpdGllcy5pc1N0cmluZyhlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpID8gZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpLnNwbGl0KC9cXHMrLykgOiBbXTtcbiAgICBpZiAodXRpbGl0aWVzLmlzU3RyaW5nKGNzc0NsYXNzKSAmJiB1dGlsaXRpZXMuaXNOb3RFbXB0eVN0cmluZyhjc3NDbGFzcy5yZXBsYWNlKC9cXHMrLywgJycpKSkge1xuICAgICAgY2xhc3Nlcy5wdXNoKGNzc0NsYXNzKTtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc2VzLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9XG59O1xuXG5kb20ucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoZWwsIGNzc0NsYXNzKSB7XG4gIHZhciBjbGFzc2VzO1xuXG4gIGlmICh1dGlsaXRpZXMuaXNOb3RFbXB0eVN0cmluZyhjc3NDbGFzcykpIHtcbiAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LnJlbW92ZShjc3NDbGFzcyk7XG4gICAgfVxuXG4gICAgY2xhc3NlcyA9IHV0aWxpdGllcy5pc1N0cmluZyhlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpID8gZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpLnNwbGl0KC9cXHMrLykgOiBbXTtcbiAgICB2YXIgbmV3Q2xhc3NlcyA9IFtdO1xuICAgIHZhciBpLCBsZW47XG4gICAgaWYgKHV0aWxpdGllcy5pc1N0cmluZyhjc3NDbGFzcykgJiYgdXRpbGl0aWVzLmlzTm90RW1wdHlTdHJpbmcoY3NzQ2xhc3MucmVwbGFjZSgvXFxzKy8sICcnKSkpIHtcblxuICAgICAgZm9yIChpID0gMCwgbGVuID0gY2xhc3Nlcy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBpZiAoY3NzQ2xhc3MgIT09IGNsYXNzZXNbaV0pIHtcbiAgICAgICAgICBuZXdDbGFzc2VzLnB1c2goY2xhc3Nlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBuZXdDbGFzc2VzLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9XG59O1xuXG5kb20uYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIgKGVsLCB0eXBlLCBoYW5kbGVyKSB7XG4gIGlmICh1dGlsaXRpZXMuaXNBcnJheShlbCkpIHtcbiAgICB1dGlsaXRpZXMuZm9yRWFjaChlbCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKGUsIHR5cGUsIGhhbmRsZXIpO1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh1dGlsaXRpZXMuaXNBcnJheSh0eXBlKSkge1xuICAgIHV0aWxpdGllcy5mb3JFYWNoKHR5cGUsIGZ1bmN0aW9uICh0KSB7XG4gICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcihlbCwgdCwgaGFuZGxlcik7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGVsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgfSBlbHNlIGlmIChlbC5hdHRhY2hFdmVudCkge1xuICAgIC8vIFdBUk5JTkchISEgdGhpcyBpcyBhIHZlcnkgbmFpdmUgaW1wbGVtZW50YXRpb24gIVxuICAgIC8vIHRoZSBldmVudCBvYmplY3QgdGhhdCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBoYW5kbGVyXG4gICAgLy8gd291bGQgbm90IGJlIHRoZXJlIGZvciBJRThcbiAgICAvLyB3ZSBzaG91bGQgdXNlIFwid2luZG93LmV2ZW50XCIgYW5kIHRoZW4gXCJldmVudC5zcmNFbGVtZW50XCJcbiAgICAvLyBpbnN0ZWFkIG9mIFwiZXZlbnQudGFyZ2V0XCJcbiAgICBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgaGFuZGxlcik7XG4gIH1cbn07XG5cbmRvbS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lciAoZWwsIHR5cGUsIGhhbmRsZXIpIHtcbiAgaWYgKHV0aWxpdGllcy5pc0FycmF5KGVsKSkge1xuICAgIHV0aWxpdGllcy5mb3JFYWNoKGVsLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSwgdHlwZSwgaGFuZGxlcik7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHV0aWxpdGllcy5pc0FycmF5KHR5cGUpKSB7XG4gICAgdXRpbGl0aWVzLmZvckVhY2godHlwZSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKGVsLCB0LCBoYW5kbGVyKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICB9IGVsc2UgaWYgKGVsLmRldGFjaEV2ZW50KSB7XG4gICAgZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGhhbmRsZXIpO1xuICB9IGVsc2Uge1xuICAgIGVsWydvbicgKyB0eXBlXSA9IG51bGw7XG4gIH1cbn07XG5cbmRvbS5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gZGlzcGF0Y2hFdmVudCAoZWwsIGV2ZW50KSB7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyBldmVudC5ldmVudFR5cGUsIGV2ZW50KTtcbiAgfVxufTtcblxuZG9tLmlzRGVzY2VuZGFudCA9IGZ1bmN0aW9uIGlzRGVzY2VuZGFudCAocGFyZW50LCBjaGlsZCkge1xuICB2YXIgbm9kZSA9IGNoaWxkLnBhcmVudE5vZGU7XG4gIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgaWYgKG5vZGUgPT09IHBhcmVudCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZG9tLmdldFRleHRDb250ZW50ID0gZnVuY3Rpb24gZ2V0VGV4dENvbnRlbnQgKGVsKSB7XG4gIHJldHVybiBlbC50ZXh0Q29udGVudCB8fCBlbC50ZXh0O1xufTtcblxuZG9tLnByZXBlbmRDaGlsZCA9IGZ1bmN0aW9uIHByZXBlbmRDaGlsZCAocGFyZW50LCBjaGlsZCkge1xuICBpZiAoY2hpbGQucGFyZW50Tm9kZSkge1xuICAgIGNoaWxkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG4gIHJldHVybiBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBwYXJlbnQuZmlyc3RDaGlsZCk7XG59O1xuXG5kb20ucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlTm9kZSAobm9kZSkge1xuICBpZiAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcbiAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gIH1cbn07XG5cbmRvbS5pc0RvbUVsZW1lbnQgPSBmdW5jdGlvbiBpc0RvbUVsZW1lbnQgKG8pIHtcbiAgcmV0dXJuIG8gaW5zdGFuY2VvZiBFbGVtZW50IHx8IChwYXJlbnQgJiYgcGFyZW50LkVsZW1lbnQgJiYgbyBpbnN0YW5jZW9mIHBhcmVudC5FbGVtZW50KTsgICAgIC8vIElmIE1PTCBpcyBsb2FkZWQgaW4gYW4gaUZyYW1lLCBhIERPTSBFbGVtZW50IG1heSBiZSBwYXNzZWQgaW4gZnJvbSB0aGUgcGFyZW50IGRvY3VtZW50IC0gY2hlY2sgZm9yIHRoYXQsIHRvb1xufTtcblxuZG9tLmNsaWNrID0gZnVuY3Rpb24gKGVsLCBoYW5kbGVyKSB7XG4gIGRvbS5hZGRFdmVudExpc3RlbmVyKGVsLCAnY2xpY2snLCBoYW5kbGVyKTtcbn07XG5cbmRvbS5vbmNlID0gZnVuY3Rpb24gKGVsLCB0eXBlLCBoYW5kbGVyKSB7XG4gIGZ1bmN0aW9uIGhhbmRsZXJXcmFwICgpIHtcbiAgICBoYW5kbGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIHR5cGUsIGhhbmRsZXJXcmFwKTtcbiAgfVxuXG4gIGRvbS5hZGRFdmVudExpc3RlbmVyKGVsLCB0eXBlLCBoYW5kbGVyV3JhcCk7XG59O1xuXG4vLyBOb3RlOiB0aGVyZSBpcyBubyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gaVBhZCBzbyB3ZSBuZWVkIGEgZmFsbGJhY2tcbmRvbS5nZXREaW1lbnNpb24gPSBmdW5jdGlvbiBnZXREaW1lbnNpb24gKGVsZW1lbnQpIHtcbiAgdmFyIHJlY3Q7XG5cbiAgLy8gT24gSUU5IGFuZCBiZWxvdyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZG9lcyBub3Qgd29yayBjb25zaXN0ZW50bHlcbiAgaWYgKCF1dGlsaXRpZXMuaXNPbGRJRSgpICYmIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7XG4gICAgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiBlbGVtZW50Lm9mZnNldFdpZHRoLFxuICAgIGhlaWdodDogZWxlbWVudC5vZmZzZXRIZWlnaHRcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZG9tO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/utils/dom.js\n");

/***/ }),

/***/ "./src/scripts/utils/http.js":
/*!***********************************!*\
  !*** ./src/scripts/utils/http.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar urlUtils = __webpack_require__(/*! ./urlUtils */ \"./src/scripts/utils/urlUtils.js\");\nvar utilities = __webpack_require__(/*! ./utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nfunction HttpRequestError (message) {\n  this.message = 'HttpRequest Error: ' + (message || '');\n}\nHttpRequestError.prototype = new Error();\nHttpRequestError.prototype.name = 'HttpRequest Error';\n\nfunction HttpRequest (createXhr) {\n  if (!utilities.isFunction(createXhr)) {\n    throw new HttpRequestError('Missing XMLHttpRequest factory method');\n  }\n\n  this.createXhr = createXhr;\n}\n\nHttpRequest.prototype.run = function (method, url, callback, options) {\n  sanityCheck(url, callback, options);\n  var timeout, timeoutId;\n  var xhr = this.createXhr();\n  options = options || {};\n  timeout = utilities.isNumber(options.timeout) ? options.timeout : 0;\n\n  xhr.open(method, urlUtils.urlParts(url).href, true);\n\n  if (options.headers) {\n    setHeaders(xhr, options.headers);\n  }\n\n  if (options.withCredentials) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onload = function () {\n    var statusText, response, status;\n\n    /**\n     * The only way to do a secure request on IE8 and IE9 is with the XDomainRequest object. Unfortunately, microsoft is\n     * so nice that decided that the status property and the 'getAllResponseHeaders' method where not needed so we have to\n     * fake them. If the request gets done with an XDomainRequest instance, we will assume that there are no headers and\n     * the status will always be 200. If you don't like it, DO NOT USE ANCIENT BROWSERS!!!\n     *\n     * For mor info go to: https://msdn.microsoft.com/en-us/library/cc288060(v=vs.85).aspx\n     */\n    if (!xhr.getAllResponseHeaders) {\n      xhr.getAllResponseHeaders = function () {\n        return null;\n      };\n    }\n\n    if (!xhr.status) {\n      xhr.status = 200;\n    }\n\n    if (utilities.isDefined(timeoutId)) {\n      clearTimeout(timeoutId);\n      timeoutId = undefined;\n    }\n\n    statusText = xhr.statusText || '';\n\n    // responseText is the old-school way of retrieving response (supported by IE8 & 9)\n    // response/responseType properties were introduced in XHR Level2 spec (supported by IE10)\n    response = ('response' in xhr) ? xhr.response : xhr.responseText;\n\n    // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)\n    status = xhr.status === 1223 ? 204 : xhr.status;\n\n    callback(\n      status,\n      response,\n      xhr.getAllResponseHeaders(),\n      statusText);\n  };\n\n  xhr.onerror = requestError;\n  xhr.onabort = requestError;\n\n  xhr.send();\n\n  if (timeout > 0) {\n    timeoutId = setTimeout(function () {\n      xhr && xhr.abort();\n    }, timeout);\n  }\n\n  function sanityCheck (url, callback, options) {\n    if (!utilities.isString(url) || utilities.isEmptyString(url)) {\n      throw new HttpRequestError(\"Invalid url '\" + url + \"'\");\n    }\n\n    if (!utilities.isFunction(callback)) {\n      throw new HttpRequestError(\"Invalid handler '\" + callback + \"' for the http request\");\n    }\n\n    if (utilities.isDefined(options) && !utilities.isObject(options)) {\n      throw new HttpRequestError(\"Invalid options map '\" + options + \"'\");\n    }\n  }\n\n  function setHeaders (xhr, headers) {\n    utilities.forEach(headers, function (value, key) {\n      if (utilities.isDefined(value)) {\n        xhr.setRequestHeader(key, value);\n      }\n    });\n  }\n\n  function requestError () {\n    callback(-1, null, null, '');\n  }\n};\n\nHttpRequest.prototype.get = function (url, callback, options) {\n  this.run('GET', url, processResponse, options);\n\n  function processResponse (status, response, headersString, statusText) {\n    if (isSuccess(status)) {\n      callback(null, response, status, headersString, statusText);\n    } else {\n      callback(new HttpRequestError(statusText), response, status, headersString, statusText);\n    }\n  }\n\n  function isSuccess (status) {\n    return 200 <= status && status < 300; // eslint-disable-line yoda\n  }\n};\n\nfunction createXhr () {\n  var xhr = new XMLHttpRequest();\n  if (!('withCredentials' in xhr)) {\n    // XDomainRequest for IE.\n    xhr = new XDomainRequest();\n  }\n  return xhr;\n}\n\nvar http = new HttpRequest(createXhr);\n\nmodule.exports = {\n  http: http,\n  HttpRequest: HttpRequest,\n  HttpRequestError: HttpRequestError,\n  createXhr: createXhr\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9odHRwLmpzP2E4MWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZUFBZSxtQkFBTyxDQUFDLG1EQUFZO0FBQ25DLGdCQUFnQixtQkFBTyxDQUFDLG1FQUFvQjs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3V0aWxzL2h0dHAuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciB1cmxVdGlscyA9IHJlcXVpcmUoJy4vdXJsVXRpbHMnKTtcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxuZnVuY3Rpb24gSHR0cFJlcXVlc3RFcnJvciAobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSAnSHR0cFJlcXVlc3QgRXJyb3I6ICcgKyAobWVzc2FnZSB8fCAnJyk7XG59XG5IdHRwUmVxdWVzdEVycm9yLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xuSHR0cFJlcXVlc3RFcnJvci5wcm90b3R5cGUubmFtZSA9ICdIdHRwUmVxdWVzdCBFcnJvcic7XG5cbmZ1bmN0aW9uIEh0dHBSZXF1ZXN0IChjcmVhdGVYaHIpIHtcbiAgaWYgKCF1dGlsaXRpZXMuaXNGdW5jdGlvbihjcmVhdGVYaHIpKSB7XG4gICAgdGhyb3cgbmV3IEh0dHBSZXF1ZXN0RXJyb3IoJ01pc3NpbmcgWE1MSHR0cFJlcXVlc3QgZmFjdG9yeSBtZXRob2QnKTtcbiAgfVxuXG4gIHRoaXMuY3JlYXRlWGhyID0gY3JlYXRlWGhyO1xufVxuXG5IdHRwUmVxdWVzdC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKG1ldGhvZCwgdXJsLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICBzYW5pdHlDaGVjayh1cmwsIGNhbGxiYWNrLCBvcHRpb25zKTtcbiAgdmFyIHRpbWVvdXQsIHRpbWVvdXRJZDtcbiAgdmFyIHhociA9IHRoaXMuY3JlYXRlWGhyKCk7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB0aW1lb3V0ID0gdXRpbGl0aWVzLmlzTnVtYmVyKG9wdGlvbnMudGltZW91dCkgPyBvcHRpb25zLnRpbWVvdXQgOiAwO1xuXG4gIHhoci5vcGVuKG1ldGhvZCwgdXJsVXRpbHMudXJsUGFydHModXJsKS5ocmVmLCB0cnVlKTtcblxuICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgc2V0SGVhZGVycyh4aHIsIG9wdGlvbnMuaGVhZGVycyk7XG4gIH1cblxuICBpZiAob3B0aW9ucy53aXRoQ3JlZGVudGlhbHMpIHtcbiAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgfVxuXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0YXR1c1RleHQsIHJlc3BvbnNlLCBzdGF0dXM7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb25seSB3YXkgdG8gZG8gYSBzZWN1cmUgcmVxdWVzdCBvbiBJRTggYW5kIElFOSBpcyB3aXRoIHRoZSBYRG9tYWluUmVxdWVzdCBvYmplY3QuIFVuZm9ydHVuYXRlbHksIG1pY3Jvc29mdCBpc1xuICAgICAqIHNvIG5pY2UgdGhhdCBkZWNpZGVkIHRoYXQgdGhlIHN0YXR1cyBwcm9wZXJ0eSBhbmQgdGhlICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIG1ldGhvZCB3aGVyZSBub3QgbmVlZGVkIHNvIHdlIGhhdmUgdG9cbiAgICAgKiBmYWtlIHRoZW0uIElmIHRoZSByZXF1ZXN0IGdldHMgZG9uZSB3aXRoIGFuIFhEb21haW5SZXF1ZXN0IGluc3RhbmNlLCB3ZSB3aWxsIGFzc3VtZSB0aGF0IHRoZXJlIGFyZSBubyBoZWFkZXJzIGFuZFxuICAgICAqIHRoZSBzdGF0dXMgd2lsbCBhbHdheXMgYmUgMjAwLiBJZiB5b3UgZG9uJ3QgbGlrZSBpdCwgRE8gTk9UIFVTRSBBTkNJRU5UIEJST1dTRVJTISEhXG4gICAgICpcbiAgICAgKiBGb3IgbW9yIGluZm8gZ28gdG86IGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvY2MyODgwNjAodj12cy44NSkuYXNweFxuICAgICAqL1xuICAgIGlmICgheGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycykge1xuICAgICAgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICgheGhyLnN0YXR1cykge1xuICAgICAgeGhyLnN0YXR1cyA9IDIwMDtcbiAgICB9XG5cbiAgICBpZiAodXRpbGl0aWVzLmlzRGVmaW5lZCh0aW1lb3V0SWQpKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIHRpbWVvdXRJZCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBzdGF0dXNUZXh0ID0geGhyLnN0YXR1c1RleHQgfHwgJyc7XG5cbiAgICAvLyByZXNwb25zZVRleHQgaXMgdGhlIG9sZC1zY2hvb2wgd2F5IG9mIHJldHJpZXZpbmcgcmVzcG9uc2UgKHN1cHBvcnRlZCBieSBJRTggJiA5KVxuICAgIC8vIHJlc3BvbnNlL3Jlc3BvbnNlVHlwZSBwcm9wZXJ0aWVzIHdlcmUgaW50cm9kdWNlZCBpbiBYSFIgTGV2ZWwyIHNwZWMgKHN1cHBvcnRlZCBieSBJRTEwKVxuICAgIHJlc3BvbnNlID0gKCdyZXNwb25zZScgaW4geGhyKSA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG5cbiAgICAvLyBub3JtYWxpemUgSUU5IGJ1ZyAoaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTQ1MClcbiAgICBzdGF0dXMgPSB4aHIuc3RhdHVzID09PSAxMjIzID8gMjA0IDogeGhyLnN0YXR1cztcblxuICAgIGNhbGxiYWNrKFxuICAgICAgc3RhdHVzLFxuICAgICAgcmVzcG9uc2UsXG4gICAgICB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksXG4gICAgICBzdGF0dXNUZXh0KTtcbiAgfTtcblxuICB4aHIub25lcnJvciA9IHJlcXVlc3RFcnJvcjtcbiAgeGhyLm9uYWJvcnQgPSByZXF1ZXN0RXJyb3I7XG5cbiAgeGhyLnNlbmQoKTtcblxuICBpZiAodGltZW91dCA+IDApIHtcbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHhociAmJiB4aHIuYWJvcnQoKTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNhbml0eUNoZWNrICh1cmwsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKCF1dGlsaXRpZXMuaXNTdHJpbmcodXJsKSB8fCB1dGlsaXRpZXMuaXNFbXB0eVN0cmluZyh1cmwpKSB7XG4gICAgICB0aHJvdyBuZXcgSHR0cFJlcXVlc3RFcnJvcihcIkludmFsaWQgdXJsICdcIiArIHVybCArIFwiJ1wiKTtcbiAgICB9XG5cbiAgICBpZiAoIXV0aWxpdGllcy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgdGhyb3cgbmV3IEh0dHBSZXF1ZXN0RXJyb3IoXCJJbnZhbGlkIGhhbmRsZXIgJ1wiICsgY2FsbGJhY2sgKyBcIicgZm9yIHRoZSBodHRwIHJlcXVlc3RcIik7XG4gICAgfVxuXG4gICAgaWYgKHV0aWxpdGllcy5pc0RlZmluZWQob3B0aW9ucykgJiYgIXV0aWxpdGllcy5pc09iamVjdChvcHRpb25zKSkge1xuICAgICAgdGhyb3cgbmV3IEh0dHBSZXF1ZXN0RXJyb3IoXCJJbnZhbGlkIG9wdGlvbnMgbWFwICdcIiArIG9wdGlvbnMgKyBcIidcIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0SGVhZGVycyAoeGhyLCBoZWFkZXJzKSB7XG4gICAgdXRpbGl0aWVzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIGlmICh1dGlsaXRpZXMuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcXVlc3RFcnJvciAoKSB7XG4gICAgY2FsbGJhY2soLTEsIG51bGwsIG51bGwsICcnKTtcbiAgfVxufTtcblxuSHR0cFJlcXVlc3QucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gIHRoaXMucnVuKCdHRVQnLCB1cmwsIHByb2Nlc3NSZXNwb25zZSwgb3B0aW9ucyk7XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc1Jlc3BvbnNlIChzdGF0dXMsIHJlc3BvbnNlLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0KSB7XG4gICAgaWYgKGlzU3VjY2VzcyhzdGF0dXMpKSB7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sobmV3IEh0dHBSZXF1ZXN0RXJyb3Ioc3RhdHVzVGV4dCksIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU3VjY2VzcyAoc3RhdHVzKSB7XG4gICAgcmV0dXJuIDIwMCA8PSBzdGF0dXMgJiYgc3RhdHVzIDwgMzAwOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHlvZGFcbiAgfVxufTtcblxuZnVuY3Rpb24gY3JlYXRlWGhyICgpIHtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICBpZiAoISgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpKSB7XG4gICAgLy8gWERvbWFpblJlcXVlc3QgZm9yIElFLlxuICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICB9XG4gIHJldHVybiB4aHI7XG59XG5cbnZhciBodHRwID0gbmV3IEh0dHBSZXF1ZXN0KGNyZWF0ZVhocik7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBodHRwOiBodHRwLFxuICBIdHRwUmVxdWVzdDogSHR0cFJlcXVlc3QsXG4gIEh0dHBSZXF1ZXN0RXJyb3I6IEh0dHBSZXF1ZXN0RXJyb3IsXG4gIGNyZWF0ZVhocjogY3JlYXRlWGhyXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/utils/http.js\n");

/***/ }),

/***/ "./src/scripts/utils/mimetypes.js":
/*!****************************************!*\
  !*** ./src/scripts/utils/mimetypes.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = {\n  html5: [\n    'text/javascript',\n    'text/javascript1.0',\n    'text/javascript1.2',\n    'text/javascript1.4',\n    'text/jscript',\n    'application/javascript',\n    'application/x-javascript',\n    'text/ecmascript',\n    'text/ecmascript1.0',\n    'text/ecmascript1.2',\n    'text/ecmascript1.4',\n    'text/livescript',\n    'application/ecmascript',\n    'application/x-ecmascript',\n  ],\n\n  flash: [\n    'application/x-shockwave-flash'\n  ],\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9taW1ldHlwZXMuanM/YzgyYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvdXRpbHMvbWltZXR5cGVzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaHRtbDU6IFtcbiAgICAndGV4dC9qYXZhc2NyaXB0JyxcbiAgICAndGV4dC9qYXZhc2NyaXB0MS4wJyxcbiAgICAndGV4dC9qYXZhc2NyaXB0MS4yJyxcbiAgICAndGV4dC9qYXZhc2NyaXB0MS40JyxcbiAgICAndGV4dC9qc2NyaXB0JyxcbiAgICAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsXG4gICAgJ2FwcGxpY2F0aW9uL3gtamF2YXNjcmlwdCcsXG4gICAgJ3RleHQvZWNtYXNjcmlwdCcsXG4gICAgJ3RleHQvZWNtYXNjcmlwdDEuMCcsXG4gICAgJ3RleHQvZWNtYXNjcmlwdDEuMicsXG4gICAgJ3RleHQvZWNtYXNjcmlwdDEuNCcsXG4gICAgJ3RleHQvbGl2ZXNjcmlwdCcsXG4gICAgJ2FwcGxpY2F0aW9uL2VjbWFzY3JpcHQnLFxuICAgICdhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQnLFxuICBdLFxuXG4gIGZsYXNoOiBbXG4gICAgJ2FwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoJ1xuICBdLFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/utils/mimetypes.js\n");

/***/ }),

/***/ "./src/scripts/utils/playerUtils.js":
/*!******************************************!*\
  !*** ./src/scripts/utils/playerUtils.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar dom = __webpack_require__(/*! ./dom */ \"./src/scripts/utils/dom.js\");\nvar utilities = __webpack_require__(/*! ./utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\nvar logger = __webpack_require__(/*! ./consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nvar playerUtils = {};\n\n/**\n * Returns an object that captures the portions of player state relevant to\n * video playback. The result of this function can be passed to\n * restorePlayerSnapshot with a player to return the player to the state it\n * was in when this function was invoked.\n * @param {object} player The videojs player object\n */\nplayerUtils.getPlayerSnapshot = function getPlayerSnapshot (player) {\n  var tech = player.el().querySelector('.vjs-tech');\n\n  var snapshot = {\n    ended: player.ended(),\n    src: player.currentSrc(),\n    currentTime: player.currentTime(),\n    type: player.currentType(),\n    playing: !player.paused(),\n    suppressedTracks: getSuppressedTracks(player)\n  };\n\n  logger.debug('generated snapshot...', snapshot);\n\n  if (snapshot.ended) {\n    snapshot.currentTime = player.duration() + 1;\n  }\n\n  if (tech) {\n    snapshot.nativePoster = tech.poster;\n    snapshot.style = tech.getAttribute('style');\n  }\n\n  var els;\n  // VIDLA-4563: Hack for Edge when Brightcove player embed in not friendly iframe\n  if (utilities.scriptLoadedInIframe()) {\n    els = parent.document.getElementsByClassName('vjs-dock-text');\n  }\n  else {\n    els = document.getElementsByClassName('vjs-dock-text');\n  }\n\tif (els && els.length > 0) {\n\t  // Determine which 'vjs-dock-text' element is part of this player\n    var tempParents, foundPlayer = false;\n    for (var i = 0; i < els.length; i++) {\n      tempParents = getParentList(els[i]);\n      if (tempParents.indexOf(player.el_) >= 0) {\n        foundPlayer = true;\n        break;\n      }\n    }\n    if (foundPlayer) {\n      snapshot.dockText = els[i];\n      snapshot.dockText.style.display = 'none';\n    }\n  }\n  return snapshot;\n\n  // **** Local Functions **** //\n  function getSuppressedTracks (player) {\n    var tracks = player.remoteTextTracks ? player.remoteTextTracks() : [];\n\n    if (tracks && utilities.isArray(tracks.tracks_)) {\n      tracks = tracks.tracks_;\n    }\n\n    if (!utilities.isArray(tracks)) {\n      tracks = [];\n    }\n\n    var suppressedTracks = [];\n    tracks.forEach(function (track) {\n      suppressedTracks.push({\n        track: track,\n        mode: track.mode\n      });\n      track.mode = 'disabled';\n    });\n\n    return suppressedTracks;\n  }\n\n  function getParentList (element) {\n    var parents = [];\n    while (element.parentElement) {\n      parents.unshift(element.parentElement);\n      element = element.parentElement;\n    }\n    return parents;\n  }\n};\n\n/**\n * Attempts to modify the specified player so that its state is equivalent to\n * the state of the snapshot.\n * @param {object} snapshot - the player state to apply\n */\nplayerUtils.restorePlayerSnapshot = function restorePlayerSnapshot (player, snapshot) {\n  var tech = player.el().querySelector('.vjs-tech');\n  var attempts = 20; // the number of remaining attempts to restore the snapshot\n\n  logger.debug('restoring snapshot...', snapshot);\n  if (snapshot.nativePoster) {\n    tech.poster = snapshot.nativePoster;\n  }\n\n  if ('style' in snapshot) {\n    // overwrite all css style properties to restore state precisely\n    tech.setAttribute('style', snapshot.style || '');\n  }\n\n\tif (snapshot.dockText) {\n\t\tsnapshot.dockText.style.display = 'block';\n\t}\n\n  // if (hasSrcChanged(player, snapshot)) {\n\n    // on ios7, fiddling with textTracks too early will cause safari to crash\n    player.one('contentloadedmetadata', restoreTracks);\n\n    player.one('canplay', tryToResume);\n    ensureCanplayEvtGetsFired();\n\n    // if the src changed for ad playback, reset it\n    player.src({src: snapshot.src, type: snapshot.type});\n\n    // safari requires a call to `load` to pick up a changed source\n    // player.load();\t// Safari 11 no more requires 'load'. Firefox doesn't like 'load' call for already loaded content (in case of AdLoaded timeout).\n\n  // } else {\n  //   restoreTracks();\n  //\n  //   if (snapshot.playing) {\n  //     player.play();\n  //   }\n  // }\n\n  // **** Local Functions **** //\n\n  /**\n   * Sometimes firefox does not trigger the 'canplay' evt.\n   * This code ensure that it always gets triggered triggered.\n   */\n  function ensureCanplayEvtGetsFired () {\n    var timeoutId = setTimeout(function () {\n      player.trigger('canplay');\n    }, 1000);\n\n    player.one('canplay', function () {\n      clearTimeout(timeoutId);\n    });\n  }\n\n  /**\n   * Determine whether the player needs to be restored to its state\n   * before ad playback began. With a custom ad display or burned-in\n   * ads, the content player state hasn't been modified and so no\n   * restoration is required\n   */\n  /*\n  function hasSrcChanged(player, snapshot) {\n    if (player.src()) {\n      return player.src() !== snapshot.src;\n    }\n    // the player was configured through source element children\n    return player.currentSrc() !== snapshot.src;\n  }\n  */\n\n  function restoreTracks () {\n    var suppressedTracks = snapshot.suppressedTracks;\n    suppressedTracks.forEach(function (trackSnapshot) {\n      trackSnapshot.track.mode = trackSnapshot.mode;\n    });\n  }\n\n  /**\n   * Determine if the video element has loaded enough of the snapshot source\n   * to be ready to apply the rest of the state\n   */\n  function tryToResume () {\n\n    // if some period of the video is seekable, resume playback\n    // otherwise delay a bit and then check again unless we're out of attempts\n\n\t  // safari 11 requires call `play` to make seek available\n      player.play();\n\n    if (!playerUtils.isReadyToResume(player) && attempts--) {\n      setTimeout(tryToResume, 50);\n    } else {\n      try {\n        if (player.currentTime() !== snapshot.currentTime) {\n          if (snapshot.playing) { // if needed restore playing status after seek completes\n            player.one('seeked', function () {\n              if (!snapshot.ended) {\n                player.play();\n              }\n            });\n          }\n          player.currentTime(snapshot.currentTime);\n\n        } else if (snapshot.playing) {\n          // if needed and no seek has been performed, restore playing status immediately\n          player.play();\n        }\n\n      } catch (e) {\n        videojs.log.warn('Failed to resume the content after an advertisement', e);\n      }\n    }\n  }\n};\n\nplayerUtils.isReadyToResume = function (player) {\n  if (utilities.isIE11()) {\n    // for IE 11 check only player state\n    if (player.readyState() > 1) {\n      return true;\n    }\n    return false;\n  }\n\n  if (player.readyState() > 1) {\n    // some browsers and media aren't \"seekable\".\n    // readyState greater than 1 allows for seeking without exceptions\n    return true;\n  }\n\n  if (player.seekable() === undefined) {\n    // if the player doesn't expose the seekable time ranges, try to\n    // resume playback immediately\n    return true;\n  }\n\n  if (player.seekable().length > 0) {\n    // if some period of the video is seekable, resume playback\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * This function prepares the player to display ads.\n * Adding convenience events like the 'vast.firsPlay' that gets fired when the video is first played\n * and ads the blackPoster to the player to prevent content from being displayed before the preroll ad.\n *\n * @param player\n */\nplayerUtils.prepareForAds = function (player) {\n  var blackPoster = player.addChild('blackPoster');\n  // var _firstPlay = true;\n  var volumeSnapshot;\n\n\n  monkeyPatchPlayerApi();\n\n  player.on('play', tryToTriggerFirstPlay);\n  player.on('vast.reset', resetFirstPlay);  // Every time we change the sources we reset the first play.\n  player.on('vast.firstPlay', restoreContentVolume);\n  player.on('error', hideBlackPoster);      // If there is an error in the player we remove the blackposter to show the err msg\n  player.on('vast.adStart', hideBlackPoster);\n  player.on('vast.adsCancel', hideBlackPoster);\n  player.on('vast.adError', hideBlackPoster);\n  player.on('vast.adStart', addStyles);\n  player.on('vast.adEnd', removeStyles);\n  player.on('vast.adsCancel', removeStyles);\n\n  // VIDLA-2465 - hide vjs error dialog when ad running\n  var errorDialog;\n  var dlgs = document.getElementsByClassName('vjs-error-display');\n  if (dlgs && dlgs.length > 0) {\n\t  errorDialog = dlgs[0];\n\t  errorDialog.style.setProperty('display', 'none', 'important');\n  }\n\n  // **** Local Functions **** //\n\n  /**\n   What this function does is ugly and horrible and I should think twice before calling myself a good developer. With that said,\n   it is the best solution I could find to mute the video until the 'play' event happens (on mobile devices) and the plugin can decide whether\n   to play the ad or not.\n\n   We also need this monkeypatch to be able to pause and resume an ad using the player's API\n\n   If you have a better solution please do tell me.\n   */\n  function monkeyPatchPlayerApi () {\n\n    /**\n     * Monkey patch needed to handle firstPlay and resume of playing ad.\n     *\n     * @param callOrigPlay necessary flag to prevent infinite loop when you are restoring a VAST ad.\n     * @returns {player}\n     */\n    var origPlay = player.play;\n    player.play = function (callOrigPlay) {\n      var that = this;\n\n      if (isFirstPlay()) {\n        firstPlay();\n      } else {\n        resume(callOrigPlay);\n      }\n\n      return this;\n\n      // **** Local Functions **** //\n      function firstPlay () {\n        if (!utilities.isIPhone()) {\n          if (!volumeSnapshot) {\n              volumeSnapshot = saveVolumeSnapshot();\n          }\n          player.muted(true);\n        }\n\n        origPlay.apply(that, arguments);\n      }\n\n      function resume (callOrigPlay) {\n        if (isAdPlaying() && !callOrigPlay) {\n          player.vast.adUnit.resumeAd();\n        } else {\n        \tif (!isVpaidPlaying()) {\n                origPlay.apply(that, arguments);\n        \t}\n        }\n      }\n    };\n\n\n    /**\n     * Needed monkey patch to handle pause of playing ad.\n     *\n     * @param callOrigPlay necessary flag to prevent infinite loop when you are pausing a VAST ad.\n     * @returns {player}\n     */\n    var origPause = player.pause;\n    player.pause = function (callOrigPause) {\n      if (isAdPlaying() && !callOrigPause) {\n        player.vast.adUnit.pauseAd();\n      } else {\n      \tif (!isVpaidPlaying()) {\n      \t\torigPause.apply(this, arguments);\n      \t}\n      }\n      return this;\n    };\n\n\n    /**\n     * Needed monkey patch to handle paused state of the player when ads are playing.\n     *\n     * @param callOrigPlay necessary flag to prevent infinite loop when you are pausing a VAST ad.\n     * @returns {player}\n     */\n    var origPaused = player.paused;\n    player.paused = function (callOrigPaused) {\n      if (isAdPlaying() && !callOrigPaused) {\n        return player.vast.adUnit.isPaused();\n      }\n      return origPaused.apply(this, arguments);\n    };\n\n\n    /**\n     * VIDLA-4391: Needed monkey patch to handle bug in v5.28.x Brightcove Players when passing src MediaFile objects up to vjs player in iframe parent window\n     */\n    var isBrightcoveV5 = function isBrightcoveV5 () {\n      return (videojs && !videojs.getPlugins);   // v5.x.x Brightcove players didn't feature the getPlugins API method\n    };\n\n    // Have to do this only when MOL script has loaded in iframe\n    if (parent && window !== parent && isBrightcoveV5() && utilities.scriptLoadedInIframe()) {\n      var origSrc = player.src;\n      player.src = function (source) {\n        if (source && !(source instanceof parent.Object)) {\n          if (utilities.isIE11()) {\n             var temp = new parent.Object();\n             for (var prop in source) {\n               if (source.hasOwnProperty(prop)) {\n                temp[prop] = source[prop];\n               }\n             }\n             source = temp;\n          }\n          else {\n            source = parent.Object.assign(new parent.Object(), source);\n          }\n        }\n        origSrc.call(this, source);\n      };\n    }\n  }\n\n  function isVpaidPlaying () {\n\t  return player.vast && player.vast.VPAID;\n  }\n\n  function isAdPlaying () {\n    return player.vast && player.vast.adUnit;\n  }\n\n  function tryToTriggerFirstPlay () {\n    if (isFirstPlay()) {\n  \t  window._molSettings.firstPlay = false;\n      // _firstPlay = false;\n      player.trigger('vast.firstPlay');\n    }\n  }\n\n  function resetFirstPlay () {\n\t  window._molSettings.firstPlay = true;\n\t    // _firstPlay = true;\n    blackPoster.show();\n    restoreContentVolume();\n  }\n\n  function isFirstPlay () {\n\t  return window._molSettings.firstPlay;\n\t    // return _firstPlay;\n  }\n\n  function saveVolumeSnapshot () {\n    return {\n      muted: player.muted(),\n      volume: player.volume()\n    };\n  }\n\n  function restoreContentVolume () {\n    if (volumeSnapshot) {\n      // player.currentTime(0);\n      restoreVolumeSnapshot(volumeSnapshot);\n      volumeSnapshot = null;\n    }\n  }\n\n  function restoreVolumeSnapshot (snapshot) {\n    if (utilities.isObject(snapshot)) {\n      player.volume(snapshot.volume);\n      // VIDLA-4609 - Delay needed to ensure Brightcove player sets Ad's mute value properly to\n      // the player's configured setting on iPads w/iOS 12 (after the call stack clears)\n      setTimeout(function () {\n        player.muted(snapshot.muted);\n      }, 0);\n    }\n  }\n\n  function hideBlackPoster () {\n    if (!dom.hasClass(blackPoster.el(), 'vjs-hidden')) {\n      blackPoster.hide();\n    }\n  }\n\n  function addStyles () {\n    dom.addClass(player.el(), 'vjs-ad-playing');\n  }\n\n  function removeStyles () {\n\t  player.off('play', tryToTriggerFirstPlay);\n\t  player.off('vast.reset', resetFirstPlay); // Every time we change the sources we reset the first play.\n\t  player.off('vast.firstPlay', restoreContentVolume);\n\t  player.off('error', hideBlackPoster);     // If there is an error in the player we remove the blackposter to show the err msg\n\t  player.off('vast.adStart', hideBlackPoster);\n\t  player.off('vast.adsCancel', hideBlackPoster);\n\t  player.off('vast.adError', hideBlackPoster);\n\t  player.off('vast.adStart', addStyles);\n\t  player.off('vast.adEnd', removeStyles);\n\t  player.off('vast.adsCancel', removeStyles);\n\n      dom.removeClass(player.el(), 'vjs-ad-playing');\n\t  dom.removeClass(player.controlBar.playToggle.el(), 'vjs-ended');\n\n\t  if (errorDialog) {\n\t\t  setTimeout(function () {\n\t\t\t  errorDialog.style.removeProperty('display');\n\t\t  }, 500);\n\t  }\n  }\n};\n\n/**\n * Remove the poster attribute from the video element tech, if present. When\n * reusing a video element for multiple videos, the poster image will briefly\n * reappear while the new source loads. Removing the attribute ahead of time\n * prevents the poster from showing up between videos.\n * @param {object} player The videojs player object\n */\nplayerUtils.removeNativePoster = function (player) {\n  var tech = player.el().querySelector('.vjs-tech');\n  if (tech) {\n    tech.removeAttribute('poster');\n  }\n};\n\n/**\n * Helper function to listen to many events until one of them gets fired, then we\n * execute the handler and unsubscribe all the event listeners;\n *\n * @param player specific player from where to listen for the events\n * @param events array of events\n * @param handler function to execute once one of the events fires\n */\nplayerUtils.once = function once (player, events, handler) {\n  function listener () {\n    handler.apply(null, arguments);\n\n    events.forEach(function (event) {\n      player.off(event, listener);\n    });\n  }\n\n  events.forEach(function (event) {\n    player.on(event, listener);\n  });\n};\n\n// plugin utils\nplayerUtils.showBigPlayButton = function (player, show) {\n\tvar button = player.bigPlayButton.el_;\n\tif (button) {\n\t\tif (show) {\n\t\t\tbutton.style.display = 'block';\n\t\t\tbutton.style.zIndex = 99999;\n\t\t}\n\t\telse {\n\t\t\tbutton.style.display = 'none';\n\t\t\tbutton.style.zIndex = '';\n\t\t}\n\t}\n};\n\nmodule.exports = playerUtils;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9wbGF5ZXJVdGlscy5qcz9kYWI2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQyx5Q0FBTztBQUN6QixnQkFBZ0IsbUJBQU8sQ0FBQyxtRUFBb0I7QUFDNUMsYUFBYSxtQkFBTyxDQUFDLDZEQUFpQjs7QUFFdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0IsdUNBQXVDOztBQUV2RDtBQUNBLHFCQUFxQjs7QUFFckIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3V0aWxzL3BsYXllclV0aWxzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZG9tID0gcmVxdWlyZSgnLi9kb20nKTtcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdHlGdW5jdGlvbnMnKTtcbnZhciBsb2dnZXIgPSByZXF1aXJlKCcuL2NvbnNvbGVMb2dnZXInKTtcblxudmFyIHBsYXllclV0aWxzID0ge307XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjYXB0dXJlcyB0aGUgcG9ydGlvbnMgb2YgcGxheWVyIHN0YXRlIHJlbGV2YW50IHRvXG4gKiB2aWRlbyBwbGF5YmFjay4gVGhlIHJlc3VsdCBvZiB0aGlzIGZ1bmN0aW9uIGNhbiBiZSBwYXNzZWQgdG9cbiAqIHJlc3RvcmVQbGF5ZXJTbmFwc2hvdCB3aXRoIGEgcGxheWVyIHRvIHJldHVybiB0aGUgcGxheWVyIHRvIHRoZSBzdGF0ZSBpdFxuICogd2FzIGluIHdoZW4gdGhpcyBmdW5jdGlvbiB3YXMgaW52b2tlZC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBwbGF5ZXIgVGhlIHZpZGVvanMgcGxheWVyIG9iamVjdFxuICovXG5wbGF5ZXJVdGlscy5nZXRQbGF5ZXJTbmFwc2hvdCA9IGZ1bmN0aW9uIGdldFBsYXllclNuYXBzaG90IChwbGF5ZXIpIHtcbiAgdmFyIHRlY2ggPSBwbGF5ZXIuZWwoKS5xdWVyeVNlbGVjdG9yKCcudmpzLXRlY2gnKTtcblxuICB2YXIgc25hcHNob3QgPSB7XG4gICAgZW5kZWQ6IHBsYXllci5lbmRlZCgpLFxuICAgIHNyYzogcGxheWVyLmN1cnJlbnRTcmMoKSxcbiAgICBjdXJyZW50VGltZTogcGxheWVyLmN1cnJlbnRUaW1lKCksXG4gICAgdHlwZTogcGxheWVyLmN1cnJlbnRUeXBlKCksXG4gICAgcGxheWluZzogIXBsYXllci5wYXVzZWQoKSxcbiAgICBzdXBwcmVzc2VkVHJhY2tzOiBnZXRTdXBwcmVzc2VkVHJhY2tzKHBsYXllcilcbiAgfTtcblxuICBsb2dnZXIuZGVidWcoJ2dlbmVyYXRlZCBzbmFwc2hvdC4uLicsIHNuYXBzaG90KTtcblxuICBpZiAoc25hcHNob3QuZW5kZWQpIHtcbiAgICBzbmFwc2hvdC5jdXJyZW50VGltZSA9IHBsYXllci5kdXJhdGlvbigpICsgMTtcbiAgfVxuXG4gIGlmICh0ZWNoKSB7XG4gICAgc25hcHNob3QubmF0aXZlUG9zdGVyID0gdGVjaC5wb3N0ZXI7XG4gICAgc25hcHNob3Quc3R5bGUgPSB0ZWNoLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgfVxuXG4gIHZhciBlbHM7XG4gIC8vIFZJRExBLTQ1NjM6IEhhY2sgZm9yIEVkZ2Ugd2hlbiBCcmlnaHRjb3ZlIHBsYXllciBlbWJlZCBpbiBub3QgZnJpZW5kbHkgaWZyYW1lXG4gIGlmICh1dGlsaXRpZXMuc2NyaXB0TG9hZGVkSW5JZnJhbWUoKSkge1xuICAgIGVscyA9IHBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd2anMtZG9jay10ZXh0Jyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndmpzLWRvY2stdGV4dCcpO1xuICB9XG5cdGlmIChlbHMgJiYgZWxzLmxlbmd0aCA+IDApIHtcblx0ICAvLyBEZXRlcm1pbmUgd2hpY2ggJ3Zqcy1kb2NrLXRleHQnIGVsZW1lbnQgaXMgcGFydCBvZiB0aGlzIHBsYXllclxuICAgIHZhciB0ZW1wUGFyZW50cywgZm91bmRQbGF5ZXIgPSBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgdGVtcFBhcmVudHMgPSBnZXRQYXJlbnRMaXN0KGVsc1tpXSk7XG4gICAgICBpZiAodGVtcFBhcmVudHMuaW5kZXhPZihwbGF5ZXIuZWxfKSA+PSAwKSB7XG4gICAgICAgIGZvdW5kUGxheWVyID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmb3VuZFBsYXllcikge1xuICAgICAgc25hcHNob3QuZG9ja1RleHQgPSBlbHNbaV07XG4gICAgICBzbmFwc2hvdC5kb2NrVGV4dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc25hcHNob3Q7XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuICBmdW5jdGlvbiBnZXRTdXBwcmVzc2VkVHJhY2tzIChwbGF5ZXIpIHtcbiAgICB2YXIgdHJhY2tzID0gcGxheWVyLnJlbW90ZVRleHRUcmFja3MgPyBwbGF5ZXIucmVtb3RlVGV4dFRyYWNrcygpIDogW107XG5cbiAgICBpZiAodHJhY2tzICYmIHV0aWxpdGllcy5pc0FycmF5KHRyYWNrcy50cmFja3NfKSkge1xuICAgICAgdHJhY2tzID0gdHJhY2tzLnRyYWNrc187XG4gICAgfVxuXG4gICAgaWYgKCF1dGlsaXRpZXMuaXNBcnJheSh0cmFja3MpKSB7XG4gICAgICB0cmFja3MgPSBbXTtcbiAgICB9XG5cbiAgICB2YXIgc3VwcHJlc3NlZFRyYWNrcyA9IFtdO1xuICAgIHRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgc3VwcHJlc3NlZFRyYWNrcy5wdXNoKHtcbiAgICAgICAgdHJhY2s6IHRyYWNrLFxuICAgICAgICBtb2RlOiB0cmFjay5tb2RlXG4gICAgICB9KTtcbiAgICAgIHRyYWNrLm1vZGUgPSAnZGlzYWJsZWQnO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN1cHByZXNzZWRUcmFja3M7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYXJlbnRMaXN0IChlbGVtZW50KSB7XG4gICAgdmFyIHBhcmVudHMgPSBbXTtcbiAgICB3aGlsZSAoZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICBwYXJlbnRzLnVuc2hpZnQoZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbiAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRzO1xuICB9XG59O1xuXG4vKipcbiAqIEF0dGVtcHRzIHRvIG1vZGlmeSB0aGUgc3BlY2lmaWVkIHBsYXllciBzbyB0aGF0IGl0cyBzdGF0ZSBpcyBlcXVpdmFsZW50IHRvXG4gKiB0aGUgc3RhdGUgb2YgdGhlIHNuYXBzaG90LlxuICogQHBhcmFtIHtvYmplY3R9IHNuYXBzaG90IC0gdGhlIHBsYXllciBzdGF0ZSB0byBhcHBseVxuICovXG5wbGF5ZXJVdGlscy5yZXN0b3JlUGxheWVyU25hcHNob3QgPSBmdW5jdGlvbiByZXN0b3JlUGxheWVyU25hcHNob3QgKHBsYXllciwgc25hcHNob3QpIHtcbiAgdmFyIHRlY2ggPSBwbGF5ZXIuZWwoKS5xdWVyeVNlbGVjdG9yKCcudmpzLXRlY2gnKTtcbiAgdmFyIGF0dGVtcHRzID0gMjA7IC8vIHRoZSBudW1iZXIgb2YgcmVtYWluaW5nIGF0dGVtcHRzIHRvIHJlc3RvcmUgdGhlIHNuYXBzaG90XG5cbiAgbG9nZ2VyLmRlYnVnKCdyZXN0b3Jpbmcgc25hcHNob3QuLi4nLCBzbmFwc2hvdCk7XG4gIGlmIChzbmFwc2hvdC5uYXRpdmVQb3N0ZXIpIHtcbiAgICB0ZWNoLnBvc3RlciA9IHNuYXBzaG90Lm5hdGl2ZVBvc3RlcjtcbiAgfVxuXG4gIGlmICgnc3R5bGUnIGluIHNuYXBzaG90KSB7XG4gICAgLy8gb3ZlcndyaXRlIGFsbCBjc3Mgc3R5bGUgcHJvcGVydGllcyB0byByZXN0b3JlIHN0YXRlIHByZWNpc2VseVxuICAgIHRlY2guc2V0QXR0cmlidXRlKCdzdHlsZScsIHNuYXBzaG90LnN0eWxlIHx8ICcnKTtcbiAgfVxuXG5cdGlmIChzbmFwc2hvdC5kb2NrVGV4dCkge1xuXHRcdHNuYXBzaG90LmRvY2tUZXh0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHR9XG5cbiAgLy8gaWYgKGhhc1NyY0NoYW5nZWQocGxheWVyLCBzbmFwc2hvdCkpIHtcblxuICAgIC8vIG9uIGlvczcsIGZpZGRsaW5nIHdpdGggdGV4dFRyYWNrcyB0b28gZWFybHkgd2lsbCBjYXVzZSBzYWZhcmkgdG8gY3Jhc2hcbiAgICBwbGF5ZXIub25lKCdjb250ZW50bG9hZGVkbWV0YWRhdGEnLCByZXN0b3JlVHJhY2tzKTtcblxuICAgIHBsYXllci5vbmUoJ2NhbnBsYXknLCB0cnlUb1Jlc3VtZSk7XG4gICAgZW5zdXJlQ2FucGxheUV2dEdldHNGaXJlZCgpO1xuXG4gICAgLy8gaWYgdGhlIHNyYyBjaGFuZ2VkIGZvciBhZCBwbGF5YmFjaywgcmVzZXQgaXRcbiAgICBwbGF5ZXIuc3JjKHtzcmM6IHNuYXBzaG90LnNyYywgdHlwZTogc25hcHNob3QudHlwZX0pO1xuXG4gICAgLy8gc2FmYXJpIHJlcXVpcmVzIGEgY2FsbCB0byBgbG9hZGAgdG8gcGljayB1cCBhIGNoYW5nZWQgc291cmNlXG4gICAgLy8gcGxheWVyLmxvYWQoKTtcdC8vIFNhZmFyaSAxMSBubyBtb3JlIHJlcXVpcmVzICdsb2FkJy4gRmlyZWZveCBkb2Vzbid0IGxpa2UgJ2xvYWQnIGNhbGwgZm9yIGFscmVhZHkgbG9hZGVkIGNvbnRlbnQgKGluIGNhc2Ugb2YgQWRMb2FkZWQgdGltZW91dCkuXG5cbiAgLy8gfSBlbHNlIHtcbiAgLy8gICByZXN0b3JlVHJhY2tzKCk7XG4gIC8vXG4gIC8vICAgaWYgKHNuYXBzaG90LnBsYXlpbmcpIHtcbiAgLy8gICAgIHBsYXllci5wbGF5KCk7XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLy8gKioqKiBMb2NhbCBGdW5jdGlvbnMgKioqKiAvL1xuXG4gIC8qKlxuICAgKiBTb21ldGltZXMgZmlyZWZveCBkb2VzIG5vdCB0cmlnZ2VyIHRoZSAnY2FucGxheScgZXZ0LlxuICAgKiBUaGlzIGNvZGUgZW5zdXJlIHRoYXQgaXQgYWx3YXlzIGdldHMgdHJpZ2dlcmVkIHRyaWdnZXJlZC5cbiAgICovXG4gIGZ1bmN0aW9uIGVuc3VyZUNhbnBsYXlFdnRHZXRzRmlyZWQgKCkge1xuICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHBsYXllci50cmlnZ2VyKCdjYW5wbGF5Jyk7XG4gICAgfSwgMTAwMCk7XG5cbiAgICBwbGF5ZXIub25lKCdjYW5wbGF5JywgZnVuY3Rpb24gKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHBsYXllciBuZWVkcyB0byBiZSByZXN0b3JlZCB0byBpdHMgc3RhdGVcbiAgICogYmVmb3JlIGFkIHBsYXliYWNrIGJlZ2FuLiBXaXRoIGEgY3VzdG9tIGFkIGRpc3BsYXkgb3IgYnVybmVkLWluXG4gICAqIGFkcywgdGhlIGNvbnRlbnQgcGxheWVyIHN0YXRlIGhhc24ndCBiZWVuIG1vZGlmaWVkIGFuZCBzbyBub1xuICAgKiByZXN0b3JhdGlvbiBpcyByZXF1aXJlZFxuICAgKi9cbiAgLypcbiAgZnVuY3Rpb24gaGFzU3JjQ2hhbmdlZChwbGF5ZXIsIHNuYXBzaG90KSB7XG4gICAgaWYgKHBsYXllci5zcmMoKSkge1xuICAgICAgcmV0dXJuIHBsYXllci5zcmMoKSAhPT0gc25hcHNob3Quc3JjO1xuICAgIH1cbiAgICAvLyB0aGUgcGxheWVyIHdhcyBjb25maWd1cmVkIHRocm91Z2ggc291cmNlIGVsZW1lbnQgY2hpbGRyZW5cbiAgICByZXR1cm4gcGxheWVyLmN1cnJlbnRTcmMoKSAhPT0gc25hcHNob3Quc3JjO1xuICB9XG4gICovXG5cbiAgZnVuY3Rpb24gcmVzdG9yZVRyYWNrcyAoKSB7XG4gICAgdmFyIHN1cHByZXNzZWRUcmFja3MgPSBzbmFwc2hvdC5zdXBwcmVzc2VkVHJhY2tzO1xuICAgIHN1cHByZXNzZWRUcmFja3MuZm9yRWFjaChmdW5jdGlvbiAodHJhY2tTbmFwc2hvdCkge1xuICAgICAgdHJhY2tTbmFwc2hvdC50cmFjay5tb2RlID0gdHJhY2tTbmFwc2hvdC5tb2RlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGUgdmlkZW8gZWxlbWVudCBoYXMgbG9hZGVkIGVub3VnaCBvZiB0aGUgc25hcHNob3Qgc291cmNlXG4gICAqIHRvIGJlIHJlYWR5IHRvIGFwcGx5IHRoZSByZXN0IG9mIHRoZSBzdGF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gdHJ5VG9SZXN1bWUgKCkge1xuXG4gICAgLy8gaWYgc29tZSBwZXJpb2Qgb2YgdGhlIHZpZGVvIGlzIHNlZWthYmxlLCByZXN1bWUgcGxheWJhY2tcbiAgICAvLyBvdGhlcndpc2UgZGVsYXkgYSBiaXQgYW5kIHRoZW4gY2hlY2sgYWdhaW4gdW5sZXNzIHdlJ3JlIG91dCBvZiBhdHRlbXB0c1xuXG5cdCAgLy8gc2FmYXJpIDExIHJlcXVpcmVzIGNhbGwgYHBsYXlgIHRvIG1ha2Ugc2VlayBhdmFpbGFibGVcbiAgICAgIHBsYXllci5wbGF5KCk7XG5cbiAgICBpZiAoIXBsYXllclV0aWxzLmlzUmVhZHlUb1Jlc3VtZShwbGF5ZXIpICYmIGF0dGVtcHRzLS0pIHtcbiAgICAgIHNldFRpbWVvdXQodHJ5VG9SZXN1bWUsIDUwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHBsYXllci5jdXJyZW50VGltZSgpICE9PSBzbmFwc2hvdC5jdXJyZW50VGltZSkge1xuICAgICAgICAgIGlmIChzbmFwc2hvdC5wbGF5aW5nKSB7IC8vIGlmIG5lZWRlZCByZXN0b3JlIHBsYXlpbmcgc3RhdHVzIGFmdGVyIHNlZWsgY29tcGxldGVzXG4gICAgICAgICAgICBwbGF5ZXIub25lKCdzZWVrZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmICghc25hcHNob3QuZW5kZWQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGxheWVyLmN1cnJlbnRUaW1lKHNuYXBzaG90LmN1cnJlbnRUaW1lKTtcblxuICAgICAgICB9IGVsc2UgaWYgKHNuYXBzaG90LnBsYXlpbmcpIHtcbiAgICAgICAgICAvLyBpZiBuZWVkZWQgYW5kIG5vIHNlZWsgaGFzIGJlZW4gcGVyZm9ybWVkLCByZXN0b3JlIHBsYXlpbmcgc3RhdHVzIGltbWVkaWF0ZWx5XG4gICAgICAgICAgcGxheWVyLnBsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHZpZGVvanMubG9nLndhcm4oJ0ZhaWxlZCB0byByZXN1bWUgdGhlIGNvbnRlbnQgYWZ0ZXIgYW4gYWR2ZXJ0aXNlbWVudCcsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxucGxheWVyVXRpbHMuaXNSZWFkeVRvUmVzdW1lID0gZnVuY3Rpb24gKHBsYXllcikge1xuICBpZiAodXRpbGl0aWVzLmlzSUUxMSgpKSB7XG4gICAgLy8gZm9yIElFIDExIGNoZWNrIG9ubHkgcGxheWVyIHN0YXRlXG4gICAgaWYgKHBsYXllci5yZWFkeVN0YXRlKCkgPiAxKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHBsYXllci5yZWFkeVN0YXRlKCkgPiAxKSB7XG4gICAgLy8gc29tZSBicm93c2VycyBhbmQgbWVkaWEgYXJlbid0IFwic2Vla2FibGVcIi5cbiAgICAvLyByZWFkeVN0YXRlIGdyZWF0ZXIgdGhhbiAxIGFsbG93cyBmb3Igc2Vla2luZyB3aXRob3V0IGV4Y2VwdGlvbnNcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwbGF5ZXIuc2Vla2FibGUoKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gaWYgdGhlIHBsYXllciBkb2Vzbid0IGV4cG9zZSB0aGUgc2Vla2FibGUgdGltZSByYW5nZXMsIHRyeSB0b1xuICAgIC8vIHJlc3VtZSBwbGF5YmFjayBpbW1lZGlhdGVseVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHBsYXllci5zZWVrYWJsZSgpLmxlbmd0aCA+IDApIHtcbiAgICAvLyBpZiBzb21lIHBlcmlvZCBvZiB0aGUgdmlkZW8gaXMgc2Vla2FibGUsIHJlc3VtZSBwbGF5YmFja1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHByZXBhcmVzIHRoZSBwbGF5ZXIgdG8gZGlzcGxheSBhZHMuXG4gKiBBZGRpbmcgY29udmVuaWVuY2UgZXZlbnRzIGxpa2UgdGhlICd2YXN0LmZpcnNQbGF5JyB0aGF0IGdldHMgZmlyZWQgd2hlbiB0aGUgdmlkZW8gaXMgZmlyc3QgcGxheWVkXG4gKiBhbmQgYWRzIHRoZSBibGFja1Bvc3RlciB0byB0aGUgcGxheWVyIHRvIHByZXZlbnQgY29udGVudCBmcm9tIGJlaW5nIGRpc3BsYXllZCBiZWZvcmUgdGhlIHByZXJvbGwgYWQuXG4gKlxuICogQHBhcmFtIHBsYXllclxuICovXG5wbGF5ZXJVdGlscy5wcmVwYXJlRm9yQWRzID0gZnVuY3Rpb24gKHBsYXllcikge1xuICB2YXIgYmxhY2tQb3N0ZXIgPSBwbGF5ZXIuYWRkQ2hpbGQoJ2JsYWNrUG9zdGVyJyk7XG4gIC8vIHZhciBfZmlyc3RQbGF5ID0gdHJ1ZTtcbiAgdmFyIHZvbHVtZVNuYXBzaG90O1xuXG5cbiAgbW9ua2V5UGF0Y2hQbGF5ZXJBcGkoKTtcblxuICBwbGF5ZXIub24oJ3BsYXknLCB0cnlUb1RyaWdnZXJGaXJzdFBsYXkpO1xuICBwbGF5ZXIub24oJ3Zhc3QucmVzZXQnLCByZXNldEZpcnN0UGxheSk7ICAvLyBFdmVyeSB0aW1lIHdlIGNoYW5nZSB0aGUgc291cmNlcyB3ZSByZXNldCB0aGUgZmlyc3QgcGxheS5cbiAgcGxheWVyLm9uKCd2YXN0LmZpcnN0UGxheScsIHJlc3RvcmVDb250ZW50Vm9sdW1lKTtcbiAgcGxheWVyLm9uKCdlcnJvcicsIGhpZGVCbGFja1Bvc3Rlcik7ICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIHBsYXllciB3ZSByZW1vdmUgdGhlIGJsYWNrcG9zdGVyIHRvIHNob3cgdGhlIGVyciBtc2dcbiAgcGxheWVyLm9uKCd2YXN0LmFkU3RhcnQnLCBoaWRlQmxhY2tQb3N0ZXIpO1xuICBwbGF5ZXIub24oJ3Zhc3QuYWRzQ2FuY2VsJywgaGlkZUJsYWNrUG9zdGVyKTtcbiAgcGxheWVyLm9uKCd2YXN0LmFkRXJyb3InLCBoaWRlQmxhY2tQb3N0ZXIpO1xuICBwbGF5ZXIub24oJ3Zhc3QuYWRTdGFydCcsIGFkZFN0eWxlcyk7XG4gIHBsYXllci5vbigndmFzdC5hZEVuZCcsIHJlbW92ZVN0eWxlcyk7XG4gIHBsYXllci5vbigndmFzdC5hZHNDYW5jZWwnLCByZW1vdmVTdHlsZXMpO1xuXG4gIC8vIFZJRExBLTI0NjUgLSBoaWRlIHZqcyBlcnJvciBkaWFsb2cgd2hlbiBhZCBydW5uaW5nXG4gIHZhciBlcnJvckRpYWxvZztcbiAgdmFyIGRsZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd2anMtZXJyb3ItZGlzcGxheScpO1xuICBpZiAoZGxncyAmJiBkbGdzLmxlbmd0aCA+IDApIHtcblx0ICBlcnJvckRpYWxvZyA9IGRsZ3NbMF07XG5cdCAgZXJyb3JEaWFsb2cuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKTtcbiAgfVxuXG4gIC8vICoqKiogTG9jYWwgRnVuY3Rpb25zICoqKiogLy9cblxuICAvKipcbiAgIFdoYXQgdGhpcyBmdW5jdGlvbiBkb2VzIGlzIHVnbHkgYW5kIGhvcnJpYmxlIGFuZCBJIHNob3VsZCB0aGluayB0d2ljZSBiZWZvcmUgY2FsbGluZyBteXNlbGYgYSBnb29kIGRldmVsb3Blci4gV2l0aCB0aGF0IHNhaWQsXG4gICBpdCBpcyB0aGUgYmVzdCBzb2x1dGlvbiBJIGNvdWxkIGZpbmQgdG8gbXV0ZSB0aGUgdmlkZW8gdW50aWwgdGhlICdwbGF5JyBldmVudCBoYXBwZW5zIChvbiBtb2JpbGUgZGV2aWNlcykgYW5kIHRoZSBwbHVnaW4gY2FuIGRlY2lkZSB3aGV0aGVyXG4gICB0byBwbGF5IHRoZSBhZCBvciBub3QuXG5cbiAgIFdlIGFsc28gbmVlZCB0aGlzIG1vbmtleXBhdGNoIHRvIGJlIGFibGUgdG8gcGF1c2UgYW5kIHJlc3VtZSBhbiBhZCB1c2luZyB0aGUgcGxheWVyJ3MgQVBJXG5cbiAgIElmIHlvdSBoYXZlIGEgYmV0dGVyIHNvbHV0aW9uIHBsZWFzZSBkbyB0ZWxsIG1lLlxuICAgKi9cbiAgZnVuY3Rpb24gbW9ua2V5UGF0Y2hQbGF5ZXJBcGkgKCkge1xuXG4gICAgLyoqXG4gICAgICogTW9ua2V5IHBhdGNoIG5lZWRlZCB0byBoYW5kbGUgZmlyc3RQbGF5IGFuZCByZXN1bWUgb2YgcGxheWluZyBhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsT3JpZ1BsYXkgbmVjZXNzYXJ5IGZsYWcgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wIHdoZW4geW91IGFyZSByZXN0b3JpbmcgYSBWQVNUIGFkLlxuICAgICAqIEByZXR1cm5zIHtwbGF5ZXJ9XG4gICAgICovXG4gICAgdmFyIG9yaWdQbGF5ID0gcGxheWVyLnBsYXk7XG4gICAgcGxheWVyLnBsYXkgPSBmdW5jdGlvbiAoY2FsbE9yaWdQbGF5KSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgIGlmIChpc0ZpcnN0UGxheSgpKSB7XG4gICAgICAgIGZpcnN0UGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdW1lKGNhbGxPcmlnUGxheSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyAqKioqIExvY2FsIEZ1bmN0aW9ucyAqKioqIC8vXG4gICAgICBmdW5jdGlvbiBmaXJzdFBsYXkgKCkge1xuICAgICAgICBpZiAoIXV0aWxpdGllcy5pc0lQaG9uZSgpKSB7XG4gICAgICAgICAgaWYgKCF2b2x1bWVTbmFwc2hvdCkge1xuICAgICAgICAgICAgICB2b2x1bWVTbmFwc2hvdCA9IHNhdmVWb2x1bWVTbmFwc2hvdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwbGF5ZXIubXV0ZWQodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcmlnUGxheS5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZXN1bWUgKGNhbGxPcmlnUGxheSkge1xuICAgICAgICBpZiAoaXNBZFBsYXlpbmcoKSAmJiAhY2FsbE9yaWdQbGF5KSB7XG4gICAgICAgICAgcGxheWVyLnZhc3QuYWRVbml0LnJlc3VtZUFkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIFx0aWYgKCFpc1ZwYWlkUGxheWluZygpKSB7XG4gICAgICAgICAgICAgICAgb3JpZ1BsYXkuYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgICAgICAgXHR9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBOZWVkZWQgbW9ua2V5IHBhdGNoIHRvIGhhbmRsZSBwYXVzZSBvZiBwbGF5aW5nIGFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxPcmlnUGxheSBuZWNlc3NhcnkgZmxhZyB0byBwcmV2ZW50IGluZmluaXRlIGxvb3Agd2hlbiB5b3UgYXJlIHBhdXNpbmcgYSBWQVNUIGFkLlxuICAgICAqIEByZXR1cm5zIHtwbGF5ZXJ9XG4gICAgICovXG4gICAgdmFyIG9yaWdQYXVzZSA9IHBsYXllci5wYXVzZTtcbiAgICBwbGF5ZXIucGF1c2UgPSBmdW5jdGlvbiAoY2FsbE9yaWdQYXVzZSkge1xuICAgICAgaWYgKGlzQWRQbGF5aW5nKCkgJiYgIWNhbGxPcmlnUGF1c2UpIHtcbiAgICAgICAgcGxheWVyLnZhc3QuYWRVbml0LnBhdXNlQWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICBcdGlmICghaXNWcGFpZFBsYXlpbmcoKSkge1xuICAgICAgXHRcdG9yaWdQYXVzZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgXHR9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBOZWVkZWQgbW9ua2V5IHBhdGNoIHRvIGhhbmRsZSBwYXVzZWQgc3RhdGUgb2YgdGhlIHBsYXllciB3aGVuIGFkcyBhcmUgcGxheWluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsT3JpZ1BsYXkgbmVjZXNzYXJ5IGZsYWcgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wIHdoZW4geW91IGFyZSBwYXVzaW5nIGEgVkFTVCBhZC5cbiAgICAgKiBAcmV0dXJucyB7cGxheWVyfVxuICAgICAqL1xuICAgIHZhciBvcmlnUGF1c2VkID0gcGxheWVyLnBhdXNlZDtcbiAgICBwbGF5ZXIucGF1c2VkID0gZnVuY3Rpb24gKGNhbGxPcmlnUGF1c2VkKSB7XG4gICAgICBpZiAoaXNBZFBsYXlpbmcoKSAmJiAhY2FsbE9yaWdQYXVzZWQpIHtcbiAgICAgICAgcmV0dXJuIHBsYXllci52YXN0LmFkVW5pdC5pc1BhdXNlZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdQYXVzZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBWSURMQS00MzkxOiBOZWVkZWQgbW9ua2V5IHBhdGNoIHRvIGhhbmRsZSBidWcgaW4gdjUuMjgueCBCcmlnaHRjb3ZlIFBsYXllcnMgd2hlbiBwYXNzaW5nIHNyYyBNZWRpYUZpbGUgb2JqZWN0cyB1cCB0byB2anMgcGxheWVyIGluIGlmcmFtZSBwYXJlbnQgd2luZG93XG4gICAgICovXG4gICAgdmFyIGlzQnJpZ2h0Y292ZVY1ID0gZnVuY3Rpb24gaXNCcmlnaHRjb3ZlVjUgKCkge1xuICAgICAgcmV0dXJuICh2aWRlb2pzICYmICF2aWRlb2pzLmdldFBsdWdpbnMpOyAgIC8vIHY1LngueCBCcmlnaHRjb3ZlIHBsYXllcnMgZGlkbid0IGZlYXR1cmUgdGhlIGdldFBsdWdpbnMgQVBJIG1ldGhvZFxuICAgIH07XG5cbiAgICAvLyBIYXZlIHRvIGRvIHRoaXMgb25seSB3aGVuIE1PTCBzY3JpcHQgaGFzIGxvYWRlZCBpbiBpZnJhbWVcbiAgICBpZiAocGFyZW50ICYmIHdpbmRvdyAhPT0gcGFyZW50ICYmIGlzQnJpZ2h0Y292ZVY1KCkgJiYgdXRpbGl0aWVzLnNjcmlwdExvYWRlZEluSWZyYW1lKCkpIHtcbiAgICAgIHZhciBvcmlnU3JjID0gcGxheWVyLnNyYztcbiAgICAgIHBsYXllci5zcmMgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UgJiYgIShzb3VyY2UgaW5zdGFuY2VvZiBwYXJlbnQuT2JqZWN0KSkge1xuICAgICAgICAgIGlmICh1dGlsaXRpZXMuaXNJRTExKCkpIHtcbiAgICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBwYXJlbnQuT2JqZWN0KCk7XG4gICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICB0ZW1wW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBzb3VyY2UgPSB0ZW1wO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHBhcmVudC5PYmplY3QuYXNzaWduKG5ldyBwYXJlbnQuT2JqZWN0KCksIHNvdXJjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9yaWdTcmMuY2FsbCh0aGlzLCBzb3VyY2UpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc1ZwYWlkUGxheWluZyAoKSB7XG5cdCAgcmV0dXJuIHBsYXllci52YXN0ICYmIHBsYXllci52YXN0LlZQQUlEO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNBZFBsYXlpbmcgKCkge1xuICAgIHJldHVybiBwbGF5ZXIudmFzdCAmJiBwbGF5ZXIudmFzdC5hZFVuaXQ7XG4gIH1cblxuICBmdW5jdGlvbiB0cnlUb1RyaWdnZXJGaXJzdFBsYXkgKCkge1xuICAgIGlmIChpc0ZpcnN0UGxheSgpKSB7XG4gIFx0ICB3aW5kb3cuX21vbFNldHRpbmdzLmZpcnN0UGxheSA9IGZhbHNlO1xuICAgICAgLy8gX2ZpcnN0UGxheSA9IGZhbHNlO1xuICAgICAgcGxheWVyLnRyaWdnZXIoJ3Zhc3QuZmlyc3RQbGF5Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRGaXJzdFBsYXkgKCkge1xuXHQgIHdpbmRvdy5fbW9sU2V0dGluZ3MuZmlyc3RQbGF5ID0gdHJ1ZTtcblx0ICAgIC8vIF9maXJzdFBsYXkgPSB0cnVlO1xuICAgIGJsYWNrUG9zdGVyLnNob3coKTtcbiAgICByZXN0b3JlQ29udGVudFZvbHVtZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNGaXJzdFBsYXkgKCkge1xuXHQgIHJldHVybiB3aW5kb3cuX21vbFNldHRpbmdzLmZpcnN0UGxheTtcblx0ICAgIC8vIHJldHVybiBfZmlyc3RQbGF5O1xuICB9XG5cbiAgZnVuY3Rpb24gc2F2ZVZvbHVtZVNuYXBzaG90ICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbXV0ZWQ6IHBsYXllci5tdXRlZCgpLFxuICAgICAgdm9sdW1lOiBwbGF5ZXIudm9sdW1lKClcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzdG9yZUNvbnRlbnRWb2x1bWUgKCkge1xuICAgIGlmICh2b2x1bWVTbmFwc2hvdCkge1xuICAgICAgLy8gcGxheWVyLmN1cnJlbnRUaW1lKDApO1xuICAgICAgcmVzdG9yZVZvbHVtZVNuYXBzaG90KHZvbHVtZVNuYXBzaG90KTtcbiAgICAgIHZvbHVtZVNuYXBzaG90ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXN0b3JlVm9sdW1lU25hcHNob3QgKHNuYXBzaG90KSB7XG4gICAgaWYgKHV0aWxpdGllcy5pc09iamVjdChzbmFwc2hvdCkpIHtcbiAgICAgIHBsYXllci52b2x1bWUoc25hcHNob3Qudm9sdW1lKTtcbiAgICAgIC8vIFZJRExBLTQ2MDkgLSBEZWxheSBuZWVkZWQgdG8gZW5zdXJlIEJyaWdodGNvdmUgcGxheWVyIHNldHMgQWQncyBtdXRlIHZhbHVlIHByb3Blcmx5IHRvXG4gICAgICAvLyB0aGUgcGxheWVyJ3MgY29uZmlndXJlZCBzZXR0aW5nIG9uIGlQYWRzIHcvaU9TIDEyIChhZnRlciB0aGUgY2FsbCBzdGFjayBjbGVhcnMpXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGxheWVyLm11dGVkKHNuYXBzaG90Lm11dGVkKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVCbGFja1Bvc3RlciAoKSB7XG4gICAgaWYgKCFkb20uaGFzQ2xhc3MoYmxhY2tQb3N0ZXIuZWwoKSwgJ3Zqcy1oaWRkZW4nKSkge1xuICAgICAgYmxhY2tQb3N0ZXIuaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFN0eWxlcyAoKSB7XG4gICAgZG9tLmFkZENsYXNzKHBsYXllci5lbCgpLCAndmpzLWFkLXBsYXlpbmcnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVN0eWxlcyAoKSB7XG5cdCAgcGxheWVyLm9mZigncGxheScsIHRyeVRvVHJpZ2dlckZpcnN0UGxheSk7XG5cdCAgcGxheWVyLm9mZigndmFzdC5yZXNldCcsIHJlc2V0Rmlyc3RQbGF5KTsgLy8gRXZlcnkgdGltZSB3ZSBjaGFuZ2UgdGhlIHNvdXJjZXMgd2UgcmVzZXQgdGhlIGZpcnN0IHBsYXkuXG5cdCAgcGxheWVyLm9mZigndmFzdC5maXJzdFBsYXknLCByZXN0b3JlQ29udGVudFZvbHVtZSk7XG5cdCAgcGxheWVyLm9mZignZXJyb3InLCBoaWRlQmxhY2tQb3N0ZXIpOyAgICAgLy8gSWYgdGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIHBsYXllciB3ZSByZW1vdmUgdGhlIGJsYWNrcG9zdGVyIHRvIHNob3cgdGhlIGVyciBtc2dcblx0ICBwbGF5ZXIub2ZmKCd2YXN0LmFkU3RhcnQnLCBoaWRlQmxhY2tQb3N0ZXIpO1xuXHQgIHBsYXllci5vZmYoJ3Zhc3QuYWRzQ2FuY2VsJywgaGlkZUJsYWNrUG9zdGVyKTtcblx0ICBwbGF5ZXIub2ZmKCd2YXN0LmFkRXJyb3InLCBoaWRlQmxhY2tQb3N0ZXIpO1xuXHQgIHBsYXllci5vZmYoJ3Zhc3QuYWRTdGFydCcsIGFkZFN0eWxlcyk7XG5cdCAgcGxheWVyLm9mZigndmFzdC5hZEVuZCcsIHJlbW92ZVN0eWxlcyk7XG5cdCAgcGxheWVyLm9mZigndmFzdC5hZHNDYW5jZWwnLCByZW1vdmVTdHlsZXMpO1xuXG4gICAgICBkb20ucmVtb3ZlQ2xhc3MocGxheWVyLmVsKCksICd2anMtYWQtcGxheWluZycpO1xuXHQgIGRvbS5yZW1vdmVDbGFzcyhwbGF5ZXIuY29udHJvbEJhci5wbGF5VG9nZ2xlLmVsKCksICd2anMtZW5kZWQnKTtcblxuXHQgIGlmIChlcnJvckRpYWxvZykge1xuXHRcdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHQgIGVycm9yRGlhbG9nLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG5cdFx0ICB9LCA1MDApO1xuXHQgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgdGhlIHBvc3RlciBhdHRyaWJ1dGUgZnJvbSB0aGUgdmlkZW8gZWxlbWVudCB0ZWNoLCBpZiBwcmVzZW50LiBXaGVuXG4gKiByZXVzaW5nIGEgdmlkZW8gZWxlbWVudCBmb3IgbXVsdGlwbGUgdmlkZW9zLCB0aGUgcG9zdGVyIGltYWdlIHdpbGwgYnJpZWZseVxuICogcmVhcHBlYXIgd2hpbGUgdGhlIG5ldyBzb3VyY2UgbG9hZHMuIFJlbW92aW5nIHRoZSBhdHRyaWJ1dGUgYWhlYWQgb2YgdGltZVxuICogcHJldmVudHMgdGhlIHBvc3RlciBmcm9tIHNob3dpbmcgdXAgYmV0d2VlbiB2aWRlb3MuXG4gKiBAcGFyYW0ge29iamVjdH0gcGxheWVyIFRoZSB2aWRlb2pzIHBsYXllciBvYmplY3RcbiAqL1xucGxheWVyVXRpbHMucmVtb3ZlTmF0aXZlUG9zdGVyID0gZnVuY3Rpb24gKHBsYXllcikge1xuICB2YXIgdGVjaCA9IHBsYXllci5lbCgpLnF1ZXJ5U2VsZWN0b3IoJy52anMtdGVjaCcpO1xuICBpZiAodGVjaCkge1xuICAgIHRlY2gucmVtb3ZlQXR0cmlidXRlKCdwb3N0ZXInKTtcbiAgfVxufTtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gbGlzdGVuIHRvIG1hbnkgZXZlbnRzIHVudGlsIG9uZSBvZiB0aGVtIGdldHMgZmlyZWQsIHRoZW4gd2VcbiAqIGV4ZWN1dGUgdGhlIGhhbmRsZXIgYW5kIHVuc3Vic2NyaWJlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzO1xuICpcbiAqIEBwYXJhbSBwbGF5ZXIgc3BlY2lmaWMgcGxheWVyIGZyb20gd2hlcmUgdG8gbGlzdGVuIGZvciB0aGUgZXZlbnRzXG4gKiBAcGFyYW0gZXZlbnRzIGFycmF5IG9mIGV2ZW50c1xuICogQHBhcmFtIGhhbmRsZXIgZnVuY3Rpb24gdG8gZXhlY3V0ZSBvbmNlIG9uZSBvZiB0aGUgZXZlbnRzIGZpcmVzXG4gKi9cbnBsYXllclV0aWxzLm9uY2UgPSBmdW5jdGlvbiBvbmNlIChwbGF5ZXIsIGV2ZW50cywgaGFuZGxlcikge1xuICBmdW5jdGlvbiBsaXN0ZW5lciAoKSB7XG4gICAgaGFuZGxlci5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXG4gICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBwbGF5ZXIub2ZmKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfSk7XG4gIH1cblxuICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBwbGF5ZXIub24oZXZlbnQsIGxpc3RlbmVyKTtcbiAgfSk7XG59O1xuXG4vLyBwbHVnaW4gdXRpbHNcbnBsYXllclV0aWxzLnNob3dCaWdQbGF5QnV0dG9uID0gZnVuY3Rpb24gKHBsYXllciwgc2hvdykge1xuXHR2YXIgYnV0dG9uID0gcGxheWVyLmJpZ1BsYXlCdXR0b24uZWxfO1xuXHRpZiAoYnV0dG9uKSB7XG5cdFx0aWYgKHNob3cpIHtcblx0XHRcdGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdGJ1dHRvbi5zdHlsZS56SW5kZXggPSA5OTk5OTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdGJ1dHRvbi5zdHlsZS56SW5kZXggPSAnJztcblx0XHR9XG5cdH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcGxheWVyVXRpbHM7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/utils/playerUtils.js\n");

/***/ }),

/***/ "./src/scripts/utils/urlUtils.js":
/*!***************************************!*\
  !*** ./src/scripts/utils/urlUtils.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utilities = __webpack_require__(/*! ./utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\n/**\n *\n * IMPORTANT NOTE: This function comes from angularJs and was originally called urlResolve\n *                 you can take a look at the original code here https://github.com/angular/angular.js/blob/master/src/ng/urlUtils.js\n *\n * Implementation Notes for non-IE browsers\n * ----------------------------------------\n * Assigning a URL to the href property of an anchor DOM node, even one attached to the DOM,\n * results both in the normalizing and parsing of the URL.  Normalizing means that a relative\n * URL will be resolved into an absolute URL in the context of the application document.\n * Parsing means that the anchor node's host, hostname, protocol, port, pathname and related\n * properties are all populated to reflect the normalized URL.  This approach has wide\n * compatibility - Safari 1+, Mozilla 1+, Opera 7+,e etc.  See\n * http://www.aptana.com/reference/html/api/HTMLAnchorElement.html\n *\n * Implementation Notes for IE\n * ---------------------------\n * IE >= 8 and <= 10 normalizes the URL when assigned to the anchor node similar to the other\n * browsers.  However, the parsed components will not be set if the URL assigned did not specify\n * them.  (e.g. if you assign a.href = \"foo\", then a.protocol, a.host, etc. will be empty.)  We\n * work around that by performing the parsing in a 2nd step by taking a previously normalized\n * URL (e.g. by assigning to a.href) and assigning it a.href again.  This correctly populates the\n * properties such as protocol, hostname, port, etc.\n *\n * IE7 does not normalize the URL when assigned to an anchor node.  (Apparently, it does, if one\n * uses the inner HTML approach to assign the URL as part of an HTML snippet -\n * http://stackoverflow.com/a/472729)  However, setting img[src] does normalize the URL.\n * Unfortunately, setting img[src] to something like \"javascript:foo\" on IE throws an exception.\n * Since the primary usage for normalizing URLs is to sanitize such URLs, we can't use that\n * method and IE < 8 is unsupported.\n *\n * References:\n *   http://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n *   http://www.aptana.com/reference/html/api/HTMLAnchorElement.html\n *   http://url.spec.whatwg.org/#urlutils\n *   https://github.com/angular/angular.js/pull/2902\n *   http://james.padolsey.com/javascript/parsing-urls-with-the-dom/\n *\n * @kind function\n * @param {string} url The URL to be parsed.\n * @description Normalizes and parses a URL.\n * @returns {object} Returns the normalized URL as a dictionary.\n *\n *   | member name   | Description    |\n *   |---------------|----------------|\n *   | href          | A normalized version of the provided URL if it was not an absolute URL |\n *   | protocol      | The protocol including the trailing colon                              |\n *   | host          | The host and port (if the port is non-default) of the normalizedUrl    |\n *   | search        | The search params, minus the question mark                             |\n *   | hash          | The hash string, minus the hash symbol\n *   | hostname      | The hostname\n *   | port          | The port, without \":\"\n *   | pathname      | The pathname, beginning with \"/\"\n *\n */\n\nvar urlParsingNode = document.createElement('a');\n/**\n * documentMode is an IE-only property\n * http://msdn.microsoft.com/en-us/library/ie/cc196988(v=vs.85).aspx\n */\nvar msie = document.documentMode;\n\nfunction urlParts (url) {\n  var href = url;\n\n  if (msie) {\n    // Normalize before parse.  Refer Implementation Notes on why this is\n    // done in two steps on IE.\n    urlParsingNode.setAttribute('href', href);\n    href = urlParsingNode.href;\n  }\n\n  urlParsingNode.setAttribute('href', href);\n\n  // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n  return {\n    href: urlParsingNode.href,\n    protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n    host: urlParsingNode.host,\n    search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n    hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n    hostname: urlParsingNode.hostname,\n    port: utilities.isNotEmptyString(urlParsingNode.port) ? urlParsingNode.port : 80,\n    pathname: (urlParsingNode.pathname.charAt(0) === '/')\n      ? urlParsingNode.pathname\n      : '/' + urlParsingNode.pathname\n  };\n}\n\n\n/**\n * This function accepts a query string (search part of a url) and returns a dictionary with\n * the different key value pairs\n * @param {string} qs queryString\n */\nfunction queryStringToObj (qs, cond) {\n  var pairs, qsObj;\n\n  cond = utilities.isFunction(cond) ? cond : function () {\n    return true;\n  };\n\n  qs = qs.trim().replace(/^\\?/, '');\n  pairs = qs.split('&');\n  qsObj = {};\n\n  utilities.forEach(pairs, function (pair) {\n    var keyValue, key, value;\n    if (pair !== '') {\n      keyValue = pair.split('=');\n      key = keyValue[0];\n      value = keyValue[1];\n      if (cond(key, value)) {\n        qsObj[key] = value;\n      }\n    }\n  });\n\n  return qsObj;\n}\n\n/**\n * This function accepts an object and serializes it into a query string without the leading '?'\n * @param obj\n * @returns {string}\n */\nfunction objToQueryString (obj) {\n  var pairs = [];\n  utilities.forEach(obj, function (value, key) {\n    pairs.push(key + '=' + value);\n  });\n  return pairs.join('&');\n}\n\nmodule.exports = {\n  urlParts: urlParts,\n  queryStringToObj: queryStringToObj,\n  objToQueryString: objToQueryString\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy91cmxVdGlscy5qcz9hMTFkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLGdCQUFnQixtQkFBTyxDQUFDLG1FQUFvQjs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvdXRpbHMvdXJsVXRpbHMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdHlGdW5jdGlvbnMnKTtcblxuLyoqXG4gKlxuICogSU1QT1JUQU5UIE5PVEU6IFRoaXMgZnVuY3Rpb24gY29tZXMgZnJvbSBhbmd1bGFySnMgYW5kIHdhcyBvcmlnaW5hbGx5IGNhbGxlZCB1cmxSZXNvbHZlXG4gKiAgICAgICAgICAgICAgICAgeW91IGNhbiB0YWtlIGEgbG9vayBhdCB0aGUgb3JpZ2luYWwgY29kZSBoZXJlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvYmxvYi9tYXN0ZXIvc3JjL25nL3VybFV0aWxzLmpzXG4gKlxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIG5vbi1JRSBicm93c2Vyc1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQXNzaWduaW5nIGEgVVJMIHRvIHRoZSBocmVmIHByb3BlcnR5IG9mIGFuIGFuY2hvciBET00gbm9kZSwgZXZlbiBvbmUgYXR0YWNoZWQgdG8gdGhlIERPTSxcbiAqIHJlc3VsdHMgYm90aCBpbiB0aGUgbm9ybWFsaXppbmcgYW5kIHBhcnNpbmcgb2YgdGhlIFVSTC4gIE5vcm1hbGl6aW5nIG1lYW5zIHRoYXQgYSByZWxhdGl2ZVxuICogVVJMIHdpbGwgYmUgcmVzb2x2ZWQgaW50byBhbiBhYnNvbHV0ZSBVUkwgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxuICogUGFyc2luZyBtZWFucyB0aGF0IHRoZSBhbmNob3Igbm9kZSdzIGhvc3QsIGhvc3RuYW1lLCBwcm90b2NvbCwgcG9ydCwgcGF0aG5hbWUgYW5kIHJlbGF0ZWRcbiAqIHByb3BlcnRpZXMgYXJlIGFsbCBwb3B1bGF0ZWQgdG8gcmVmbGVjdCB0aGUgbm9ybWFsaXplZCBVUkwuICBUaGlzIGFwcHJvYWNoIGhhcyB3aWRlXG4gKiBjb21wYXRpYmlsaXR5IC0gU2FmYXJpIDErLCBNb3ppbGxhIDErLCBPcGVyYSA3KyxlIGV0Yy4gIFNlZVxuICogaHR0cDovL3d3dy5hcHRhbmEuY29tL3JlZmVyZW5jZS9odG1sL2FwaS9IVE1MQW5jaG9yRWxlbWVudC5odG1sXG4gKlxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIElFXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIElFID49IDggYW5kIDw9IDEwIG5vcm1hbGl6ZXMgdGhlIFVSTCB3aGVuIGFzc2lnbmVkIHRvIHRoZSBhbmNob3Igbm9kZSBzaW1pbGFyIHRvIHRoZSBvdGhlclxuICogYnJvd3NlcnMuICBIb3dldmVyLCB0aGUgcGFyc2VkIGNvbXBvbmVudHMgd2lsbCBub3QgYmUgc2V0IGlmIHRoZSBVUkwgYXNzaWduZWQgZGlkIG5vdCBzcGVjaWZ5XG4gKiB0aGVtLiAgKGUuZy4gaWYgeW91IGFzc2lnbiBhLmhyZWYgPSBcImZvb1wiLCB0aGVuIGEucHJvdG9jb2wsIGEuaG9zdCwgZXRjLiB3aWxsIGJlIGVtcHR5LikgIFdlXG4gKiB3b3JrIGFyb3VuZCB0aGF0IGJ5IHBlcmZvcm1pbmcgdGhlIHBhcnNpbmcgaW4gYSAybmQgc3RlcCBieSB0YWtpbmcgYSBwcmV2aW91c2x5IG5vcm1hbGl6ZWRcbiAqIFVSTCAoZS5nLiBieSBhc3NpZ25pbmcgdG8gYS5ocmVmKSBhbmQgYXNzaWduaW5nIGl0IGEuaHJlZiBhZ2Fpbi4gIFRoaXMgY29ycmVjdGx5IHBvcHVsYXRlcyB0aGVcbiAqIHByb3BlcnRpZXMgc3VjaCBhcyBwcm90b2NvbCwgaG9zdG5hbWUsIHBvcnQsIGV0Yy5cbiAqXG4gKiBJRTcgZG9lcyBub3Qgbm9ybWFsaXplIHRoZSBVUkwgd2hlbiBhc3NpZ25lZCB0byBhbiBhbmNob3Igbm9kZS4gIChBcHBhcmVudGx5LCBpdCBkb2VzLCBpZiBvbmVcbiAqIHVzZXMgdGhlIGlubmVyIEhUTUwgYXBwcm9hY2ggdG8gYXNzaWduIHRoZSBVUkwgYXMgcGFydCBvZiBhbiBIVE1MIHNuaXBwZXQgLVxuICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDcyNzI5KSAgSG93ZXZlciwgc2V0dGluZyBpbWdbc3JjXSBkb2VzIG5vcm1hbGl6ZSB0aGUgVVJMLlxuICogVW5mb3J0dW5hdGVseSwgc2V0dGluZyBpbWdbc3JjXSB0byBzb21ldGhpbmcgbGlrZSBcImphdmFzY3JpcHQ6Zm9vXCIgb24gSUUgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAqIFNpbmNlIHRoZSBwcmltYXJ5IHVzYWdlIGZvciBub3JtYWxpemluZyBVUkxzIGlzIHRvIHNhbml0aXplIHN1Y2ggVVJMcywgd2UgY2FuJ3QgdXNlIHRoYXRcbiAqIG1ldGhvZCBhbmQgSUUgPCA4IGlzIHVuc3VwcG9ydGVkLlxuICpcbiAqIFJlZmVyZW5jZXM6XG4gKiAgIGh0dHA6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxBbmNob3JFbGVtZW50XG4gKiAgIGh0dHA6Ly93d3cuYXB0YW5hLmNvbS9yZWZlcmVuY2UvaHRtbC9hcGkvSFRNTEFuY2hvckVsZW1lbnQuaHRtbFxuICogICBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAqICAgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9wdWxsLzI5MDJcbiAqICAgaHR0cDovL2phbWVzLnBhZG9sc2V5LmNvbS9qYXZhc2NyaXB0L3BhcnNpbmctdXJscy13aXRoLXRoZS1kb20vXG4gKlxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWQuXG4gKiBAZGVzY3JpcHRpb24gTm9ybWFsaXplcyBhbmQgcGFyc2VzIGEgVVJMLlxuICogQHJldHVybnMge29iamVjdH0gUmV0dXJucyB0aGUgbm9ybWFsaXplZCBVUkwgYXMgYSBkaWN0aW9uYXJ5LlxuICpcbiAqICAgfCBtZW1iZXIgbmFtZSAgIHwgRGVzY3JpcHRpb24gICAgfFxuICogICB8LS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS18XG4gKiAgIHwgaHJlZiAgICAgICAgICB8IEEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBwcm92aWRlZCBVUkwgaWYgaXQgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwgfFxuICogICB8IHByb3RvY29sICAgICAgfCBUaGUgcHJvdG9jb2wgaW5jbHVkaW5nIHRoZSB0cmFpbGluZyBjb2xvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgfCBob3N0ICAgICAgICAgIHwgVGhlIGhvc3QgYW5kIHBvcnQgKGlmIHRoZSBwb3J0IGlzIG5vbi1kZWZhdWx0KSBvZiB0aGUgbm9ybWFsaXplZFVybCAgICB8XG4gKiAgIHwgc2VhcmNoICAgICAgICB8IFRoZSBzZWFyY2ggcGFyYW1zLCBtaW51cyB0aGUgcXVlc3Rpb24gbWFyayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhhc2ggICAgICAgICAgfCBUaGUgaGFzaCBzdHJpbmcsIG1pbnVzIHRoZSBoYXNoIHN5bWJvbFxuICogICB8IGhvc3RuYW1lICAgICAgfCBUaGUgaG9zdG5hbWVcbiAqICAgfCBwb3J0ICAgICAgICAgIHwgVGhlIHBvcnQsIHdpdGhvdXQgXCI6XCJcbiAqICAgfCBwYXRobmFtZSAgICAgIHwgVGhlIHBhdGhuYW1lLCBiZWdpbm5pbmcgd2l0aCBcIi9cIlxuICpcbiAqL1xuXG52YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4vKipcbiAqIGRvY3VtZW50TW9kZSBpcyBhbiBJRS1vbmx5IHByb3BlcnR5XG4gKiBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvY2MxOTY5ODgodj12cy44NSkuYXNweFxuICovXG52YXIgbXNpZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcblxuZnVuY3Rpb24gdXJsUGFydHMgKHVybCkge1xuICB2YXIgaHJlZiA9IHVybDtcblxuICBpZiAobXNpZSkge1xuICAgIC8vIE5vcm1hbGl6ZSBiZWZvcmUgcGFyc2UuICBSZWZlciBJbXBsZW1lbnRhdGlvbiBOb3RlcyBvbiB3aHkgdGhpcyBpc1xuICAgIC8vIGRvbmUgaW4gdHdvIHN0ZXBzIG9uIElFLlxuICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICB9XG5cbiAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICByZXR1cm4ge1xuICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcbiAgICBwb3J0OiB1dGlsaXRpZXMuaXNOb3RFbXB0eVN0cmluZyh1cmxQYXJzaW5nTm9kZS5wb3J0KSA/IHVybFBhcnNpbmdOb2RlLnBvcnQgOiA4MCxcbiAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKVxuICAgICAgPyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgOiAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICB9O1xufVxuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBhY2NlcHRzIGEgcXVlcnkgc3RyaW5nIChzZWFyY2ggcGFydCBvZiBhIHVybCkgYW5kIHJldHVybnMgYSBkaWN0aW9uYXJ5IHdpdGhcbiAqIHRoZSBkaWZmZXJlbnQga2V5IHZhbHVlIHBhaXJzXG4gKiBAcGFyYW0ge3N0cmluZ30gcXMgcXVlcnlTdHJpbmdcbiAqL1xuZnVuY3Rpb24gcXVlcnlTdHJpbmdUb09iaiAocXMsIGNvbmQpIHtcbiAgdmFyIHBhaXJzLCBxc09iajtcblxuICBjb25kID0gdXRpbGl0aWVzLmlzRnVuY3Rpb24oY29uZCkgPyBjb25kIDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHFzID0gcXMudHJpbSgpLnJlcGxhY2UoL15cXD8vLCAnJyk7XG4gIHBhaXJzID0gcXMuc3BsaXQoJyYnKTtcbiAgcXNPYmogPSB7fTtcblxuICB1dGlsaXRpZXMuZm9yRWFjaChwYWlycywgZnVuY3Rpb24gKHBhaXIpIHtcbiAgICB2YXIga2V5VmFsdWUsIGtleSwgdmFsdWU7XG4gICAgaWYgKHBhaXIgIT09ICcnKSB7XG4gICAgICBrZXlWYWx1ZSA9IHBhaXIuc3BsaXQoJz0nKTtcbiAgICAgIGtleSA9IGtleVZhbHVlWzBdO1xuICAgICAgdmFsdWUgPSBrZXlWYWx1ZVsxXTtcbiAgICAgIGlmIChjb25kKGtleSwgdmFsdWUpKSB7XG4gICAgICAgIHFzT2JqW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBxc09iajtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW4gb2JqZWN0IGFuZCBzZXJpYWxpemVzIGl0IGludG8gYSBxdWVyeSBzdHJpbmcgd2l0aG91dCB0aGUgbGVhZGluZyAnPydcbiAqIEBwYXJhbSBvYmpcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIG9ialRvUXVlcnlTdHJpbmcgKG9iaikge1xuICB2YXIgcGFpcnMgPSBbXTtcbiAgdXRpbGl0aWVzLmZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgIHBhaXJzLnB1c2goa2V5ICsgJz0nICsgdmFsdWUpO1xuICB9KTtcbiAgcmV0dXJuIHBhaXJzLmpvaW4oJyYnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHVybFBhcnRzOiB1cmxQYXJ0cyxcbiAgcXVlcnlTdHJpbmdUb09iajogcXVlcnlTdHJpbmdUb09iaixcbiAgb2JqVG9RdWVyeVN0cmluZzogb2JqVG9RdWVyeVN0cmluZ1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/utils/urlUtils.js\n");

/***/ }),

/***/ "./src/scripts/utils/utilityFunctions.js":
/*!***********************************************!*\
  !*** ./src/scripts/utils/utilityFunctions.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n\nvar NODE_TYPE_ELEMENT = 1;\nvar SNAKE_CASE_REGEXP = /[A-Z]/g;\nvar EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i;\n\nvar ISO8086_REGEXP = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n\n\nfunction noop () { }\n\nfunction isNull (o) {\n  return o === null;\n}\n\nfunction isDefined (o) {\n  return o !== undefined;\n}\n\nfunction isUndefined (o) {\n  return o === undefined;\n}\n\nfunction isObject (obj) {\n  return typeof obj === 'object';\n}\n\nfunction isFunction (str) {\n  return typeof str === 'function';\n}\n\nfunction isNumber (num) {\n  return typeof num === 'number';\n}\n\nfunction isWindow (obj) {\n  return utilities.isObject(obj) && obj.window === obj;\n}\n\nfunction isArray (array) {\n  return Object.prototype.toString.call(array) === '[object Array]';\n}\n\nfunction isArrayLike (obj) {\n  if (obj === null || utilities.isWindow(obj) || utilities.isFunction(obj) || utilities.isUndefined(obj)) {\n    return false;\n  }\n\n  var length = obj.length;\n\n  if (obj.nodeType === NODE_TYPE_ELEMENT && length) {\n    return true;\n  }\n\n  return utilities.isString(obj) || utilities.isArray(obj) || length === 0 ||\n    (typeof length === 'number' && length > 0 && (length - 1) in obj);\n}\n\nfunction isString (str) {\n  return typeof str === 'string';\n}\n\nfunction isEmptyString (str) {\n  return utilities.isString(str) && str.length === 0;\n}\n\nfunction isNotEmptyString (str) {\n  return utilities.isString(str) && str.length !== 0;\n}\n\nfunction arrayLikeObjToArray (args) {\n  return Array.prototype.slice.call(args);\n}\n\nfunction forEach (obj, iterator, context) {\n  var key, length;\n  if (obj) {\n    if (isFunction(obj)) {\n      for (key in obj) {\n        // Need to check if hasOwnProperty exists,\n        // as on IE8 the result of querySelectorAll is an object without a hasOwnProperty function\n        if (key !== 'prototype' && key !== 'length' && key !== 'name' && (!obj.hasOwnProperty || obj.hasOwnProperty(key))) {\n          iterator.call(context, obj[key], key, obj);\n        }\n      }\n    } else if (isArray(obj)) {\n      var isPrimitive = typeof obj !== 'object';\n      for (key = 0, length = obj.length; key < length; key++) {\n        if (isPrimitive || key in obj) {\n          iterator.call(context, obj[key], key, obj);\n        }\n      }\n    } else if (obj.forEach && obj.forEach !== forEach) {\n      obj.forEach(iterator, context, obj);\n    } else {\n      for (key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          iterator.call(context, obj[key], key, obj);\n        }\n      }\n    }\n  }\n  return obj;\n}\n\nfunction snake_case (name, separator) {\n  separator = separator || '_';\n  return name.replace(SNAKE_CASE_REGEXP, function (letter, pos) {\n    return (pos ? separator : '') + letter.toLowerCase();\n  });\n}\n\nfunction isValidEmail (email) {\n  if (!utilities.isString(email)) {\n    return false;\n  }\n\n  return EMAIL_REGEXP.test(email.trim());\n}\n\nfunction extend (obj) {\n  var arg, i, k;\n  for (i = 1; i < arguments.length; i++) {\n    arg = arguments[i];\n    for (k in arg) {\n      if (arg.hasOwnProperty(k)) {\n        if (isObject(obj[k]) && !isNull(obj[k]) && isObject(arg[k])) {\n          obj[k] = extend({}, obj[k], arg[k]);\n        } else {\n          obj[k] = arg[k];\n        }\n      }\n    }\n  }\n  return obj;\n}\n\nfunction capitalize (s) {\n  return s.charAt(0).toUpperCase() + s.slice(1);\n}\n\nfunction decapitalize (s) {\n  return s.charAt(0).toLowerCase() + s.slice(1);\n}\n\n/**\n * This method works the same way array.prototype.map works but if the transformer returns undefine, then\n * it won't be added to the transformed Array.\n */\nfunction transformArray (array, transformer) {\n  var transformedArray = [];\n\n  array.forEach(function (item, index) {\n    var transformedItem = transformer(item, index);\n    if (utilities.isDefined(transformedItem)) {\n      transformedArray.push(transformedItem);\n    }\n  });\n\n  return transformedArray;\n}\n\nfunction toFixedDigits (num, digits) {\n  var formattedNum = num + '';\n  digits = utilities.isNumber(digits) ? digits : 0;\n  num = utilities.isNumber(num) ? num : parseInt(num, 10);\n  if (utilities.isNumber(num) && !isNaN(num)) {\n    formattedNum = num + '';\n    while (formattedNum.length < digits) {\n      formattedNum = '0' + formattedNum;\n    }\n    return formattedNum;\n  }\n  return NaN + '';\n}\n\nfunction throttle (callback, delay) {\n  var previousCall = new Date().getTime() - (delay + 1);\n  return function () {\n    var time = new Date().getTime();\n    if ((time - previousCall) >= delay) {\n      previousCall = time;\n      callback.apply(this, arguments);\n    }\n  };\n}\n\nfunction debounce (callback, wait) {\n  var timeoutId;\n\n  return function () {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(function () {\n      callback.apply(this, arguments);\n      timeoutId = undefined;\n    }, wait);\n  };\n}\n\n// a function designed to blow up the stack in a naive way\n// but it is ok for videoJs children components\nfunction treeSearch (root, getChildren, found) {\n  var children = getChildren(root);\n  for (var i = 0; i < children.length; i++) {\n    if (found(children[i])) {\n      return children[i];\n    } else {\n      var el = treeSearch(children[i], getChildren, found);\n      if (el) {\n        return el;\n      }\n    }\n  }\n}\n\nfunction echoFn (val) {\n  return function () {\n    return val;\n  };\n}\n\n// Note: Supported formats come from http://www.w3.org/TR/NOTE-datetime\n// and the iso8601 regex comes from http://www.pelagodesign.com/blog/2009/05/20/iso-8601-date-validation-that-doesnt-suck/\nfunction isISO8601 (value) {\n  if (utilities.isNumber(value)) {\n    value = value + '';  // we make sure that we are working with strings\n  }\n\n  if (!utilities.isString(value)) {\n    return false;\n  }\n\n  return ISO8086_REGEXP.test(value.trim());\n}\n\n/**\n * Checks if the Browser is IE9 and below\n * @returns {boolean}\n */\nfunction isOldIE () {\n  var version = utilities.getInternetExplorerVersion(navigator);\n  if (version === -1) {\n    return false;\n  }\n\n  return version < 10;\n}\n\n/**\n * Returns the version of Internet Explorer or a -1 (indicating the use of another browser).\n * Source: https://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx\n * @returns {number} the version of Internet Explorer or a -1 (indicating the use of another browser).\n */\nfunction getInternetExplorerVersion (navigator) {\n  var rv = -1;\n\n  if (navigator.appName == 'Microsoft Internet Explorer') {\n    var ua = navigator.userAgent;\n    var re = new RegExp('MSIE ([0-9]{1,}[\\.0-9]{0,})');\n    var res = re.exec(ua);\n    if (res !== null) {\n      rv = parseFloat(res[1]);\n    }\n  }\n\n  return rv;\n}\n\nfunction isIE11 () {\n  var res = navigator.userAgent.search(/(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i);\n  return res >= 0;\n}\n\n// *** Mobile Utility Functions **** //\nfunction isIDevice () {\n  return /iP(hone|ad)/.test(utilities._UA);\n}\n\nfunction isMobile () {\n  return /iP(hone|ad|od)|Android|Windows Phone/.test(utilities._UA);\n}\n\nfunction isIPhone () {\n  return /iP(hone|od)/.test(utilities._UA);\n}\n\nfunction isAndroid () {\n  return /Android/.test(utilities._UA);\n}\n\nfunction isEdge () {\n  return /(edge)\\/((\\d+)?[\\w\\.]+)/i.test(utilities._UA);\n}\n\nfunction scriptLoadedInIframe () {\n\tvar docClassList = document.documentElement.classList;\n\tvar scriptInPlayerIframe = docClassList && docClassList.contains('bc-iframe'); // html of player has bc-iframe class when Brightcove player emded in iFrame\n  return !(scriptInPlayerIframe && isEdge());\n}\n\nvar utilities = {\n  _UA: navigator.userAgent,\n  noop: noop,\n  isNull: isNull,\n  isDefined: isDefined,\n  isUndefined: isUndefined,\n  isObject: isObject,\n  isFunction: isFunction,\n  isNumber: isNumber,\n  isWindow: isWindow,\n  isArray: isArray,\n  isArrayLike: isArrayLike,\n  isString: isString,\n  isEmptyString: isEmptyString,\n  isNotEmptyString: isNotEmptyString,\n  arrayLikeObjToArray: arrayLikeObjToArray,\n  forEach: forEach,\n  snake_case: snake_case,\n  isValidEmail: isValidEmail,\n  extend: extend,\n  capitalize: capitalize,\n  decapitalize: decapitalize,\n  transformArray: transformArray,\n  toFixedDigits: toFixedDigits,\n  throttle: throttle,\n  debounce: debounce,\n  treeSearch: treeSearch,\n  echoFn: echoFn,\n  isISO8601: isISO8601,\n  isOldIE: isOldIE,\n  isIE11: isIE11,\n  getInternetExplorerVersion: getInternetExplorerVersion,\n  isIDevice: isIDevice,\n  isMobile: isMobile,\n  isIPhone: isIPhone,\n  isAndroid: isAndroid,\n  isEdge: isEdge,\n  scriptLoadedInIframe: scriptLoadedInIframe\n};\n\nmodule.exports = utilities;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy91dGlsaXR5RnVuY3Rpb25zLmpzP2ZiMjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNhOztBQUViO0FBQ0E7QUFDQSw0Q0FBNEMsRUFBRTs7QUFFOUMsaUNBQWlDLEVBQUUsTUFBTSxFQUFFLHlHQUF5RyxFQUFFOzs7QUFHdEosa0JBQWtCOztBQUVsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx3Q0FBd0MsY0FBYztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxzQkFBc0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUMsR0FBRyxRQUFRLEdBQUc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0VBQStFO0FBQy9FO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvdXRpbHMvdXRpbGl0eUZ1bmN0aW9ucy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgTk9ERV9UWVBFX0VMRU1FTlQgPSAxO1xudmFyIFNOQUtFX0NBU0VfUkVHRVhQID0gL1tBLVpdL2c7XG52YXIgRU1BSUxfUkVHRVhQID0gL15bYS16MC05ISMkJSYnKitcXC89P15fYHt8fX4uLV0rQFthLXowLTldKFthLXowLTktXSpbYS16MC05XSk/KFxcLlthLXowLTldKFthLXowLTktXSpbYS16MC05XSk/KSskL2k7XG5cbnZhciBJU084MDg2X1JFR0VYUCA9IC9eKFtcXCstXT9cXGR7NH0oPyFcXGR7Mn1cXGIpKSgoLT8pKCgwWzEtOV18MVswLTJdKShcXDMoWzEyXVxcZHwwWzEtOV18M1swMV0pKT98VyhbMC00XVxcZHw1WzAtMl0pKC0/WzEtN10pP3woMDBbMS05XXwwWzEtOV1cXGR8WzEyXVxcZHsyfXwzKFswLTVdXFxkfDZbMS02XSkpKShbVFxcc10oKChbMDFdXFxkfDJbMC0zXSkoKDo/KVswLTVdXFxkKT98MjRcXDo/MDApKFtcXC4sXVxcZCsoPyE6KSk/KT8oXFwxN1swLTVdXFxkKFtcXC4sXVxcZCspPyk/KFt6Wl18KFtcXCstXSkoWzAxXVxcZHwyWzAtM10pOj8oWzAtNV1cXGQpPyk/KT8pPyQvO1xuXG5cbmZ1bmN0aW9uIG5vb3AgKCkgeyB9XG5cbmZ1bmN0aW9uIGlzTnVsbCAobykge1xuICByZXR1cm4gbyA9PT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNEZWZpbmVkIChvKSB7XG4gIHJldHVybiBvICE9PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkIChvKSB7XG4gIHJldHVybiBvID09PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0IChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyIChudW0pIHtcbiAgcmV0dXJuIHR5cGVvZiBudW0gPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc1dpbmRvdyAob2JqKSB7XG4gIHJldHVybiB1dGlsaXRpZXMuaXNPYmplY3Qob2JqKSAmJiBvYmoud2luZG93ID09PSBvYmo7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXkgKGFycmF5KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyYXkpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5TGlrZSAob2JqKSB7XG4gIGlmIChvYmogPT09IG51bGwgfHwgdXRpbGl0aWVzLmlzV2luZG93KG9iaikgfHwgdXRpbGl0aWVzLmlzRnVuY3Rpb24ob2JqKSB8fCB1dGlsaXRpZXMuaXNVbmRlZmluZWQob2JqKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBvYmoubGVuZ3RoO1xuXG4gIGlmIChvYmoubm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UICYmIGxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHV0aWxpdGllcy5pc1N0cmluZyhvYmopIHx8IHV0aWxpdGllcy5pc0FycmF5KG9iaikgfHwgbGVuZ3RoID09PSAwIHx8XG4gICAgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInICYmIGxlbmd0aCA+IDAgJiYgKGxlbmd0aCAtIDEpIGluIG9iaik7XG59XG5cbmZ1bmN0aW9uIGlzU3RyaW5nIChzdHIpIHtcbiAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnO1xufVxuXG5mdW5jdGlvbiBpc0VtcHR5U3RyaW5nIChzdHIpIHtcbiAgcmV0dXJuIHV0aWxpdGllcy5pc1N0cmluZyhzdHIpICYmIHN0ci5sZW5ndGggPT09IDA7XG59XG5cbmZ1bmN0aW9uIGlzTm90RW1wdHlTdHJpbmcgKHN0cikge1xuICByZXR1cm4gdXRpbGl0aWVzLmlzU3RyaW5nKHN0cikgJiYgc3RyLmxlbmd0aCAhPT0gMDtcbn1cblxuZnVuY3Rpb24gYXJyYXlMaWtlT2JqVG9BcnJheSAoYXJncykge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7XG59XG5cbmZ1bmN0aW9uIGZvckVhY2ggKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGtleSwgbGVuZ3RoO1xuICBpZiAob2JqKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24ob2JqKSkge1xuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIC8vIE5lZWQgdG8gY2hlY2sgaWYgaGFzT3duUHJvcGVydHkgZXhpc3RzLFxuICAgICAgICAvLyBhcyBvbiBJRTggdGhlIHJlc3VsdCBvZiBxdWVyeVNlbGVjdG9yQWxsIGlzIGFuIG9iamVjdCB3aXRob3V0IGEgaGFzT3duUHJvcGVydHkgZnVuY3Rpb25cbiAgICAgICAgaWYgKGtleSAhPT0gJ3Byb3RvdHlwZScgJiYga2V5ICE9PSAnbGVuZ3RoJyAmJiBrZXkgIT09ICduYW1lJyAmJiAoIW9iai5oYXNPd25Qcm9wZXJ0eSB8fCBvYmouaGFzT3duUHJvcGVydHkoa2V5KSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgdmFyIGlzUHJpbWl0aXZlID0gdHlwZW9mIG9iaiAhPT0gJ29iamVjdCc7XG4gICAgICBmb3IgKGtleSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlIHx8IGtleSBpbiBvYmopIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9iai5mb3JFYWNoICYmIG9iai5mb3JFYWNoICE9PSBmb3JFYWNoKSB7XG4gICAgICBvYmouZm9yRWFjaChpdGVyYXRvciwgY29udGV4dCwgb2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBzbmFrZV9jYXNlIChuYW1lLCBzZXBhcmF0b3IpIHtcbiAgc2VwYXJhdG9yID0gc2VwYXJhdG9yIHx8ICdfJztcbiAgcmV0dXJuIG5hbWUucmVwbGFjZShTTkFLRV9DQVNFX1JFR0VYUCwgZnVuY3Rpb24gKGxldHRlciwgcG9zKSB7XG4gICAgcmV0dXJuIChwb3MgPyBzZXBhcmF0b3IgOiAnJykgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRFbWFpbCAoZW1haWwpIHtcbiAgaWYgKCF1dGlsaXRpZXMuaXNTdHJpbmcoZW1haWwpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIEVNQUlMX1JFR0VYUC50ZXN0KGVtYWlsLnRyaW0oKSk7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZCAob2JqKSB7XG4gIHZhciBhcmcsIGksIGs7XG4gIGZvciAoaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgZm9yIChrIGluIGFyZykge1xuICAgICAgaWYgKGFyZy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICBpZiAoaXNPYmplY3Qob2JqW2tdKSAmJiAhaXNOdWxsKG9ialtrXSkgJiYgaXNPYmplY3QoYXJnW2tdKSkge1xuICAgICAgICAgIG9ialtrXSA9IGV4dGVuZCh7fSwgb2JqW2tdLCBhcmdba10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9ialtrXSA9IGFyZ1trXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplIChzKSB7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKTtcbn1cblxuZnVuY3Rpb24gZGVjYXBpdGFsaXplIChzKSB7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgcy5zbGljZSgxKTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCB3b3JrcyB0aGUgc2FtZSB3YXkgYXJyYXkucHJvdG90eXBlLm1hcCB3b3JrcyBidXQgaWYgdGhlIHRyYW5zZm9ybWVyIHJldHVybnMgdW5kZWZpbmUsIHRoZW5cbiAqIGl0IHdvbid0IGJlIGFkZGVkIHRvIHRoZSB0cmFuc2Zvcm1lZCBBcnJheS5cbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtQXJyYXkgKGFycmF5LCB0cmFuc2Zvcm1lcikge1xuICB2YXIgdHJhbnNmb3JtZWRBcnJheSA9IFtdO1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIHRyYW5zZm9ybWVkSXRlbSA9IHRyYW5zZm9ybWVyKGl0ZW0sIGluZGV4KTtcbiAgICBpZiAodXRpbGl0aWVzLmlzRGVmaW5lZCh0cmFuc2Zvcm1lZEl0ZW0pKSB7XG4gICAgICB0cmFuc2Zvcm1lZEFycmF5LnB1c2godHJhbnNmb3JtZWRJdGVtKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0cmFuc2Zvcm1lZEFycmF5O1xufVxuXG5mdW5jdGlvbiB0b0ZpeGVkRGlnaXRzIChudW0sIGRpZ2l0cykge1xuICB2YXIgZm9ybWF0dGVkTnVtID0gbnVtICsgJyc7XG4gIGRpZ2l0cyA9IHV0aWxpdGllcy5pc051bWJlcihkaWdpdHMpID8gZGlnaXRzIDogMDtcbiAgbnVtID0gdXRpbGl0aWVzLmlzTnVtYmVyKG51bSkgPyBudW0gOiBwYXJzZUludChudW0sIDEwKTtcbiAgaWYgKHV0aWxpdGllcy5pc051bWJlcihudW0pICYmICFpc05hTihudW0pKSB7XG4gICAgZm9ybWF0dGVkTnVtID0gbnVtICsgJyc7XG4gICAgd2hpbGUgKGZvcm1hdHRlZE51bS5sZW5ndGggPCBkaWdpdHMpIHtcbiAgICAgIGZvcm1hdHRlZE51bSA9ICcwJyArIGZvcm1hdHRlZE51bTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdHRlZE51bTtcbiAgfVxuICByZXR1cm4gTmFOICsgJyc7XG59XG5cbmZ1bmN0aW9uIHRocm90dGxlIChjYWxsYmFjaywgZGVsYXkpIHtcbiAgdmFyIHByZXZpb3VzQ2FsbCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gKGRlbGF5ICsgMSk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBpZiAoKHRpbWUgLSBwcmV2aW91c0NhbGwpID49IGRlbGF5KSB7XG4gICAgICBwcmV2aW91c0NhbGwgPSB0aW1lO1xuICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRlYm91bmNlIChjYWxsYmFjaywgd2FpdCkge1xuICB2YXIgdGltZW91dElkO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHRpbWVvdXRJZCA9IHVuZGVmaW5lZDtcbiAgICB9LCB3YWl0KTtcbiAgfTtcbn1cblxuLy8gYSBmdW5jdGlvbiBkZXNpZ25lZCB0byBibG93IHVwIHRoZSBzdGFjayBpbiBhIG5haXZlIHdheVxuLy8gYnV0IGl0IGlzIG9rIGZvciB2aWRlb0pzIGNoaWxkcmVuIGNvbXBvbmVudHNcbmZ1bmN0aW9uIHRyZWVTZWFyY2ggKHJvb3QsIGdldENoaWxkcmVuLCBmb3VuZCkge1xuICB2YXIgY2hpbGRyZW4gPSBnZXRDaGlsZHJlbihyb290KTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGlmIChmb3VuZChjaGlsZHJlbltpXSkpIHtcbiAgICAgIHJldHVybiBjaGlsZHJlbltpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGVsID0gdHJlZVNlYXJjaChjaGlsZHJlbltpXSwgZ2V0Q2hpbGRyZW4sIGZvdW5kKTtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGVjaG9GbiAodmFsKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfTtcbn1cblxuLy8gTm90ZTogU3VwcG9ydGVkIGZvcm1hdHMgY29tZSBmcm9tIGh0dHA6Ly93d3cudzMub3JnL1RSL05PVEUtZGF0ZXRpbWVcbi8vIGFuZCB0aGUgaXNvODYwMSByZWdleCBjb21lcyBmcm9tIGh0dHA6Ly93d3cucGVsYWdvZGVzaWduLmNvbS9ibG9nLzIwMDkvMDUvMjAvaXNvLTg2MDEtZGF0ZS12YWxpZGF0aW9uLXRoYXQtZG9lc250LXN1Y2svXG5mdW5jdGlvbiBpc0lTTzg2MDEgKHZhbHVlKSB7XG4gIGlmICh1dGlsaXRpZXMuaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgdmFsdWUgPSB2YWx1ZSArICcnOyAgLy8gd2UgbWFrZSBzdXJlIHRoYXQgd2UgYXJlIHdvcmtpbmcgd2l0aCBzdHJpbmdzXG4gIH1cblxuICBpZiAoIXV0aWxpdGllcy5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gSVNPODA4Nl9SRUdFWFAudGVzdCh2YWx1ZS50cmltKCkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgQnJvd3NlciBpcyBJRTkgYW5kIGJlbG93XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNPbGRJRSAoKSB7XG4gIHZhciB2ZXJzaW9uID0gdXRpbGl0aWVzLmdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uKG5hdmlnYXRvcik7XG4gIGlmICh2ZXJzaW9uID09PSAtMSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB2ZXJzaW9uIDwgMTA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiBJbnRlcm5ldCBFeHBsb3JlciBvciBhIC0xIChpbmRpY2F0aW5nIHRoZSB1c2Ugb2YgYW5vdGhlciBicm93c2VyKS5cbiAqIFNvdXJjZTogaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNzUwOSh2PXZzLjg1KS5hc3B4XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgdmVyc2lvbiBvZiBJbnRlcm5ldCBFeHBsb3JlciBvciBhIC0xIChpbmRpY2F0aW5nIHRoZSB1c2Ugb2YgYW5vdGhlciBicm93c2VyKS5cbiAqL1xuZnVuY3Rpb24gZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24gKG5hdmlnYXRvcikge1xuICB2YXIgcnYgPSAtMTtcblxuICBpZiAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpIHtcbiAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIHZhciByZSA9IG5ldyBSZWdFeHAoJ01TSUUgKFswLTldezEsfVtcXC4wLTldezAsfSknKTtcbiAgICB2YXIgcmVzID0gcmUuZXhlYyh1YSk7XG4gICAgaWYgKHJlcyAhPT0gbnVsbCkge1xuICAgICAgcnYgPSBwYXJzZUZsb2F0KHJlc1sxXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJ2O1xufVxuXG5mdW5jdGlvbiBpc0lFMTEgKCkge1xuICB2YXIgcmVzID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goLyh0cmlkZW50KS4rcnZbOlxcc10oW1xcd1xcLl0rKS4rbGlrZVxcc2dlY2tvL2kpO1xuICByZXR1cm4gcmVzID49IDA7XG59XG5cbi8vICoqKiBNb2JpbGUgVXRpbGl0eSBGdW5jdGlvbnMgKioqKiAvL1xuZnVuY3Rpb24gaXNJRGV2aWNlICgpIHtcbiAgcmV0dXJuIC9pUChob25lfGFkKS8udGVzdCh1dGlsaXRpZXMuX1VBKTtcbn1cblxuZnVuY3Rpb24gaXNNb2JpbGUgKCkge1xuICByZXR1cm4gL2lQKGhvbmV8YWR8b2QpfEFuZHJvaWR8V2luZG93cyBQaG9uZS8udGVzdCh1dGlsaXRpZXMuX1VBKTtcbn1cblxuZnVuY3Rpb24gaXNJUGhvbmUgKCkge1xuICByZXR1cm4gL2lQKGhvbmV8b2QpLy50ZXN0KHV0aWxpdGllcy5fVUEpO1xufVxuXG5mdW5jdGlvbiBpc0FuZHJvaWQgKCkge1xuICByZXR1cm4gL0FuZHJvaWQvLnRlc3QodXRpbGl0aWVzLl9VQSk7XG59XG5cbmZ1bmN0aW9uIGlzRWRnZSAoKSB7XG4gIHJldHVybiAvKGVkZ2UpXFwvKChcXGQrKT9bXFx3XFwuXSspL2kudGVzdCh1dGlsaXRpZXMuX1VBKTtcbn1cblxuZnVuY3Rpb24gc2NyaXB0TG9hZGVkSW5JZnJhbWUgKCkge1xuXHR2YXIgZG9jQ2xhc3NMaXN0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdDtcblx0dmFyIHNjcmlwdEluUGxheWVySWZyYW1lID0gZG9jQ2xhc3NMaXN0ICYmIGRvY0NsYXNzTGlzdC5jb250YWlucygnYmMtaWZyYW1lJyk7IC8vIGh0bWwgb2YgcGxheWVyIGhhcyBiYy1pZnJhbWUgY2xhc3Mgd2hlbiBCcmlnaHRjb3ZlIHBsYXllciBlbWRlZCBpbiBpRnJhbWVcbiAgcmV0dXJuICEoc2NyaXB0SW5QbGF5ZXJJZnJhbWUgJiYgaXNFZGdlKCkpO1xufVxuXG52YXIgdXRpbGl0aWVzID0ge1xuICBfVUE6IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gIG5vb3A6IG5vb3AsXG4gIGlzTnVsbDogaXNOdWxsLFxuICBpc0RlZmluZWQ6IGlzRGVmaW5lZCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzTnVtYmVyOiBpc051bWJlcixcbiAgaXNXaW5kb3c6IGlzV2luZG93LFxuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5TGlrZTogaXNBcnJheUxpa2UsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNFbXB0eVN0cmluZzogaXNFbXB0eVN0cmluZyxcbiAgaXNOb3RFbXB0eVN0cmluZzogaXNOb3RFbXB0eVN0cmluZyxcbiAgYXJyYXlMaWtlT2JqVG9BcnJheTogYXJyYXlMaWtlT2JqVG9BcnJheSxcbiAgZm9yRWFjaDogZm9yRWFjaCxcbiAgc25ha2VfY2FzZTogc25ha2VfY2FzZSxcbiAgaXNWYWxpZEVtYWlsOiBpc1ZhbGlkRW1haWwsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICBjYXBpdGFsaXplOiBjYXBpdGFsaXplLFxuICBkZWNhcGl0YWxpemU6IGRlY2FwaXRhbGl6ZSxcbiAgdHJhbnNmb3JtQXJyYXk6IHRyYW5zZm9ybUFycmF5LFxuICB0b0ZpeGVkRGlnaXRzOiB0b0ZpeGVkRGlnaXRzLFxuICB0aHJvdHRsZTogdGhyb3R0bGUsXG4gIGRlYm91bmNlOiBkZWJvdW5jZSxcbiAgdHJlZVNlYXJjaDogdHJlZVNlYXJjaCxcbiAgZWNob0ZuOiBlY2hvRm4sXG4gIGlzSVNPODYwMTogaXNJU084NjAxLFxuICBpc09sZElFOiBpc09sZElFLFxuICBpc0lFMTE6IGlzSUUxMSxcbiAgZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb246IGdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uLFxuICBpc0lEZXZpY2U6IGlzSURldmljZSxcbiAgaXNNb2JpbGU6IGlzTW9iaWxlLFxuICBpc0lQaG9uZTogaXNJUGhvbmUsXG4gIGlzQW5kcm9pZDogaXNBbmRyb2lkLFxuICBpc0VkZ2U6IGlzRWRnZSxcbiAgc2NyaXB0TG9hZGVkSW5JZnJhbWU6IHNjcmlwdExvYWRlZEluSWZyYW1lXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHV0aWxpdGllcztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/utils/utilityFunctions.js\n");

/***/ }),

/***/ "./src/scripts/utils/xml.js":
/*!**********************************!*\
  !*** ./src/scripts/utils/xml.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utilities = __webpack_require__(/*! ./utilityFunctions */ \"./src/scripts/utils/utilityFunctions.js\");\n\nvar xml = {};\n\nxml.strToXMLDoc = function strToXMLDoc (stringContainingXMLSource) {\n  // IE 8\n  if (typeof window.DOMParser === 'undefined') {\n    var xmlDocument = new ActiveXObject('Microsoft.XMLDOM');\n    xmlDocument.async = false;\n    xmlDocument.loadXML(stringContainingXMLSource);\n    return xmlDocument;\n  }\n\n  return parseString(stringContainingXMLSource);\n\n  function parseString (stringContainingXMLSource) {\n    var parser = new DOMParser();\n    var parsedDocument;\n\n    // Note: This try catch is to deal with the fact that on IE parser.parseFromString does throw an error but the rest of the browsers don't.\n    try {\n      parsedDocument = parser.parseFromString(stringContainingXMLSource, 'application/xml');\n\n      if (isParseError(parsedDocument) || utilities.isEmptyString(stringContainingXMLSource)) {\n        throw new Error();\n      }\n    } catch (e) {\n      throw new Error('xml.strToXMLDOC: Error parsing the string: \"' + stringContainingXMLSource + '\"');\n    }\n\n    return parsedDocument;\n  }\n\n  function isParseError (parsedDocument) {\n    try { // parser and parsererrorNS could be cached on startup for efficiency\n      var parser = new DOMParser(),\n        erroneousParse = parser.parseFromString('INVALID', 'text/xml'),\n        parsererrorNS = erroneousParse.getElementsByTagName('parsererror')[0].namespaceURI;\n\n      if (parsererrorNS === 'http://www.w3.org/1999/xhtml') {\n        // In PhantomJS the parseerror element doesn't seem to have a special namespace, so we are just guessing here :(\n        return parsedDocument.getElementsByTagName('parsererror').length > 0;\n      }\n\n      return parsedDocument.getElementsByTagNameNS(parsererrorNS, 'parsererror').length > 0;\n    } catch (e) {\n      // Note on IE parseString throws an error by itself and it will never reach this code. Because it will have failed before\n    }\n  }\n};\n\nxml.parseText = function parseText (sValue) {\n  if (/^\\s*$/.test(sValue)) { return null; }\n  if (/^(?:true|false)$/i.test(sValue)) { return sValue.toLowerCase() === 'true'; }\n  if (isFinite(sValue)) { return parseFloat(sValue); }\n  if (utilities.isISO8601(sValue)) { return new Date(sValue); }\n  return sValue.trim();\n};\n\nxml.JXONTree = function JXONTree (oXMLParent) {\n  var parseText = xml.parseText;\n\n  // The document object is an especial object that it may miss some functions or attrs depending on the browser.\n  // To prevent this problem with create the JXONTree using the root childNode which is a fully fleshed node on all supported\n  // browsers.\n  if (oXMLParent.documentElement) {\n    return new xml.JXONTree(oXMLParent.documentElement);\n  }\n\n  if (oXMLParent.hasChildNodes()) {\n    var sCollectedTxt = '';\n    for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {\n      oNode = oXMLParent.childNodes.item(nItem);\n      if ((oNode.nodeType - 1 | 1) === 3) { sCollectedTxt += oNode.nodeType === 3 ? oNode.nodeValue.trim() : oNode.nodeValue; }\n      else if (oNode.nodeType === 1 && !oNode.prefix) {\n        sProp = utilities.decapitalize(oNode.nodeName);\n        vContent = new xml.JXONTree(oNode);\n        if (this.hasOwnProperty(sProp)) {\n          if (this[sProp].constructor !== Array) { this[sProp] = [this[sProp]]; }\n          this[sProp].push(vContent);\n        } else { this[sProp] = vContent; }\n      }\n    }\n    if (sCollectedTxt) { this.keyValue = parseText(sCollectedTxt); }\n  }\n\n  // IE8 Stupid fix\n  var hasAttr = typeof oXMLParent.hasAttributes === 'undefined' ? oXMLParent.attributes.length > 0 : oXMLParent.hasAttributes();\n  if (hasAttr) {\n    var oAttrib;\n    for (var nAttrib = 0; nAttrib < oXMLParent.attributes.length; nAttrib++) {\n      oAttrib = oXMLParent.attributes.item(nAttrib);\n      this['@' + utilities.decapitalize(oAttrib.name)] = parseText(oAttrib.value.trim());\n    }\n  }\n};\n\nxml.JXONTree.prototype.attr = function (attr) {\n  return this['@' + utilities.decapitalize(attr)];\n};\n\nxml.toJXONTree = function toJXONTree (xmlString) {\n  var xmlDoc = xml.strToXMLDoc(xmlString);\n  return new xml.JXONTree(xmlDoc);\n};\n\n/**\n * Helper function to extract the keyvalue of a JXONTree obj\n *\n * @param xmlObj {JXONTree}\n * return the key value or undefined;\n */\nxml.keyValue = function getKeyValue (xmlObj) {\n  if (xmlObj) {\n    return xmlObj.keyValue;\n  }\n  return undefined;\n};\n\nxml.attr = function getAttrValue (xmlObj, attr) {\n  if (xmlObj) {\n    return xmlObj['@' + utilities.decapitalize(attr)];\n  }\n  return undefined;\n};\n\nxml.encode = function encodeXML (str) {\n  if (!utilities.isString(str)) return undefined;\n\n  return str.replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;');\n};\n\nxml.decode = function decodeXML (str) {\n  if (!utilities.isString(str)) return undefined;\n\n  return str.replace(/&apos;/g, \"'\")\n    .replace(/&quot;/g, '\"')\n    .replace(/&gt;/g, '>')\n    .replace(/&lt;/g, '<')\n    .replace(/&amp;/g, '&');\n};\n\nmodule.exports = xml;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy94bWwuanM/YjQyMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixnQkFBZ0IsbUJBQU8sQ0FBQyxtRUFBb0I7O0FBRTVDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QixhQUFhO0FBQzFDLHlDQUF5Qyx3Q0FBd0M7QUFDakYseUJBQXlCLDJCQUEyQjtBQUNwRCxvQ0FBb0MseUJBQXlCO0FBQzdEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtDQUErQyxzQ0FBc0M7QUFDckY7QUFDQSwyQ0FBMkMsa0ZBQWtGO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDZCQUE2QjtBQUMvRTtBQUNBLFNBQVMsT0FBTyx3QkFBd0I7QUFDeEM7QUFDQTtBQUNBLHdCQUF3QiwwQ0FBMEM7QUFDbEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsd0NBQXdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlDQUFpQztBQUNqQyx3QkFBd0I7QUFDeEIsd0JBQXdCO0FBQ3hCLDBCQUEwQjtBQUMxQiwwQkFBMEI7QUFDMUI7O0FBRUE7QUFDQTs7QUFFQSw0QkFBNEI7QUFDNUIsb0JBQW9CO0FBQ3BCLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEIsbUJBQW1CO0FBQ25COztBQUVBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvdXRpbHMveG1sLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZSgnLi91dGlsaXR5RnVuY3Rpb25zJyk7XG5cbnZhciB4bWwgPSB7fTtcblxueG1sLnN0clRvWE1MRG9jID0gZnVuY3Rpb24gc3RyVG9YTUxEb2MgKHN0cmluZ0NvbnRhaW5pbmdYTUxTb3VyY2UpIHtcbiAgLy8gSUUgOFxuICBpZiAodHlwZW9mIHdpbmRvdy5ET01QYXJzZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHhtbERvY3VtZW50ID0gbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxET00nKTtcbiAgICB4bWxEb2N1bWVudC5hc3luYyA9IGZhbHNlO1xuICAgIHhtbERvY3VtZW50LmxvYWRYTUwoc3RyaW5nQ29udGFpbmluZ1hNTFNvdXJjZSk7XG4gICAgcmV0dXJuIHhtbERvY3VtZW50O1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlU3RyaW5nKHN0cmluZ0NvbnRhaW5pbmdYTUxTb3VyY2UpO1xuXG4gIGZ1bmN0aW9uIHBhcnNlU3RyaW5nIChzdHJpbmdDb250YWluaW5nWE1MU291cmNlKSB7XG4gICAgdmFyIHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICB2YXIgcGFyc2VkRG9jdW1lbnQ7XG5cbiAgICAvLyBOb3RlOiBUaGlzIHRyeSBjYXRjaCBpcyB0byBkZWFsIHdpdGggdGhlIGZhY3QgdGhhdCBvbiBJRSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nIGRvZXMgdGhyb3cgYW4gZXJyb3IgYnV0IHRoZSByZXN0IG9mIHRoZSBicm93c2VycyBkb24ndC5cbiAgICB0cnkge1xuICAgICAgcGFyc2VkRG9jdW1lbnQgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHN0cmluZ0NvbnRhaW5pbmdYTUxTb3VyY2UsICdhcHBsaWNhdGlvbi94bWwnKTtcblxuICAgICAgaWYgKGlzUGFyc2VFcnJvcihwYXJzZWREb2N1bWVudCkgfHwgdXRpbGl0aWVzLmlzRW1wdHlTdHJpbmcoc3RyaW5nQ29udGFpbmluZ1hNTFNvdXJjZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd4bWwuc3RyVG9YTUxET0M6IEVycm9yIHBhcnNpbmcgdGhlIHN0cmluZzogXCInICsgc3RyaW5nQ29udGFpbmluZ1hNTFNvdXJjZSArICdcIicpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWREb2N1bWVudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUGFyc2VFcnJvciAocGFyc2VkRG9jdW1lbnQpIHtcbiAgICB0cnkgeyAvLyBwYXJzZXIgYW5kIHBhcnNlcmVycm9yTlMgY291bGQgYmUgY2FjaGVkIG9uIHN0YXJ0dXAgZm9yIGVmZmljaWVuY3lcbiAgICAgIHZhciBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCksXG4gICAgICAgIGVycm9uZW91c1BhcnNlID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZygnSU5WQUxJRCcsICd0ZXh0L3htbCcpLFxuICAgICAgICBwYXJzZXJlcnJvck5TID0gZXJyb25lb3VzUGFyc2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhcnNlcmVycm9yJylbMF0ubmFtZXNwYWNlVVJJO1xuXG4gICAgICBpZiAocGFyc2VyZXJyb3JOUyA9PT0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnKSB7XG4gICAgICAgIC8vIEluIFBoYW50b21KUyB0aGUgcGFyc2VlcnJvciBlbGVtZW50IGRvZXNuJ3Qgc2VlbSB0byBoYXZlIGEgc3BlY2lhbCBuYW1lc3BhY2UsIHNvIHdlIGFyZSBqdXN0IGd1ZXNzaW5nIGhlcmUgOihcbiAgICAgICAgcmV0dXJuIHBhcnNlZERvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwYXJzZXJlcnJvcicpLmxlbmd0aCA+IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXJzZWREb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKHBhcnNlcmVycm9yTlMsICdwYXJzZXJlcnJvcicpLmxlbmd0aCA+IDA7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gTm90ZSBvbiBJRSBwYXJzZVN0cmluZyB0aHJvd3MgYW4gZXJyb3IgYnkgaXRzZWxmIGFuZCBpdCB3aWxsIG5ldmVyIHJlYWNoIHRoaXMgY29kZS4gQmVjYXVzZSBpdCB3aWxsIGhhdmUgZmFpbGVkIGJlZm9yZVxuICAgIH1cbiAgfVxufTtcblxueG1sLnBhcnNlVGV4dCA9IGZ1bmN0aW9uIHBhcnNlVGV4dCAoc1ZhbHVlKSB7XG4gIGlmICgvXlxccyokLy50ZXN0KHNWYWx1ZSkpIHsgcmV0dXJuIG51bGw7IH1cbiAgaWYgKC9eKD86dHJ1ZXxmYWxzZSkkL2kudGVzdChzVmFsdWUpKSB7IHJldHVybiBzVmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnOyB9XG4gIGlmIChpc0Zpbml0ZShzVmFsdWUpKSB7IHJldHVybiBwYXJzZUZsb2F0KHNWYWx1ZSk7IH1cbiAgaWYgKHV0aWxpdGllcy5pc0lTTzg2MDEoc1ZhbHVlKSkgeyByZXR1cm4gbmV3IERhdGUoc1ZhbHVlKTsgfVxuICByZXR1cm4gc1ZhbHVlLnRyaW0oKTtcbn07XG5cbnhtbC5KWE9OVHJlZSA9IGZ1bmN0aW9uIEpYT05UcmVlIChvWE1MUGFyZW50KSB7XG4gIHZhciBwYXJzZVRleHQgPSB4bWwucGFyc2VUZXh0O1xuXG4gIC8vIFRoZSBkb2N1bWVudCBvYmplY3QgaXMgYW4gZXNwZWNpYWwgb2JqZWN0IHRoYXQgaXQgbWF5IG1pc3Mgc29tZSBmdW5jdGlvbnMgb3IgYXR0cnMgZGVwZW5kaW5nIG9uIHRoZSBicm93c2VyLlxuICAvLyBUbyBwcmV2ZW50IHRoaXMgcHJvYmxlbSB3aXRoIGNyZWF0ZSB0aGUgSlhPTlRyZWUgdXNpbmcgdGhlIHJvb3QgY2hpbGROb2RlIHdoaWNoIGlzIGEgZnVsbHkgZmxlc2hlZCBub2RlIG9uIGFsbCBzdXBwb3J0ZWRcbiAgLy8gYnJvd3NlcnMuXG4gIGlmIChvWE1MUGFyZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgIHJldHVybiBuZXcgeG1sLkpYT05UcmVlKG9YTUxQYXJlbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgfVxuXG4gIGlmIChvWE1MUGFyZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHZhciBzQ29sbGVjdGVkVHh0ID0gJyc7XG4gICAgZm9yICh2YXIgb05vZGUsIHNQcm9wLCB2Q29udGVudCwgbkl0ZW0gPSAwOyBuSXRlbSA8IG9YTUxQYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7IG5JdGVtKyspIHtcbiAgICAgIG9Ob2RlID0gb1hNTFBhcmVudC5jaGlsZE5vZGVzLml0ZW0obkl0ZW0pO1xuICAgICAgaWYgKChvTm9kZS5ub2RlVHlwZSAtIDEgfCAxKSA9PT0gMykgeyBzQ29sbGVjdGVkVHh0ICs9IG9Ob2RlLm5vZGVUeXBlID09PSAzID8gb05vZGUubm9kZVZhbHVlLnRyaW0oKSA6IG9Ob2RlLm5vZGVWYWx1ZTsgfVxuICAgICAgZWxzZSBpZiAob05vZGUubm9kZVR5cGUgPT09IDEgJiYgIW9Ob2RlLnByZWZpeCkge1xuICAgICAgICBzUHJvcCA9IHV0aWxpdGllcy5kZWNhcGl0YWxpemUob05vZGUubm9kZU5hbWUpO1xuICAgICAgICB2Q29udGVudCA9IG5ldyB4bWwuSlhPTlRyZWUob05vZGUpO1xuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShzUHJvcCkpIHtcbiAgICAgICAgICBpZiAodGhpc1tzUHJvcF0uY29uc3RydWN0b3IgIT09IEFycmF5KSB7IHRoaXNbc1Byb3BdID0gW3RoaXNbc1Byb3BdXTsgfVxuICAgICAgICAgIHRoaXNbc1Byb3BdLnB1c2godkNvbnRlbnQpO1xuICAgICAgICB9IGVsc2UgeyB0aGlzW3NQcm9wXSA9IHZDb250ZW50OyB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzQ29sbGVjdGVkVHh0KSB7IHRoaXMua2V5VmFsdWUgPSBwYXJzZVRleHQoc0NvbGxlY3RlZFR4dCk7IH1cbiAgfVxuXG4gIC8vIElFOCBTdHVwaWQgZml4XG4gIHZhciBoYXNBdHRyID0gdHlwZW9mIG9YTUxQYXJlbnQuaGFzQXR0cmlidXRlcyA9PT0gJ3VuZGVmaW5lZCcgPyBvWE1MUGFyZW50LmF0dHJpYnV0ZXMubGVuZ3RoID4gMCA6IG9YTUxQYXJlbnQuaGFzQXR0cmlidXRlcygpO1xuICBpZiAoaGFzQXR0cikge1xuICAgIHZhciBvQXR0cmliO1xuICAgIGZvciAodmFyIG5BdHRyaWIgPSAwOyBuQXR0cmliIDwgb1hNTFBhcmVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgbkF0dHJpYisrKSB7XG4gICAgICBvQXR0cmliID0gb1hNTFBhcmVudC5hdHRyaWJ1dGVzLml0ZW0obkF0dHJpYik7XG4gICAgICB0aGlzWydAJyArIHV0aWxpdGllcy5kZWNhcGl0YWxpemUob0F0dHJpYi5uYW1lKV0gPSBwYXJzZVRleHQob0F0dHJpYi52YWx1ZS50cmltKCkpO1xuICAgIH1cbiAgfVxufTtcblxueG1sLkpYT05UcmVlLnByb3RvdHlwZS5hdHRyID0gZnVuY3Rpb24gKGF0dHIpIHtcbiAgcmV0dXJuIHRoaXNbJ0AnICsgdXRpbGl0aWVzLmRlY2FwaXRhbGl6ZShhdHRyKV07XG59O1xuXG54bWwudG9KWE9OVHJlZSA9IGZ1bmN0aW9uIHRvSlhPTlRyZWUgKHhtbFN0cmluZykge1xuICB2YXIgeG1sRG9jID0geG1sLnN0clRvWE1MRG9jKHhtbFN0cmluZyk7XG4gIHJldHVybiBuZXcgeG1sLkpYT05UcmVlKHhtbERvYyk7XG59O1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBleHRyYWN0IHRoZSBrZXl2YWx1ZSBvZiBhIEpYT05UcmVlIG9ialxuICpcbiAqIEBwYXJhbSB4bWxPYmoge0pYT05UcmVlfVxuICogcmV0dXJuIHRoZSBrZXkgdmFsdWUgb3IgdW5kZWZpbmVkO1xuICovXG54bWwua2V5VmFsdWUgPSBmdW5jdGlvbiBnZXRLZXlWYWx1ZSAoeG1sT2JqKSB7XG4gIGlmICh4bWxPYmopIHtcbiAgICByZXR1cm4geG1sT2JqLmtleVZhbHVlO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG54bWwuYXR0ciA9IGZ1bmN0aW9uIGdldEF0dHJWYWx1ZSAoeG1sT2JqLCBhdHRyKSB7XG4gIGlmICh4bWxPYmopIHtcbiAgICByZXR1cm4geG1sT2JqWydAJyArIHV0aWxpdGllcy5kZWNhcGl0YWxpemUoYXR0cildO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG54bWwuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlWE1MIChzdHIpIHtcbiAgaWYgKCF1dGlsaXRpZXMuaXNTdHJpbmcoc3RyKSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICByZXR1cm4gc3RyLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcbiAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxuICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAucmVwbGFjZSgvJy9nLCAnJmFwb3M7Jyk7XG59O1xuXG54bWwuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlWE1MIChzdHIpIHtcbiAgaWYgKCF1dGlsaXRpZXMuaXNTdHJpbmcoc3RyKSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICByZXR1cm4gc3RyLnJlcGxhY2UoLyZhcG9zOy9nLCBcIidcIilcbiAgICAucmVwbGFjZSgvJnF1b3Q7L2csICdcIicpXG4gICAgLnJlcGxhY2UoLyZndDsvZywgJz4nKVxuICAgIC5yZXBsYWNlKC8mbHQ7L2csICc8JylcbiAgICAucmVwbGFjZSgvJmFtcDsvZywgJyYnKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geG1sO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/utils/xml.js\n");

/***/ }),

/***/ "./src/scripts/videojs_5.vast.vpaid.js":
/*!*********************************************!*\
  !*** ./src/scripts/videojs_5.vast.vpaid.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/* PROD-EXCLUDE-START */\nvar videojs = window.videojs || {\n\tgetComponent: function () {},\n\textend: function () {},\n\tregisterComponent: function () {},\n\tregisterPlugin: function () {}\n};\n/* PROD-EXCLUDE-END */\n\nwindow._molSettings = null;\n\n__webpack_require__(/*! ./plugin/components/black-poster_5 */ \"./src/scripts/plugin/components/black-poster_5.js\");\nvar logger = __webpack_require__(/*! ./utils/consoleLogger */ \"./src/scripts/utils/consoleLogger.js\");\n\nlogger.log('Prebid MailOnline plugin version 1.3.18');\n\nvar videoJsVAST = __webpack_require__(/*! ./plugin/videojs.vast.vpaid */ \"./src/scripts/plugin/videojs.vast.vpaid.js\");\n\nif (videojs.registerPlugin) {\n  if (!videojs.getPlugins().vastClient) {\n    videojs.registerPlugin('vastClient', videoJsVAST);\n  }\n} else if (videojs.Player) {\n  if (!videojs.Player.prototype.vastClient) {\n    videojs.plugin('vastClient', videoJsVAST);\n  }\n} else if (videojs.plugin) {\n  try {\n    videojs.plugin('vastClient', videoJsVAST);\n  } catch (e) {\n    logger.log('*** ERROR: Unable to register MailOnline plugin with VideoJS!');\n  }\n}\n\n// VIDLA-4391 - Add support for multiple players on the same page, each with a unique MOL plugin loaded from an iFrames\nif (parent && window !== parent) {\n  window.bc_vastClientFunc = videoJsVAST;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy92aWRlb2pzXzUudmFzdC52cGFpZC5qcz9hOTdhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsdUJBQXVCO0FBQ3ZCLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsbUJBQU8sQ0FBQyw2RkFBb0M7QUFDNUMsYUFBYSxtQkFBTyxDQUFDLG1FQUF1Qjs7QUFFNUM7O0FBRUEsa0JBQWtCLG1CQUFPLENBQUMsK0VBQTZCOztBQUV2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy92aWRlb2pzXzUudmFzdC52cGFpZC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyogUFJPRC1FWENMVURFLVNUQVJUICovXG52YXIgdmlkZW9qcyA9IHdpbmRvdy52aWRlb2pzIHx8IHtcblx0Z2V0Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7fSxcblx0ZXh0ZW5kOiBmdW5jdGlvbiAoKSB7fSxcblx0cmVnaXN0ZXJDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHt9LFxuXHRyZWdpc3RlclBsdWdpbjogZnVuY3Rpb24gKCkge31cbn07XG4vKiBQUk9ELUVYQ0xVREUtRU5EICovXG5cbndpbmRvdy5fbW9sU2V0dGluZ3MgPSBudWxsO1xuXG5yZXF1aXJlKCcuL3BsdWdpbi9jb21wb25lbnRzL2JsYWNrLXBvc3Rlcl81Jyk7XG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnLi91dGlscy9jb25zb2xlTG9nZ2VyJyk7XG5cbmxvZ2dlci5sb2coJ1ByZWJpZCBNYWlsT25saW5lIHBsdWdpbiB2ZXJzaW9uIDEuMy4xOCcpO1xuXG52YXIgdmlkZW9Kc1ZBU1QgPSByZXF1aXJlKCcuL3BsdWdpbi92aWRlb2pzLnZhc3QudnBhaWQnKTtcblxuaWYgKHZpZGVvanMucmVnaXN0ZXJQbHVnaW4pIHtcbiAgaWYgKCF2aWRlb2pzLmdldFBsdWdpbnMoKS52YXN0Q2xpZW50KSB7XG4gICAgdmlkZW9qcy5yZWdpc3RlclBsdWdpbigndmFzdENsaWVudCcsIHZpZGVvSnNWQVNUKTtcbiAgfVxufSBlbHNlIGlmICh2aWRlb2pzLlBsYXllcikge1xuICBpZiAoIXZpZGVvanMuUGxheWVyLnByb3RvdHlwZS52YXN0Q2xpZW50KSB7XG4gICAgdmlkZW9qcy5wbHVnaW4oJ3Zhc3RDbGllbnQnLCB2aWRlb0pzVkFTVCk7XG4gIH1cbn0gZWxzZSBpZiAodmlkZW9qcy5wbHVnaW4pIHtcbiAgdHJ5IHtcbiAgICB2aWRlb2pzLnBsdWdpbigndmFzdENsaWVudCcsIHZpZGVvSnNWQVNUKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ2dlci5sb2coJyoqKiBFUlJPUjogVW5hYmxlIHRvIHJlZ2lzdGVyIE1haWxPbmxpbmUgcGx1Z2luIHdpdGggVmlkZW9KUyEnKTtcbiAgfVxufVxuXG4vLyBWSURMQS00MzkxIC0gQWRkIHN1cHBvcnQgZm9yIG11bHRpcGxlIHBsYXllcnMgb24gdGhlIHNhbWUgcGFnZSwgZWFjaCB3aXRoIGEgdW5pcXVlIE1PTCBwbHVnaW4gbG9hZGVkIGZyb20gYW4gaUZyYW1lc1xuaWYgKHBhcmVudCAmJiB3aW5kb3cgIT09IHBhcmVudCkge1xuICB3aW5kb3cuYmNfdmFzdENsaWVudEZ1bmMgPSB2aWRlb0pzVkFTVDtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/videojs_5.vast.vpaid.js\n");

/***/ })

/******/ });